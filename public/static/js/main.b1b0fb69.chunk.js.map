{"version":3,"sources":["stores/intl.ts","components/variables.ts","components/Rn.ts","stores/Nav.ts","stores/authStore.ts","stores/RnAlert.ts","assets/icons.ts","stores/callStore.ts","stores/contactStore.ts","components/Layout.tsx","stores/accountStore.ts","utils/BackgroundTimer.ts","stores/chatStore.ts","api/uc.ts","components/RnTouchableOpacity.tsx","components/Field.tsx","utils/toMap.ts","utils/waitTimeout.ts","api/pbx.ts","components/ContactUserItem.tsx","utils/RnNativeModules.ts","polyfill/null.ts","api/sip.ts","stores/userStore.ts","components/RnText.tsx","stores/RnKeyboard.ts","stores/RnStacker.ts","stores/intlStore.ts","utils/animation.ts","stores/RnPicker.ts","utils/string.ts","utils/formatChatContent.ts","stores/debugStore.ts","utils/saveBlob.web.ts","stores/timerStore.tsx","components/chatConfig.ts","api/syncPnToken.ts","components/RnIcon.tsx","utils/useStore.ts","embed/embedApi.ts","stores/RnDropdown.tsx","stores/AuthSIP.ts","components/ButtonIcon.tsx","stores/sipErrorEmitter.ts","components/navigationConfig.ts","components/AccountCreateForm.tsx","utils/formatFileType.ts","components/AnimatedSize.tsx","components/navigationConfig2.ts","components/BrekekeGradient.tsx","components/Avatar.tsx","components/CallKeyPad.tsx","components/CallShowNumbers.tsx","stores/Call.ts","components/ContactSectionList.tsx","pages/PageContactEdit.tsx","utils/useForm.tsx","config.ts","utils/webPromptPermission.ts","utils/getAudioVideoPermission.ts","utils/webPlayDing.ts","api/parseParamsWithPrefix.ts","api/pnConfig.ts","components/FooterActions.tsx","components/FooterNavigation.tsx","utils/formatDuration.ts","utils/webShowNotification.ts","utils/trimHtml.ts","components/RnCheckbox.tsx","pages/PageCallParks.tsx","utils/callkeep.ts","utils/PushNotification-parse.ts","components/ChatMessageList.tsx","components/FooterChatInput.tsx","utils/pickFile.web.ts","components/ContactCreateForm.tsx","api/updatePhoneIndex.ts","stores/RnAppState.ts","utils/deeplink-parse.ts","utils/PushNotification.web.ts","stores/AuthPBX.ts","components/CallNotify.tsx","components/CallVoicesUI.web.tsx","components/VideoPlayer.web.tsx","index.ts","embed/polyfill.ts","utils/captureConsoleOutput.ts","polyfill/index.web.ts","polyfill/dev.web.ts","polyfill/shared.ts","polyfill/mobx.ts","utils/validator.ts","../node_modules/validatorjs/src/lang sync /^/.//.*$","stores/Nav2.ts","components/AudioPlayer.web.tsx","components/RnImageVideoLoader.web.tsx","components/RnStatusBar.tsx","components/RnSwitch.tsx","components/RnTextInput.tsx","pages/PageAccountCreate.tsx","utils/createStore.ts","components/PhonebookAutoComplete.tsx","assets/ding.mp3","components/Footer.tsx","utils/rnVibrate.ts","components/FooterToggleKeyboard.tsx","components/Header.tsx","components/HeaderBackBtn.tsx","components/HeaderCreateBtn.tsx","components/HeaderDropdown.tsx","components/HeaderNavigation.tsx","components/HeaderTitle.tsx","components/Toast.tsx","pages/PageAccountSignIn.tsx","components/AccountSignInItem.tsx","pages/PageAccountUpdate.tsx","pages/PageCallBackgrounds.tsx","assets/avatar-placeholder.png","pages/PageCallDtmfKeypad.tsx","stores/cancelRecentPn.ts","api/getCameraSourceId.ts","api/turnConfig.ts","pages/PageCallKeypad.tsx","pages/PageCallParks2.tsx","pages/PageCallRecents.tsx","utils/PushNotification.ios.ts","pages/PageCallTransferChooseUser.tsx","components/Dropdown.tsx","components/DropdownItem.tsx","pages/PageCallTransferDial.tsx","pages/PageChatDetail.tsx","components/ChatMessage.tsx","components/ItemImageVideoChat.tsx","utils/formatBytes.ts","pages/PageChatGroupCreate.tsx","pages/PageChatGroupDetail.tsx","pages/PageChatGroupInvite.tsx","pages/PageChatRecents.tsx","components/ChatListUsers.tsx","components/SelectionItem.tsx","components/ContactList.tsx","pages/PageContactGroupCreate.tsx","pages/PageContactGroupEdit.tsx","pages/PageContactPhonebook.tsx","pages/PageContactUsers.tsx","utils/DelayFlag.ts","pages/PagePhonebookCreate.tsx","pages/PagePhonebookUpdate.tsx","pages/PageSettingsCurrentAccount.tsx","pages/PageSettingsDebug.tsx","pages/PageSettingsOther.tsx","pages/PageWebChat.tsx","components/ChatListWebchats.tsx","components/WebchatItem.tsx","stores/callStore2.ts","stores/addCallHistory.ts","stores/authStore2.ts","utils/deeplink.web.ts","api/syncPnToken2.ts","components/App.web.tsx","assets/brand.png","assets/logo.png","components/App.tsx","api/index.ts","pages/PageCallManage.tsx","assets/incallmanager_ringback.mp3","assets/incallmanager_ringtone.mp3","components/FieldButton.tsx","components/SmartAvatarHTML.web.tsx","assets/no_photo.png","utils/checkImageURL.ts","pages/PageCallTransferAttend.tsx","stores/AuthUC.ts","stores/RnAlertRoot.tsx","stores/RnPickerRoot.tsx","stores/RnStackerRoot.tsx","utils/registerOnUnhandledError.web.ts","components/CallBar.tsx","components/CallVideos.tsx","components/CallVideosUI.tsx","components/CallVoices.tsx","components/ChatGroupInvite.tsx","components/PhonebookAddItem.tsx","embed/exposeEmbedApi.ts"],"names":["Handlebars","registerHelper","HandlebarsMoment","compileFn","locale","k","arr","labels","i","enLabelsMapIndex","fn","compile","undefined","intl0","data","intlStore","intlDebug","label","en","intl","v","fontSize","lineHeight","fontSizeTitle","lineHeightTitle","fontSizeSubTitle","lineHeightSubTitle","fontSizeSmall","lineHeightSmall","iconSize","fontWeight","fontFamily","Platform","OS","borderRadius","maxModalWidth","bg","revBg","darken","color","revColor","hoverBg","subColor","borderBg","layerBg","transparentize","layerBgVideo","boxShadow","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","backdropZindex","zIndex","colors","greyTextChat","primary","warning","danger","primaryFn","lv","lighten","warningFn","dangerFn","currentVersion","json","version","nav","n","authStore","s","reconnectAndWaitSip","reconnectSip","waitSip","wait","name","time","at","Date","now","id","BackgroundTimer","setInterval","enoughTimePassed","isConnected","clearInterval","Promise","r","RnAlertStore","alerts","observable","action","prompt","push","alertsCount","length","a","err","unexpectedErr","message","console","error","AppState","currentState","shift","RnAlert","callStore","c","contactStore","numberOfContactsPerPage","loadContacts","waitPbx","getAuthStore","pbxState","loading","pbx","getContacts","search_text","phonebookSearchTerm","offset","limit","then","setPhonebook","hasLoadmore","catch","getManagerContact","lang","window","Brekeke","Phonebook","getManager","getItemPhonebook","item","getManagerItemLang","getManageItems","items","map","disabled","startsWith","caption","keyboardType","type","maxLength","getPbxUsers","ca","getCurrentAccount","getUsers","pbxTenant","res","pbxUsers","filter","u","pbxUsername","setTalkerStatus","userId","talkerId","status","getPbxUserById","talkers","talker","find","t","pbxUsersMap","extraPbxUsersMap","extraPbxUsersLoadingMap","extraPbxUsersBatch","getExtraPbxUsersBatch","debounce","ids","getExtraUsers","forEach","updateUcUser","u0","getUcUserById","isEqual","Object","assign","ucUsers","ucUsersMap","getPhoneBookByPhoneNumber","phoneNumber","phoneBooks","p","info","$tel_mobile","$tel_home","$tel_work","getParkNameByParkNumber","parkNumber","cp","parks","park","parkNames","uniqBy","getPhonebookById","phoneBooksMap","clearStore","showPickerItem","pbxBooks","alreadyLoadContactsFirstTime","selectedContactIds","arrToMap","this","toString","values","picker","computed","getPhonebooks","p0","partyNumber","updatePartyNameRecentCall","partyName","display_name","Array","isArray","css","StyleSheet","create","Layout","flex","backgroundColor","Layout__transparent","Scroller","flexGrow","FooterSpaceInsideScroller","LoadMore","alignSelf","paddingBottom","paddingHorizontal","LoadMore__btn","LoadMore__finished","observer","originalProps","useState","headerOverflow","setHeaderOverflow","props","Container","noScroll","View","ScrollView","containerProps","entries","reduce","m","vk","replace","lowerFirst","style","transparent","contentContainerStyle","keyboardShouldPersistTaps","onScroll","e","nativeEvent","contentOffset","y","containerOnScroll","scrollEventThrottle","showsVerticalScrollIndicator","compact","headerSpace","menu","footerSpace","getBottomSpace","fabRender","RnKeyboard","isKeyboardShowing","fabOnNext","children","isShowToastMessage","Toast","isVisible","title","incomingMessage","containerStyles","marginTop","isTab","Footer","Header","resolveFn","storagePromise","resolve","AccountStore","waitStorageLoaded","genEmptyAccount","pbxHostname","pbxPort","pbxPassword","pbxPhoneIndex","pbxTurnEnabled","pushNotificationEnabled","ucEnabled","navIndex","navSubMenus","loadAccountsFromLocalStorage","RnAsyncStorage","getItem","d","JSON","parse","accountData","profileData","accounts","profiles","runInAction","saveAccountsToLocalStorage","setItem","stringify","_saveAccountsToLocalStorageDebounced","maxWait","saveAccountsToLocalStorageDebounced","accountStore","_","compareAccount","findByPn","to","tenant","findData","findDataSync","getAccountUniqueId","findDataByPn","findDataAsync","newD","accessToken","recentCalls","recentChats","pbxBuddyList","waitTimeout","updateAccountData","d2","pop","clonedA","SyncPnToken","sync","noUpsert","pushNotificationEnabledSynced","onError","h","compareField","p1","p2","field","v1","v2","getLastSignedInId","checkAutoSignInBrekekePhone","j","logoutPressed","compareSemVer","autoSignInBrekekePhone","BrekekeUtils","systemUptimeMs","uptime","saveLastSignedInId","BgTimer","FileEvent","onFileReceived","onFileProgress","onFileFinished","TIMEOUT_TRANSFER_VIDEO","ChatStore","timeoutTransferImage","getMessagesByThreadId","messagesByThreadId","getNumberWebchatNoti","groups","webchat","conf_status","Constants","CONF_STATUS_INVITED_WEBCHAT","pushChatNotification","body","threadId","FCM","presentLocalNotification","number","sound","priority","show_in_foreground","local_notification","wake_screen","ongoing","lights","channel","icon","pre_app_state","my_custom_data","is_local_notification","PushNotificationIOS","getApplicationIconBadgeNumber","badge","Number","addNotificationRequest","userInfo","aps","pushMessages","isUnread","isGroup","some","gr","isWebchatJoined","isWebchat","messages","sortBy","a2","filterTextOnly","updateThreadConfig","chatStore","getGroupById","getPartyName","getThreadConfig","messageNotification","text","webShowNotification","cs","getCallStore","isTalking","calls","answered","callkeepActionMap","RnStacker","stacks","shouldPlayChatNotificationSoundVibration","groupId","buddy","playChatNotificationSoundVibration","chatNotificationSoundRunning","rnVibrate","setTimeout","webPlayDing","removeWebchatItem","conf_id","removeGroup","threadConfig","download","f","save","upsertFile","saveBlobFile","topic_id","fileType","url","filesMap","startTimeout","clearTimeout","uc","rejectFile","updateTimeout","fromEvent","f0","state","fileTypeImageVideo","incoming","removeFile","getFileById","upsertGroup","g","g0","groupsMap","idMap","l1","as","getCurrentData","unread","keys","created","CONF_STATUS_JOINED","w","UCClient0","ChatClient","Logger","isUcBuddy","codeMapUserStatus","getUserStatusFromCode","code","codeMapFileState","getFileStateFromCode","UC","client","onConnectionStopped","ev","emit","onUserUpdated","user_id","avatar","profile_image_url","statusText","display","onTextReceived","sender","received_text_id","group","creator","sent_ltime","fileInfo","formatFileType","file","file_id","size","transferPercent","progress","text_id","target","onGroupInvited","conference","invite_properties","webchatfromguest","subject","user_name","inviter","from","members","user","onGroupUpdated","jointed","connect","ucHost","indexOf","ucScheme","endsWith","reject","signIn","disconnect","signOut","me","profile","getProfile","getStatus","saveProperties","screened","setStatus","num_status","changeStatus","buddyList","getBuddylist","buddyListFiltered","getConfigProperties","ucConfig","readUnreadChats","receiveUnreadText","readRequiredMessageIds","msg","requires_read","readText","getUnreadChats","getBuddyChats","opts","searchTexts","max","begin","end","asc","logs","l","log_id","content","ctype","ltime","getGroupChats","sendBuddyChatText","sendText","CTYPE_TEXT","sendCallResult","duration","talklen","CTYPE_CALL_RESULT","sendGroupChatText","sendConferenceText","createChatGroup","createConference","joinChatGroup","joinConference","getChatGroupInfo","getConference","answerWebchatConference","exclusive","joinWebchatConference","leaveChatConference","rejoinable","leaveConference","result","leaveChatGroup","inviteChatGroupMembers","inviteToConference","acceptFile","xhr","XMLHttpRequest","responseType","onload","acceptFileWithXhr","file_id_target","cancelFile","sendFile","inputw","document","createElement","files","b","DataTransfer","ClipboardEvent","clipboardData","add","appendChild","fd","FormData","append","inputrn","form","__rnFormData","chat","sendFiles","input","file_res","infoList","peekWebchatConferenceText","logger","setEventListeners","forcedSignOut","buddyStatusChanged","receivedTyping","receivedText","fileReceived","fileInfoChanged","fileTerminated","invitedToConference","conferenceMemberChanged","EventEmitter","RnTouchableOpacity","forwardRef","ref","TouchableOpacity","activeOpacity","Field","borderBottomWidth","borderColor","alignItems","marginHorizontal","select","android","Field__focusing","Field__disabled","Field__group","padding","Field__groupMargin","Field__transparent","Field_Label","paddingTop","paddingLeft","top","web","position","left","right","Field_LabelText","Field_LabelTextGroup","Field_ViewRow","flexDirection","marginRight","Field_Park_TextInput","paddingRight","overflow","default","Field_TextInput","Field_Switch","Field_Btn","Field_Btn__create","Field_Btn__remove","Field_Icon","Field_Error","justifyContent","Field_ErrorInner","marginVertical","paddingVertical","Field_ErrorIcon","Field_ErrorLabel","Loading","bottom","opacity","noop","hasMargin","RnText","small","$","useStore","isFocusing","isParkNameFocusing","inputRef","useRef","inputRefName","current","set","onCreateBtnPress","iconRender","onPress","createBtnStyle","RnIcon","path","createBtnIcon","mdiPlus","createBtnIconStyle","onRemoveBtnPress","removeBtnStyle","removeBtnIcon","mdiClose","removeBtnIconStyle","onValueChange","valueRender","RnSwitch","enabled","onTouchPress","value","Keyboard","dismiss","options","o","key","RnPicker","open","selectedKey","onSelect","mdiUnfoldMoreHorizontal","inputElement","RnTextInput","omit","placeholder","placeholderTextColor","onBlur","onChangeText","txt","newPark","trim","onChangeNumber","onFocus","onChangeName","renderPark","focus","flow","onSubmitEditing","pointerEvents","accessible","secureTextEntry","textInputStyle","absoluteFill","ActivityIndicator","mdiCardsDiamond","get","ki","PBX","connectTimeoutId","isMainInstance","palParamUserReconnect","log","warn","oldPalParamUser","palParams","wsUri","getPal","login_user","login_password","_wn","voicemail","secure_login_password","phonetype","callrecording","embedApi","_palParams","debugLevel","call_pal","method","params","Error","call","newTimeoutPromise","clearConnectTimeoutId","close","connected","pendingServerStatus","notify_serverstatus","pendingClose","onClose","pendingError","_BrekekePhoneWebRoot","login","race","pbxConfig","getConfig","newPalParamUser","onServerStatus","notify_park","onPark","notify_callrecording","onCallRecording","notify_voicemail","onVoicemail","notify_status","onUserStatus","talker_id","skipWait","webphone","config","getCurrentDataAsync","setPbxConfig","parseCallParams","parsePalParams","userAgent","pnExpires","createSIPAccessToken","sipUsername","username","pattern","property_names","extension","getPbxPropertiesForCurrentUser","pnumber","split","phones","userName","language","phonebook","contact","aid","shared","getContact","toBoolean","deleteContact","setContact","holdTalker","tid","unholdTalker","startRecordingTalker","stopRecordingTalker","transferTalkerBlind","toUser","mode","transferTalkerAttended","joinTalkerTransfer","stopTalkerTransfer","parkTalker","atNumber","sendDTMF","signal","pnmanage","pnmanageNew","command","service_id","device_id","device_id_voip","auth_secret","endpoint","isFcm","PnServiceId","fcm","application_id","fcmApplicationId","bundleIdentifier","voip","user_agent","navigator","add_voip","add_device_id_suffix","setWebPnToken","PnCommand","removeWebPnToken","remove","setFcmPnToken","removeFcmPnToken","setApnsToken","apns","removeApnsToken","Outer","Inner","Inner_selected","WithSpace","Text","NameWithStatus","flexWrap","Status","Detail","CallIcon","CallCreatedAt","ButtonIcon","LastDate","IconGroup","VGroup","CheckboxContainer","disableContainer","UserItem","icons","iconColors","iconFuncs","isRecentCall","isRecentChat","lastMessage","lastMessageDate","selected","canChat","isVoicemail","isSelection","isSelected","isGroupAvailable","groupStatus","CONF_STATUS_INACTIVE","CONF_STATUS_INVITED","Nav","goToPageChatGroupDetail","goToPageChatDetail","mdiAccountGroup","Avatar","source","uri","black","bold","singleLine","normal","trimHtml","mdiPhoneMissed","mdiPhoneIncoming","mdiPhoneOutgoing","onPressIcons","RnCheckBox","Polyfill","getInitialNotifications","isLocked","startRingtone","stopRingtone","backToBackground","getIncomingCallPendingUserAction","closeIncomingCall","closeAllIncomingCalls","setCallConfig","setIsAppActive","setTalkingAvatar","setJsCallsSize","setRecordingStatus","setIsVideoCall","setRemoteVideoStreamURL","setIsFrontCamera","setOnHold","setLocale","onCallConnected","onCallKeepAction","onPageCallManage","hasIncomingCallActivity","playRBT","stopRBT","enableLPC","disableLPC","M","NativeModules","__DEV__","join","alreadyRemovePnTokenViaSip","checkAndRemovePnTokenViaSip","exist","removePnTokenViaSip","callkeepUuid","onCallKeepEndCall","sipPn","sipAuth","isCall","phone","getWebrtcClient","dtmfSendPal","getUserAgent","startWebRTC","register","getWssUrl","sipWssPort","tls","phoneId","auth","useVideoClient","addEventListener","phoneStatus","started","_ua","registrator","_registered","setExtraHeaders","stopWebRTC","SIP","currentCamera","cameraIds","init","getCameraSourceIds","deviceId","_removeEventListenerPhoneStatusChange","removeEventListener","computeCallPatch","rtcSession","remote_identity","callConfig","getCallConfigFromHeader","getHeader","rawSession","sessionId","pnId","direction","remoteVideoEnabled","remoteWithVideo","localVideoEnabled","withVideo","sessionStatus","withSDP","patch","voiceStreamObject","remoteStreamObject","pbxRoomId","pbxTalkerId","partyImageUrl","partyImageSize","talkingImageUrl","earlyMedia","pbxSessionInfo","imageUrl","imageSize","infos","videoSession","getSession","videoClientSessionTable","videoClientSessionId","videoSessionId","remoteVideoStreamObject","callOptions","turnConfig","pcConfig","iceServers","setDefaultCallOptions","hostname","port","on","request","pnIds","parseCanceledPnIds","cancelRecentPn","hackJssipFork","socket","sip","_transport","__brekekephone_stopped","destroyWebRTC","hangupSession","session","terminate","disableMedia","getTracks","track","enableMedia","dtmfSendMode","_options","enableVideo","setWithVideo","disableVideo","setMuted","muted","main","switchCamera","isFrontCamera","cameras","videoOptions","mediaConstraints","sipCreateMediaConstraints","answer","test","match","index","parseInt","isNaN","substr","lowers","toLowerCase","includes","completedElseWhere","osMap","ios","au","os","host","sourceId","webVideoConfig","facingMode","exact","appVideoConfig","mandatory","minWidth","minHeight","minFrameRate","optional","audio","video","WebrtcClient","Phone","logLevel","multiSession","defaultOptions","ctiAutoAnswer","eventTalk","configuration","socketKeepAlive","fromEntries","kv","defaultBuddyMax","UserStore","filterUser","searchTxt","isOnline","displayUsers","totalContact","totalOnlineContact","dataDisplayGroupAllUser","dataAllUsers","saveSelectedUserIds","userOnline","dataAllUsersFiltered","dataOnlineUser","dataOnlineUserFiltered","getHeaderTitle","sectionTitle","renderData","isEditMode","selectedItemCount","isSelectedAddAllUser","selectedUserIds","indexGroup","dataGroupAllUser","findIndex","totalUser","totalOnline","resetCache","dataListAllUser","isAllUser","allUsers","disabledBuddy","block_settings","users","cloneDeep","isBigMode","pbxLocalAllUsers","isDisableAddAllUserToTheList","buddyMax","buddyMode","filterDataUserGroup","waitUc","userList","configProperties","getAllUsers","buddy_mode","user_group","optional_config","buddy_max","buddy_id","dataGroupUser","listAllUser","isDisableEditGroup","sectionData","sectionDataOther","sectionDataIds","sectionDataOtherIds","listDataUser","indx","sectionItm","listUserNotSelected","itm","upsertAccount","isSelectEditGroupingAndUserOrder","isCapacityInvalid","groupIndex","splice","groupName","selectedUsers","newGroupContact","unshift","removedUsers","selectedUserItems","userStore","subTitle","white","center","textAlign","wrap","Component","numberOfLines","pickBy","sort","AnimatedText","Animated","RnKeyboardStore","waitKeyboardTimeoutId","waitKeyboard","args","keyboardAnimatingTimeoutId","isKeyboardAnimating","addListener","setKeyboardAnimatingTimeout","RnStackerStore","createGoTo","isRoot","stack","inPageCallManage","stackAnimating","stack0","openStack","createBackTo","ja","localeOptions","TypedNativeModules","IntlStore","getLocaleName","getLocale","SettingsManager","settings","AppleLocale","AppleLanguages","I18nManager","localeIdentifier","localeLoading","selectLocale","loadingPromise","localeReady","animationOption","useAnimation","Value","useEffect","timing","toValue","useNativeDriver","start","stop","mapToMap","interpolate","inputRange","outputRange","didMount","setDidMount","RnPickerStore","currentRnPicker","formatChatContent","originalText","creatorId","additionals","isTextOnly","decode","store","RNFS","DocumentDirectoryPath","log1","log2","DebugStore","toggleCaptureDebugLog","captureDebugLog","getLogSize","logSizes","sum","logQueue","captureConsoleOutput","format","toUpperCase","padStart","writeFileBatch","writeFile","writeFileWithoutCatch","appendFile","stat","unlink","moveFile","openLogFile","openLogFileWithoutCatch","promises","exists","readFile","all","f1","b64","Buffer","Share","clearLogFiles","onConfirm","clearLogFilesWithoutPrompt","confirmText","clearLogFilesWithoutCatch","checkForUpdate","isCheckingForUpdate","fetch","results","remoteVersion","remoteVersionLastCheck","saveRemoteVersionToStorage","lastCheck","openInStore","Linking","openURL","autoCheckForUpdate","debugStore","getSemVer","aMajor","aMinor","aPatch","aFourth","bMajor","bMinor","bPatch","bFourth","blob","setAttribute","URL","createObjectURL","href","click","revokeObjectURL","dataBlob","fr","FileReader","onloadend","event","caches","cache","videoBlob","Blob","response","Response","urlCacheFile","put","onerror","readAsArrayBuffer","timerStore","updateNow","Duration","formatDuration","lastDate","groupByTime","groupByDate","date","formatDateSemantic","valueOf","createdByMe","d0","today","yesterday","str","m0","Icon","viewBox","Path","fill","mixin","createStore","EmbedApi","promptBrowserPermission","webPromptPermission","startCall","getRunningCalls","restart","signOutWithoutSaving","_signIn","cleanup","_rootTag","unmountComponentAtNode","clear_existing_account","accountsMap","convertToStorage","copyToStorage","firstAccountInOptions","auto_login","autoSignInEmbed","ea","password","phoneIndex","displayOfflineUsers","ucDisplayOfflineUsers","pushNotification","RnDropdownStore","itemHeight","headerHeight","sectionIndex","itemSize","hiddenIndexes2","hiddenIndexes","ii","positions2","positions","collapse","openedIndex","uniq","idx","shouldUpdatePosition","indexes","RnDropdown","getPbxConfig","AuthSIP","clearShouldAuthReaction","authWithCheck","reaction","sipShouldAuth","authWithCheckDebounced","authPnWithoutCatch","pn","CiruclarJSON","dispose","turnServer","urls","turnUsername","credential","turnCredential","sipAuthAt","sipState","signedInId","sipTotalFailure","authWithoutCatch","sipErrorEmitter","removeAllListeners","updatePhoneIndex","authSIP","ButtonIcon_Btn","borderWidth","ButtonIcon_Name","styleContainer","bgcolor","noborder","bdcolor","textcolor","genMenus","mdiAccountCircleOutline","subMenus","navFnKey","ucRequired","defaultSubMenuKey","mdiPhoneOutline","mdiCogOutline","subMenusMap","defaultSubMenu","navFn","saveNavigation","lastLocale","lastMenus","menus","normalizeSavedNavigation","AccountCreateForm","isWeb","account","updating","addingPark","resetAllFields","onAddingParkSubmit","onAddingParkRemove","i0","hasUnsavedChanges","onBackBtnPress","onBack","onValidSubmit","onSave","useForm","Form","submitForm","description","dropdown","footerLogout","isConnFailure","resetFailureStateIncludeUcLoginFromAnotherPlace","fabOnBack","subMenu","fields","rule","hidden","parkName","typeVideo","fileName","Getter","GetterInner","setSize","Animation","animateWidth","onLayout","layout","innerStyle","cssAnimation","useAnimationOnDidMount","PageCallTransferChooseUser","PageCallTransferDial","tab","subMenuNames","lastStack","BrekekeGradient","ImageOuter","Image","statusMapColor","online","idle","busy","offline","avatarPlaceholder","imgSource","RnImage","mdiRecord","KeyPad_Number","KeyPad_NumberTxt","KeyPad_NumberBtn","KeyPad_Btn","KeyPad_Btn__call","KeyPad_Btn__call_2","KeyPad_view","row","onPressNumber","showKeyboard","mdiKeyboard","callVoiceForward","mdiPhoneForward","callVoice","mdiPhone","mdiBackspace","ShowNumbers","ShowNumbers_DisplayTxt","ShowNumbers_BtnCall","blurOnSubmit","multiline","setTarget","onEndEditing","onSelectionChange","selectionChange","refInput","Call","getDisplayName","createdAt","getDuration","answeredAt","callkeepAlreadyAnswered","callkeepAlreadyRejected","answerCallKeep","updateCallKeep","RNCallKeep","setCurrentCallActive","startCallKeepCall","updateIncoming","answerIncomingCall","updateOutgoing","reportConnectedOutgoingCallWithUUID","isAboutToHangup","hangupWithUnhold","holding","toggleHold","success","toggleVideo","pbxUser","callerStatus","toggleHoldWithCheck","prevHoling","prevTransferring","transferBlind","goToPageCallRecents","onTransferFailure","onParkFailure","exInfo","ignoreNav","currentCallId","goToPageCallManage","setMutedCall","recording","onToggleRecordingFailure","hackyToggleSpeaker","onToggleHoldFailure","transferring","backToPageCallManage","onStopTransferringFailure","onConferenceTransferringFailure","IncallManager","setForceSpeakerphoneOn","isLoudSpeakerEnabled","conf","ms","container","headerSectionList","leftSection","editGroupIcon","containerDropdown","disableMarginTop","ContactSectionList","sectionHeaderRefs","reCalculatedLayoutDropdownTimeoutId","setShouldUpdatePosition","calculateSectionHeaderPosition","listDropdownPosition","measure","fx","fy","px","py","setPositions","setHeaderHeight","sectionListData","toJS","Fragment","SectionList","sections","keyExtractor","renderItem","section","RenderItemUser","isTransferCall","renderSectionHeader","RenderHeaderSection","TouchableWithoutFeedback","Dropdown","ddItems","getLastMessageChat","chats","getCurrentCall","setItemHeight","selectUserId","transferAttended","startVideoCall","mdiVideo","titleHeaderRender","isDisableMarginTop","toggleSection","mdiMenuRight","mdiMenuDown","toggle","mdiMoreHoriz","listHeaderSection","listTitleSection","rowGroupTitle","rowCapacity","errorText","loadingIcon","PageContactEdit","componentDidMount","loadUcBuddyList","loadPbxBuddyList","setState","getDDOptions","ddIndex","onAddRemoveUser","stopPropagation","onCheckAll","onUncheckAll","onRemoveGroup","goToPageContactGroupEdit","listItem","scrollToTopListContact","selectAllUserIdsByGroup","unselectAllUserIdsByGroup","removeSection","onSelectEditGroupingAndUserOrderOption","toggleIsSelectEditGroupingAndUserOrder","onAddGroup","goToPageContactGroupCreate","onGoBack","backToPageContactUsers","view","setViewRef","scrollTo","animated","saveUC","onSaveSuccess","onSaveFailure","savePBX","savePbxBuddyList","updateDisplayGroupList","fabOnNextText","containerRef","SelectionItem","toggleIsSelectedAddAllUser","mdiFolderPlus","ContactList","dirtyMap","errorMap","currentFocus","onFieldBlur","onFieldChange","validator","Validator","fails","errors","first","submit","$parent","rules","render","RnForm","formProps","onSubmit","PhonebookAutoComplete","onPressItem","alreadyPrompted","dismissText","getAudioVideoPermission","onDismiss","cb","stream","eb","getUserMedia","Audio","volume","src","ding","play","removeChild","parseParamsWithPrefix","prefix","Actions","Btn","Btn__back","Btn__more","Btn__next","Btn__15","Btn__33","Btn__67","Btn__100","onBackIcon","onMore","onMoreIcon","onNext","onNextColor","onNextText","mdiKeyboardBackspace","mdiCached","Navigation","BtnBg","BtnBg__active","UnreadOuter","Unread","UnreadText","active","totalUnreadChat","unreadCount","totalNoticesWebchat","totalNoticesContact","showUnreadChat","om","oh","Math","floor","tag","notification","WebNotification","showNotification","timeout","interval","renotify","noisiness","onclick","onclose","closeNotification","notificationId","CheckBoxBtn","CheckBox__selected","mdiCheck","PageCallParks","prevId","selectedPark","selectPark","callParks2","componentDidUpdate","sp","cp2","isDisable","parkNumbers","alreadySetupCallKeep","setupCallKeepWithCheck","getCalls","callkeepMap","setup","appName","imageName","supportsVideo","alertTitle","alertDescription","cancelButton","okButton","additionalPermissions","foregroundService","channelId","channelName","notificationTitle","notificationIcon","selfManaged","registerPhoneAccount","registerAndroidEvents","setAvailable","canMakeMultipleCalls","setupCallKeep","didLoadWithEvents","didLoadWithEventsHandlers","RNCallKeepPerformAnswerCallAction","answerCall","uuid","callUUID","onCallKeepAnswerCall","RNCallKeepPerformEndCallAction","endCall","setCalleeRejected","RNCallKeepDidDisplayIncomingCall","didDisplayIncomingCall","parseNotificationData","payload","signInByNotification","onCallKeepDidDisplayIncomingCall","RNCallKeepDidPerformSetMutedCallAction","didPerformSetMutedCallAction","toggleMuted","RNCallKeepDidToggleHoldAction","didToggleHoldCallAction","hold","RNCallKeepDidPerformDTMFAction","didPerformDTMFAction","digits","charAt","RNCallKeepDidActivateAudioSession","didActivateAudioSession","RNCallKeepDidDeactivateAudioSession","didDeactivateAudioSession","eventEmitter","NativeEventEmitter","goToPageCallTransferChooseUser","goToPageCallBackgrounds","goToPageCallParks2","toggleLoudSpeaker","toggleRecording","goToPageCallDtmfKeypad","toggleSwitchCamera","raw","signInByLocalNotification","goToPageChatRecents","onBackPressed","goToPageIndex","keysInCustomNotification","parseNotificationDataMultiple","image","updateCallAvatar","image_size","n2","isNoU","k2","autoAnswer","alert","r1","matches","exec","displayName","androidAlreadyProccessedPn","resetFailureState","isLocal","accountExist","Boolean","rawId","customPageIndex","callkeepAt","showIncomingCallUi","pnData","DateGroup","DateGroup__first","Border","TimeGroup","TimeGroup__first","Time","Creator","Right","MessageList","loadMore","resolveChat","list","groupByTimestamp","c0","creatorName","creatorAvatar","Message","ChatInput","Btn__file","borderRightWidth","borderTopWidth","Btn__emoji","Btn__send","Input","onEmojiTurnOn","onTextChange","onTextSubmit","openFileRnPicker","mdiPaperclip","mdiEmoticon","mdiSend","mdiDotsHorizontal","onchange","stylePreviewName","styleAddItem","labelAddItem","phonebookField","isFocus","ContactsCreateForm","updatingPhonebook","$lang","defaultObj","emptyObj","onscreen","genEmptyPhonebook","getFields","onSelectItem","dismissPicker","itemExist","newField","previewName","toDisplayName","openPicker","listOption","api","extProps","phoneTypeCorrect","expectedPhoneId","phoneIdCorrect","setExtensionProperties","properties","userExtensionProperties","goToPageAccountSignIn","RnAppState","nextAppState","foregroundOnce","location","Url","qs","hash","query","uint8ArrayToUrlBase64","btoa","String","fromCharCode","apply","Uint8Array","PushNotification","initApp","Notification","permission","requestPermission","getToken","serviceWorker","ready","sw","pushManager","getSubscription","subscribe","userVisibleOnly","sub","p256dh","getKey","resetBadgeNumber","authPBX","pbxShouldAuth","pbxTotalFailure","Notify","Notify_Info","Notify_Btn_reject","Notify_Btn_accept","DidMountTimer","didMountTimer","CallNotify","getCallInNotify","Wrapper","hasAction","configure","hideHangup","shouldRingInNotify","IncomingItem","autoPlay","loop","ringtone","ringback","OutgoingItemWithSDP","audioRef","createRef","srcObject","AnsweredItem","VideoPlayer","sourceObject","objectFit","AppRegistry","registerComponent","App","runApp","rootTag","runApplication","exposeEmbedApi","getElementById","_BrekekePhoneCaptureConsole","formatErrors","errs","msgs","CircularJSON","tpl","regex","mi","customConsoleObject","bind","defineProperty","Rn0","ViewPropTypes","propTypes","PropTypes","any","mediaDevices","mozGetUserMedia","process","JsSIP","CryptoJS","MD5","enforceActions","computedRequiresReaction","observableRequiresReaction","reactionRequiresObservable","disableErrorBoundaries","onReactionError","setMessages","required","useLang","webpackContext","req","webpackContextResolve","__webpack_require__","module","exports","Nav2","PageAccountSignIn","backToPageAccountSignIn","goToPageContactPhonebook","PageContactPhonebook","backToPageContactPhonebook","goToPageContactUsers","PageContactUsers","PageChatRecents","backToPageChatRecents","goToPageWebChat","PageWebChat","backToPageWebChat","goToPageCallKeypad","PageCallKeypad","backToPageCallKeypad","PageCallRecents","backToPageCallRecents","goToPageCallParks","backToPageCallParks","goToPageSettingsOther","PageSettingsOther","backToPageSettingsOther","goToPageSettingsCurrentAccount","PageSettingsCurrentAccount","backToPageSettingsCurrentAccount","goToPageAccountCreate","PageAccountCreate","backToPageAccountCreate","goToPageAccountUpdate","PageAccountUpdate","backToPageAccountUpdate","goToPagePhonebookCreate","PagePhonebookCreate","backToPagePhonebookCreate","goToPagePhonebookUpdate","PagePhonebookUpdate","backToPagePhonebookUpdate","isOutgoingCall","isFromCallBar","PageCallBackgrounds","backToPageCallBackgrounds","backToPageCallTransferChooseUser","goToPageCallTransferDial","backToPageCallTransferDial","PageCallParks2","backToPageCallParks2","PageCallDtmfKeypad","backToPageCallDtmfKeypad","PageChatDetail","backToPageChatDetail","goToPageChatGroupCreate","PageChatGroupCreate","backToPageChatGroupCreate","goToPageChatGroupInvite","PageChatGroupInvite","backToPageChatGroupInvite","PageChatGroupDetail","backToPageChatGroupDetail","goToPageSettingsDebug","PageSettingsDebug","backToPageSettingsDebug","goToPageContactEdit","backToPageContactEdit","PageContactGroupCreate","PageContactGroupEdit","setNav","AudioPlayer","loadingVideo","imageBroken","marginLeft","aspectRatio","objectURL","setObjectUrl","onShowImage","useCallback","write","outerHTML","readImage","urlImage","Request","blobFile","isLoading","isLoadFailed","isLoadSuccess","cssLoading","controls","playsInline","preserveAspectRatio","mdiImageBrokenVariant","RnStatusBar","getStatusBarHeight","RnStatusBar__warning","RnStatusBar__danger","StatusBar","barStyle","RnSwitch__enabled","Circle","Circle__enabled","TextInput","autoCapitalize","upsert","idKey","v0","extends","mx","ks","concat","extendObservable","txtPb","itemPb","borderBottomColor","autocompleteContainer","viewFlatList","Dimensions","maxHeight","isChoose","setChoose","loadPbxBoook","getData","Footer__noKeyboard","ActionsOuter","ActionsSpacing","ActionsInner","maxWidth","fabProps","ToggleKeyboard","FooterActions","Vibration","vibrate","marginBottom","onShowKeyboard","AnimatedSize","mdiKeyboardOffOutline","mdiKeyboardOutline","Outer__compact","Outer__transparent","Inner__hasBackBtn","onCreate","dropdownActive","setDropdownActive","Title","BackBtn","DropdownBtn","CreateBtn","cssInnerA","CreateBtn__white","Backdrop","Dropdown__compact","Item","Item__last","mdiDotsVertical","Btn__active","Text__active","ml","tabs","getTabs","getSubMenus","renderIconNotices","totalNotice","fcss","Description","cssContainerA","cssTitleA","textStyle","fadeAnim","validTitle","substring","setValue","PageAccountSignIn_ListServers","PageAccountSignIn_Spacing","Space","CornerButton","CornerButton__info","CornerButton__language","CornerButton_Inner","CornerButton_Inner__info","CornerButton_Inner__language","CornerButton_Icon","CornerButton_Icon__info","CornerButton_Icon__language","FlatList","horizontal","AccountSignInItem","last","showsHorizontalScrollIndicator","empty","mdiLadybug","AccountSignInItem__last","AccountSignInItem__empty","AccountSignInItem_Btns","pnSyncLoadingMap","mdiApplicationOutline","mdiWeb","mdiServerNetwork","removeAccount","endCallKeepAllCalls","currentCall","renderItemCall","isCurrentCall","mdiPhoneHangup","onSelectBackgroundCall","txtRef","txtSelection","sendKey","ShowNumber","selection","KeyPad","min","isDelete","onSipUaCancel","getCameraSourceId","isFront","enumerateDevices","kind","facing","videoInputs","frontCamera","backCamera","appStateSubscription","componentWillUnmount","isMatchUser","callSearchRecents","getAvatar","getMatchedCalls","filteredCalls","mdiMagnify","voipApnsToken","onVoipToken","apnsToken","onToken","onNotification","n0","withGetData","withCallKeepUuid","withDictionaryPayload","dictionaryPayload","Voip","RNVoipPushRemoteNotificationsRegisteredEvent","RNVoipPushRemoteNotificationReceivedEvent","registerVoipToken","requestPermissions","getInitialNotification","getVoipToken","setApplicationIconBadgeNumber","resolveMatch","ucUser","calling","ringing","talking","renderUserSelectionMode","txtSearch","renderAllUserMode","orderBy","isUserSelectionMode","setPageCallTransferChooseUser","DropdownItem","disableText","setPageCallTransferDial","loadingRecent","loadingMore","editingText","emojiTurnOn","blobVideo","numberOfChatsPerLoadMore","numberOfChatsPerLoad","edittingTextEmoji","editingTextReplace","renderChatInput","scrollToEnd","setEditingText","submitEditingText","pickFile","emojiSelectFunc","emoji","newText","justMounted","closeToBottom","currentScrollPosition","isLoadingMore","onContentSizeChange","newWidth","newHeight","layoutHeight","layoutMeasurement","contentHeight","contentSize","chatById","resolveCreator","loadRecent","oldestCreated","allMessagesLoaded","submitting","onSubmitEditingTextSuccess","onSubmitEditingTextFailure","onAcceptFileSuccess","onAcceptFileFailure","reader","readAsDataURL","saveBlob","onRejectFileFailure","handleSaveBlobFileWeb","buddyId","delete","listMessage","containerOnContentSizeChange","category","Categories","emotion","columns","onEmojiSelected","showHistory","showSearchBar","showSectionTitles","showTabs","File","Message__call","Message_File_Button_Wrapper","Message_File_Button","Message_File_Cancel_Button","Message_File_Accept_Button","Message_File_Preview_Wrapper","Message_File_Preview_Info","Message_File_Preview_Info_Size","Message_File_Preview_Status","Message_File_Preview_Status__Success","Message_File_Preview_Status__Failed","Link","mdiFile","accept","onLinkPress","canOpenURL","onLinkLongPress","onRnPickerSelect","onMessagePress","Clipboard","setString","isImage","TextContainer","onLongPress","linkStyle","ItemImageVideoChat","vMessage","textFileInfo","textFileInfoLineThrough","textDecorationLine","vHorizontal","displaySendTo","isStopped","isDisableCancel","styleText","formatBytes","mdiCloseCircle","RnImageVideoLoader","bytes","decimals","dm","sizes","parseFloat","pow","toFixed","setName","toggleBuddy","onCreateSuccess","onCreateFailure","resolveBuddy","updateConfStatus","isClose","newItem","leave","closes","invite","bVideoEnabled","callVoiceConference","callVideoConference","onSendFileSuccess","onSendFileFailure","isGroupChat","PageChatGroupInvite_TextInput","PageChatGroupInvite_Outer","PageChatGroupInvite_BtnSave","PageChatGroupInvite_BtnText","PageChatGroupInvite_GroupName","PageChatGroupInvite_Text","selectedBuddy","isNotMember","onInviteFailure","back","getLastChat","saveLastChatItem","arr2","handleGroupSelect","groupInfo","newList","webchatInactive","groupIds","threadIds","threadIdsOrderedByRecent","groupById","userById","recentFromStorage","recentGroups","recentUsers","x","arrMap","reverse","ListUsers","recents","onGroupSelect","onUserSelect","formatDateTimeSemantic","SelectionItem_Disabled","SelectionItem_Title","RenderItem","addGroup","selectUser","listItemRemoved","editGroup","update","loaded","loadContactDetail","ct","upsertPhonebook","callRequest","onIcon0","numbers","mdiBriefcase","mdiCellphone","mdiHome","updateSearchText","updateListPhoneBook","onDelete","isEmpty","succeeded","removeContacts","onCancel","isDeleteState","loadContactsFirstTime","phonebooks","optionDelete","selectContactId","mdiInformation","loadMoreContacts","DelayFlag","resolveUser","pbxUserName","ucUserName","usersSearchTerm","getDescription","isShowOfflineUser","desc","getMatchUserIds","onlineUsers","setEnabled","timeoutId","val","contactUpdate","BtnIcon","transform","rotate","isUpdateAvailable","round","setStatusText","submitStatusText","submitStatus","mdiTranslate","ListWebchats","datas","WebchatItem","Row","Column","BtnText","TextMessage","bgUnread","isEnabledAnswer","isEnabledJoin","isDisplayClose","isDisplayShow","textDisplay","slice","answerPress","showPress","joinPress","closePress","created_tstamp","assigned","webchatinfo","profinfo_formatted","CallStore","recentCallActivityAt","getCallKeep","getPnIdFromUuid","includingOutgoing","includingAnswered","includingRejected","updateCurrentCallDebounce","curr","getOriginalUserImageUrl","incallManagerStarted","onCallUpsert","upsertCall","startCallIntervalAt","startCallIntervalId","clearStartCallIntervalTimer","sipConnectingOrFailure","reconnectCalled","sipCreateSession","makeCall","setAutoEndCallKeepTimer","prevIds","diff","endCallKeep","updateBackgroundCalls","updateBackgroundCallsDebounce","updateCurrentCall","getUuidFromPnId","incomingPnData","getSetUuidPnId","autoEndCallKeepTimerId","clearAutoEndCallKeepTimer","endAllCalls","alreadyShowIncomingCallUi","isCallRejected","setCallKeepAction","getCallKeepAction","calleeRejectedMap","backToForeground","rejected","expired","count","getSessionCount","withSDPControls","toURL","callkeepAction","addCallHistory","ucState","s0","setAction","rejectCall","reportEndCallWithUUID","CONSTANTS","END_CALL_REASONS","REMOTE_ENDED","newVoicemailCount","setCallStore","alreadyAddHistoryMap","isTypeCall","presentNotification","pushRecentCall","AuthStore","hasInternetConnected","pbxConnectingOrFailure","ucShouldAuth","ucLoginFromAnotherPlace","isSignInByNotification","ucTotalFailure","ucConnectingOrFailure","autoSignIn","resetState","fragment","handleUrlParams","getUrlParams","urlParams","phone_idx","phoneIdx","newP","clearSignInByNotification","setAuthStore","alreadyHandleFirstOpen","syncPnTokenWithoutCatch","pnEnabled","disconnectPbx","webPhone","tvoip","newParams","lpcPort","tlsKeyHash","lpcEnabled","remoteSsids","getLocalSsid","localSsid","lpcPn","lpc","syncPnToken","syncForAllAccounts","setSyncPnTokenModule","getCurrentWifiSSID","requestAnimationFrame","createTextNode","head","getElementsByTagName","WebApp","WebApp_Logo","WebApp_Brand","WebApp_Btn","WebApp_Btn__app","WebApp_Btn__browser","WebApp_BtnTxt__browser","WebApp_Icon","isIOS","isAndroid","isBrowser","setIsBrowser","child","q","appUrl","logo","brand","mdiApple","mdiAndroid","pnToken","hasCallOrWakeFromPN","checkHasCallOrWakeFromPN","autoLogin","registerOnUnhandledError","NetInfo","authUC","onAuthUpdate","observe","alreadyInitApp","appInitDone","App_Inner","App_ConnectionStatus","App_ConnectionStatus__failure","App_ConnectionStatusInner","App_ConnectionStatusIncreaseTouchSize","LoadingFullscreen","absoluteFillObject","SplashScreen","hide","serviceConnectingOrFailure","isFailure","connMessage","CallBar","CallVideos","CallVoices","ChatGroupInvite","UnreadChatNoti","RnStackerRoot","RenderAllCalls","RnPickerRoot","PhonebookAddItem","RnAlertRoot","onPBXConnectionStopped","onPBXConnectionTimeout","onPBXUserCalling","onPBXUserRinging","onPBXUserTalking","onPBXUserHolding","onPBXUserHanging","onVoiceMailUpdated","setNewVoicemailCount","new","onPBXUserParkStarted","addParkNumber","onPBXUserParkStopped","removeParkNumber","onPbxCallRecording","updateRecordingStatus","onSIPConnectionStopped","reason","onSIPConnectionTimeout","onSIPSessionStarted","onSIPSessionUpdated","onSIPSessionStopped","onCallRemove","onUCConnectionStopped","onUCConnectionTimeout","onUCUserUpdated","updateStatusBuddy","onBuddyChatCreated","onGroupChatCreated","onChatGroupInvited","onChatGroupUpdated","onChatGroupRevoked","onPBXConnectionStarted","onSIPConnectionStarted","BtnSwitchCamera","cameraStyle","Video","Video_Space","Btns","BtnFuncCalls","Btns_Hidden","Btns_Inner","Btns_Space","Btns_VerticalMargin","Hangup","Hangup_incoming","Hangup_answer","Hangup_incomingText","Hangup_incomingText_avoidLargeImg","labelStyle","Image_wrapper","ImageSize","ImageLargeSize","styleTextBottom","Hangup_avoidAvatar","Hangup_avoidAvatar_Large","LoadingFullScreen","viewHangupBtns","viewHangupBtn","txtHold","smallAvatar","vContainer","vContainerVideo","prevCallsLength","PageCallManage","alreadySetShowButtonsInVideoCall","checkJavaPn","hasJavaPn","openJavaPnOnVisible","onAppStateChange","isBtnHidden","renderLayout","showButtonsInVideoCall","toggleButtons","renderCall","renderTransferring","PageCallTransferAttend","renderVideo","renderAvatar","renderBtns","renderHangupBtn","mdiCameraFrontVariant","mdiCameraRearVariant","isLarge","isShowAvatar","styleBigAvatar","styleViewAvatar","SmartImage","activeColor","isHideButtons","FieldButton","mdiCallSplit","mdiAlphaPCircle","mdiVideoOff","mdiVolumeHigh","mdiVolumeMedium","mdiMicrophoneOff","mdiMicrophone","mdiRecordCircle","mdiDialpad","mdiPlayCircle","mdiPauseCircle","isHangupBtnHidden","IncomingItemWithTimer","hideButtonsIfVideo","CreateBtnIcon","noPhotoImg","noPhoto","imageError","full","statusImageLoading","setStatusImageLoading","isImageUrl","checkImageUrl","onLoad","resizeMode","frameBorder","pathname","Inner__info","Info","Info__from","Info__to","Arrow","BtnOuter","Btn__stop","Btn__hangup","Btn__conference","usersource","usertarget","mdiArrowRight","stopTransferring","mdiPhoneOff","conferenceTransferring","UCClient","loadUnreadChats","onLoadUnreadChatsSuccess","onLoadUnreadChatsFailure","off","loadUsers","Errors","PLEONASTIC_LOGIN","RootRnAlert","RootRnAlert_Backdrop","RootRnAlert_Modal","RootRnAlert_Message","RootRnAlert_Err","RootRnAlert_ErrTxt","RootRnAlert_ErrTxt__title","RootRnAlert_Btns","RootRnAlert_Btn","RootRnAlert_Btn__cancel","RootRnAlert_BtnTxt","RnAlertR","translateY","rest","errMessage","a0","RnPicker_Backdrop","RnPicker_Inner","RnPicker_Options","RnPicker_Option","RnPicker_Option__last","RnPicker_Option__selected","RnPicker_Option__cancel","RnPicker_Text__selected","RnPicker_Text__cancel","RnPicker_Icon","RnPickerR","backdropCss","mdiRadioboxMarked","mdiRadioboxBlank","cancelLabel","Stack","Stack__hidden","translateX","OuterComponent","isBackgroundStack","CallBar_Outer","CallBar_Icon","CallBar_Info","CallBar_BtnCall","Notify_Info_PartyName","mdiPhoneInTalkOutline","mdiPhoneOutgoingOutline","mdiPlay","mdiPause","resolveCall","CallVideosUI","callIds","Mini","panResponder","lastTap","onDrag","gesture","setNativeProps","videoPositionL","dx","videoPositionT","dy","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","onPanResponderMove","onPanResponderRelease","onDrop","onPanResponderTerminate","panHandlers","onDoubleTap","Control","isOutgoingCallStart","OutgoingItem","VideoRBT","isLoudSpeaker","NotifyUnread","NotifyUnreadBtn","formatGroup","onRejectSuccess","onRejectFailure","onAcceptSuccess","onAcceptFailure","alreadyShowNoti","prevLastMessageId","prevUnreadChatTimeoutId","updateLatestUnreadChat","unreadChat","unreadChats","latestUnreadChat","clear","onUnreadPress","vBottom","RnPicker_Option__OK","RnPicker_Text__Ok","inputFieldName","RNPickerInput","updateItems","updateValue","autoFocus","keyboardDismissMode","renderApp"],"mappings":"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","file":"static/js/main.b1b0fb69.chunk.js","sourcesContent":["import Handlebars from 'handlebars/dist/handlebars'\nimport HandlebarsMoment from 'helper-moment'\n\nimport { enLabelsMapIndex, intlStore, labels } from './intlStore'\n\nHandlebars.registerHelper('moment', HandlebarsMoment)\n\ntype CompileFn = (data: unknown) => string\n\nconst compileFn = (locale: string, k: string): CompileFn => {\n  const arr = labels[locale as 'en']\n  const i = enLabelsMapIndex[k as keyof typeof enLabelsMapIndex]\n  let fn = arr[i] as any as CompileFn\n  if (!fn || typeof fn !== 'function') {\n    fn = Handlebars.compile(fn || k)\n  }\n  if (i !== undefined) {\n    arr[i] = fn as any as string\n  }\n  return fn\n}\n\nconst intl0 = (k: string, data: unknown) => compileFn(intlStore.locale, k)(data)\nconst intlDebug0 = (k: string, data: unknown) => ({\n  label: intl0(k, data),\n  en: compileFn('en', k)(data),\n})\n\nexport interface IntlDebug {\n  label: string\n  en: string\n}\nexport const intlDebug = intlDebug0 as any as (\n  template: TemplateStringsArray,\n  ...substitutions: any[]\n) => IntlDebug\n\nexport const intl = intl0 as any as (\n  template: TemplateStringsArray,\n  ...substitutions: any[]\n) => string\n","import * as fn from 'polished'\nimport { Platform } from 'react-native'\n\nimport json from '../../package.json'\n\nexport const v = {\n  fn,\n  //\n  fontSize: 14,\n  lineHeight: 20,\n  get fontSizeTitle() {\n    return 1.8 * v.fontSize\n  },\n  get lineHeightTitle() {\n    return 1.8 * v.lineHeight\n  },\n  get fontSizeSubTitle() {\n    return 1.2 * v.fontSize\n  },\n  get lineHeightSubTitle() {\n    return 1.2 * v.lineHeight\n  },\n  get fontSizeSmall() {\n    return 0.8 * v.fontSize\n  },\n  get lineHeightSmall() {\n    return 0.8 * v.lineHeight\n  },\n  iconSize: 24,\n  fontWeight: 'normal' as 'normal',\n  fontFamily:\n    Platform.OS === 'web'\n      ? \"'-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'\"\n      : undefined,\n  //\n  borderRadius: 3,\n  maxModalWidth: 380,\n  //\n  bg: 'white',\n  revBg: fn.darken(0.9, 'white'),\n  color: 'black',\n  revColor: 'white',\n  hoverBg: fn.darken(0.05, 'white'),\n  subColor: fn.darken(0.75, 'white'),\n  borderBg: fn.darken(0.15, 'white'),\n  layerBg: fn.transparentize(0.2, 'black'),\n  layerBgVideo: '#00000080',\n  //\n  boxShadow: {\n    shadowColor: 'black',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 2,\n    elevation: 3, // android\n  },\n  //\n  backdropZindex: {\n    zIndex: 999,\n    elevation: 999,\n  },\n  colors: {\n    //\n    greyTextChat: '#9e9e9e',\n    primary: '#609B3A',\n    warning: '#F1AF20',\n    danger: '#DC0F39',\n    primaryFn: (lv: number) =>\n      lv > 0\n        ? fn.lighten(lv, v.colors.primary)\n        : fn.darken(-lv, v.colors.primary),\n    warningFn: (lv: number) =>\n      lv > 0\n        ? fn.lighten(lv, v.colors.warning)\n        : fn.darken(-lv, v.colors.warning),\n    dangerFn: (lv: number) =>\n      lv > 0\n        ? fn.lighten(lv, v.colors.danger)\n        : fn.darken(-lv, v.colors.danger),\n  },\n}\n\nexport const currentVersion = json.version\n","import AsyncStorage from '@react-native-async-storage/async-storage'\nimport Image from 'react-native-fast-image'\n\nimport { AudioPlayer } from './AudioPlayer'\nimport { RnIcon } from './RnIcon'\nimport { RnImageVideoLoader } from './RnImageVideoLoader'\nimport { RnStatusBar } from './RnStatusBar'\nimport { RnSwitch } from './RnSwitch'\nimport { RnText } from './RnText'\nimport { RnTextInput } from './RnTextInput'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\nexport {\n  AudioPlayer,\n  AsyncStorage as RnAsyncStorage,\n  RnIcon,\n  Image as RnImage,\n  RnImageVideoLoader,\n  RnStatusBar,\n  RnSwitch,\n  RnText,\n  RnTextInput,\n  RnTouchableOpacity,\n}\n","import { Nav2 } from './Nav2'\n\n// Fix ciruclar dependencies\nlet nav: Nav2\nexport const setNav = (n: Nav2) => {\n  nav = n\n}\nexport const Nav = () => nav\n","import { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { AuthStore } from './authStore2'\n\n// circular dep\nlet authStore: AuthStore\nexport const setAuthStore = (s: AuthStore) => {\n  authStore = s\n}\nexport const getAuthStore = () => authStore\n\nexport const reconnectAndWaitSip = async () => {\n  authStore.reconnectSip()\n  await waitSip()\n}\n\nconst wait = (\n  fn: Function,\n  name: 'pbxState' | 'sipState' | 'ucState',\n  time = 10000,\n) => {\n  const at = Date.now()\n  if (authStore[name] === 'success') {\n    fn(true)\n    return\n  }\n  const id = BackgroundTimer.setInterval(() => {\n    const enoughTimePassed = Date.now() - at > time\n    const isConnected = authStore[name] === 'success'\n    if (enoughTimePassed || isConnected) {\n      BackgroundTimer.clearInterval(id)\n      fn(isConnected)\n    }\n  }, 500)\n}\n\nexport const waitPbx = (time?: number) =>\n  new Promise(r => wait(r, 'pbxState', time))\nexport const waitSip = (time?: number) =>\n  new Promise(r => wait(r, 'sipState', time))\nexport const waitUc = (time?: number) =>\n  new Promise(r => wait(r, 'ucState', time))\n","import { action, observable } from 'mobx'\nimport { ReactElement } from 'react'\nimport { AppState } from 'react-native'\n\nimport { IntlDebug } from './intl'\n\ntype CommonRnAlertFields = {\n  confirmText?: string | boolean\n  dismissText?: string | boolean\n}\n\nexport type PromptRnAlert = CommonRnAlertFields & {\n  title: string | ReactElement\n  message: string | ReactElement\n  onConfirm?: Function\n  onDismiss?: Function\n}\nexport type ErrorRnAlert = CommonRnAlertFields & {\n  message?: IntlDebug\n  err?: Error\n  unexpectedErr?: Error\n}\nexport type ErrorRnAlert2 = Omit<ErrorRnAlert, 'message'> & {\n  message?: string\n}\n\nexport type TRnAlert =\n  | {\n      prompt: PromptRnAlert\n    }\n  | {\n      error: ErrorRnAlert2\n    }\n\nexport class RnAlertStore {\n  // Need to put `alerts` out of the observable\n  //  because ReactElement can not stay in the mobx state\n  @observable alertsCount = 0\n  alerts: TRnAlert[] = []\n\n  @action prompt = (prompt: PromptRnAlert) => {\n    this.alerts.push({ prompt })\n    this.alertsCount = this.alerts.length\n  }\n  @action error = (a: ErrorRnAlert) => {\n    // Log error to save it to the debug log\n    // Convert error message to string if it was constructed using intlDebug\n    const err = a.unexpectedErr || a.err\n    const en = a.message?.en\n    if (err) {\n      console.error(...(en ? [en, err] : [err]))\n    }\n    if (AppState.currentState === 'active') {\n      this.alerts.push({\n        error: {\n          ...a,\n          message: a.message?.label,\n        },\n      })\n      this.alertsCount = this.alerts.length\n    }\n  }\n  @action dismiss = () => {\n    this.alerts.shift()\n    this.alertsCount = this.alerts.length\n  }\n}\n\nexport const RnAlert = new RnAlertStore()\n","// Material Design Icons v6.5.95\n// App.web, AccountSignInItem\nexport var mdiWeb =\n  'M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\n\n// App.web\nexport var mdiAndroid =\n  'M16.61 15.15C16.15 15.15 15.77 14.78 15.77 14.32S16.15 13.5 16.61 13.5H16.61C17.07 13.5 17.45 13.86 17.45 14.32C17.45 14.78 17.07 15.15 16.61 15.15M7.41 15.15C6.95 15.15 6.57 14.78 6.57 14.32C6.57 13.86 6.95 13.5 7.41 13.5H7.41C7.87 13.5 8.24 13.86 8.24 14.32C8.24 14.78 7.87 15.15 7.41 15.15M16.91 10.14L18.58 7.26C18.67 7.09 18.61 6.88 18.45 6.79C18.28 6.69 18.07 6.75 18 6.92L16.29 9.83C14.95 9.22 13.5 8.9 12 8.91C10.47 8.91 9 9.24 7.73 9.82L6.04 6.91C5.95 6.74 5.74 6.68 5.57 6.78C5.4 6.87 5.35 7.08 5.44 7.25L7.1 10.13C4.25 11.69 2.29 14.58 2 18H22C21.72 14.59 19.77 11.7 16.91 10.14H16.91Z'\nexport var mdiApple =\n  'M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z'\n\n// Avatar, PageCallManage\nexport var mdiRecord =\n  'M19,12C19,15.86 15.86,19 12,19C8.14,19 5,15.86 5,12C5,8.14 8.14,5 12,5C15.86,5 19,8.14 19,12Z'\n\n// CallBar, PageCallManage\nexport var mdiMicrophone =\n  'M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z'\nexport var mdiMicrophoneOff =\n  'M19,11C19,12.19 18.66,13.3 18.1,14.28L16.87,13.05C17.14,12.43 17.3,11.74 17.3,11H19M15,11.16L9,5.18V5A3,3 0 0,1 12,2A3,3 0 0,1 15,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27 13.91,17.58 13,17.72V21H11V17.72C7.72,17.23 5,14.41 5,11H6.7C6.7,14 9.24,16.1 12,16.1C12.81,16.1 13.6,15.91 14.31,15.58L12.65,13.92L12,14A3,3 0 0,1 9,11V10.28L3,4.27L4.27,3Z'\n\n// CallBar\nexport var mdiPause = 'M14,19H18V5H14M6,19H10V5H6V19Z'\nexport var mdiPhoneInTalkOutline =\n  'M20 15.5C18.8 15.5 17.5 15.3 16.4 14.9H16.1C15.8 14.9 15.6 15 15.4 15.2L13.2 17.4C10.4 15.9 8 13.6 6.6 10.8L8.8 8.6C9.1 8.3 9.2 7.9 9 7.6C8.7 6.5 8.5 5.2 8.5 4C8.5 3.5 8 3 7.5 3H4C3.5 3 3 3.5 3 4C3 13.4 10.6 21 20 21C20.5 21 21 20.5 21 20V16.5C21 16 20.5 15.5 20 15.5M5 5H6.5C6.6 5.9 6.8 6.8 7 7.6L5.8 8.8C5.4 7.6 5.1 6.3 5 5M19 19C17.7 18.9 16.4 18.6 15.2 18.2L16.4 17C17.2 17.2 18.1 17.4 19 17.4V19M15 12H17A5 5 0 0 0 12 7V9A3 3 0 0 1 15 12M19 12H21C21 7 16.97 3 12 3V5C15.86 5 19 8.13 19 12Z'\nexport var mdiPhoneOutgoingOutline =\n  'M20 15.5C18.8 15.5 17.5 15.3 16.4 14.9H16.1C15.8 14.9 15.6 15 15.4 15.2L13.2 17.4C10.4 15.9 8 13.6 6.6 10.8L8.8 8.6C9.1 8.3 9.2 7.9 9 7.6C8.7 6.5 8.5 5.2 8.5 4C8.5 3.5 8 3 7.5 3H4C3.5 3 3 3.5 3 4C3 13.4 10.6 21 20 21C20.5 21 21 20.5 21 20V16.5C21 16 20.5 15.5 20 15.5M5 5H6.5C6.6 5.9 6.8 6.8 7 7.6L5.8 8.8C5.4 7.6 5.1 6.3 5 5M19 19C17.7 18.9 16.4 18.6 15.2 18.2L16.4 17C17.2 17.2 18.1 17.4 19 17.4V19M15 3V4.5H18.5L13 10L14 11L19.5 5.5V9H21V3H15Z'\nexport var mdiPlay = 'M8,5.14V19.14L19,12.14L8,5.14Z'\n\n// CallBar, PageCallManage\nexport var mdiVolumeHigh =\n  'M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z'\nexport var mdiVolumeMedium =\n  'M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z'\n\n// CallBar, PageCallBackgrounds, PageCallManage, PageCallTransferAttend\nexport var mdiPhoneHangup =\n  'M12,9C10.4,9 8.85,9.25 7.4,9.72V12.82C7.4,13.22 7.17,13.56 6.84,13.72C5.86,14.21 4.97,14.84 4.17,15.57C4,15.75 3.75,15.86 3.5,15.86C3.2,15.86 2.95,15.74 2.77,15.56L0.29,13.08C0.11,12.9 0,12.65 0,12.38C0,12.1 0.11,11.85 0.29,11.67C3.34,8.77 7.46,7 12,7C16.54,7 20.66,8.77 23.71,11.67C23.89,11.85 24,12.1 24,12.38C24,12.65 23.89,12.9 23.71,13.08L21.23,15.56C21.05,15.74 20.8,15.86 20.5,15.86C20.25,15.86 20,15.75 19.82,15.57C19.03,14.84 18.14,14.21 17.16,13.72C16.83,13.56 16.6,13.22 16.6,12.82V9.72C15.15,9.25 13.6,9 12,9Z'\n\n// CallKeyPad\nexport var mdiBackspace =\n  'M22,3H7C6.31,3 5.77,3.35 5.41,3.88L0,12L5.41,20.11C5.77,20.64 6.31,21 7,21H22A2,2 0 0,0 24,19V5A2,2 0 0,0 22,3M19,15.59L17.59,17L14,13.41L10.41,17L9,15.59L12.59,12L9,8.41L10.41,7L14,10.59L17.59,7L19,8.41L15.41,12'\nexport var mdiKeyboard =\n  'M19,10H17V8H19M19,13H17V11H19M16,10H14V8H16M16,13H14V11H16M16,17H8V15H16M7,10H5V8H7M7,13H5V11H7M8,11H10V13H8M8,8H10V10H8M11,11H13V13H11M11,8H13V10H11M20,5H4C2.89,5 2,5.89 2,7V17A2,2 0 0,0 4,19H20A2,2 0 0,0 22,17V7C22,5.89 21.1,5 20,5Z'\n\n// CallKeyPad, PageCallTransferAttend, PageCallTransferChooseUser\nexport var mdiPhoneForward =\n  'M20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.18L13.21,17.38C10.38,15.94 8.06,13.62 6.62,10.79L8.82,8.59C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5M18,11L23,6L18,1V4H14V8H18V11Z'\n\n// CallKeyPad, PageCallBackgrounds, PageCallManage, PageCallRecents, PageCallTransferChooseUser, PageContactPhonebook, PageContactUsers\nexport var mdiPhone =\n  'M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z'\n\n// CallNotify, ChatGroupInvite, PageSettingsOther\nexport var mdiCheck = 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z'\n\n// CallNotify, ChatGroupInvite, Field, AccountSignInItem, WebchatItem, PageSettingDebug, RnPickerRoot\nexport var mdiClose =\n  'M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'\n\n// ChatMessage, AccountSignInItem, PageAccountSignIn, pickFile.web\nexport var mdiDotsHorizontal =\n  'M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z'\n\n// ChatMessage\nexport var mdiFile =\n  'M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z'\n\n// ContactUserItem\nexport var mdiAccountGroup =\n  'M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z'\nexport var mdiPhoneIncoming =\n  'M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M19,11V9.5H15.5L21,4L20,3L14.5,8.5V5H13V11H19Z'\nexport var mdiPhoneMissed =\n  'M23.71,16.67C20.66,13.77 16.54,12 12,12C7.46,12 3.34,13.77 0.29,16.67C0.11,16.85 0,17.1 0,17.38C0,17.65 0.11,17.9 0.29,18.08L2.77,20.56C2.95,20.74 3.2,20.86 3.5,20.86C3.75,20.86 4,20.75 4.18,20.57C4.97,19.83 5.86,19.21 6.84,18.72C7.17,18.56 7.4,18.22 7.4,17.82V14.72C8.85,14.25 10.39,14 12,14C13.6,14 15.15,14.25 16.6,14.72V17.82C16.6,18.22 16.83,18.56 17.16,18.72C18.14,19.21 19.03,19.83 19.82,20.57C20,20.75 20.25,20.86 20.5,20.86C20.8,20.86 21.05,20.74 21.23,20.56L23.71,18.08C23.89,17.9 24,17.65 24,17.38C24,17.1 23.89,16.85 23.71,16.67M6.5,5.5L12,11L19,4L18,3L12,9L7.5,4.5H11V3H5V9H6.5V5.5Z'\nexport var mdiPhoneOutgoing =\n  'M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M15,3V4.5H18.5L13,10L14,11L19.5,5.5V9H21V3H15Z'\n\n// Field, HeaderCreateBtn\nexport var mdiPlus = 'M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'\n\n// Field\nexport var mdiCardsDiamond = 'M19,12L12,22L5,12L12,2'\n\n// Field, PageAccountSignIn\nexport var mdiUnfoldMoreHorizontal =\n  'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z'\n\n// FieldButton, FooterActions, HeaderBackBtn\nexport var mdiKeyboardBackspace =\n  'M21,11H6.83L10.41,7.41L9,6L3,12L9,18L10.41,16.58L6.83,13H21V11Z'\n\n// FooterActions\nexport var mdiCached =\n  'M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12'\n\n// FooterChatInput\nexport var mdiEmoticon =\n  'M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M15.5,8A1.5,1.5 0 0,1 17,9.5A1.5,1.5 0 0,1 15.5,11A1.5,1.5 0 0,1 14,9.5A1.5,1.5 0 0,1 15.5,8M8.5,8A1.5,1.5 0 0,1 10,9.5A1.5,1.5 0 0,1 8.5,11A1.5,1.5 0 0,1 7,9.5A1.5,1.5 0 0,1 8.5,8M12,17.5C9.67,17.5 7.69,16.04 6.89,14H17.11C16.3,16.04 14.33,17.5 12,17.5Z'\nexport var mdiPaperclip =\n  'M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z'\nexport var mdiSend = 'M2,21L23,12L2,3V10L17,12L2,14V21Z'\n\n// FooterToggleKeyboard\nexport var mdiKeyboardOffOutline =\n  'M1,4.27L2.47,5.74C2.18,6.08 2,6.5 2,7V17A2,2 0 0,0 4,19H15.73L18.73,22L20,20.72L2.28,3L1,4.27M4,17V7.27L5,8.27V10H6.73L8,11.27V13H9.73L10.73,14H8V16H12.73L13.73,17H4M5,11H7V13H5V11M17,11H19V13H17V11M19,10H17V8H19V10M14,11H16V13H14.83L14,12.17V11M13,10H11.83L11,9.17V8H13V10M22,7V17C22,17.86 21.45,18.58 20.7,18.87L18.83,17H20V7H8.83L6.83,5H20A2,2 0 0,1 22,7M16,10H14V8H16V10Z'\nexport var mdiKeyboardOutline =\n  'M4,5A2,2 0 0,0 2,7V17A2,2 0 0,0 4,19H20A2,2 0 0,0 22,17V7A2,2 0 0,0 20,5H4M4,7H20V17H4V7M5,8V10H7V8H5M8,8V10H10V8H8M11,8V10H13V8H11M14,8V10H16V8H14M17,8V10H19V8H17M5,11V13H7V11H5M8,11V13H10V11H8M11,11V13H13V11H11M14,11V13H16V11H14M17,11V13H19V11H17M8,14V16H16V14H8Z'\n\n// HeaderDropdown\nexport var mdiDotsVertical =\n  'M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z'\n\n// ItemImageVideoChat\nexport var mdiCloseCircle =\n  'M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z'\n\n// navigationConfig, AccountSignInItem\nexport var mdiAccountCircleOutline =\n  'M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z'\n\n// navigationConfig\nexport var mdiCogOutline =\n  'M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z'\nexport var mdiPhoneOutline =\n  'M20,15.5C18.8,15.5 17.5,15.3 16.4,14.9C16.3,14.9 16.2,14.9 16.1,14.9C15.8,14.9 15.6,15 15.4,15.2L13.2,17.4C10.4,15.9 8,13.6 6.6,10.8L8.8,8.6C9.1,8.3 9.2,7.9 9,7.6C8.7,6.5 8.5,5.2 8.5,4C8.5,3.5 8,3 7.5,3H4C3.5,3 3,3.5 3,4C3,13.4 10.6,21 20,21C20.5,21 21,20.5 21,20V16.5C21,16 20.5,15.5 20,15.5M5,5H6.5C6.6,5.9 6.8,6.8 7,7.6L5.8,8.8C5.4,7.6 5.1,6.3 5,5M19,19C17.7,18.9 16.4,18.6 15.2,18.2L16.4,17C17.2,17.2 18.1,17.4 19,17.4V19Z'\n\n// AccountSignInItem\nexport var mdiApplicationOutline =\n  'M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 20H3V6H21V20Z'\nexport var mdiServerNetwork =\n  'M13,19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H20A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H13V19M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H4A1,1 0 0,1 3,8V4A1,1 0 0,1 4,3M9,7H10V5H9V7M9,15H10V13H9V15M5,5V7H7V5H5M5,13V15H7V13H5Z'\n\n// RnImageVideoLoader\nexport var mdiCloseCircleOutline =\n  'M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z'\nexport var mdiPlayCircleOutline =\n  'M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z'\n\n// RnImageVideoLoader, RnImageVideoLoader.web\nexport var mdiImageBrokenVariant =\n  'M21,5V11.59L18,8.58L14,12.59L10,8.59L6,12.59L3,9.58V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5M18,11.42L21,14.43V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V12.42L6,15.41L10,11.41L14,15.41'\n\n// PageCallManage\nexport var mdiCameraFrontVariant =\n  'M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M11,1V3H13V1H11M6,4V16.5C6,15.12 8.69,14 12,14C15.31,14 18,15.12 18,16.5V4H6M13,18H9V20H13V22L16,19L13,16V18Z'\nexport var mdiCameraRearVariant =\n  'M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,2A2,2 0 0,0 10,4A2,2 0 0,0 12,6A2,2 0 0,0 14,4A2,2 0 0,0 12,2M13,18H9V20H13V22L16,19L13,16V18Z'\nexport var mdiAlphaPCircle =\n  'M9,7V17H11V13H13A2,2 0 0,0 15,11V9A2,2 0 0,0 13,7H9M11,9H13V11H11V9M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2Z'\nexport var mdiCallSplit =\n  'M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29'\nexport var mdiDialpad =\n  'M12,19A2,2 0 0,0 10,21A2,2 0 0,0 12,23A2,2 0 0,0 14,21A2,2 0 0,0 12,19M6,1A2,2 0 0,0 4,3A2,2 0 0,0 6,5A2,2 0 0,0 8,3A2,2 0 0,0 6,1M6,7A2,2 0 0,0 4,9A2,2 0 0,0 6,11A2,2 0 0,0 8,9A2,2 0 0,0 6,7M6,13A2,2 0 0,0 4,15A2,2 0 0,0 6,17A2,2 0 0,0 8,15A2,2 0 0,0 6,13M18,5A2,2 0 0,0 20,3A2,2 0 0,0 18,1A2,2 0 0,0 16,3A2,2 0 0,0 18,5M12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17A2,2 0 0,0 14,15A2,2 0 0,0 12,13M18,13A2,2 0 0,0 16,15A2,2 0 0,0 18,17A2,2 0 0,0 20,15A2,2 0 0,0 18,13M18,7A2,2 0 0,0 16,9A2,2 0 0,0 18,11A2,2 0 0,0 20,9A2,2 0 0,0 18,7M12,7A2,2 0 0,0 10,9A2,2 0 0,0 12,11A2,2 0 0,0 14,9A2,2 0 0,0 12,7M12,1A2,2 0 0,0 10,3A2,2 0 0,0 12,5A2,2 0 0,0 14,3A2,2 0 0,0 12,1Z'\nexport var mdiPauseCircle =\n  'M15,16H13V8H15M11,16H9V8H11M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\nexport var mdiPlayCircle =\n  'M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\nexport var mdiRecordCircle =\n  'M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z'\nexport var mdiVideoOff =\n  'M3.27,2L2,3.27L4.73,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16C16.2,18 16.39,17.92 16.54,17.82L19.73,21L21,19.73M21,6.5L17,10.5V7A1,1 0 0,0 16,6H9.82L21,17.18V6.5Z'\n\n// PageCallManage, PageCalLRecents, PageContactUsers\nexport var mdiVideo =\n  'M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z'\n\n// PageCallRecents, PageContactUsers\nexport var mdiMagnify =\n  'M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'\n\n// PageCallTransferAttend\nexport var mdiArrowRight =\n  'M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z'\nexport var mdiPhoneOff =\n  'M20.22,2.5L2.5,20.22L3.77,21.5L8.65,16.62C11.76,19.43 15.81,21 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.18L13.21,17.38C12.06,16.8 11,16.06 10.06,15.21L21.5,3.77L20.22,2.5M4,3A1,1 0 0,0 3,4C3,7.57 4.14,11.05 6.24,13.94L7.66,12.5C7.28,11.97 6.93,11.39 6.62,10.79L8.82,8.59C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4Z'\n\n// PageContactPhonebook\nexport var mdiBriefcase =\n  'M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z'\nexport var mdiCellphone =\n  'M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z'\nexport var mdiHome = 'M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z'\nexport var mdiInformation =\n  'M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\n\n// PageAccountSignIn\nexport var mdiLadybug =\n  'M12,5C12.74,5 13.47,5.1 14.15,5.29L15.78,2.46C16.06,2 16.67,1.82 17.15,2.1C17.63,2.37 17.79,3 17.5,3.46L16,6.07C17.22,6.78 18.23,7.79 18.93,9H5.07C5.77,7.79 6.78,6.78 8,6.07L6.5,3.46C6.21,3 6.37,2.37 6.85,2.1C7.33,1.82 7.94,2 8.22,2.46L9.85,5.29C10.53,5.1 11.26,5 12,5M20,13C20,17.17 16.82,20.59 12.75,20.97V10.5H19.6C19.86,11.29 20,12.13 20,13M4,13C4,12.13 4.14,11.29 4.4,10.5H11.25V20.97C7.18,20.59 4,17.17 4,13Z'\n\n// PageSettingsOther\nexport var mdiTranslate =\n  'M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z'\n\n// RnPickerRoot\nexport var mdiRadioboxBlank =\n  'M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\nexport var mdiRadioboxMarked =\n  'M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z'\n\n// PageContactEdit\nexport var mdiMoreHoriz =\n  'M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'\n\nexport var mdiMenuDown = 'M7,10L12,15L17,10H7Z'\nexport var mdiMenuLeft = 'M14,7L9,12L14,17V7Z'\nexport var mdiMenuRight = 'M10,17L15,12L10,7V17Z'\nexport var mdiFolderPlus =\n  'M10,4L12,6H20A2,2 0 0,1 22,8V18A2,2 0 0,1 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10M15,9V12H12V14H15V17H17V14H20V12H17V9H15Z'\n","import { CallStore } from './callStore2'\n\nlet callStore: CallStore\nexport const setCallStore = (c: CallStore) => {\n  callStore = c\n}\nexport const getCallStore = () => callStore\n","import { debounce, isEqual, uniqBy } from 'lodash'\nimport { action, computed, observable } from 'mobx'\n\nimport * as brekekejs from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { arrToMap } from '../utils/toMap'\nimport { getAuthStore, waitPbx } from './authStore'\nimport { intlDebug } from './intl'\nimport { intlStore } from './intlStore'\nimport { RnAlert } from './RnAlert'\n\nexport type PbxUser = {\n  id: string\n  name: string\n  talkers?: {\n    id: string\n    status: string // 'calling' | 'ringing' | 'talking' | 'holding'\n  }[]\n}\nexport type UcUser = {\n  id: string\n  name: string\n  avatar: string\n  status: string // 'online' | 'offline' | 'idle' | 'busy'\n  statusText: string\n}\n// export type PBContact = {\n//   aid: string\n//   display_name: string\n//   phonebook: string\n//   shared: boolean\n//   loaded?: boolean\n//   hidden: boolean\n//   info: Phonebook\n// }\nexport type ContactInfo = { [k: string]: string }\nexport type Phonebook = {\n  id: string\n  display_name: string\n  phonebook: string\n  shared: boolean\n  loaded?: boolean\n  // if user is empty, it is shared\n  // if user is specified, it means it is belonged to that user\n  user?: string\n  info: ContactInfo\n}\nexport type ItemPBForm = brekekejs.ItemPhonebook & {\n  name: string\n  disabled?: boolean\n  value?: string\n  onValueChange?: Function\n  rule?: string\n  hidden?: boolean | undefined\n  label: string\n  isFocus?: boolean\n  maxLength: number\n}\n\nexport type PickerItemOption = {\n  onSelect: Function\n  listOption: ItemPBForm[]\n}\n\nclass ContactStore {\n  @observable usersSearchTerm = ''\n  @observable phonebookSearchTerm = ''\n  @observable chatSearchTerm = ''\n  @observable callSearchRecents = ''\n  @observable loading = false\n  @observable hasLoadmore = false\n  @observable offset = 0\n  numberOfContactsPerPage = 20\n\n  loadContacts = async () => {\n    await waitPbx()\n    if (getAuthStore().pbxState !== 'success' || this.loading) {\n      return\n    }\n    this.loading = true\n    await pbx\n      .getContacts({\n        search_text: this.phonebookSearchTerm,\n        offset: this.offset,\n        limit: this.numberOfContactsPerPage,\n      })\n      .then(arr => {\n        if (!arr) {\n          return\n        }\n\n        this.setPhonebook(arr as Phonebook[])\n        this.hasLoadmore = arr.length === this.numberOfContactsPerPage\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to load contact list`,\n          err,\n        })\n      })\n    this.loading = false\n  }\n\n  @observable alreadyLoadContactsFirstTime = false\n  @action loadContactsFirstTime = () => {\n    if (this.alreadyLoadContactsFirstTime) {\n      return\n    }\n    this.loadContacts().then(() => {\n      this.alreadyLoadContactsFirstTime = true\n    })\n  }\n  @action loadMoreContacts = () => {\n    this.offset += this.numberOfContactsPerPage\n    this.loadContacts()\n  }\n  @action refreshContacts = () => {\n    this.offset = 0\n    this.loadContacts()\n  }\n  // delete function\n  @observable selectedContactIds: { [id: string]: boolean } = {}\n  @observable isDeleteState: boolean = false\n\n  @action selectContactId = (userId: string) => {\n    if (this.selectedContactIds[userId]) {\n      delete this.selectedContactIds[userId]\n    } else {\n      this.selectedContactIds[userId] = true\n    }\n  }\n  @action removeContacts = (ids: string[] | number[]) => {\n    ids.forEach(id => {\n      delete this.phoneBooksMap[id.toString()]\n    })\n    this.phoneBooks = Object.values(this.phoneBooksMap)\n  }\n\n  // Create/update contact\n  @observable showPickerItem: PickerItemOption | null = null\n\n  @action openPicker = (picker: PickerItemOption) => {\n    this.showPickerItem = picker\n  }\n\n  @action dismissPicker = () => {\n    this.showPickerItem = null\n  }\n  getManagerContact = (lang?: string) => {\n    return window.Brekeke.Phonebook.getManager(lang ? lang : intlStore.locale)\n  }\n  getItemPhonebook = (lang?: string) => {\n    return window.Brekeke.Phonebook.getManager(lang ? lang : intlStore.locale)\n      ?.item\n  }\n\n  getManagerItemLang = () => {}\n  getManageItems = (lang?: string) => {\n    const items = window.Brekeke.Phonebook.getManager(\n      lang ? lang : intlStore.locale,\n    )?.item\n    if (!items || !items.length) {\n      return []\n    }\n    const newItems = items.map(i => {\n      return {\n        ...i,\n        name: i.id,\n        disabled: undefined,\n        label: i.id.startsWith('$') ? i.caption : i.id,\n        keyboardType: i.type === 'phone' ? 'numeric' : 'default',\n        maxLength: 50,\n      }\n    }) as any as ItemPBForm[]\n    return newItems\n  }\n\n  // pbxUsers\n  @observable pbxUsers: PbxUser[] = []\n\n  getPbxUsers = async () => {\n    try {\n      const ca = getAuthStore().getCurrentAccount()\n      if (!ca) {\n        return\n      }\n      const res = await pbx.getUsers(ca.pbxTenant)\n      if (!res) {\n        return\n      }\n      this.pbxUsers = res\n        .filter(u => u[0] !== ca.pbxUsername)\n        .map(id => ({ id: id[0], name: id[1] }))\n    } catch (err) {\n      RnAlert.error({\n        message: intlDebug`Failed to load PBX users`,\n        err: err as Error,\n      })\n    }\n  }\n  setTalkerStatus = (userId: string, talkerId: string, status: string) => {\n    const u = this.getPbxUserById(userId)\n    if (!u) {\n      return\n    }\n    if (!u.talkers) {\n      u.talkers = []\n    }\n    if (!status) {\n      u.talkers = u.talkers.filter(t => t.id !== talkerId)\n    } else {\n      const talker = u.talkers.find(t => t.id === talkerId)\n      if (!talker) {\n        u.talkers.push({\n          id: talkerId,\n          status,\n        })\n      } else {\n        talker.status = status\n      }\n    }\n    this.pbxUsers = [...this.pbxUsers]\n  }\n  @computed private get pbxUsersMap() {\n    return arrToMap(this.pbxUsers, 'id', (u: PbxUser) => u) as {\n      [k: string]: PbxUser\n    }\n  }\n  @observable private extraPbxUsersMap: { [k: string]: PbxUser } = {}\n  getPbxUserById = (id: string) => {\n    const u = this.pbxUsersMap[id] || this.extraPbxUsersMap[id]\n    if (!u && !this.extraPbxUsersLoadingMap[id]) {\n      this.extraPbxUsersLoadingMap[id] = true\n      this.extraPbxUsersBatch.push(id)\n      this.getExtraPbxUsersBatch()\n    }\n    return u\n  }\n\n  private extraPbxUsersLoadingMap: { [k: string]: boolean } = {}\n  private extraPbxUsersBatch: string[] = []\n  private getExtraPbxUsersBatch = debounce(() => {\n    const ids = this.extraPbxUsersBatch\n    this.extraPbxUsersBatch = []\n    pbx\n      .getExtraUsers(ids)\n      .then(\n        action(arr => {\n          arr?.forEach(u => {\n            this.extraPbxUsersMap[u.id] = u\n          })\n        }),\n      )\n      .catch(() => {\n        // mimic finally\n      })\n      .then(() =>\n        ids.forEach(id => {\n          delete this.extraPbxUsersLoadingMap[id]\n        }),\n      )\n  }, 17)\n\n  @observable ucUsers: UcUser[] = []\n  updateUcUser = (u: UcUser) => {\n    const u0 = this.getUcUserById(u.id)\n    if (!u0) {\n      return\n    }\n    if (isEqual(u0, u)) {\n      return\n    }\n    Object.assign(u0, u)\n    this.ucUsers = [...this.ucUsers]\n  }\n  @computed private get ucUsersMap() {\n    return arrToMap(this.ucUsers, 'id', (u: UcUser) => u) as {\n      [k: string]: UcUser\n    }\n  }\n  getUcUserById = (id: string) => {\n    return this.ucUsersMap[id]\n  }\n\n  @observable phoneBooks: Phonebook[] = []\n  @observable pbxBooks: brekekejs.PbxBook[] = []\n\n  @action loadPbxBoook = () => {\n    this.pbxBooks = []\n    pbx.getPhonebooks().then(res => {\n      if (res) {\n        this.pbxBooks = res\n      }\n    })\n  }\n  @action upsertPhonebook = (p: Phonebook) => {\n    const p0 = this.getPhonebookById(p.id)\n    if (!p0) {\n      this.phoneBooks.push(p)\n    } else {\n      Object.assign(p0, p)\n    }\n\n    // update display name for recent call\n    const partyNumber =\n      p.info?.$tel_mobile || p.info?.$tel_work || p.info?.$tel_home\n    if (partyNumber) {\n      const ac = getAuthStore()\n      ac.updatePartyNameRecentCall({ partyName: p.display_name, partyNumber })\n    }\n\n    this.phoneBooks = [...this.phoneBooks]\n  }\n  @action setPhonebook = (p: Phonebook | Phonebook[]) => {\n    if (!p) {\n      return\n    }\n    if (!Array.isArray(p)) {\n      p = [p]\n    }\n    if (this.offset > 0) {\n      this.phoneBooks = uniqBy([...this.phoneBooks, ...p], 'id')\n    } else {\n      this.phoneBooks = uniqBy([...p], 'id')\n    }\n  }\n  @computed private get phoneBooksMap() {\n    return arrToMap(this.phoneBooks, 'id', (u: Phonebook) => u) as {\n      [k: string]: Phonebook\n    }\n  }\n\n  getPhoneBookByPhoneNumber = (phoneNumber?: string) => {\n    if (!phoneNumber) {\n      return\n    }\n    return this.phoneBooks.filter(\n      p =>\n        p.info.$tel_mobile === phoneNumber ||\n        p.info.$tel_home === phoneNumber ||\n        p.info.$tel_work === phoneNumber,\n    )?.[0]\n  }\n  getParkNameByParkNumber = (parkNumber?: string) => {\n    if (!parkNumber) {\n      return\n    }\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return\n    }\n    const arr =\n      cp.parks?.map((p, i) => ({\n        park: p,\n        name: cp.parkNames?.[i] || '',\n      })) || []\n    const parks = uniqBy(arr, 'park')\n    return parks.find(p => p.park === parkNumber)?.name\n  }\n  getPhonebookById = (id: string) => {\n    return this.phoneBooksMap[id]\n  }\n\n  clearStore = () => {\n    this.phoneBooks = []\n    this.ucUsers = []\n    this.pbxUsers = []\n    this.loading = false\n    this.hasLoadmore = false\n    this.showPickerItem = null\n    this.pbxBooks = []\n    this.alreadyLoadContactsFirstTime = false\n    this.selectedContactIds = {}\n  }\n}\n\nexport const contactStore = new ContactStore()\n\nexport const getPartyName = (partyNumber?: string) =>\n  (partyNumber && contactStore.getPbxUserById(partyNumber)?.name) ||\n  contactStore.getPhoneBookByPhoneNumber(partyNumber)?.display_name ||\n  contactStore.getParkNameByParkNumber(partyNumber)\n","import { lowerFirst } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC, useState } from 'react'\nimport {\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  ScrollView,\n  StyleSheet,\n  View,\n} from 'react-native'\nimport { getBottomSpace } from 'react-native-iphone-x-helper'\n\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { Footer } from './Footer'\nimport { Header } from './Header'\nimport { HeaderDropdownItem } from './HeaderDropdown'\nimport { Toast } from './Toast'\nimport { v } from './variables'\n\nconst DEFAULT_TOAST_MESSAGE = 'new message'\n\nconst css = StyleSheet.create({\n  Layout: {\n    flex: 1,\n    height: '100%',\n    backgroundColor: 'white',\n  },\n  Layout__transparent: {\n    backgroundColor: 'transparent',\n  },\n  Scroller: {\n    flexGrow: 1,\n  },\n  FooterSpaceInsideScroller: {\n    height: 15,\n  },\n  LoadMore: {\n    alignSelf: 'center',\n    paddingBottom: 15,\n    fontSize: v.fontSizeSmall,\n    paddingHorizontal: 10,\n  },\n  LoadMore__btn: {\n    color: v.colors.primary,\n  },\n  LoadMore__finished: {\n    color: v.colors.warning,\n  },\n})\n\nexport const Layout: FC<\n  Partial<{\n    compact: boolean\n    containerOnContentSizeChange: Function\n    containerOnScroll: Function\n    containerRef: Function\n    description: string\n    dropdown: HeaderDropdownItem[]\n    fabOnBack(): void\n    fabOnNext(): void\n    fabOnNextText: string\n    fabRender(): void\n    menu: string\n    noScroll: boolean\n    onBack(): void\n    onCreate(): void\n    subMenu: string\n    title: string\n    transparent: boolean\n    isTab?: boolean\n    isShowToastMessage?: boolean\n    incomingMessage: string\n  }>\n> = observer(originalProps => {\n  const [headerOverflow, setHeaderOverflow] = useState(false)\n\n  const props = { ...originalProps } // Clone so it can be mutated\n\n  const Container = props.noScroll ? View : ScrollView\n  const containerProps = Object.entries(props).reduce((m, [k, vk]) => {\n    type K = keyof typeof props\n    if (k.startsWith('container')) {\n      delete props[k as K]\n      k = k.replace('container', '')\n      k = lowerFirst(k)\n      m[k] = vk as typeof props[K]\n    }\n    return m\n  }, {} as { [k: string]: unknown })\n\n  Object.assign(containerProps, {\n    style: [css.Layout, props.transparent && css.Layout__transparent],\n  })\n\n  if (!props.noScroll) {\n    Object.assign(containerProps, {\n      contentContainerStyle: [css.Scroller],\n      keyboardShouldPersistTaps: 'always',\n      onScroll: (e: NativeSyntheticEvent<NativeScrollEvent>) => {\n        // eslint-disable-next-line no-mixed-operators\n        if (e.nativeEvent.contentOffset.y > 60 !== headerOverflow) {\n          setHeaderOverflow(!headerOverflow)\n        }\n        originalProps.containerOnScroll?.(e)\n      },\n      scrollEventThrottle: 170,\n      showsVerticalScrollIndicator: false,\n    })\n  }\n\n  if (props.compact) {\n    // Fix android header transparent box shadow\n    props.transparent = false\n  }\n\n  // TODO put more document here\n  let headerSpace = 86 + 15\n  if (props.menu) {\n    headerSpace += 35\n  }\n  if (props.compact) {\n    headerSpace -= 46\n  }\n  // TODO put more document here\n  let footerSpace = getBottomSpace()\n  if (props.fabRender) {\n    footerSpace += 40\n  } else if (!RnKeyboard.isKeyboardShowing) {\n    if (props.menu) {\n      footerSpace += 48\n    }\n    if (props.fabOnNext) {\n      footerSpace += 56\n    }\n  }\n\n  return (\n    <>\n      <Container {...containerProps}>\n        <View style={{ height: headerSpace }} />\n        {props.children}\n        <View style={css.FooterSpaceInsideScroller} />\n      </Container>\n      {props.isShowToastMessage && (\n        <Toast\n          isVisible={props.isShowToastMessage}\n          title={props.incomingMessage || DEFAULT_TOAST_MESSAGE}\n          containerStyles={{\n            marginTop: headerSpace,\n            backgroundColor: 'yellow',\n          }}\n        />\n      )}\n      {!props.isTab && <View style={{ height: footerSpace }} />}\n      {<Footer {...props} menu={props.menu as string} />}\n      <Header {...props} compact={props.compact || headerOverflow} />\n    </>\n  )\n})\n","import jsonStableStringify from 'json-stable-stringify'\nimport { debounce, uniqBy } from 'lodash'\nimport { action, computed, observable, runInAction } from 'mobx'\nimport { Platform } from 'react-native'\nimport { v4 as newUuid } from 'uuid'\n\nimport { UcBuddy, UcBuddyGroup } from '../api/brekekejs'\nimport { SyncPnToken } from '../api/syncPnToken'\nimport { RnAsyncStorage } from '../components/Rn'\nimport { currentVersion } from '../components/variables'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { arrToMap } from '../utils/toMap'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { compareSemVer } from './debugStore'\nimport { intlDebug } from './intl'\nimport { RnAlert } from './RnAlert'\n\nlet resolveFn: Function | undefined\nconst storagePromise = new Promise(resolve => {\n  resolveFn = resolve\n})\nexport type PNOptions = 'APNs' | 'LPC' | undefined\nexport type Account = {\n  id: string\n  pbxHostname: string\n  pbxPort: string\n  pbxTenant: string\n  pbxUsername: string\n  pbxPassword: string\n  pbxPhoneIndex: string // '' | '1' | '2' | '3' | '4'\n  pbxTurnEnabled: boolean\n  pbxLocalAllUsers?: boolean\n  pushNotificationEnabled: boolean\n  pushNotificationEnabledSynced?: boolean\n  parks?: string[]\n  parkNames?: string[]\n  ucEnabled: boolean\n  displayOfflineUsers?: boolean\n  navIndex: number\n  navSubMenus: string[]\n}\nexport type AccountData = {\n  id: string\n  accessToken: string\n  recentCalls: {\n    id: string\n    incoming: boolean\n    answered: boolean\n    partyName: string\n    partyNumber: string\n    created: string\n  }[]\n  recentChats: {\n    id: string // thread id\n    name: string\n    text: string\n    type: number\n    group: boolean\n    unread: boolean\n    created: string\n  }[]\n  pbxBuddyList?: {\n    screened: boolean\n    users: (UcBuddy | UcBuddyGroup)[]\n  }\n  palParams?: { [k: string]: string }\n  userAgent?: string\n  pnExpires?: string\n}\n\nclass AccountStore {\n  @observable appInitDone = false\n  @observable pnSyncLoadingMap: { [k: string]: boolean } = {}\n  waitStorageLoaded = () => storagePromise\n\n  @observable accounts: Account[] = []\n  @computed get accountsMap() {\n    return arrToMap(this.accounts, 'id', (p: Account) => p) as {\n      [k: string]: Account\n    }\n  }\n  @observable accountData: AccountData[] = []\n\n  genEmptyAccount = (): Account => ({\n    id: newUuid(),\n    pbxTenant: '',\n    pbxUsername: '',\n    pbxHostname: '',\n    pbxPort: '',\n    pbxPassword: '',\n    pbxPhoneIndex: '',\n    pbxTurnEnabled: false,\n    pushNotificationEnabled: Platform.OS === 'web' ? false : true,\n    parks: [] as string[],\n    parkNames: [] as string[],\n    ucEnabled: false,\n    navIndex: -1,\n    navSubMenus: [],\n  })\n\n  loadAccountsFromLocalStorage = async () => {\n    const arr = await RnAsyncStorage.getItem('_api_profiles')\n    let d: TAccountDataInStorage | undefined\n    if (arr && !Array.isArray(arr)) {\n      try {\n        d = JSON.parse(arr)\n      } catch (err) {\n        d = undefined\n      }\n    }\n    if (d) {\n      let { profileData: accountData, profiles: accounts } = d\n      if (Array.isArray(d)) {\n        // Lower version compatible\n        accounts = d\n        accountData = []\n      }\n      // Set tenant to '-' if empty\n      accounts.forEach(a => {\n        a.pbxTenant = a.pbxTenant || '-'\n      })\n      runInAction(() => {\n        this.accounts = accounts.filter(a => a.id && a.pbxUsername)\n        if (accounts.length !== this.accounts.length) {\n          console.error(\n            'loadAccountsFromLocalStorage error missing id or pbxUsername',\n          )\n        }\n        this.accountData = uniqBy(accountData, 'id')\n      })\n    }\n    resolveFn?.()\n    resolveFn = undefined\n  }\n  private saveAccountsToLocalStorage = async () => {\n    try {\n      const profiles = this.accounts.filter(a => a.id && a.pbxUsername)\n      if (profiles.length !== this.accounts.length) {\n        console.error(\n          'saveAccountsToLocalStorage error missing id or pbxUsername',\n        )\n      }\n      await RnAsyncStorage.setItem(\n        '_api_profiles',\n        JSON.stringify({\n          profiles,\n          profileData: this.accountData,\n        }),\n      )\n    } catch (err) {\n      RnAlert.error({\n        message: intlDebug`Failed to save accounts to local storage`,\n        err: err as Error,\n      })\n    }\n  }\n  private _saveAccountsToLocalStorageDebounced = debounce(\n    this.saveAccountsToLocalStorage,\n    100,\n    { maxWait: 1000 },\n  )\n  saveAccountsToLocalStorageDebounced = () => {\n    // Set tenant to '-' if empty\n    this.accounts.forEach(a => {\n      a.pbxTenant = a.pbxTenant || '-'\n    })\n    return this._saveAccountsToLocalStorageDebounced()\n  }\n\n  @action upsertAccount = (p: Partial<Account>) => {\n    const a = this.accounts.find(_ => _.id === p.id)\n    if (!a) {\n      this.accounts.push(p as Account)\n    } else {\n      const clonedA = { ...a } // Clone before assign\n      Object.assign(a, p)\n      // TODO handle case change phone index\n      if (getAccountUniqueId(clonedA) !== getAccountUniqueId(a)) {\n        clonedA.pushNotificationEnabled = false\n        SyncPnToken().sync(clonedA, {\n          noUpsert: true,\n        })\n      } else if (\n        typeof p.pushNotificationEnabled === 'boolean' &&\n        p.pushNotificationEnabled !== clonedA.pushNotificationEnabled\n      ) {\n        a.pushNotificationEnabledSynced = false\n        SyncPnToken().sync(a, {\n          onError: err => {\n            RnAlert.error({\n              message: intlDebug`Failed to sync Push Notification settings for ${a.pbxUsername}`,\n              err,\n            })\n            a.pushNotificationEnabled = clonedA.pushNotificationEnabled\n            a.pushNotificationEnabledSynced =\n              clonedA.pushNotificationEnabledSynced\n            this.saveAccountsToLocalStorageDebounced()\n          },\n        })\n      }\n    }\n    this.saveAccountsToLocalStorageDebounced()\n  }\n  @action removeAccount = (id: string) => {\n    const a = this.accounts.find(_ => _.id === id)\n    this.accounts = this.accounts.filter(_ => _.id !== id)\n    this.saveAccountsToLocalStorageDebounced()\n    if (a) {\n      a.pushNotificationEnabled = false\n      SyncPnToken().sync(a, {\n        noUpsert: true,\n      })\n    }\n  }\n\n  find = async (a: Partial<Account>) => {\n    await storagePromise\n    // This accept partial compare: only pbxUsername is required to find\n    // This behavior is needed because returned data may be incompleted\n    // For eg: PN data doesnt have all the fields to compare\n    return accountStore.accounts.find(_ => compareAccount(_, a))\n  }\n  findByPn = (n: ParsedPn) =>\n    this.find({\n      pbxUsername: n.to,\n      pbxTenant: n.tenant,\n      pbxHostname: n.pbxHostname,\n      pbxPort: n.pbxPort,\n    })\n\n  findData = async (a?: AccountUnique) => {\n    await storagePromise\n    return this.findDataSync(a)\n  }\n  findDataSync = (a?: AccountUnique) => {\n    if (!a || !a.pbxUsername || !a.pbxTenant || !a.pbxHostname || !a.pbxPort) {\n      return\n    }\n    const id = getAccountUniqueId(a)\n    return this.accountData.find(d => d.id === id)\n  }\n  findDataByPn = async (n: ParsedPn) => {\n    const a = await this.findByPn(n)\n    if (!a) {\n      return\n    }\n    return this.findData(a)\n  }\n\n  findDataAsync = async (a: AccountUnique): Promise<AccountData> => {\n    // Async to use in mobx to not trigger data change in render\n    // This method will update the data if not found in storage\n    const d = await this.findData(a)\n    if (d) {\n      return d\n    }\n    const newD = {\n      id: getAccountUniqueId(a),\n      accessToken: '',\n      recentCalls: [],\n      recentChats: [],\n      pbxBuddyList: undefined,\n    }\n    await waitTimeout(17)\n    this.updateAccountData(newD)\n    return newD\n  }\n\n  updateAccountData = (d: AccountData) => {\n    const arr = [d, ...this.accountData.filter(d2 => d2.id !== d.id)]\n    if (arr.length > 20) {\n      arr.pop()\n    }\n    runInAction(() => {\n      this.accountData = arr\n    })\n    this.saveAccountsToLocalStorageDebounced()\n  }\n}\n\nexport type AccountUnique = Pick<\n  Account,\n  'pbxUsername' | 'pbxTenant' | 'pbxHostname' | 'pbxPort'\n>\nexport const getAccountUniqueId = (a: AccountUnique) =>\n  jsonStableStringify({\n    u: a.pbxUsername,\n    t: a.pbxTenant || '-',\n    h: a.pbxHostname,\n    p: a.pbxPort,\n  })\n\n// compareAccount in case data is fragment\nconst compareField = (p1: object, p2: object, field: keyof AccountUnique) => {\n  const v1 = p1[field as keyof typeof p1]\n  const v2 = p2[field as keyof typeof p2]\n  return !v1 || !v2 || v1 === v2\n}\nexport const compareAccount = (p1: { pbxUsername: string }, p2: object) => {\n  return (\n    p1.pbxUsername && // Must have pbxUsername\n    compareField(p1, p2, 'pbxUsername') &&\n    compareField(p1, p2, 'pbxTenant') &&\n    compareField(p1, p2, 'pbxHostname') &&\n    compareField(p1, p2, 'pbxPort')\n  )\n}\n\nexport const accountStore = new AccountStore()\nexport type RecentCall = AccountData['recentCalls'][0]\n\ntype TAccountDataInStorage = {\n  profiles: Account[]\n  profileData: AccountData[]\n}\n\ntype LastSignedInId = {\n  id: string\n  at: number\n  version: string\n  logoutPressed?: boolean\n  uptime?: number\n  autoSignInBrekekePhone?: boolean\n}\n\nexport const getLastSignedInId = async (\n  checkAutoSignInBrekekePhone?: boolean,\n) => {\n  const j = await RnAsyncStorage.getItem('lastSignedInId')\n  let d = undefined as any as LastSignedInId\n  try {\n    d = j && JSON.parse(j)\n  } catch (err) {}\n  if (d && 'h' in d) {\n    // backward compatibility json is the unique account id\n    d = j as any as LastSignedInId\n  }\n  if (!d?.id) {\n    d = {\n      id: (d || j || '') as any as string,\n      at: Date.now(),\n      version: currentVersion,\n    }\n  }\n  if (!checkAutoSignInBrekekePhone) {\n    return d\n  }\n  if (d.logoutPressed || compareSemVer(currentVersion, d.version) > 0) {\n    d.autoSignInBrekekePhone = false\n    return d\n  }\n  d.uptime = await BrekekeUtils.systemUptimeMs()\n  d.autoSignInBrekekePhone = d.uptime > 0 && d.uptime > Date.now() - d.at\n  return d\n}\nexport const saveLastSignedInId = async (id: string | false) => {\n  if (id === false) {\n    const d = await getLastSignedInId()\n    d.logoutPressed = true\n    await RnAsyncStorage.setItem('lastSignedInId', JSON.stringify(d))\n    return\n  }\n  const j = JSON.stringify({\n    id,\n    at: Date.now(),\n    version: currentVersion,\n  })\n  await RnAsyncStorage.setItem('lastSignedInId', j)\n}\n","import { Platform } from 'react-native'\nimport BgTimer from 'react-native-background-timer'\n\nexport type TBackgroundTimer = {\n  setTimeout(callback: () => void, timeout: number): number\n  clearTimeout(timeoutId: number): void\n  setInterval(callback: () => void, timeout: number): number\n  clearInterval(intervalId: number): void\n}\n\nexport const BackgroundTimer: TBackgroundTimer =\n  Platform.OS === 'web' ? window : BgTimer\n","import PushNotificationIOS from '@react-native-community/push-notification-ios'\nimport { sortBy, uniqBy } from 'lodash'\nimport { computed, observable } from 'mobx'\nimport { AppState, Platform } from 'react-native'\nimport FCM from 'react-native-fcm'\n\nimport { Conference } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { filterTextOnly } from '../utils/formatChatContent'\nimport { rnVibrate } from '../utils/rnVibrate'\nimport { saveBlobFile } from '../utils/saveBlob'\nimport { arrToMap } from '../utils/toMap'\nimport { webPlayDing } from '../utils/webPlayDing'\nimport { webShowNotification } from '../utils/webShowNotification'\nimport { accountStore } from './accountStore'\nimport { getAuthStore } from './authStore'\nimport { getCallStore } from './callStore'\nimport { getPartyName } from './contactStore'\nimport { RnStacker } from './RnStacker'\n\nexport type ChatMessage = {\n  id: string\n  text?: string\n  file?: string\n  type: number\n  creator: string\n  created: number\n  conf_id?: string\n}\nexport type ChatFile = {\n  id: string\n  name: string\n  incoming: boolean\n  size: number\n  state: string // 'waiting' | 'started' | 'success' | 'stopped' | 'failure'\n  transferPercent: number\n  fileType: string\n  url?: string\n  target?: ChatTarget\n  topic_id: string\n  save?: 'started' | 'success' | 'failure'\n}\nexport type ChatTarget = {\n  tenant: string\n  user_id: string\n}\nexport type ChatMessageConfig = {\n  id: string\n  isUnread: boolean\n  isGroup: boolean\n  allMessagesLoaded?: boolean\n}\nexport type ChatGroup = {\n  id: string\n  name: string\n  inviter: string\n  jointed: boolean\n  members: string[]\n  webchat?: Conference // check group is webchat\n}\nexport const FileEvent = {\n  onFileReceived: 'onFileReceived',\n  onFileProgress: 'onFileProgress',\n  onFileFinished: 'onFileFinished',\n}\nexport const TIMEOUT_TRANSFER_IMAGE = 60000\nexport const TIMEOUT_TRANSFER_VIDEO = 180000\n\nclass ChatStore {\n  timeoutTransferImage: { [k: string]: number } = {}\n\n  @observable messagesByThreadId: { [k: string]: ChatMessage[] } = {}\n  getMessagesByThreadId = (id: string) => this.messagesByThreadId[id] || []\n\n  @observable threadConfig: { [k: string]: ChatMessageConfig } = {}\n  @computed get unreadCount() {\n    const idMap: { [k: string]: boolean } = {}\n    const l1 = filterTextOnly(\n      Object.values(this.threadConfig).filter(v => {\n        idMap[v.id] = true\n        return v.isUnread && this.getMessagesByThreadId(v.id).length\n      }) as any,\n    ).length\n    const as = getAuthStore()\n    const d = as.getCurrentData()\n    if (!d) {\n      accountStore.findDataAsync(as.getCurrentAccount())\n    }\n    const l2 = filterTextOnly(\n      d?.recentChats.filter(c => !idMap[c.id] && c.unread),\n    ).length\n    return l1 + l2\n  }\n  getNumberWebchatNoti = () =>\n    this.groups.filter(\n      s =>\n        s.webchat &&\n        s.webchat.conf_status === Constants.CONF_STATUS_INVITED_WEBCHAT,\n    )?.length\n\n  // threadId can be uc user id or group id\n  // TODO threadId can be duplicated between them\n  @computed get threadIdsOrderedByRecent() {\n    return sortBy(\n      Object.keys(this.messagesByThreadId),\n      k => this.getMessagesByThreadId(k)[0]?.created || -1,\n    )\n  }\n  getWebChatInactiveIds() {\n    return this.groups\n      .filter(\n        gr =>\n          gr.webchat && gr.webchat.conf_status !== Constants.CONF_STATUS_JOINED,\n      )\n      .map(item => item.id)\n  }\n  isWebchatJoined(conf_id: string) {\n    return this.groups\n      .filter(\n        gr =>\n          gr.webchat && gr.webchat.conf_status === Constants.CONF_STATUS_JOINED,\n      )\n      .some(w => w.id === conf_id)\n  }\n  isWebchat(conf_id: string) {\n    return this.groups.filter(gr => gr.webchat).some(w => w.id === conf_id)\n  }\n\n  pushChatNotification = (title: string, body: string, threadId?: string) => {\n    if (Platform.OS === 'web') {\n      return\n    }\n\n    if (Platform.OS === 'android') {\n      FCM.presentLocalNotification({\n        title,\n        body,\n        threadId,\n        number: 0,\n        sound: 'ding.mp3',\n        priority: 'high',\n        show_in_foreground: true,\n        local_notification: true,\n        wake_screen: false,\n        ongoing: false,\n        lights: true,\n        channel: `channel-${Date.now()}`,\n        icon: 'ic_launcher',\n        id: `message-${Date.now()}`,\n        pre_app_state: AppState.currentState,\n        my_custom_data: 'local_notification',\n        is_local_notification: 'local_notification',\n      })\n    } else {\n      PushNotificationIOS.getApplicationIconBadgeNumber(badge => {\n        badge = Number(badge) || 0\n        PushNotificationIOS.addNotificationRequest({\n          id: `message-${Date.now()}`,\n          title,\n          body,\n          badge,\n          sound: 'ding.mp3',\n          userInfo: {\n            id: `message-${Date.now()}`,\n            aps: {\n              title,\n              threadId,\n              body,\n              my_custom_data: 'local_notification',\n              pre_app_state: AppState.currentState,\n              local_notification: true,\n              is_local_notification: 'local_notification',\n            },\n          },\n        })\n      })\n    }\n  }\n  pushMessages = (\n    threadId: string,\n    m: ChatMessage | ChatMessage[],\n    isUnread = false,\n  ) => {\n    const isGroup = this.groups.some(gr => gr.id === threadId)\n    const isWebchatJoined = this.isWebchatJoined(threadId)\n    const isWebchat = this.isWebchat(threadId)\n    if (!Array.isArray(m)) {\n      m = [m]\n    }\n    const messages = this.getMessagesByThreadId(threadId)\n    messages.push(...m)\n    this.messagesByThreadId[threadId] = sortBy(\n      uniqBy(messages, 'id'),\n      'created',\n    )\n    const a2 = filterTextOnly(m)\n    if (!a2.length || (isWebchat && !isWebchatJoined)) {\n      return\n    }\n    this.updateThreadConfig(threadId, isGroup, {\n      isUnread,\n    })\n\n    // show chat in-app notification\n    let name = ''\n    if (isGroup) {\n      name = chatStore.getGroupById(threadId)?.name\n    } else {\n      // user not set username\n      name = getPartyName(threadId) || threadId\n    }\n\n    // show desktop notification for Web platform\n    if (\n      Platform.OS === 'web' &&\n      this.getThreadConfig(threadId).isUnread &&\n      m.length === 1\n    ) {\n      const messageNotification = name + ': ' + m[0]?.text || ''\n      webShowNotification(messageNotification, name)\n    }\n\n    if (m.length === 1 && AppState.currentState !== 'active') {\n      this.pushChatNotification(name, m[0]?.text || '', threadId)\n    }\n    // play chat notification sound & vibration\n    const cs = getCallStore()\n    const isTalking =\n      cs.calls.some(c => c.answered) ||\n      Object.values(cs.callkeepActionMap).some(a => a === 'answerCall')\n    const s = RnStacker.stacks[RnStacker.stacks.length - 1] as any as {\n      groupId?: string\n      buddy?: string\n      name?: string\n    }\n    const shouldPlayChatNotificationSoundVibration =\n      !isTalking &&\n      AppState.currentState === 'active' &&\n      (isGroup\n        ? !(s?.name === 'PageChatGroupDetail' && s?.groupId === threadId)\n        : !(s?.name === 'PageChatDetail' && s?.buddy === threadId))\n    if (shouldPlayChatNotificationSoundVibration) {\n      this.playChatNotificationSoundVibration()\n    }\n  }\n\n  @observable chatNotificationSoundRunning: boolean = false\n  private playChatNotificationSoundVibration = () => {\n    if (Platform.OS === 'web') {\n      webPlayDing()\n      return\n    }\n    if (this.chatNotificationSoundRunning) {\n      return\n    }\n    rnVibrate()\n    this.chatNotificationSoundRunning = true\n    BackgroundTimer.setTimeout(() => {\n      this.chatNotificationSoundRunning = false\n    }, 700)\n  }\n\n  removeWebchatItem = (conf_id: string) => {\n    this.removeGroup(conf_id)\n  }\n\n  getThreadConfig = (id: string) =>\n    this.threadConfig[id] || ({} as ChatMessageConfig)\n  updateThreadConfig = (\n    id: string,\n    isGroup: boolean,\n    c: Partial<ChatMessageConfig>,\n  ) => {\n    this.threadConfig = {\n      ...this.threadConfig,\n      [id]: {\n        ...this.getThreadConfig(id),\n        ...c,\n        id,\n        isGroup,\n      },\n    }\n  }\n\n  @observable private filesMap: { [k: string]: ChatFile } = {}\n\n  download = (f: ChatFile) => {\n    Object.assign(f, { save: 'started' })\n    chatStore.upsertFile(f)\n    saveBlobFile(f.id, f.topic_id, f.fileType)\n      .then(url => {\n        this.filesMap[f.id] = Object.assign(this.filesMap[f.id], {\n          url,\n          save: 'success',\n        })\n      })\n      .catch(() => {\n        this.filesMap[f.id] = Object.assign(this.filesMap[f.id], {\n          url: '',\n          save: 'failure',\n        })\n      })\n  }\n  startTimeout = (id: string, fileType?: string) => {\n    if (!this.timeoutTransferImage[id]) {\n      this.timeoutTransferImage[id] = BackgroundTimer.setTimeout(\n        () => {\n          this.clearTimeout(id)\n          uc.rejectFile({ id })\n        },\n        fileType === 'video' ? TIMEOUT_TRANSFER_VIDEO : TIMEOUT_TRANSFER_IMAGE,\n      )\n    }\n  }\n  clearTimeout = (id: string) => {\n    if (this.timeoutTransferImage[id]) {\n      BackgroundTimer.clearTimeout(this.timeoutTransferImage[id])\n      delete this.timeoutTransferImage[id]\n    }\n  }\n  updateTimeout = (id: string) => {\n    if (!!this.timeoutTransferImage[id]) {\n      this.clearTimeout(id)\n      this.startTimeout(id)\n    }\n  }\n\n  upsertFile = (\n    f: Partial<ChatFile> & Pick<ChatFile, 'id'>,\n    fromEvent?: string,\n  ) => {\n    const f0 = this.filesMap[f.id]\n    if (!f0) {\n      this.filesMap[f.id] = f as ChatFile\n      const fileTypeImageVideo =\n        f.fileType === 'image' || f.fileType === 'video'\n      if (f.incoming && fileTypeImageVideo) {\n        this.download(f as ChatFile)\n      }\n      this.startTimeout(f.id, f.fileType)\n    } else {\n      const state =\n        f.state === 'stopped' || f.state === 'success' || f.state === 'failure'\n      this.filesMap[f.id] = Object.assign(f0, f)\n      if (fromEvent && fromEvent === FileEvent.onFileProgress) {\n        this.updateTimeout(f.id)\n      } else {\n        if (state) {\n          this.clearTimeout(f.id)\n        }\n      }\n    }\n  }\n  removeFile = (id: string) => {\n    delete this.filesMap[id]\n  }\n  getFileById = (id?: string) => (id ? this.filesMap[id] : undefined)\n\n  @observable groups: ChatGroup[] = []\n  upsertGroup = (g: Partial<ChatGroup> & Pick<ChatGroup, 'id'>) => {\n    // add default webchatMessages\n    const g0 = this.getGroupById(g.id)\n    if (g0) {\n      Object.assign(g0, g)\n    } else {\n      this.groups.push(g as ChatGroup)\n    }\n    this.groups = [...this.groups]\n  }\n  removeGroup = (id: string) => {\n    delete this.messagesByThreadId[id]\n    delete this.threadConfig[id]\n    this.groups = this.groups.filter(gr => gr.id !== id)\n  }\n  @computed private get groupsMap() {\n    return arrToMap(this.groups, 'id', (g: ChatGroup) => g) as {\n      [k: string]: ChatGroup\n    }\n  }\n  getGroupById = (id: string) => {\n    return this.groupsMap[id]\n  }\n\n  clearStore = () => {\n    this.messagesByThreadId = {}\n    this.threadConfig = {}\n    this.groups = []\n    this.filesMap = {}\n    this.timeoutTransferImage = {}\n  }\n}\n\nexport const chatStore = new ChatStore()\n","import 'brekekejs/lib/jsonrpc'\n\nimport UCClient0 from 'brekekejs/lib/ucclient'\nimport EventEmitter from 'eventemitter3'\nimport { Platform } from 'react-native'\n\nimport { Account } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { ChatFile } from '../stores/chatStore'\nimport { UcUser } from '../stores/contactStore'\nimport { formatFileType } from '../utils/formatFileType'\nimport {\n  UcBuddy,\n  UcBuddyGroup,\n  UcChatClient,\n  UcConference,\n  UcConstants,\n  UcListeners,\n  UcLogger,\n  UcReceieveUnreadText,\n  UcResponseLeaveConf,\n  UcSearchTexts,\n  UcSendFile,\n  UcSendFiles,\n  UcWebchatConferenceText,\n} from './brekekejs'\n\nconst { ChatClient, Logger, Constants } = UCClient0 as {\n  ChatClient: UcChatClient\n  Logger: UcLogger\n  Constants: UcConstants\n}\n\nexport { ChatClient, Constants, Logger }\n\nexport const isUcBuddy = (u: object): u is UcBuddy => {\n  return 'user_id' in u && 'group' in u\n}\n\nconst codeMapUserStatus = {\n  0: 'offline',\n  1: 'online',\n  2: 'idle',\n  3: 'busy',\n}\nconst getUserStatusFromCode = (code: number) =>\n  codeMapUserStatus[code as keyof typeof codeMapUserStatus] ||\n  codeMapUserStatus['0']\n\nconst codeMapFileState = {\n  0: 'waiting',\n  1: 'waiting',\n  2: 'started',\n  3: 'success',\n  4: 'stopped',\n  5: 'stopped',\n  6: 'failure',\n}\nconst getFileStateFromCode = (code: number) =>\n  codeMapFileState[code as keyof typeof codeMapFileState] ||\n  codeMapFileState['0']\n\nexport class UC extends EventEmitter {\n  client: UcChatClient\n  constructor() {\n    super()\n    const logger = new Logger('all')\n    this.client = new ChatClient(logger)\n\n    this.client.setEventListeners({\n      forcedSignOut: this.onConnectionStopped,\n      buddyStatusChanged: this.onUserUpdated,\n      receivedTyping: undefined,\n      receivedText: this.onTextReceived,\n      fileReceived: this.onFileReceived,\n      fileInfoChanged: this.onFileProgress,\n      fileTerminated: this.onFileFinished,\n      invitedToConference: this.onGroupInvited,\n      conferenceMemberChanged: this.onGroupUpdated,\n    })\n  }\n\n  onConnectionStopped: UcListeners['forcedSignOut'] = ev => {\n    this.emit('connection-stopped', ev)\n  }\n\n  onUserUpdated: UcListeners['buddyStatusChanged'] = ev => {\n    if (!ev) {\n      return\n    }\n\n    this.emit('user-updated', {\n      id: ev.user_id,\n      name: ev.name,\n      avatar: ev.profile_image_url,\n      status: getUserStatusFromCode(ev.status),\n      statusText: ev.display,\n    })\n  }\n\n  onTextReceived: UcListeners['receivedText'] = ev => {\n    if (!ev || !ev.sender) {\n      return\n    }\n    // handle update message on list webchat\n    // this.emit('received-webchat-text', {\n    //   conf_id: ev.conf_id,\n    //   text: ev.text,\n    // })\n\n    ev.conf_id\n      ? this.emit('group-chat-created', {\n          id: ev.received_text_id,\n          group: ev.conf_id,\n          text: ev.text,\n          creator: ev.sender.user_id,\n          created: ev.sent_ltime,\n          conf_id: ev.conf_id,\n        })\n      : this.emit('buddy-chat-created', {\n          id: ev.received_text_id,\n          text: ev.text,\n          creator: ev.sender.user_id,\n          created: ev.sent_ltime,\n        })\n  }\n\n  onFileReceived: UcListeners['fileReceived'] = ev => {\n    if (!ev || !ev.fileInfo) {\n      return\n    }\n    const fileType = formatFileType(ev.fileInfo.name)\n    const file = {\n      id: ev.fileInfo.file_id,\n      name: ev.fileInfo.name,\n      size: ev.fileInfo.size,\n      incoming: true,\n      state: getFileStateFromCode(ev.fileInfo.status),\n      transferPercent: ev.fileInfo.progress,\n      fileType,\n      topic_id: ev.topic_id,\n    }\n\n    this.emit('file-received', file)\n\n    ev.conf_id\n      ? this.emit('group-chat-created', {\n          id: ev.text_id,\n          creator: ev.fileInfo.target.user_id,\n          group: ev.conf_id,\n          file: file.id,\n          text: file.name,\n          created: ev.sent_ltime,\n        })\n      : this.emit('buddy-chat-created', {\n          id: ev.text_id,\n          creator: ev.fileInfo.target.user_id,\n          file: file.id,\n          text: file.name,\n          created: ev.sent_ltime,\n        })\n  }\n\n  onFileProgress: UcListeners['fileInfoChanged'] = ev => {\n    if (!ev || !ev.fileInfo) {\n      return\n    }\n\n    this.emit('file-progress', {\n      id: ev.fileInfo.file_id,\n      state: getFileStateFromCode(ev.fileInfo.status),\n      transferPercent: ev.fileInfo.progress,\n    })\n  }\n\n  onFileFinished: UcListeners['fileTerminated'] = ev => {\n    if (!ev || !ev.fileInfo) {\n      return\n    }\n\n    this.emit('file-finished', {\n      id: ev.fileInfo.file_id,\n      state: getFileStateFromCode(ev.fileInfo.status),\n      transferPercent: ev.fileInfo.progress,\n    })\n  }\n\n  onGroupInvited: UcListeners['invitedToConference'] = ev => {\n    if (!ev || !ev.conference) {\n      return\n    }\n    // webchat: invited from guest\n    const isWebchat = ev.conference.invite_properties?.webchatfromguest\n    this.emit('chat-group-invited', {\n      id: ev.conference.conf_id,\n      name: ev.conference.subject || ev.conference.creator.user_name || '',\n      inviter: ev.conference.from.user_id,\n      members: ev.conference.user || [],\n      webchat: isWebchat ? ev.conference : null,\n    })\n  }\n\n  onGroupUpdated: UcListeners['conferenceMemberChanged'] = ev => {\n    if (!ev || !ev.conference) {\n      return\n    }\n    // webchat: update webchat\n    const isWebchat = ev.conference.invite_properties?.webchatfromguest\n    const name =\n      (ev.conference?.subject || ev.conference.creator?.user_name || '') +\n      (isWebchat ? ' - Webchat' : '')\n    if (ev.conference.conf_status === 0) {\n      // logic if webchat user will be close via button\n      if (isWebchat) {\n        this.emit('chat-group-updated', {\n          id: ev.conference.conf_id,\n          name,\n          jointed: false,\n          webchat: isWebchat ? ev.conference : null,\n        })\n      } else {\n        this.emit('chat-group-revoked', {\n          id: ev.conference.conf_id,\n        })\n      }\n      return\n    }\n\n    this.emit('chat-group-updated', {\n      id: ev.conference.conf_id,\n      name,\n      jointed: ev.conference.conf_status === 2,\n      members: (ev.conference.user || [])\n        .filter(user => user.conf_status === 2)\n        .map(user => user.user_id),\n      webchat: isWebchat ? ev.conference : null,\n    })\n  }\n\n  connect = (a: Account, ucHost: string) => {\n    if (ucHost.indexOf(':') < 0) {\n      ucHost += ':443'\n    }\n    const ucScheme = ucHost.endsWith(':80') ? 'http' : 'https'\n    return new Promise((resolve, reject) =>\n      this.client.signIn(\n        `${ucScheme}://${ucHost}`,\n        'uc',\n        a.pbxTenant,\n        a.pbxUsername,\n        a.pbxPassword,\n        undefined,\n        () => resolve(undefined),\n        reject,\n      ),\n    )\n  }\n\n  disconnect = () => {\n    this.client.signOut()\n  }\n\n  me = () => {\n    const profile = this.client.getProfile() || {}\n    const status = this.client.getStatus() || {}\n\n    return {\n      id: profile.user_id,\n      name: profile.name,\n      avatar: profile.profile_image_url,\n      status: getUserStatusFromCode(status.status),\n      statusText: status.display,\n    }\n  }\n\n  saveProperties = (screened: boolean, user: (UcBuddyGroup | UcBuddy)[]) => {\n    return new Promise((resolve, reject) =>\n      this.client.saveProperties(\n        null,\n        null,\n        { screened, user },\n        () => resolve(undefined),\n        reject,\n      ),\n    )\n  }\n\n  setStatus = (status: string, statusText: string) => {\n    let num_status = '0'\n    if (status === 'online') {\n      num_status = '1'\n    }\n    if (status === 'busy') {\n      num_status = '3'\n    }\n    return new Promise((resolve, reject) =>\n      this.client.changeStatus(\n        num_status,\n        statusText,\n        () => resolve(undefined),\n        reject,\n      ),\n    )\n  }\n\n  getUsers = () => {\n    const buddyList = this.client.getBuddylist()\n    if (!buddyList || !Array.isArray(buddyList.user)) {\n      return []\n    }\n\n    const buddyListFiltered: UcUser[] = []\n\n    buddyList.user.forEach(user => {\n      if (isUcBuddy(user)) {\n        buddyListFiltered.push({\n          id: user.user_id,\n          name: user.name,\n          avatar: user.profile_image_url,\n          status: codeMapUserStatus['0'], // 'offline'\n          statusText: '',\n        })\n      }\n    })\n    return buddyListFiltered\n  }\n\n  getProfile = () => {\n    return this.client.getProfile()\n  }\n\n  getConfigProperties = () => {\n    const s = getAuthStore()\n    if (!s.ucConfig) {\n      s.ucConfig = this.client.getConfigProperties()\n    }\n    return s.ucConfig\n  }\n\n  readUnreadChats = async (id: string) => {\n    const res: UcReceieveUnreadText = await new Promise((resolve, reject) => {\n      this.client.receiveUnreadText(resolve, reject)\n    })\n    const readRequiredMessageIds = res.messages\n      .filter(msg => msg.requires_read && msg.sender?.user_id === id)\n      .map(msg => msg.received_text_id)\n    this.client.readText(readRequiredMessageIds)\n  }\n\n  getUnreadChats = async () => {\n    const res: UcReceieveUnreadText = await new Promise((resolve, reject) => {\n      this.client.receiveUnreadText(resolve, reject)\n    })\n\n    if (!res || !Array.isArray(res.messages)) {\n      return []\n    }\n\n    const readRequiredMessageIds = res.messages\n      .filter(msg => msg.requires_read)\n      .map(msg => msg.received_text_id)\n    this.client.readText(readRequiredMessageIds)\n\n    return res.messages.map(msg => ({\n      id: msg.received_text_id,\n      text: msg.text,\n      creator: msg.sender && msg.sender.user_id,\n      created: msg.sent_ltime,\n    }))\n  }\n\n  getBuddyChats = async (\n    buddy: string,\n    opts: {\n      max?: number\n      begin?: number\n      end?: number\n      asc?: boolean\n    } = {},\n  ) => {\n    const res: UcSearchTexts = await new Promise((resolve, reject) =>\n      this.client.searchTexts(\n        {\n          user_id: buddy,\n          max: opts.max,\n          begin: opts.begin,\n          end: opts.end,\n          asc: opts.asc,\n        },\n        resolve,\n        reject,\n      ),\n    )\n\n    if (!res || !Array.isArray(res.logs)) {\n      return []\n    }\n\n    return res.logs.map(l => {\n      return {\n        id: l.log_id,\n        text: l.content,\n        type: l.ctype,\n        creator: l.sender.user_id,\n        created: l.ltime,\n      }\n    })\n  }\n\n  getGroupChats = async (\n    group: string,\n    opts: {\n      max?: number\n      begin?: number\n      end?: number\n      asc?: boolean\n    } = {},\n  ) => {\n    const res: UcSearchTexts = await new Promise((resolve, reject) =>\n      this.client.searchTexts(\n        {\n          conf_id: group,\n          max: opts.max,\n          begin: opts.begin,\n          end: opts.end,\n          asc: opts.asc,\n        },\n        resolve,\n        reject,\n      ),\n    )\n\n    if (!res || !Array.isArray(res.logs)) {\n      return []\n    }\n\n    return res.logs.map(l => ({\n      id: l.log_id,\n      text: l.content,\n      type: l.ctype,\n      creator: l.sender.user_id,\n      created: l.ltime,\n    }))\n  }\n\n  sendBuddyChatText = (buddy: string, text: string) => {\n    return new Promise((resolve, reject) =>\n      this.client.sendText(\n        text,\n        {\n          user_id: buddy,\n        },\n        res =>\n          resolve({\n            id: res.text_id,\n            text,\n            creator: this.client.getProfile().user_id,\n            created: res.ltime,\n            ctype: Constants.CTYPE_TEXT,\n          }),\n        reject,\n      ),\n    )\n  }\n\n  sendCallResult = (duration: number, target: string) => {\n    const text = JSON.stringify({ talklen: duration })\n    return new Promise((resolve, reject) =>\n      this.client.sendCallResult(\n        { user_id: target },\n        text,\n        res =>\n          resolve({\n            id: res.text_id,\n            text,\n            creator: this.client.getProfile().user_id,\n            created: res.ltime,\n            ctype: Constants.CTYPE_CALL_RESULT,\n          }),\n        reject,\n      ),\n    )\n  }\n\n  sendGroupChatText = (group: string, text: string) => {\n    return new Promise((resolve, reject) =>\n      this.client.sendConferenceText(\n        text,\n        group,\n        res =>\n          resolve({\n            id: res.text_id,\n            text,\n            creator: this.client.getProfile().user_id,\n            created: res.ltime,\n          }),\n        reject,\n      ),\n    )\n  }\n\n  createChatGroup = async (name: string, members: string[] = []) => {\n    const res: {\n      conference: UcConference\n    } = await new Promise((resolve, reject) => {\n      this.client.createConference(name, members, resolve, reject)\n    })\n\n    return {\n      id: res.conference.conf_id,\n      name: res.conference.subject,\n      jointed: true,\n    }\n  }\n\n  joinChatGroup = async (group: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.joinConference(\n        group,\n        undefined,\n        () => resolve(undefined),\n        reject,\n      )\n    })\n\n    return {\n      id: group,\n    }\n  }\n\n  getChatGroupInfo = (conf_id: string) => {\n    return this.client.getConference(conf_id)\n  }\n  answerWebchatConference = async (conf_id: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.joinConference(\n        conf_id,\n        { exclusive: true },\n        () => resolve(undefined),\n        reject,\n      )\n    })\n  }\n  joinWebchatConference = async (conf_id: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.joinConference(\n        conf_id,\n        { exclusive: false },\n        () => resolve(undefined),\n        reject,\n      )\n    })\n  }\n  leaveChatConference = async (conf_id: string, rejoinable: boolean) => {\n    const result: UcResponseLeaveConf = await new Promise((resolve, reject) => {\n      this.client.leaveConference({ conf_id, rejoinable }, resolve, reject)\n    })\n    return result\n  }\n  leaveChatGroup = async (group: string) => {\n    await new Promise((resolve, reject) => {\n      this.client.leaveConference(\n        { conf_id: group, rejoinable: false },\n        () => resolve(undefined),\n        reject,\n      )\n    })\n\n    return {\n      id: group,\n    }\n  }\n\n  inviteChatGroupMembers = (group: string, members: string[]) => {\n    return new Promise((resolve, reject) => {\n      this.client.inviteToConference(\n        group,\n        members,\n        () => resolve(undefined),\n        reject,\n      )\n    })\n  }\n\n  acceptFile = (file: string) => {\n    const res = new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest()\n      xhr.responseType = 'blob'\n\n      xhr.onload = function () {\n        if (this.status === 200) {\n          resolve(this['response'])\n        }\n      }\n\n      this.client.acceptFileWithXhr(file, xhr, reject)\n    })\n    return res\n  }\n\n  rejectFile = async (file: { id?: string; file_id_target?: string[] }) => {\n    if (file.file_id_target) {\n      file.file_id_target.map(f => {\n        return new Promise((resolve, reject) => {\n          this.client.cancelFile(f, (err?: Error) => {\n            if (err) {\n              reject(err)\n            } else {\n              resolve(undefined)\n            }\n          })\n        })\n      })\n    } else if (file.id) {\n      return new Promise((resolve, reject) => {\n        this.client.cancelFile(file.id || '', (err?: Error) => {\n          if (err) {\n            reject(err)\n          } else {\n            resolve(undefined)\n          }\n        })\n      })\n    }\n  }\n\n  sendFile = async (user_id: string, file: Blob) => {\n    let inputw: HTMLInputElement | undefined\n    if (Platform.OS === 'web') {\n      inputw = document.createElement('input')\n      inputw.type = 'file'\n      inputw.name = 'file'\n      inputw.files = (() => {\n        let b: DataTransfer | undefined\n        if (window.DataTransfer) {\n          b = new DataTransfer()\n        } else if (window.ClipboardEvent) {\n          b = new ClipboardEvent('').clipboardData || undefined\n        }\n        if (!b) {\n          console.error('Can not set input.files: empty data transfer')\n          return null\n        }\n\n        b.items.add(file as File)\n        return b.files\n      })()\n      const form = document.createElement('form')\n      form.appendChild(inputw)\n    }\n\n    let inputrn: object | undefined\n    if (Platform.OS !== 'web') {\n      const fd = new FormData()\n      fd.append('file', {\n        ...file,\n        type: 'multipart/form-data',\n      })\n      inputrn = {\n        form: 'This is not a form element, see src/api/uc.ts for detail',\n        files: [file],\n        __rnFormData: fd,\n      }\n    }\n\n    const res: UcSendFile = await new Promise((resolve, reject) =>\n      this.client.sendFile(\n        {\n          user_id,\n        },\n        inputw || inputrn,\n        resolve,\n        reject,\n      ),\n    )\n    return {\n      file: {\n        id: res.fileInfo.file_id,\n        name: res.fileInfo.name,\n        size: res.fileInfo.size,\n        state: getFileStateFromCode(res.fileInfo.status),\n        transferPercent: res.fileInfo.progress,\n        topic_id: res.topic_id,\n      },\n\n      chat: {\n        id: res.text_id,\n        file: res.fileInfo.file_id,\n        text: res.fileInfo.name,\n        type: -1, // TODO\n        creator: this.client.getProfile().user_id,\n        created: res.ltime,\n      },\n    }\n  }\n\n  sendFiles = async (conf_id: string, file: Blob) => {\n    let inputw: HTMLInputElement | undefined\n    if (Platform.OS === 'web') {\n      inputw = document.createElement('input')\n      inputw.type = 'file'\n      inputw.name = 'file'\n      inputw.files = (() => {\n        let b: DataTransfer | undefined\n        if (window.DataTransfer) {\n          b = new DataTransfer()\n        } else if (window.ClipboardEvent) {\n          const e = new ClipboardEvent('')\n          b = e.clipboardData || undefined\n        }\n        if (!b) {\n          console.error('Can not set input.files: empty data transfer')\n          return null\n        }\n        b.items.add(file as File)\n        return b.files\n      })()\n      const form = document.createElement('form')\n      form.appendChild(inputw)\n    }\n\n    let inputrn: object | undefined\n    if (Platform.OS !== 'web') {\n      const fd = new FormData()\n\n      fd.append('file', {\n        ...file,\n        type: 'multipart/form-data',\n      })\n\n      inputrn = {\n        form: 'This is not a form element, see src/api/uc.ts for detail',\n        files: [file],\n        __rnFormData: fd,\n      }\n    }\n\n    const res: UcSendFiles = await new Promise((resolve, reject) =>\n      this.client.sendFiles(\n        {\n          conf_id,\n          input: inputw || inputrn,\n        },\n        [file],\n        resolve,\n        reject,\n      ),\n    )\n    const file_res = res.infoList[0]\n    return {\n      file: {\n        id: file_res.fileInfo.file_id,\n        name: file_res.fileInfo.name,\n        // file_id_target: file_res.fileInfos.map(f => f.file_id),\n        size: file_res.fileInfo.size,\n        state: getFileStateFromCode(file_res.fileInfo.status),\n        transferPercent: file_res.fileInfo.progress,\n        topic_id: file_res.topic_id,\n      } as ChatFile,\n\n      chat: {\n        id: file_res.text_id,\n        file: file_res.fileInfo.file_id,\n        text: file_res.fileInfo.name,\n        type: -1, // TODO\n        creator: this.client.getProfile().user_id,\n        created: file_res.ltime,\n      },\n    }\n  }\n\n  peekWebchatConferenceText = async (conf_id: string) => {\n    const res: UcWebchatConferenceText = await new Promise((resolve, reject) =>\n      this.client.peekWebchatConferenceText({ conf_id }, resolve, reject),\n    )\n    if (!res.messages.length) {\n      return []\n    }\n    return res.messages.map(message => message.text)\n  }\n}\n\nexport const uc = new UC()\n","import { FC, forwardRef } from 'react'\nimport { TouchableOpacity, TouchableOpacityProps } from 'react-native'\n\nexport const RnTouchableOpacity: FC<TouchableOpacityProps> = forwardRef(\n  (props, ref) => (\n    <TouchableOpacity\n      activeOpacity={0.8}\n      ref={ref as (instance: unknown) => void}\n      {...props}\n    />\n  ),\n)\n","import { flow, omit } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { ReactElementLike } from 'prop-types'\nimport { FC, useRef } from 'react'\nimport {\n  ActivityIndicator,\n  Keyboard,\n  Platform,\n  StyleSheet,\n  TextInputProps,\n  TouchableOpacityProps,\n  View,\n  ViewProps,\n} from 'react-native'\n\nimport {\n  mdiCardsDiamond,\n  mdiClose,\n  mdiPlus,\n  mdiUnfoldMoreHorizontal,\n} from '../assets/icons'\nimport { intl } from '../stores/intl'\nimport { RnPicker } from '../stores/RnPicker'\nimport { useStore } from '../utils/useStore'\nimport { RnIcon, RnSwitch, RnText, RnTextInput, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nexport type Park = {\n  number: string\n  name?: string\n}\nconst css = StyleSheet.create({\n  Field: {\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    alignItems: 'stretch',\n    marginHorizontal: 15,\n    ...Platform.select({\n      android: {\n        paddingBottom: 2,\n      },\n    }),\n  },\n  Field__focusing: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  Field__disabled: {\n    backgroundColor: v.hoverBg,\n  },\n  Field__group: {\n    marginHorizontal: 0,\n    marginTop: 15,\n    backgroundColor: v.borderBg,\n    padding: 15,\n  },\n  Field__groupMargin: {\n    marginTop: 30,\n  },\n  Field__transparent: {\n    borderColor: 'transparent',\n    marginHorizontal: 0,\n  },\n  Field_Label: {\n    paddingTop: 13,\n    paddingBottom: 0,\n    paddingLeft: 7,\n    ...Platform.select({\n      android: {\n        paddingTop: 3,\n        top: 6,\n      },\n      web: {\n        // Fix form auto fill style on web\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n      },\n    }),\n  },\n  Field_LabelText: {\n    color: v.subColor,\n    fontWeight: v.fontWeight,\n  },\n  Field_LabelTextGroup: {\n    ...Platform.select({\n      android: {\n        top: -6,\n      },\n    }),\n  },\n  Field_ViewRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 40,\n  },\n  Field_Park_TextInput: {\n    flex: 1,\n    paddingBottom: 3,\n    paddingLeft: 7,\n    paddingRight: 10,\n    // fontWeight: 'bold',\n    overflow: 'hidden',\n    ...Platform.select({\n      android: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        lineHeight: v.lineHeight,\n        // Should not set height and overflow here\n        //    it will cause scroll issue with the input\n        // height: g.lineHeight,\n      },\n      web: {\n        // Fix form auto fill style on web\n        paddingTop: 28,\n        width: '100%',\n      },\n      default: {\n        paddingTop: 1,\n      },\n    }),\n  },\n  Field_TextInput: {\n    width: '100%',\n    paddingBottom: 3,\n    paddingLeft: 7,\n    paddingRight: 40,\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    ...Platform.select({\n      android: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        lineHeight: v.lineHeight,\n        // Should not set height and overflow here\n        //    it will cause scroll issue with the input\n        // height: g.lineHeight,\n      },\n      web: {\n        // Fix form auto fill style on web\n        paddingTop: 28,\n      },\n      default: {\n        paddingTop: 1,\n      },\n    }),\n  },\n  Field_Switch: {\n    position: 'absolute',\n    top: 22,\n    right: 11,\n  },\n  Field_Btn: {\n    position: 'absolute',\n    top: 11,\n    right: 5,\n    width: 40,\n    height: 30,\n    borderRadius: v.borderRadius,\n  },\n  Field_Btn__create: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  Field_Btn__remove: {\n    backgroundColor: v.colors.dangerFn(0.5),\n  },\n  Field_Icon: {\n    position: 'absolute',\n    top: 15,\n    right: 15,\n  },\n  Field_Error: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  Field_ErrorInner: {\n    alignSelf: 'flex-start',\n    marginVertical: 2,\n    marginHorizontal: 15,\n    paddingVertical: 2,\n    paddingHorizontal: 10,\n    backgroundColor: v.colors.danger,\n    borderRadius: v.borderRadius,\n  },\n  Field_ErrorIcon: {\n    position: 'absolute',\n    top: -8,\n    left: 2,\n  },\n  Field_ErrorLabel: {\n    color: v.revColor,\n  },\n  Loading: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'black',\n    opacity: 0.3,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\nconst noop = () => {}\n\nexport const Field: FC<\n  Partial<{\n    isGroup: boolean\n    hasMargin: boolean\n    label: string\n    onCreateBtnPress(): void\n    onValueChange: Function\n    createBtnStyle: TouchableOpacityProps['style']\n    createBtnIcon: string\n    createBtnIconStyle: ViewProps['style']\n    removeBtnStyle: TouchableOpacityProps['style']\n    removeBtnIcon: string\n    removeBtnIconStyle: ViewProps['style']\n    onRemoveBtnPress(): void\n    type: 'Switch' | 'RnPicker' | 'PARK'\n    valueRender: Function\n    value: string | boolean | Park\n    textInputStyle?: TextInputProps['style']\n    options: {\n      key: string\n      label: string\n    }[]\n    icon: string\n    onBlur(): void\n    onFocus(): void\n    onSubmitEditing(): void\n    style: TextInputProps['style']\n    disabled: boolean\n    inputElement: ReactElementLike | null\n    onTouchPress(): void\n    transparent: boolean\n    secureTextEntry: boolean\n    iconRender: Function\n    error: string\n    loading: boolean\n    horizontalInput: string[]\n    maxLength?: number\n  }>\n> = observer(({ ...props }) => {\n  if (props.isGroup) {\n    return (\n      <View\n        style={[\n          css.Field,\n          css.Field__group,\n          props.hasMargin && css.Field__groupMargin,\n        ]}\n      >\n        <RnText small style={css.Field_LabelTextGroup}>\n          {props.label}\n        </RnText>\n      </View>\n    )\n  }\n  const $0 = useStore(() => ({\n    observable: {\n      isFocusing: false,\n      isParkNameFocusing: false,\n      park: {\n        number: '',\n        name: '',\n      },\n    },\n  }))\n  const $ = $0 as typeof $0 & {\n    isFocusing: boolean\n    isParkNameFocusing: boolean\n    park: Park\n  }\n  const inputRef = useRef<HTMLInputElement>()\n  const inputRefName = useRef<HTMLInputElement>()\n  if (!inputRef.current && $.isFocusing) {\n    $.set('isFocusing', false)\n  }\n  if (!inputRefName.current && $.isParkNameFocusing) {\n    $.set('isParkNameFocusing', false)\n  }\n  if (props.onCreateBtnPress) {\n    Object.assign(props, {\n      iconRender: () => (\n        <RnTouchableOpacity\n          onPress={props.onCreateBtnPress}\n          style={[css.Field_Btn, css.Field_Btn__create, props.createBtnStyle]}\n        >\n          <RnIcon\n            color={v.colors.primary}\n            path={props.createBtnIcon || mdiPlus}\n            size={18}\n            style={props.createBtnIconStyle}\n          />\n        </RnTouchableOpacity>\n      ),\n    })\n  }\n  if (props.onRemoveBtnPress) {\n    Object.assign(props, {\n      iconRender: () => (\n        <RnTouchableOpacity\n          onPress={props.onRemoveBtnPress}\n          style={[css.Field_Btn, css.Field_Btn__remove, props.removeBtnStyle]}\n        >\n          <RnIcon\n            color={v.colors.danger}\n            path={props.removeBtnIcon || mdiClose}\n            size={15}\n            style={props.removeBtnIconStyle}\n          />\n        </RnTouchableOpacity>\n      ),\n    })\n  }\n  const renderPark = () => {\n    const value = props.value as Park\n    const onChangeName = (text: string) => {\n      const newPark = { ...$.park, name: text }\n      $.set('park', newPark)\n      if (props.onValueChange) {\n        props.onValueChange(newPark)\n      }\n    }\n    const onChangeNumber = (text: string) => {\n      const newPark = { ...$.park, number: text.trim() }\n      $.set('park', newPark)\n      if (props.onValueChange) {\n        props.onValueChange(newPark)\n      }\n    }\n    return (\n      <View style={css.Field_ViewRow}>\n        <RnTextInput\n          ref={inputRef}\n          {...omit(props, [\n            'type',\n            'label',\n            'valueRender',\n            'icon',\n            'iconRender',\n            'onValueChange',\n            'onCreateBtnPress',\n            'createBtnIcon',\n            'onRemoveBtnPress',\n            'removeBtnIcon',\n            'disabled',\n            'error',\n          ])}\n          placeholder={intl`park number`}\n          placeholderTextColor={'grey'}\n          onBlur={() => {\n            if (Platform.OS === 'web') {\n              $.set('isFocusing', false)\n            }\n          }}\n          onChangeText={txt => onChangeNumber(txt)}\n          onFocus={() => {\n            if (Platform.OS !== 'web') {\n              $.set('isParkNameFocusing', false)\n            }\n            $.set('isFocusing', true)\n          }}\n          style={[css.Field_Park_TextInput, props.style]}\n          value={value.number as string}\n        />\n        <RnTextInput\n          ref={inputRefName}\n          {...omit(props, [\n            'type',\n            'label',\n            'valueRender',\n            'icon',\n            'iconRender',\n            'onValueChange',\n            'onCreateBtnPress',\n            'createBtnIcon',\n            'onRemoveBtnPress',\n            'removeBtnIcon',\n            'disabled',\n            'error',\n          ])}\n          placeholder={intl`label`}\n          placeholderTextColor={'grey'}\n          onBlur={() => {\n            if (Platform.OS === 'web') {\n              $.set('isParkNameFocusing', false)\n            }\n          }}\n          onChangeText={txt => onChangeName(txt)}\n          onFocus={() => {\n            if (Platform.OS !== 'web') {\n              $.set('isFocusing', false)\n            }\n            $.set('isParkNameFocusing', true)\n          }}\n          style={[css.Field_Park_TextInput, props.style]}\n          value={value.name as string}\n        />\n      </View>\n    )\n  }\n  if (props.onValueChange) {\n    if (props.type === 'Switch') {\n      Object.assign(props, {\n        valueRender:\n          props.valueRender ||\n          ((e: boolean) => (e ? intl`Enabled` : intl`Disabled`)),\n        iconRender: (e: boolean) => (\n          <RnSwitch enabled={e} style={css.Field_Switch} />\n        ),\n        onTouchPress: () => {\n          props.onValueChange?.(!props.value)\n          Keyboard.dismiss()\n        },\n      })\n    } else if (props.type === 'RnPicker') {\n      Object.assign(props, {\n        valueRender: (k: string) =>\n          props.options?.find(o => o.key === k)?.label || k,\n        onTouchPress: () => {\n          RnPicker.open({\n            options: props.options || [],\n            selectedKey: props.value as string,\n            onSelect: props.onValueChange as Function,\n          })\n          Keyboard.dismiss()\n        },\n        icon: props.icon || mdiUnfoldMoreHorizontal,\n      })\n    } else if (props.type === 'PARK') {\n      Object.assign(props, {\n        inputElement: renderPark(),\n        onTouchPress: () => {\n          if (!$.isFocusing && !$.isParkNameFocusing) {\n            inputRef.current?.focus()\n          }\n        },\n      })\n    } else {\n      Object.assign(props, {\n        inputElement: (\n          <RnTextInput\n            ref={inputRef}\n            {...omit(props, [\n              'type',\n              'label',\n              'valueRender',\n              'icon',\n              'iconRender',\n              'onValueChange',\n              'onCreateBtnPress',\n              'createBtnIcon',\n              'onRemoveBtnPress',\n              'removeBtnIcon',\n              'disabled',\n              'error',\n            ])}\n            onBlur={flow([\n              () => $.set('isFocusing', false),\n              props.onBlur || noop,\n            ])}\n            onChangeText={txt => props.onValueChange?.(txt)}\n            onFocus={flow([\n              () => $.set('isFocusing', true),\n              props.onFocus || noop,\n            ])}\n            onSubmitEditing={flow([\n              props.onCreateBtnPress || noop,\n              props.onSubmitEditing || noop,\n            ])}\n            style={[css.Field_TextInput, props.style]}\n            value={props.value as string}\n          />\n        ),\n        onTouchPress: () => inputRef.current?.focus(),\n      })\n    }\n  }\n  if (props.disabled) {\n    props.inputElement = null\n    props.onTouchPress = undefined\n  }\n  const Container = props.onTouchPress ? RnTouchableOpacity : View\n  const label = (\n    <View pointerEvents='none' style={css.Field_Label}>\n      <RnText small style={css.Field_LabelText}>\n        {props.label}\n      </RnText>\n    </View>\n  )\n\n  return (\n    <>\n      <Container\n        accessible={!props.inputElement}\n        onPress={props.onTouchPress}\n        style={[\n          css.Field,\n          ($.isFocusing || $.isParkNameFocusing) && css.Field__focusing,\n          props.disabled && css.Field__disabled,\n          props.transparent && css.Field__transparent,\n        ]}\n      >\n        {/* Fix form auto fill style on web */}\n        {Platform.OS !== 'web' && label}\n        {\n          <View\n            pointerEvents={\n              ($.isFocusing || $.isParkNameFocusing ? null : 'none') as any\n            }\n          >\n            {props.inputElement || (\n              <RnTextInput\n                disabled\n                maxLength={props?.maxLength || 100000}\n                secureTextEntry={!!(props.secureTextEntry && props.value)}\n                style={[css.Field_TextInput, props.textInputStyle]}\n                value={\n                  props.valueRender?.(props.value) || props.value || '\\u200a'\n                }\n              />\n            )}\n            {!$.isFocusing && <View style={StyleSheet.absoluteFill} />}\n          </View>\n        }\n        {/* Fix form auto fill style on web */}\n        {Platform.OS === 'web' && label}\n        {props.iconRender?.(props.value) ||\n          (props.icon && (\n            <RnIcon\n              path={props.icon}\n              pointerEvents='none'\n              style={css.Field_Icon}\n            />\n          ))}\n        {props.loading && (\n          <View style={css.Loading}>\n            <ActivityIndicator size='small' color='white' />\n          </View>\n        )}\n      </Container>\n      {props.error && (\n        <RnTouchableOpacity\n          onPress={() => inputRef.current?.focus()}\n          style={css.Field_Error}\n        >\n          <View style={css.Field_ErrorInner}>\n            <RnIcon\n              color={v.colors.danger}\n              path={mdiCardsDiamond}\n              style={css.Field_ErrorIcon}\n            />\n            <RnText small style={css.Field_ErrorLabel}>\n              {props.error}\n            </RnText>\n          </View>\n        </RnTouchableOpacity>\n      )}\n    </>\n  )\n})\n","import { get } from 'lodash'\n\nexport const arrToMap = (\n  arr: Array<unknown>,\n  k?: string | Function,\n  v?: string | Function,\n) =>\n  arr.reduce(\n    (m, item, i) => ({\n      ...(m as object),\n      [typeof k === 'function' ? k(item, i) : k ? get(item, k) : item]:\n        typeof v === 'function' ? v(item, i) : v ? get(item, v) : true,\n    }),\n    {},\n  ) as object\nexport const mapToMap = (\n  map: { [k: string]: unknown },\n  k?: string | Function,\n  v?: string | Function,\n) =>\n  arrToMap(\n    Object.keys(map),\n    typeof k === 'function' ? k : (ki: string) => (k ? get(map[ki], k) : ki),\n    typeof v === 'function' ? v : (ki: string) => (v ? get(map[ki], v) : true),\n  ) as object\n","import { BackgroundTimer } from '../utils/BackgroundTimer'\n\nexport const waitTimeout = (time = 300) =>\n  new Promise<undefined>(resolve => {\n    BackgroundTimer.setTimeout(() => resolve(undefined), time)\n  })\n","import 'brekekejs/lib/jsonrpc'\nimport 'brekekejs/lib/pal'\n\nimport EventEmitter from 'eventemitter3'\nimport { Platform } from 'react-native'\n\nimport { bundleIdentifier, fcmApplicationId } from '../config'\nimport { embedApi } from '../embed/embedApi'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { getAuthStore, waitPbx } from '../stores/authStore'\nimport { PbxUser, Phonebook } from '../stores/contactStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { toBoolean } from '../utils/string'\nimport { Pbx, PbxEvent } from './brekekejs'\nimport { parseCallParams, parsePalParams } from './parseParamsWithPrefix'\nimport { PnCommand, PnParams, PnParamsNew, PnServiceId } from './pnConfig'\n\nexport class PBX extends EventEmitter {\n  client?: Pbx\n  private connectTimeoutId = 0\n\n  // wait auth state to success\n  isMainInstance = true\n\n  connect = async (\n    a: Account,\n    palParamUserReconnect?: boolean,\n  ): Promise<boolean> => {\n    console.log('PBX PN debug: call pbx.connect')\n    if (this.client) {\n      console.warn('PAL client already connected, ignore...')\n      return true\n    }\n\n    const d = await accountStore.findDataAsync(a)\n    const oldPalParamUser = d.palParams?.['user']\n    console.log(\n      `PBX PN debug: construct pbx.client - webphone.pal.param.user=${oldPalParamUser}`,\n    )\n\n    const wsUri = `wss://${a.pbxHostname}:${a.pbxPort}/pbx/ws`\n    const client = window.Brekeke.pbx.getPal(wsUri, {\n      tenant: a.pbxTenant,\n      login_user: a.pbxUsername,\n      login_password: a.pbxPassword,\n      _wn: d.accessToken,\n      park: a.parks || [],\n      voicemail: 'self',\n      status: true,\n      secure_login_password: false,\n      phonetype: 'webphone',\n      callrecording: 'self',\n      ...d.palParams,\n      ...embedApi._palParams,\n    })\n    this.client = client\n\n    client.debugLevel = 2\n    client.call_pal = (method: keyof Pbx, params?: object) => {\n      return new Promise((resolve, reject) => {\n        const f = client[method] as Function\n        if (typeof f !== 'function') {\n          return reject(new Error(`PAL client doesn't support \"${method}\"`))\n        }\n        f.call(client, params, resolve, reject)\n      })\n    }\n\n    const newTimeoutPromise = () => {\n      this.clearConnectTimeoutId()\n      return new Promise<boolean>(resolve => {\n        this.connectTimeoutId = BackgroundTimer.setTimeout(() => {\n          resolve(false)\n          console.warn('Pbx login connection timed out')\n          // Fix case already reconnected\n          if (client === this.client) {\n            this.disconnect()\n          } else {\n            client.close()\n          }\n        }, 10000)\n      })\n    }\n\n    let resolveFn: Function | undefined = undefined\n    const connected = new Promise<boolean>(r => {\n      resolveFn = r\n    })\n    const pendingServerStatus: PbxEvent['serverStatus'][] = []\n    client.notify_serverstatus = e => {\n      pendingServerStatus.push(e)\n      if (!e?.status) {\n        return\n      }\n      if (e.status === 'active') {\n        resolveFn?.(true)\n        resolveFn = undefined\n      } else if (e.status === 'inactive') {\n        resolveFn?.(false)\n        resolveFn = undefined\n      }\n    }\n    const pendingClose: unknown[] = []\n    client.onClose = () => {\n      pendingClose.push()\n      resolveFn?.(false)\n      resolveFn = undefined\n    }\n    const pendingError: Error[] = []\n    client.onError = err => {\n      pendingError.push(err)\n      resolveFn?.(false)\n      resolveFn = undefined\n    }\n\n    // Emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('pal', client)\n    }\n\n    const login = new Promise<boolean>((resolve, reject) =>\n      client.login(() => resolve(true), reject),\n    )\n    await Promise.race([login, newTimeoutPromise()])\n    this.clearConnectTimeoutId()\n\n    const isConnected = async () => {\n      const r = await Promise.race([connected, newTimeoutPromise()])\n      this.clearConnectTimeoutId()\n      return r\n    }\n\n    // in syncPnToken, isMainInstance = false\n    // we will not proceed further in that case\n    if (!this.isMainInstance) {\n      return isConnected()\n    }\n\n    // Check again webphone.pal.param.user\n    if (!palParamUserReconnect) {\n      const as = getAuthStore()\n      // TODO any function get pbxConfig on this time may get undefined\n      as.pbxConfig = undefined\n      await isConnected()\n      await this.getConfig(true)\n      const newPalParamUser = as.pbxConfig?.['webphone.pal.param.user']\n      if (newPalParamUser !== oldPalParamUser) {\n        console.warn(\n          `Attempt to reconnect due to mismatch webphone.pal.param.user after login: old=${oldPalParamUser} new=${newPalParamUser}`,\n        )\n        this.disconnect()\n        return this.connect(a, true)\n      }\n    }\n\n    // register client direct event handlers\n    client.onClose = this.onClose\n    pendingClose.forEach(client.onClose)\n    client.onError = this.onError\n    pendingError.forEach(client.onError)\n    client.notify_serverstatus = this.onServerStatus\n    pendingServerStatus.forEach(client.notify_serverstatus)\n    client.notify_park = this.onPark\n    client.notify_callrecording = this.onCallRecording\n    client.notify_voicemail = this.onVoicemail\n    client.notify_status = this.onUserStatus\n\n    return connected\n  }\n\n  // pal client direct event handlers\n  private onClose = () => {\n    this.emit('connection-stopped')\n  }\n  private onError = (err: Error) => {\n    console.error('pbx.client.onError:', err)\n  }\n  private onServerStatus = (e: PbxEvent['serverStatus']) => {\n    if (!e?.status) {\n      return\n    }\n    if (e.status === 'active') {\n      this.emit('connection-started')\n    } else if (e.status === 'inactive') {\n      this.emit('connection-stopped')\n    }\n  }\n  // {\"room_id\":\"282000000230\",\"talker_id\":\"1416\",\"time\":1587451427817,\"park\":\"777\",\"status\":\"on\"}\n  // {\"time\":1587451575120,\"park\":\"777\",\"status\":\"off\"}\n  private onPark = (e: PbxEvent['park']) => {\n    if (!e?.status) {\n      return\n    }\n    // TODO\n    if (e.status === 'on') {\n      this.emit('park-started', e.park)\n    } else if (e.status === 'off') {\n      this.emit('park-stopped', e.park)\n    }\n  }\n  private onCallRecording = (e: PbxEvent['callRecording']) => {\n    if (!e) {\n      return\n    }\n    this.emit('call-recording', e)\n  }\n  private onVoicemail = (e: PbxEvent['voicemail']) => {\n    if (!e) {\n      return\n    }\n    this.emit('voicemail-updated', e)\n  }\n  private onUserStatus = (e: PbxEvent['userStatus']) => {\n    if (!e) {\n      return\n    }\n    switch (e.status) {\n      case '14':\n      case '2':\n      case '36':\n        return this.emit('user-talking', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '35':\n        return this.emit('user-holding', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '-1':\n        return this.emit('user-hanging', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '1':\n        return this.emit('user-calling', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      case '65':\n        return this.emit('user-ringing', {\n          user: e.user,\n          talker: e.talker_id,\n        })\n      default:\n        return\n    }\n  }\n\n  disconnect = () => {\n    if (this.client) {\n      this.client.close()\n      this.client = undefined\n      console.log('PBX PN debug: pbx.client set to null')\n    }\n    this.clearConnectTimeoutId()\n  }\n  private clearConnectTimeoutId = () => {\n    if (this.connectTimeoutId) {\n      BackgroundTimer.clearTimeout(this.connectTimeoutId)\n      this.connectTimeoutId = 0\n    }\n  }\n\n  getConfig = async (skipWait?: boolean) => {\n    if (this.isMainInstance) {\n      const s = getAuthStore()\n      if (s.pbxConfig) {\n        return s.pbxConfig\n      }\n      if (!skipWait) {\n        await waitPbx()\n      }\n    }\n    if (!this.client) {\n      return\n    }\n    const config = await this.client.call_pal('getProductInfo', {\n      webphone: 'true',\n    })\n    if (!this.isMainInstance) {\n      return config\n    }\n    const s = getAuthStore()\n    s.pbxConfig = config\n    const d = await s.getCurrentDataAsync()\n    if (this.isMainInstance) {\n      BrekekeUtils.setPbxConfig(JSON.stringify(parseCallParams(s.pbxConfig)))\n    }\n    d.palParams = parsePalParams(s.pbxConfig)\n    d.userAgent = s.pbxConfig['webphone.useragent']\n    d.pnExpires = s.pbxConfig['webphone.pn_expires']\n    accountStore.updateAccountData(d)\n    return s.pbxConfig\n  }\n\n  createSIPAccessToken = async (sipUsername: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    return this.client.call_pal('createAuthHeader', {\n      username: sipUsername,\n    })\n  }\n\n  getUsers = async (tenant: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    return this.client.call_pal('getExtensions', {\n      tenant,\n      pattern: '..*',\n      limit: -1,\n      type: 'user',\n      property_names: ['name'],\n    })\n  }\n  getExtraUsers = async (ids: string[]): Promise<PbxUser[] | undefined> => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    const cp = getAuthStore().getCurrentAccount()\n    if (!this.client || !cp) {\n      return\n    }\n    const res = await this.client.call_pal('getExtensionProperties', {\n      tenant: cp.pbxTenant,\n      extension: ids,\n      property_names: ['name'],\n    })\n    // server return \"No permission.\" if id not exist on Pbx.\n    return res.map((r, i) => ({\n      id: ids[i],\n      name: (r as any as string) === 'No permission.' ? '' : r[0],\n    }))\n  }\n\n  getPbxPropertiesForCurrentUser = async (tenant: string, userId: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n\n    const [res] = await this.client.call_pal('getExtensionProperties', {\n      tenant,\n      extension: [userId],\n      property_names: [\n        'name',\n        'p1_ptype',\n        'p2_ptype',\n        'p3_ptype',\n        'p4_ptype',\n        'pnumber',\n        'language',\n      ],\n    })\n\n    const pnumber = ('' + res[5]).split(',')\n\n    const phones = [\n      {\n        id: pnumber[0],\n        type: res[1],\n      },\n      {\n        id: pnumber[1],\n        type: res[2],\n      },\n      {\n        id: pnumber[2],\n        type: res[3],\n      },\n      {\n        id: pnumber[3],\n        type: res[4],\n      },\n    ]\n\n    const lang = res[6]\n    const userName = res[0]\n\n    return {\n      id: userId,\n      name: userName,\n      phones,\n      language: lang,\n    }\n  }\n\n  getContacts = async ({\n    search_text,\n    offset,\n    limit,\n  }: {\n    search_text: string\n    offset: number\n    limit: number\n  }) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    const res = await this.client.call_pal('getContactList', {\n      phonebook: '',\n      search_text,\n      offset,\n      limit,\n    })\n    return res.map(contact => ({\n      id: contact.aid,\n      display_name: contact.display_name,\n      phonebook: contact.phonebook,\n      user: contact.user,\n      shared: !contact?.user,\n      info: {},\n    }))\n  }\n  getPhonebooks = async () => {\n    if (!this.client) {\n      return\n    }\n    const res = await this.client.call_pal('getPhonebooks', {})\n    return res?.filter(item => !item.shared) || []\n  }\n  getContact = async (id: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n\n    const res = await this.client.call_pal('getContact', {\n      aid: id,\n    })\n\n    res.info = res.info || {}\n    return {\n      id: res.aid,\n      display_name: res.display_name,\n      phonebook: res.phonebook,\n      shared: toBoolean(res.shared),\n      info: res.info,\n    }\n  }\n  deleteContact = async (id: string[]) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    const res = await this.client.call_pal('deleteContact', {\n      aid: id,\n    })\n    return res\n  }\n  setContact = async (contact: Phonebook) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return\n    }\n    return this.client.call_pal('setContact', {\n      aid: contact.id,\n      phonebook: contact.phonebook,\n      shared: contact.shared ? 'true' : 'false',\n      display_name: contact.display_name,\n      info: contact.info,\n    })\n  }\n\n  holdTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('hold', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  unholdTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('unhold', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  startRecordingTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('startRecording', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  stopRecordingTalker = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('stopRecording', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  transferTalkerBlind = async (\n    tenant: string,\n    talker: string,\n    toUser: string,\n  ) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('transfer', {\n      tenant,\n      user: toUser,\n      tid: talker,\n      mode: 'blind',\n    })\n    return true\n  }\n\n  transferTalkerAttended = async (\n    tenant: string,\n    talker: string,\n    toUser: string,\n  ) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('transfer', {\n      tenant,\n      user: toUser,\n      tid: talker,\n    })\n    return true\n  }\n\n  joinTalkerTransfer = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('conference', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  stopTalkerTransfer = async (tenant: string, talker: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('cancelTransfer', {\n      tenant,\n      tid: talker,\n    })\n    return true\n  }\n\n  parkTalker = async (tenant: string, talker: string, atNumber: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('park', {\n      tenant,\n      tid: talker,\n      number: atNumber,\n    })\n    return true\n  }\n\n  sendDTMF = async (signal: string, tenant: string, talker_id: string) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    await this.client.call_pal('sendDTMF', {\n      signal,\n      tenant,\n      talker_id,\n    })\n    return true\n  }\n\n  pnmanage = async (d: PnParamsNew) => {\n    if (this.isMainInstance) {\n      await waitPbx()\n    }\n    if (!this.client) {\n      return false\n    }\n    const {\n      pnmanageNew,\n      command,\n      service_id,\n      device_id,\n      device_id_voip,\n      auth_secret,\n      endpoint,\n      key,\n    } = d\n    let isFcm = false\n    const arr = Array.isArray(service_id) ? service_id : [service_id]\n    arr.forEach(id => {\n      if (id === PnServiceId.fcm || id === PnServiceId.web) {\n        isFcm = true\n      } else if (isFcm) {\n        throw new Error('Can not mix service_id fcm/web together with apns/lpc')\n      }\n    })\n    let application_id = isFcm ? fcmApplicationId : bundleIdentifier\n    let { username } = d\n    if (!pnmanageNew && d.voip) {\n      if (!isFcm) {\n        application_id += '.voip'\n      }\n      username += '@voip'\n    }\n    await this.client.call_pal('pnmanage', {\n      command,\n      service_id,\n      application_id,\n      user_agent: Platform.OS === 'web' ? navigator.userAgent : 'react-native',\n      username,\n      device_id,\n      device_id_voip,\n      add_voip: pnmanageNew ? true : undefined,\n      add_device_id_suffix: pnmanageNew ? true : undefined,\n      auth_secret,\n      endpoint,\n      key,\n    })\n    return true\n  }\n\n  setWebPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.set,\n      service_id: PnServiceId.web,\n    })\n  }\n  removeWebPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.remove,\n      service_id: PnServiceId.web,\n    })\n  }\n\n  setFcmPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.set,\n      service_id: PnServiceId.fcm,\n    })\n  }\n  removeFcmPnToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.remove,\n      service_id: PnServiceId.fcm,\n    })\n  }\n\n  setApnsToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.set,\n      service_id: PnServiceId.apns,\n    })\n  }\n  removeApnsToken = async (d: PnParams) => {\n    return this.pnmanage({\n      ...d,\n      command: PnCommand.remove,\n      service_id: PnServiceId.apns,\n    })\n  }\n}\n\nexport const pbx = new PBX()\n","import { observer } from 'mobx-react'\nimport { FC, ReactNode } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { Conference } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport {\n  mdiAccountGroup,\n  mdiPhoneIncoming,\n  mdiPhoneMissed,\n  mdiPhoneOutgoing,\n} from '../assets/icons'\nimport { getPartyName } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { trimHtml } from '../utils/trimHtml'\nimport { Avatar } from './Avatar'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { RnCheckBox } from './RnCheckbox'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Outer: {\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n  },\n  Inner: {\n    flexDirection: 'row',\n    paddingLeft: 10,\n  },\n  Inner_selected: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  //\n  WithSpace: {\n    marginVertical: 5,\n  },\n  //\n  Text: {\n    flex: 1,\n    paddingTop: 7,\n    paddingLeft: 10,\n  },\n  NameWithStatus: {\n    flexDirection: 'row',\n    flexWrap: 'nowrap',\n  },\n  Status: {\n    top: 2,\n    left: 3,\n    color: v.subColor,\n  },\n  //\n  Detail: {\n    flexDirection: 'row',\n  },\n  CallIcon: {\n    flex: null as any,\n  },\n  CallCreatedAt: {\n    left: 3,\n    color: v.subColor,\n  },\n  //\n  ButtonIcon: {\n    padding: 10,\n  },\n  LastDate: {\n    marginVertical: 10,\n    marginRight: 15,\n    paddingTop: 7,\n  },\n  IconGroup: {},\n  VGroup: {\n    overflow: 'hidden',\n    backgroundColor: v.borderBg,\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginVertical: 5,\n    alignItems: 'center',\n  },\n  CheckboxContainer: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    marginRight: 15,\n  },\n  disableContainer: {\n    opacity: 0.5,\n  },\n})\n\nexport const UserItem: FC<\n  Partial<{\n    answered: boolean\n    avatar: string\n    created: string\n    icons: string[]\n    iconColors: string[]\n    iconFuncs: Function[]\n    id: string\n    incoming: boolean\n    isRecentCall: boolean\n    isRecentChat: boolean\n    lastMessage: ReactNode\n    lastMessageDate: string\n    name: string\n    partyNumber: string\n    selected: boolean\n    statusText: string\n    canChat: boolean\n    group: boolean\n    partyName: string\n    isVoicemail?: boolean\n    status?: string\n    disabled?: boolean\n    isSelection?: boolean\n    isSelected?: boolean\n    parkNumber?: string\n    phonebook?: string\n    onSelect?: () => void\n  }>\n> = observer(p0 => {\n  const {\n    answered,\n    avatar,\n    created,\n    icons,\n    iconColors,\n    iconFuncs,\n    id,\n    incoming,\n    isRecentCall,\n    isRecentChat,\n    lastMessage,\n    lastMessageDate,\n    name,\n    partyNumber,\n    selected,\n    statusText,\n    canChat,\n    group,\n    partyName,\n    isVoicemail,\n    disabled,\n    isSelection,\n    isSelected,\n    parkNumber,\n    phonebook,\n    onSelect,\n    ...p\n  } = p0\n  const Container = canChat ? RnTouchableOpacity : View\n\n  const isGroupAvailable = (groupId: string) => {\n    const groupInfo: Conference = uc.getChatGroupInfo(groupId)\n    const groupStatus = groupInfo.conf_status\n    if (\n      groupStatus === Constants.CONF_STATUS_INACTIVE ||\n      groupStatus === Constants.CONF_STATUS_INVITED\n    ) {\n      RnAlert.error({\n        message: intlDebug`You have rejected this group or this group has been deleted`,\n      })\n      return false\n    } else {\n      return true\n    }\n  }\n  const onPressItem = () => {\n    if (!partyNumber) {\n      return\n    }\n    if (partyNumber.startsWith('uc')) {\n      const groupId = partyNumber.replace('uc', '')\n      isGroupAvailable(partyNumber.replace('uc', '')) &&\n        Nav().goToPageChatGroupDetail({ groupId })\n    } else {\n      Nav().goToPageChatDetail({ buddy: partyNumber })\n    }\n  }\n\n  const onPressIcons = (i: number) => {\n    if (partyNumber?.startsWith('uc')) {\n      isGroupAvailable(partyNumber.replace('uc', '')) && iconFuncs?.[i]?.()\n    } else {\n      iconFuncs?.[i]?.()\n    }\n  }\n\n  return (\n    <Container\n      style={[css.Outer, disabled && css.disableContainer]}\n      onPress={onPressItem}\n    >\n      <View style={[css.Inner, selected && css.Inner_selected]}>\n        {group ? (\n          <View style={css.VGroup}>\n            <RnIcon\n              path={mdiAccountGroup}\n              size={40}\n              color={v.colors.greyTextChat}\n              style={css.IconGroup}\n            />\n          </View>\n        ) : !parkNumber ? (\n          <Avatar\n            source={{ uri: avatar as string }}\n            status={p0.status}\n            {...p}\n            style={css.WithSpace}\n          />\n        ) : null}\n        <View style={[css.Text, css.WithSpace]}>\n          <View style={css.NameWithStatus}>\n            <RnText\n              black\n              bold\n              singleLine\n              style={{\n                color:\n                  name === intl`<Unnamed>` ? v.colors.greyTextChat : 'black',\n              }}\n            >\n              {getPartyName(partyNumber) ||\n                partyName ||\n                name ||\n                partyNumber ||\n                id}\n            </RnText>\n            {!!statusText && (\n              <RnText normal singleLine small style={css.Status}>\n                {statusText}\n              </RnText>\n            )}\n          </View>\n          {!!parkNumber && (\n            <RnText normal small style={css.CallCreatedAt}>\n              {intl`Park number: ` + `${parkNumber}`}\n            </RnText>\n          )}\n\n          {!!phonebook && (\n            <RnText normal small style={css.CallCreatedAt}>\n              {phonebook}\n            </RnText>\n          )}\n          {!isRecentCall && !!lastMessage && (\n            <RnText normal singleLine small>\n              {typeof lastMessage === 'string'\n                ? trimHtml(lastMessage)\n                : lastMessage}\n            </RnText>\n          )}\n          {((isRecentCall && !lastMessage) || isVoicemail) && (\n            <View style={css.Detail}>\n              <RnIcon\n                color={\n                  incoming && !answered\n                    ? v.colors.danger\n                    : incoming && answered\n                    ? v.colors.primary\n                    : v.colors.warning\n                }\n                path={\n                  incoming && !answered\n                    ? mdiPhoneMissed\n                    : incoming && answered\n                    ? mdiPhoneIncoming\n                    : mdiPhoneOutgoing\n                }\n                size={14}\n                style={css.CallIcon}\n              />\n              <RnText normal small style={css.CallCreatedAt}>\n                {isVoicemail ? intl`Voicemail` : intl`at ${created}`}\n              </RnText>\n            </View>\n          )}\n        </View>\n        {!isRecentCall && !!lastMessage && isRecentChat && (\n          <View style={css.LastDate}>\n            <RnText normal singleLine small>\n              {lastMessageDate}\n            </RnText>\n          </View>\n        )}\n        {icons?.map((_, i) => (\n          <RnTouchableOpacity key={i} onPress={e => onPressIcons(i)}>\n            <RnIcon path={_} color={iconColors?.[i]} style={css.ButtonIcon} />\n          </RnTouchableOpacity>\n        ))}\n        {!!isSelection && (\n          <View style={css.CheckboxContainer}>\n            <RnCheckBox\n              isSelected={!!isSelected}\n              onPress={() => (onSelect ? onSelect() : true)}\n              disabled={disabled || false}\n            />\n          </View>\n        )}\n      </View>\n    </Container>\n  )\n})\n","import { get, set } from 'lodash'\nimport { NativeModule, NativeModules, Platform } from 'react-native'\n\nimport { TCallKeepAction } from '../stores/callStore2'\n\ntype TBrekekeUtils = {\n  // these methods only available on android\n  getInitialNotifications(): Promise<string | null>\n  isLocked(): Promise<boolean>\n  startRingtone(): void\n  stopRingtone(): void\n  backToBackground(): void\n  getIncomingCallPendingUserAction(uuid: string): Promise<string>\n  closeIncomingCall(uuid: string): void\n  closeAllIncomingCalls(): void\n  setPbxConfig(jsonStr: string): void\n  setCallConfig(uuid: string, jsonStr: string): void\n  setIsAppActive(isAppActive: boolean, isAppActiveLocked: boolean): void\n  setTalkingAvatar(uuid: string, url: string, isLarge: boolean): void\n  setJsCallsSize(n: number): void\n  setRecordingStatus(uuid: string, recording: boolean): void\n  setIsVideoCall(uuid: string, isVideoCall: boolean): void\n  setRemoteVideoStreamURL(uuid: string, url: string): void\n  setIsFrontCamera(uuid: string, isFrontCamera: boolean): void\n  setOnHold(uuid: string, holding: boolean): void\n  setLocale(locale: string): void\n  onCallConnected(uuid: string): void\n  onCallKeepAction(uuid: string, action: TCallKeepAction): void\n  onPageCallManage(uuid: string): void\n  hasIncomingCallActivity(uuid: string): Promise<boolean>\n\n  // these methods only available on ios\n  playRBT(): void\n  stopRBT(): void\n  enableLPC(\n    token: string,\n    tokenVoip: string,\n    username: string,\n    host: string,\n    port: number,\n    remoteSsids: string[],\n    localSsid: string,\n    tlsKeyHash: string,\n  ): void\n  disableLPC(): void\n\n  // these methods available on both\n  systemUptimeMs(): Promise<number>\n}\n\nexport type TNativeModules = {\n  BrekekeUtils: NativeModule & TBrekekeUtils\n}\n\nconst Polyfill: TBrekekeUtils = {\n  getInitialNotifications: () => Promise.resolve(null),\n  isLocked: () => Promise.resolve(false),\n  startRingtone: () => undefined,\n  stopRingtone: () => undefined,\n  backToBackground: () => undefined,\n  getIncomingCallPendingUserAction: () => Promise.resolve(''),\n  closeIncomingCall: () => undefined,\n  closeAllIncomingCalls: () => undefined,\n  setPbxConfig: () => undefined,\n  setCallConfig: () => undefined,\n  setIsAppActive: () => undefined,\n  setTalkingAvatar: () => undefined,\n  setJsCallsSize: () => undefined,\n  setRecordingStatus: () => undefined,\n  setIsVideoCall: () => undefined,\n  setRemoteVideoStreamURL: () => undefined,\n  setIsFrontCamera: () => undefined,\n  setOnHold: () => undefined,\n  setLocale: () => undefined,\n  onCallConnected: () => undefined,\n  onCallKeepAction: () => undefined,\n  onPageCallManage: () => undefined,\n  hasIncomingCallActivity: () => Promise.resolve(false),\n\n  // these methods only available on ios\n  playRBT: () => undefined,\n  stopRBT: () => undefined,\n  enableLPC: () => undefined,\n  disableLPC: () => undefined,\n\n  // these methods available on both\n  systemUptimeMs: () => Promise.resolve(-1),\n}\n\nconst M = NativeModules as TNativeModules\nexport const BrekekeUtils = M.BrekekeUtils || Polyfill\n\nif (__DEV__ && Platform.OS !== 'web') {\n  const k = Object.keys(M.BrekekeUtils || {})\n  console.log(\n    `BrekekeUtils debug: found ${k.length} methods` +\n      (k.length ? `: ${k.join(', ')}` : ''),\n  )\n}\n\n// Add polyfill\nObject.keys(Polyfill)\n  .filter(k => typeof get(BrekekeUtils, k) !== 'function')\n  .forEach(k => {\n    set(BrekekeUtils, k, get(Polyfill, k))\n  })\n","// To alias unused react-native modules for web in .cracorc.js\n// eslint-disable-next-line import/no-default-export\nexport default null as any // type-coverage:ignore-line\n","import 'brekekejs/lib/jsonrpc'\nimport 'brekekejs/lib/webrtcclient'\n\nimport EventEmitter from 'eventemitter3'\nimport jsonStableStringify from 'json-stable-stringify'\nimport { Platform } from 'react-native'\n\nimport { currentVersion } from '../components/variables'\nimport { embedApi } from '../embed/embedApi'\nimport { accountStore, AccountUnique } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { CallConfig } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { cancelRecentPn } from '../stores/cancelRecentPn'\nimport { chatStore } from '../stores/chatStore'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { toBoolean } from '../utils/string'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { CallOptions, Session, Sip } from './brekekejs'\nimport { getCameraSourceIds } from './getCameraSourceId'\nimport { pbx } from './pbx'\nimport { turnConfig } from './turnConfig'\n\ntype DeviceInputWeb = {\n  deviceId: string\n  kind: string\n  label: string\n  groupId: string\n  facing: string\n}\nconst alreadyRemovePnTokenViaSip: { [k: string]: boolean } = {}\nexport const checkAndRemovePnTokenViaSip = async (n: ParsedPn) => {\n  const exist = !!(await accountStore.findByPn(n))\n  const k = n.id || jsonStableStringify(n)\n  if (!alreadyRemovePnTokenViaSip[k] && !exist) {\n    alreadyRemovePnTokenViaSip[k] = true\n    removePnTokenViaSip(n)\n  }\n  return exist\n}\n\nconst removePnTokenViaSip = async (n: ParsedPn) => {\n  const s = getCallStore()\n  if (n.callkeepUuid) {\n    s.onCallKeepEndCall(n.callkeepUuid)\n  }\n  if (!n.sipPn.sipAuth) {\n    console.log(\n      `checkAndRemovePnTokenViaSip debug: no sip auth token isCall=${n.isCall}`,\n    )\n    return\n  }\n  console.log('checkAndRemovePnTokenViaSip debug: begin')\n  const phone = getWebrtcClient(toBoolean(n.sipPn.dtmfSendPal))\n  const userAgent = await getUserAgent(n)\n  phone.startWebRTC({\n    register: false,\n    url: getWssUrl(n.pbxHostname, n.sipPn.sipWssPort || n.pbxPort),\n    tls: true,\n    user: n.sipPn.phoneId,\n    auth: n.sipPn.sipAuth,\n    useVideoClient: true,\n    userAgent,\n  })\n  const started = await new Promise(async r => {\n    phone.addEventListener('phoneStatusChanged', e => {\n      if (e.phoneStatus === 'started') {\n        r(true)\n      }\n    })\n    await waitTimeout(10000)\n    r(false)\n  })\n  const o = phone._ua?.registrator?.()!\n  if (!started || !o) {\n    console.log(\n      `checkAndRemovePnTokenViaSip debug: started=${started} registrator=${!!o}`,\n    )\n  }\n  o._registered = true\n  o.setExtraHeaders(['X-PN-Manage: remove'])\n  phone.stopWebRTC()\n  console.log('checkAndRemovePnTokenViaSip debug: done')\n}\n\nexport class SIP extends EventEmitter {\n  phone?: Sip\n  currentCamera: string | undefined = '1'\n\n  cameraIds?: DeviceInputWeb[] = []\n  private init = async (o: SipLoginOption) => {\n    this.cameraIds = await getCameraSourceIds()\n\n    this.currentCamera = this.cameraIds?.[0]?.deviceId || '1'\n\n    const phone = getWebrtcClient(o.dtmfSendPal, this.currentCamera)\n    this.phone = phone\n\n    // Emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('webrtcclient', phone)\n    }\n\n    const h = (ev: { phoneStatus: string }) => {\n      if (!ev) {\n        return\n      }\n      if (ev.phoneStatus === 'started') {\n        this.emit('connection-started')\n        return\n      }\n      const s = ev.phoneStatus\n      if (s === 'stopping' || s === 'stopped') {\n        phone._removeEventListenerPhoneStatusChange?.()\n        this.emit('connection-stopped', ev)\n        console.log(`SIP PN debug: phoneStatusChanged: phoneStatus=${s}`)\n        this.phone?._removeEventListenerPhoneStatusChange?.()\n        this.phone = undefined\n      }\n    }\n    phone.addEventListener('phoneStatusChanged', h)\n    phone._removeEventListenerPhoneStatusChange = () => {\n      phone._removeEventListenerPhoneStatusChange = undefined\n      phone.removeEventListener('phoneStatusChanged', h)\n    }\n\n    const computeCallPatch = async (ev: Session) => {\n      const partyNumber = ev.rtcSession.remote_identity.uri.user\n      let partyName = ev.rtcSession.remote_identity.display_name\n      if (\n        (!partyName || partyName.startsWith('uc')) &&\n        partyNumber.startsWith('uc')\n      ) {\n        partyName =\n          chatStore.getGroupById(partyNumber.replace('uc', ''))?.name ||\n          partyName ||\n          partyNumber\n      }\n      const d = await getAuthStore().getCurrentDataAsync()\n      partyName =\n        partyName ||\n        d.recentCalls.find(c => c.partyNumber === partyNumber)?.partyName ||\n        partyNumber\n      const callConfig = getCallConfigFromHeader(\n        ev.incomingMessage?.getHeader('X-WEBPHONE-CALL'),\n      )\n      return {\n        rawSession: ev,\n        id: ev.sessionId,\n        pnId: ev.incomingMessage?.getHeader('X-PN-ID'),\n        incoming: ev.rtcSession.direction === 'incoming',\n        partyNumber,\n        partyName,\n        remoteVideoEnabled: ev.remoteWithVideo,\n        localVideoEnabled: ev.withVideo,\n        sessionStatus: ev.sessionStatus,\n        callConfig,\n      }\n    }\n\n    // sessionId: \"1\"\n    // sessionStatus: \"dialing\"\n    // answering: false\n    // audio: true\n    // video: false\n    // remoteStreamObject: MediaStream{...}\n    // localStreamObject: MediaStream{...}\n    // remoteWithVideo: false\n    // withVideo: true\n    // shareStream: false\n    // exInfo: \"\"\n    // muted: {main: false, videoClient: false}\n    // localVideoStreamObject: null\n    // videoClientSessionTable: {}\n    // rtcSession: RTCSession{...}\n    // incomingMessage: null\n    // remoteUserOptionsTable: {}\n    // analyser: null\n    phone.addEventListener('sessionCreated', async ev => {\n      if (!ev) {\n        return\n      }\n      const p = await computeCallPatch(ev)\n      this.emit('session-started', p)\n    })\n    phone.addEventListener('sessionStatusChanged', async ev => {\n      if (!ev) {\n        return\n      }\n      if (ev.sessionStatus === 'terminated') {\n        return this.emit('session-stopped', ev)\n      }\n      const withSDP =\n        ev.rtcSession.direction === 'outgoing' &&\n        ev.sessionStatus === 'progress' &&\n        !!ev.incomingMessage?.body\n      console.log(`sessionStatusChanged withSDP=${withSDP}`)\n      const p = await computeCallPatch(ev)\n      const patch = {\n        ...p,\n        answered: ev.sessionStatus === 'connected',\n        voiceStreamObject: ev.remoteStreamObject,\n        localVideoEnabled: ev.withVideo,\n        remoteVideoEnabled: ev.remoteWithVideo,\n        pbxTenant: '',\n        pbxRoomId: '',\n        pbxTalkerId: '',\n        pbxUsername: '',\n        partyImageUrl: '',\n        partyImageSize: '',\n        talkingImageUrl: '',\n        sessionStatus: ev.sessionStatus,\n        withSDP,\n        earlyMedia: withSDP ? ev.remoteStreamObject : null,\n      }\n      if (ev.incomingMessage) {\n        const pbxSessionInfo =\n          ev.incomingMessage.getHeader('X-PBX-Session-Info')\n        const imageUrl = ev.incomingMessage?.getHeader('X-PBX-IMAGE-RINGING')\n        const talkingImageUrl = ev.incomingMessage?.getHeader(\n          'X-PBX-IMAGE-TALKING',\n        )\n        const imageSize = ev.incomingMessage?.getHeader('X-PBX-IMAGE-SIZE')\n\n        if (typeof pbxSessionInfo === 'string') {\n          const infos = pbxSessionInfo.split(';')\n          patch.pbxTenant = infos[0]\n          patch.pbxRoomId = infos[1]\n          patch.pbxTalkerId = infos[2]\n          patch.pbxUsername = infos[3]\n          patch.partyImageUrl = imageUrl\n          patch.partyImageSize = imageSize\n          patch.talkingImageUrl = talkingImageUrl\n        }\n      }\n      this.emit('session-updated', patch)\n      return\n    })\n\n    phone.addEventListener('videoClientSessionCreated', ev => {\n      if (!ev) {\n        return\n      }\n      const session = phone.getSession(ev.sessionId)\n      const videoSession =\n        session.videoClientSessionTable[ev.videoClientSessionId]\n      this.emit('session-updated', {\n        id: ev.sessionId,\n        videoSessionId: ev.videoClientSessionId,\n        remoteVideoEnabled: true,\n        remoteVideoStreamObject: videoSession.remoteStreamObject,\n      })\n    })\n    phone.addEventListener('videoClientSessionEnded', ev => {\n      if (!ev) {\n        return\n      }\n      this.emit('session-updated', {\n        id: ev.sessionId,\n        videoSessionId: ev.videoClientSessionId,\n        remoteVideoEnabled: false,\n        remoteVideoStreamObject: null,\n      })\n    })\n\n    phone.addEventListener('rtcErrorOccurred', ev => {\n      console.error('sip.phone.rtcErrorOccurred:', ev)\n    })\n\n    return phone\n  }\n\n  connect = async (o: SipLoginOption, a: AccountUnique) => {\n    console.log('SIP PN debug: call sip.stopWebRTC in sip.connect')\n    this.phone?._removeEventListenerPhoneStatusChange?.()\n    this.stopWebRTC()\n    const phone = await this.init(o)\n    //\n    const callOptions = ((o.pbxTurnEnabled && turnConfig) || {}) as CallOptions\n    if (!callOptions.pcConfig) {\n      callOptions.pcConfig = {}\n    }\n    if (!Array.isArray(callOptions.pcConfig.iceServers)) {\n      callOptions.pcConfig.iceServers = []\n    }\n    if (o.turnConfig) {\n      callOptions.pcConfig.iceServers.push(o.turnConfig)\n    }\n    phone.setDefaultCallOptions(callOptions)\n    //\n    const userAgent = await getUserAgent(a)\n    phone.startWebRTC({\n      url: getWssUrl(o.hostname, o.port),\n      tls: true,\n      user: o.username,\n      auth: o.accessToken,\n      useVideoClient: true,\n      userAgent,\n    })\n    //\n    console.log('SIP PN debug: added listener on _ua')\n    phone._ua?.on('newNotify', e => {\n      const data = e?.request?.data\n      if (!data) {\n        return\n      }\n      console.log(`SIP PN debug: newNotify fired on _ua data=${data}`)\n      const pnIds = parseCanceledPnIds(data)\n      if (!pnIds?.length) {\n        return\n      }\n      console.log(\n        `SIP PN debug: newNotify canceled pnIds=${JSON.stringify(pnIds)}`,\n      )\n      pnIds.forEach(cancelRecentPn)\n    })\n  }\n\n  private hackJssipFork = () => {\n    const socket = sip.phone?._ua?._transport?.socket\n    if (socket) {\n      Object.assign(socket, { __brekekephone_stopped: true })\n    }\n  }\n  stopWebRTC = () => {\n    this.hackJssipFork()\n    if (this.phone) {\n      console.log('SIP PN debug: sip.stopWebRTC: call phone.stopWebRTC')\n      this.phone.stopWebRTC()\n      this.phone = undefined\n    } else {\n      console.log('SIP PN debug: sip.stopWebRTC: already disconnected')\n    }\n  }\n  destroyWebRTC = () => {\n    this.hackJssipFork()\n    if (this.phone) {\n      console.log('SIP PN debug: sip.destroyWebRTC: call phone.destroyWebRTC')\n      this.phone.destroyWebRTC()\n      this.phone = undefined\n    } else {\n      console.log('SIP PN debug: sip.destroyWebRTC: already disconnected')\n    }\n  }\n\n  hangupSession = (sessionId: string) => {\n    const session = this.phone?.getSession(sessionId)\n    return session?.rtcSession?.terminate()\n  }\n  disableMedia = (sessionId: string) => {\n    const session = this.phone?.getSession(sessionId)\n    session?.remoteStreamObject?.getTracks().forEach(track => {\n      track.enabled = false\n    })\n  }\n  enableMedia = (sessionId: string) => {\n    const session = this.phone?.getSession(sessionId)\n    session?.remoteStreamObject?.getTracks().forEach(track => {\n      track.enabled = true\n    })\n  }\n  sendDTMF = async (p: {\n    signal: string\n    sessionId: string\n    tenant: string\n    talkerId: string\n  }) => {\n    if (!this.phone) {\n      return\n    }\n    const c = await pbx.getConfig()\n    const dtmfSendMode = Number(c?.['webrtcclient.dtmfSendMode']) || 0\n    this.phone._options.dtmfSendMode = dtmfSendMode\n    this.phone.dtmfSendMode = dtmfSendMode\n    return !this.phone._options.dtmfSendPal\n      ? this.phone.sendDTMF(p.signal, p.sessionId)\n      : pbx.sendDTMF(p.signal, p.tenant, p.talkerId)\n  }\n  enableVideo = (sessionId: string) => {\n    return this.phone?.setWithVideo(sessionId, true)\n  }\n  disableVideo = (sessionId: string) => {\n    return this.phone?.setWithVideo(sessionId, false)\n  }\n  setMuted = (muted: boolean, sessionId: string) => {\n    return this.phone?.setMuted({ main: muted }, sessionId)\n  }\n  switchCamera = async (sessionId: string, isFrontCamera: boolean) => {\n    // alert(this.currentFrontCamera)\n    if (!this.phone) {\n      return\n    }\n    // get camera info again for web mobile\n    if (this.cameraIds === undefined || this.cameraIds.length === 0) {\n      this.cameraIds = await getCameraSourceIds()\n    }\n    // if don't have camera\n    if (this.cameraIds === undefined || this.cameraIds.length === 0) {\n      return\n    }\n    const cameras = this.cameraIds.map(s => s.deviceId)\n    this.currentCamera = isFrontCamera ? cameras[1] : cameras[0]\n\n    const videoOptions = {\n      call: {\n        mediaConstraints: sipCreateMediaConstraints(\n          this.currentCamera,\n          isFrontCamera,\n        ),\n      },\n      answer: {\n        mediaConstraints: sipCreateMediaConstraints(\n          this.currentCamera,\n          isFrontCamera,\n        ),\n      },\n    }\n    this.phone?.setWithVideo(sessionId, false, videoOptions)\n    this.phone?.setWithVideo(sessionId, true, videoOptions)\n  }\n}\n\nexport const sip = new SIP()\n\nexport interface SipLoginOption {\n  hostname: string\n  port: string\n  pbxTurnEnabled: boolean\n  username: string\n  accessToken: string\n  dtmfSendPal: boolean\n  turnConfig?: RTCIceServer\n}\n\nconst parseCanceledPnIds = (data?: string) => {\n  if (!data || !/Canceled/i.test(data)) {\n    return\n  }\n  const m = data.match(/Content-Length:\\s*(\\d+)\\s*/i)\n  if (!m) {\n    return\n  }\n  const i = m.index\n  const l = parseInt(m[1])\n  if (typeof i !== 'number' || isNaN(l)) {\n    return\n  }\n  const msg = data.substr(i + m[0].length)\n  console.log(`parseCanceledPnIds: msg.length=${msg.length} l=${l}`)\n  return msg.split(/\\n/g).map(s => {\n    const lowers = s.toLowerCase()\n    return lowers.replace(/\\s+/g, '').includes(',canceled')\n      ? {\n          pnId: s.match(/(\\w+)\\W*INVITE/)?.[1],\n          completedElseWhere: lowers.includes('call completed elsewhere'),\n        }\n      : undefined\n  })\n}\n\nconst osMap: { [k: string]: string } = {\n  ios: 'iOS',\n  android: 'Android',\n  web: 'Web',\n}\nconst getUserAgent = async (a: ParsedPn | AccountUnique) => {\n  const au = 'to' in a ? await accountStore.findByPn(a) : a\n  const d = await accountStore.findData(au)\n  if (d?.userAgent) {\n    return d.userAgent\n  }\n  const os = osMap[Platform.OS]\n  return `Brekeke Phone for ${os} ${currentVersion} /JsSIP 3.2.15`\n}\n\nconst getWssUrl = (host?: string, port?: string) =>\n  `wss://${host}:${port}/phone`\n\nconst sipCreateMediaConstraints = (\n  sourceId?: string,\n  isFrontCamera?: boolean,\n) => {\n  // web change config for browser chromium 2016\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=614716\n  const webVideoConfig = {\n    facingMode: isFrontCamera ? 'user' : 'environment',\n    deviceId: sourceId ? { exact: sourceId } : undefined,\n  }\n  const appVideoConfig = {\n    mandatory: {\n      minWidth: 0,\n      minHeight: 0,\n      minFrameRate: 0,\n    },\n    facingMode: isFrontCamera ? 'user' : 'environment',\n    optional: sourceId ? [{ sourceId }] : [],\n  }\n\n  return {\n    audio: false,\n    video: Platform.OS === 'web' ? webVideoConfig : appVideoConfig,\n  } as any as MediaStreamConstraints\n}\nconst getWebrtcClient = (dtmfSendPal = false, sourceId?: string) =>\n  new window.Brekeke.WebrtcClient.Phone({\n    logLevel: 'all',\n    multiSession: 1,\n    defaultOptions: {\n      videoOptions: {\n        call: {\n          mediaConstraints: sipCreateMediaConstraints(sourceId, true),\n        },\n        answer: {\n          mediaConstraints: sipCreateMediaConstraints(sourceId, true),\n        },\n      },\n    },\n    dtmfSendPal,\n    ctiAutoAnswer: 1,\n    eventTalk: 1,\n    configuration: {\n      socketKeepAlive: 60,\n    },\n  })\n\nconst getCallConfigFromHeader = (config?: string): CallConfig =>\n  config\n    ? Object.fromEntries(\n        config\n          .split(';')\n          .map(c =>\n            c\n              .split(':')\n              .map(kv => kv.trim())\n              .filter(kv => kv),\n          )\n          .filter(a => a.length === 2),\n      )\n    : {}\n","import { cloneDeep } from 'lodash'\nimport { action, observable } from 'mobx'\nimport { SectionListData } from 'react-native'\n\nimport { UcBuddy, UcBuddyGroup } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { isUcBuddy, uc } from '../api/uc'\nimport { accountStore } from './accountStore'\nimport { getAuthStore, waitPbx, waitUc } from './authStore'\nimport { contactStore } from './contactStore'\nimport { intl } from './intl'\n\nconst defaultBuddyMax = 100\n\nexport type GroupUserSectionListData = SectionListData<\n  UcBuddy,\n  { title: string }\n>\nexport type BuddyType = 'PbxBuddy' | 'UcBuddy'\n\nclass UserStore {\n  @observable dataGroupAllUser: GroupUserSectionListData[] = []\n  @observable dataListAllUser: UcBuddy[] = []\n  @observable buddyMax = defaultBuddyMax\n  @observable isDisableAddAllUserToTheList = false\n  @observable isSelectedAddAllUser: boolean = true\n  @observable selectedUserIds: { [userId: string]: boolean } = {}\n  @observable saveSelectedUserIds: { [userId: string]: boolean } = {}\n  @observable userOnline: { [userId: string]: string } = {}\n  @observable isCapacityInvalid = false\n  @observable buddyMode = 0\n  @observable dataDisplayGroupAllUser: GroupUserSectionListData[] = []\n  type: BuddyType = 'UcBuddy'\n  groups: UcBuddyGroup[] = []\n\n  @action loadPbxBuddyList = async (isAllUser: boolean = false) => {\n    await waitPbx()\n    this.resetCache()\n    this.type = 'PbxBuddy'\n    const s = getAuthStore()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return\n    }\n    let allUsers: UcBuddy[] = []\n    // get all user from pbx\n    if (isAllUser) {\n      const ids = await pbx.getUsers(cp.pbxTenant)\n      if (!ids) {\n        return\n      }\n      allUsers = ids\n        .filter(u => u[0] !== cp.pbxUsername)\n        .map(u => {\n          return {\n            disabledBuddy: false,\n            user_id: u[0],\n            name: u[1],\n            profile_image_url: '',\n            group: '',\n            tenant: cp.pbxTenant,\n            block_settings: {},\n            status: false,\n          } as any as UcBuddy\n        })\n    }\n\n    // get from local\n    const d = await s.getCurrentDataAsync()\n    const buddyList = d?.pbxBuddyList\n    const users = cloneDeep(buddyList?.users || [])\n\n    if (s.isBigMode()) {\n      this.isSelectedAddAllUser = false\n    } else {\n      this.isSelectedAddAllUser = !!s.getCurrentAccount()?.pbxLocalAllUsers\n    }\n    this.isDisableAddAllUserToTheList = s.isBigMode()\n    this.buddyMax =\n      Number(s.pbxConfig?.['webphone.users.max']) || defaultBuddyMax // buddy_max\n    this.buddyMode = 2 // buddy_mode\n    this.groups = []\n    this.filterDataUserGroup(users, allUsers, this.buddyMode === 1)\n  }\n  @action loadUcBuddyList = async (isAllUser: boolean = false) => {\n    await waitUc()\n    const s = getAuthStore()\n    this.resetCache()\n    this.type = 'UcBuddy'\n    const userList = uc.client.getBuddylist()\n    const configProperties = uc.client.getConfigProperties()\n    const p = uc.client.getProfile()\n    let allUsers: UcBuddy[] = []\n    if (isAllUser) {\n      allUsers = uc.client\n        .getAllUsers()\n        .user?.filter(u => !u.disabledBuddy && u.user_id !== p.user_id)\n        .map(\n          user =>\n            ({\n              user_id: user.user_id,\n              name: user.user_name,\n              group: configProperties.buddy_mode === 1 ? user.user_group : '',\n              tenant: p.tenant,\n            } as UcBuddy),\n        )\n    }\n\n    if (s.isBigMode()) {\n      this.isSelectedAddAllUser = false\n    } else {\n      this.isSelectedAddAllUser = !!s.getCurrentAccount()?.pbxLocalAllUsers\n    }\n    this.isDisableAddAllUserToTheList =\n      s.isBigMode() ||\n      configProperties.optional_config?.buddy_max < allUsers?.length\n    this.buddyMax =\n      configProperties.optional_config?.buddy_max || defaultBuddyMax\n    this.buddyMode = configProperties.buddy_mode\n    this.groups = []\n    this.filterDataUserGroup(\n      userList.user,\n      allUsers,\n      configProperties.buddy_mode === 1,\n    )\n  }\n\n  @action getBuddyById = (buddy_id: string) => {\n    return this.dataListAllUser.find(item => item.user_id === buddy_id)\n  }\n\n  @action filterDataUserGroup = (\n    dataGroupUser: (UcBuddy | UcBuddyGroup)[],\n    listAllUser: UcBuddy[],\n    isDisableEditGroup: boolean,\n  ) => {\n    const sectionData: GroupUserSectionListData[] = []\n    const sectionDataOther: GroupUserSectionListData = {\n      title: `(${intl`No Group`})`,\n      data: [],\n    }\n    const sectionDataIds: SectionListData<string>[] = []\n    const sectionDataOtherIds: SectionListData<string> = {\n      title: `(${intl`No Group`})`,\n      data: [],\n    }\n\n    const listDataUser: UcBuddy[] = []\n    const selectedUserIds: { [userId: string]: boolean } = {}\n\n    if (dataGroupUser.length > 0) {\n      dataGroupUser.forEach(user => {\n        if (isUcBuddy(user)) {\n          const indx = sectionData.findIndex(\n            sectionItm => sectionItm.title === user.group,\n          )\n          if (indx !== -1) {\n            sectionData[indx].data = [...sectionData[indx].data, user]\n            sectionDataIds[indx].data = [\n              ...sectionDataIds[indx].data,\n              user.user_id,\n            ]\n          } else {\n            sectionDataOther.data = [...sectionDataOther.data, user]\n            sectionDataOtherIds.data = [\n              ...sectionDataOtherIds.data,\n              user.user_id,\n            ]\n          }\n          listDataUser.push(user)\n          selectedUserIds[user.user_id] = true\n        } else if (!this.groups.some(g => g.id === user.id)) {\n          sectionData.push({ title: user.id, data: [] })\n          sectionDataIds.push({ title: user.id, data: [] })\n          this.groups.push(user)\n        }\n      })\n    }\n    const listUserNotSelected = listAllUser.filter(\n      itm => !listDataUser.some(u => u.user_id === itm.user_id),\n    )\n\n    if (!isDisableEditGroup) {\n      sectionDataOther.data = [...sectionDataOther.data, ...listUserNotSelected]\n      sectionData.push(sectionDataOther)\n    } else if (sectionData.length > 0) {\n      sectionData[0].data = [...sectionData[0].data, ...listUserNotSelected]\n    }\n\n    this.dataGroupAllUser = sectionData\n    this.dataListAllUser = [...listDataUser, ...listUserNotSelected]\n    this.selectedUserIds = selectedUserIds\n    this.saveSelectedUserIds = cloneDeep(this.selectedUserIds)\n    this.dataDisplayGroupAllUser = cloneDeep(this.dataGroupAllUser)\n  }\n\n  filterUser = (searchTxt: string, isOnline: boolean) => {\n    const displayUsers: GroupUserSectionListData[] = []\n    let totalContact = 0\n    let totalOnlineContact = 0\n\n    this.dataDisplayGroupAllUser.forEach(s => {\n      // list all user\n      const dataAllUsers =\n        s.data\n          ?.filter(u => this.saveSelectedUserIds[u.user_id])\n          .map(u => ({ ...u, status: this.userOnline[u.user_id] })) || []\n\n      totalContact += dataAllUsers.length\n\n      const dataAllUsersFiltered = dataAllUsers.filter(\n        u => u.user_id.includes(searchTxt) || u.name.includes(searchTxt),\n      )\n\n      // list online user\n      const dataOnlineUser = s.data\n        .filter(u => this.userOnline[u.user_id])\n        .map(u => ({ ...u, status: this.userOnline[u.user_id] }))\n      totalOnlineContact += dataOnlineUser.length\n      const dataOnlineUserFiltered = dataOnlineUser.filter(\n        u => u.user_id.includes(searchTxt) || u.name.includes(searchTxt),\n      )\n      displayUsers.push({\n        title: s.title,\n        data: isOnline ? dataAllUsersFiltered : dataOnlineUserFiltered,\n      })\n    })\n\n    return { displayUsers, totalContact, totalOnlineContact }\n  }\n\n  @action toggleIsSelectedAddAllUser = () => {\n    if (!this.isSelectedAddAllUser && !contactStore.pbxUsers.length) {\n      contactStore.getPbxUsers()\n    }\n    this.isSelectedAddAllUser = !this.isSelectedAddAllUser\n    const s = getAuthStore()\n    accountStore.upsertAccount({\n      id: s.getCurrentAccount()?.id,\n      pbxLocalAllUsers: this.isSelectedAddAllUser,\n    })\n  }\n\n  @observable isSelectEditGroupingAndUserOrder: boolean = false\n  @action toggleIsSelectEditGroupingAndUserOrder = () => {\n    this.isSelectEditGroupingAndUserOrder =\n      !this.isSelectEditGroupingAndUserOrder\n  }\n\n  @action selectUserId = (userId: string) => {\n    if (this.selectedUserIds[userId]) {\n      delete this.selectedUserIds[userId]\n    } else {\n      this.selectedUserIds[userId] = true\n    }\n    this.isCapacityInvalid =\n      Object.keys(this.selectedUserIds).length > this.buddyMax\n  }\n\n  @action selectAllUserIdsByGroup = (groupIndex: number) => {\n    this.dataGroupAllUser[groupIndex]?.data.forEach(u => {\n      this.selectedUserIds[u.user_id] = true\n    })\n  }\n\n  @action removeGroup = (groupIndex: number) => {\n    this.dataGroupAllUser[groupIndex].data.forEach(u => {\n      delete this.selectedUserIds[u.user_id]\n    })\n    if (this.groups.length >= 1) {\n      this.groups.splice(groupIndex, 1)\n    }\n    if (this.dataGroupAllUser.length >= 1) {\n      this.dataGroupAllUser.splice(groupIndex, 1)\n    }\n  }\n\n  @action unselectAllUserIdsByGroup = (groupIndex: number) => {\n    this.dataGroupAllUser[groupIndex].data.forEach(u => {\n      delete this.selectedUserIds[u.user_id]\n    })\n  }\n\n  getHeaderTitle = (\n    sectionTitle: string,\n    renderData: readonly UcBuddy[],\n    isEditMode?: boolean,\n  ) => {\n    if (!getAuthStore().getCurrentAccount()?.ucEnabled) {\n      return `(${renderData.length})`\n    }\n\n    if (isEditMode) {\n      const selectedItemCount = this.isSelectedAddAllUser\n        ? renderData.length\n        : renderData.filter(i => this.selectedUserIds[i.user_id]).length\n      return `${sectionTitle} ${selectedItemCount}/${renderData.length}`\n    }\n\n    const indexGroup = this.dataGroupAllUser.findIndex(\n      item => item.title === sectionTitle,\n    )\n    if (indexGroup <= -1) {\n      return ''\n    }\n    const totalUser = this.dataGroupAllUser[indexGroup].data.length\n    const totalOnline = this.dataGroupAllUser[indexGroup].data.filter(\n      u => this.userOnline[u.user_id],\n    ).length\n    return `${\n      sectionTitle === `(${intl`No Group`})` ? '' : sectionTitle\n    } ${totalOnline}/${totalUser}`\n  }\n\n  @action updateStatusBuddy = (\n    buddy_id: string,\n    status: string,\n    avatar: string,\n  ) => {\n    if (status !== 'offline') {\n      this.userOnline[buddy_id] = status\n    } else {\n      delete this.userOnline[buddy_id]\n    }\n  }\n\n  @action addGroup = (\n    groupName: string,\n    selectedUsers: { [k: string]: UcBuddy },\n  ) => {\n    this.dataListAllUser.forEach((user, index) => {\n      if (selectedUsers[user.user_id]) {\n        this.dataListAllUser[index].group = groupName\n      }\n    })\n\n    this.dataGroupAllUser.forEach((group, index) => {\n      this.dataGroupAllUser[index].data = group.data.filter(\n        item => !selectedUsers[item.user_id],\n      )\n    })\n\n    const newGroupContact: GroupUserSectionListData = {\n      data: Object.keys(selectedUsers).map(key => {\n        return selectedUsers[key]\n      }),\n      title: groupName,\n    }\n\n    this.dataGroupAllUser.unshift(newGroupContact)\n\n    Object.keys(selectedUsers).forEach(u => {\n      this.selectedUserIds[u] = true\n    })\n    this.groups.push({ id: groupName, name: groupName })\n  }\n  resetCache = () => {\n    this.groups = []\n    this.selectedUserIds = {}\n    this.dataListAllUser = []\n  }\n  @action updateDisplayGroupList = () => {\n    this.saveSelectedUserIds = cloneDeep(this.selectedUserIds)\n    this.dataDisplayGroupAllUser = cloneDeep(this.dataGroupAllUser)\n    // reset dataGroupAllUser\n    this.resetCache()\n  }\n  @action editGroup = (\n    groupName: string,\n    removedUsers: UcBuddy[],\n    selectedUserItems: { [k: string]: UcBuddy },\n  ) => {\n    this.dataListAllUser.forEach((user, index) => {\n      if (selectedUserItems[user.user_id]) {\n        this.dataListAllUser[index].group = groupName\n      }\n    })\n\n    this.dataGroupAllUser.forEach((group, index) => {\n      if (group.title === groupName) {\n        this.dataGroupAllUser[index].data = Object.keys(selectedUserItems).map(\n          key => {\n            return selectedUserItems[key]\n          },\n        )\n      } else {\n        this.dataGroupAllUser[index].data = group.data.filter(\n          item => !selectedUserItems[item.user_id],\n        )\n      }\n      if (index === this.dataGroupAllUser.length - 1) {\n        this.dataGroupAllUser[index].data = [\n          ...this.dataGroupAllUser[index].data,\n          ...removedUsers,\n        ]\n      }\n    })\n\n    Object.keys(selectedUserItems).forEach(u => {\n      this.selectedUserIds[u] = true\n    })\n    removedUsers.forEach(u => {\n      delete this.selectedUserIds[u.user_id]\n    })\n  }\n\n  @action clearStore = () => {\n    this.groups = []\n    this.dataGroupAllUser = []\n    this.dataListAllUser = []\n    this.selectedUserIds = {}\n    this.saveSelectedUserIds = {}\n    this.dataDisplayGroupAllUser = []\n  }\n}\n\nexport const userStore = new UserStore()\n","import { pickBy } from 'lodash'\nimport { FC, forwardRef } from 'react'\nimport { Animated, StyleSheet, Text, TextProps } from 'react-native'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnText: {\n    position: 'relative',\n    fontSize: v.fontSize,\n    lineHeight: v.lineHeight,\n    fontWeight: v.fontWeight,\n    fontFamily: v.fontFamily,\n    color: v.color,\n  },\n  title: {\n    fontSize: v.fontSizeTitle,\n    lineHeight: v.lineHeightTitle,\n    fontWeight: 'bold',\n  },\n  subTitle: {\n    fontSize: v.fontSizeSubTitle,\n    lineHeight: v.lineHeightSubTitle,\n    fontWeight: 'bold',\n  },\n  small: {\n    fontSize: v.fontSizeSmall,\n    lineHeight: v.lineHeightSmall,\n    fontWeight: 'bold',\n  },\n  black: {\n    color: 'black',\n  },\n  white: {\n    color: 'white',\n  },\n  primary: {\n    color: v.colors.primary,\n  },\n  warning: {\n    color: v.colors.warning,\n  },\n  danger: {\n    color: v.colors.danger,\n  },\n  normal: {\n    fontWeight: 'normal',\n  },\n  bold: {\n    fontWeight: 'bold',\n  },\n  center: {\n    textAlign: 'center',\n  },\n  right: {\n    textAlign: 'right',\n  },\n  padding: {\n    paddingHorizontal: 10,\n  },\n})\n\nconst wrap = (Component: Function) =>\n  forwardRef(\n    (\n      {\n        singleLine,\n        style,\n        ...props\n      }: TextProps & {\n        singleLine: boolean\n      },\n      ref,\n    ) => (\n      <Component\n        numberOfLines={singleLine ? 1 : 999}\n        ref={ref}\n        {...pickBy(props, (p, k) => !(k in css))}\n        style={[\n          css.RnText,\n          ...Object.keys(props)\n            .sort(k =>\n              k === 'title' || k === 'subTitle' || k === 'small' ? -1 : 1,\n            )\n            .map(\n              k => props[k as keyof typeof props] && css[k as keyof typeof css],\n            ),\n          style,\n        ]}\n      />\n    ),\n  )\n\nexport type TRnTextProps = TextProps &\n  Partial<{\n    singleLine: boolean\n    title: boolean\n    subTitle: boolean\n    small: boolean\n    black: boolean\n    white: boolean\n    primary: boolean\n    warning: boolean\n    danger: boolean\n    normal: boolean\n    bold: boolean\n    center: boolean\n    right: boolean\n    padding: boolean\n  }>\nexport type TRnText = FC<TRnTextProps>\n\nexport const RnText = wrap(Text) as TRnText\nexport const AnimatedText = wrap(Animated.Text) as TRnText\n","import { action, observable } from 'mobx'\nimport { Keyboard } from 'react-native'\n\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\n\nclass RnKeyboardStore {\n  @observable isKeyboardShowing = false\n  @observable isKeyboardAnimating = false\n  waitKeyboardTimeoutId = 0\n\n  waitKeyboard =\n    (fn: Function) =>\n    (...args: unknown[]) => {\n      if (this.waitKeyboardTimeoutId) {\n        return\n      }\n      if (!this.isKeyboardShowing) {\n        fn(...args)\n        return\n      }\n      Keyboard.dismiss()\n      this.waitKeyboardTimeoutId = BackgroundTimer.setTimeout(() => {\n        this.waitKeyboardTimeoutId = 0\n        fn(...args)\n      }, 300)\n    }\n\n  keyboardAnimatingTimeoutId = 0\n  @action setKeyboardAnimatingTimeout = () => {\n    if (this.keyboardAnimatingTimeoutId) {\n      BackgroundTimer.clearTimeout(this.keyboardAnimatingTimeoutId)\n    }\n    this.isKeyboardAnimating = true\n    this.keyboardAnimatingTimeoutId = BackgroundTimer.setTimeout(\n      action(() => {\n        this.keyboardAnimatingTimeoutId = 0\n        this.isKeyboardAnimating = false\n      }),\n      300,\n    )\n  }\n}\n\nexport const RnKeyboard = new RnKeyboardStore()\n\n// ios\nKeyboard.addListener(\n  'keyboardWillShow',\n  action(() => {\n    RnKeyboard.setKeyboardAnimatingTimeout()\n    RnKeyboard.isKeyboardShowing = true\n  }),\n)\nKeyboard.addListener(\n  'keyboardWillHide',\n  action(() => {\n    RnKeyboard.setKeyboardAnimatingTimeout()\n    RnKeyboard.isKeyboardShowing = false\n  }),\n)\n\n// android\nKeyboard.addListener(\n  'keyboardDidShow',\n  action(() => {\n    RnKeyboard.isKeyboardShowing = true\n  }),\n)\nKeyboard.addListener(\n  'keyboardDidHide',\n  action(() => {\n    RnKeyboard.isKeyboardShowing = false\n  }),\n)\n","import { action, observable } from 'mobx'\nimport { ReactComponentLike } from 'prop-types'\nimport { SyntheticEvent } from 'react'\n\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { getCallStore } from './callStore'\nimport { RnKeyboard } from './RnKeyboard'\n\nexport type StackerFn<T> = keyof T extends never\n  ? () => void\n  : RequiredKeys<T> extends never\n  ? (props?: T) => void\n  : (props: T) => void\n\nexport type RnStack = {\n  isRoot?: boolean\n  Component: ReactComponentLike\n  name: string\n}\n\nexport class RnStackerStore {\n  @observable stacks: RnStack[] = []\n  @observable stackAnimating = false\n\n  @action openStack = (stack: RnStack) => {\n    if (stack.isRoot) {\n      this.stacks = [stack]\n    } else {\n      this.stacks = this.stacks.filter(s => s.name !== stack.name)\n      this.stacks.push(stack)\n    }\n  }\n  dismiss = RnKeyboard.waitKeyboard(\n    action(() => {\n      this.stacks.pop()\n    }),\n  )\n\n  createGoTo = <T>(\n    o: { [k: string]: ReactComponentLike },\n    isRoot = false,\n  ): StackerFn<T> => {\n    const keys = Object.keys(o)\n    if (keys.length !== 1) {\n      throw new Error('RnStacker.registerStack must be called with only 1 key')\n    }\n    const name = keys[0]\n    const Component = o[name]\n    const f = RnKeyboard.waitKeyboard(\n      action((stack: SyntheticEvent) => {\n        getCallStore().inPageCallManage = undefined\n        // Prevent multiple stacks from opening at the same time\n        if (this.stackAnimating) {\n          return\n        }\n        if (!isRoot) {\n          this.stackAnimating = true\n          BackgroundTimer.setTimeout(() => {\n            this.stackAnimating = false\n          }, 300)\n        }\n        //\n        const stack0 = {} as RnStack\n        // It fails if the param is an event\n        //    or something not enumerable\n        if (stack && !stack.nativeEvent) {\n          try {\n            Object.assign(stack0, stack)\n          } catch (err) {}\n        }\n        Object.assign(stack0, {\n          name,\n          Component,\n          isRoot,\n        })\n        this.openStack(stack0)\n      }),\n    )\n    return f as any as StackerFn<T>\n  }\n  createBackTo =\n    <T>(o: { [k: string]: ReactComponentLike }, isRoot = false): StackerFn<T> =>\n    (...args: unknown[]) => {\n      const cs = getCallStore()\n      if (cs.inPageCallManage) {\n        cs.inPageCallManage = undefined\n        return\n      }\n      if (this.stacks.length <= 1) {\n        // @ts-ignore\n        this.createGoTo(o, isRoot)(...args)\n        return\n      }\n      this.dismiss()\n    }\n}\n\nexport const RnStacker = new RnStackerStore()\n","// import vi from '../assets/intl-vi.json'\nimport RnAsyncStorage from '@react-native-async-storage/async-storage'\nimport { action, observable, runInAction } from 'mobx'\nimport { NativeModules, Platform } from 'react-native'\n\nimport en from '../assets/intl-en.json'\nimport ja from '../assets/intl-ja.json'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { arrToMap } from '../utils/toMap'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { RnPicker } from './RnPicker'\n\nexport const labels = {\n  en,\n  ja,\n  // vi,\n} as { [k: string]: string[] }\nexport const enLabelsMapIndex = arrToMap(\n  en,\n  (k: string) => k,\n  (k: string, i: number) => i,\n)\n\nexport const localeOptions = [\n  { key: 'en', label: 'English' },\n  { key: 'ja', label: '日本語' },\n  // { key: 'vi', label: 'Tiếng Việt' },\n]\n\n// typings\nconst TypedNativeModules = NativeModules as {\n  SettingsManager?: {\n    settings?: {\n      AppleLocale?: string\n      AppleLanguages?: string[]\n    }\n  }\n  I18nManager?: {\n    localeIdentifier?: string\n  }\n}\n\nexport class IntlStore {\n  @observable locale = 'en'\n  @observable localeReady = false\n  @observable localeLoading = true\n  getLocaleName = () => localeOptions.find(o => o.key === this.locale)?.label\n\n  private getLocale = async () => {\n    let locale = await RnAsyncStorage.getItem('locale').then(l => l || '')\n    if (!locale || !labels[locale]) {\n      locale =\n        (Platform.OS === 'ios'\n          ? TypedNativeModules?.SettingsManager?.settings?.AppleLocale ||\n            TypedNativeModules?.SettingsManager?.settings?.AppleLanguages?.[0]\n          : TypedNativeModules?.I18nManager?.localeIdentifier) || ''\n      locale = locale?.substr(0, 2)\n      console.log(`Intl debug: system locale=${locale}`)\n    }\n    if (!locale || !labels[locale]) {\n      locale = 'en'\n    }\n    await RnAsyncStorage.setItem('locale', locale)\n    runInAction(() => {\n      this.locale = locale\n      BrekekeUtils.setLocale(this.locale)\n    })\n  }\n  private setLocale = async (locale: string) => {\n    if (this.localeLoading || locale === this.locale) {\n      return\n    }\n    runInAction(() => {\n      this.localeLoading = true\n    })\n    if (!labels[locale as 'en']) {\n      locale = 'en'\n    }\n    await RnAsyncStorage.setItem('locale', locale)\n    await waitTimeout()\n    runInAction(() => {\n      this.localeLoading = false\n      this.locale = locale\n      BrekekeUtils.setLocale(this.locale)\n    })\n  }\n  selectLocale = () => {\n    RnPicker.open({\n      options: localeOptions,\n      selectedKey: this.locale,\n      onSelect: this.setLocale,\n    })\n  }\n\n  private loadingPromise?: Promise<unknown>\n  wait = () => {\n    if (!this.loadingPromise) {\n      this.loadingPromise = this.getLocale().then(\n        action(() => {\n          this.localeReady = true\n          this.localeLoading = false\n        }),\n      )\n    }\n    return this.loadingPromise\n  }\n}\nexport const intlStore = new IntlStore() as Immutable<IntlStore>\n","import { useEffect, useRef, useState } from 'react'\nimport { Animated } from 'react-native'\n\nimport { mapToMap } from './toMap'\n\nexport const animationOption = {\n  duration: 150,\n}\n\ntype AnimationProps = {\n  [k: string]: any // []\n}\n\nexport function useAnimation<T extends AnimationProps>(\n  enabled: boolean,\n  props: T,\n  options?: Animated.TimingAnimationConfig,\n) {\n  const r = useRef<Animated.Value>()\n  if (!r.current) {\n    r.current = new Animated.Value(0)\n  }\n  const v = r.current\n  useEffect(() => {\n    const t = Animated.timing(v, {\n      ...animationOption,\n      ...options,\n      toValue: enabled ? 1 : 0,\n      useNativeDriver: false,\n    })\n    t.start()\n    return () => t.stop()\n  }, [enabled, options, v])\n  return mapToMap(props, undefined, (k: string) =>\n    v.interpolate({\n      inputRange: [0, 1],\n      outputRange: props[k],\n    }),\n  ) as {\n    [k in keyof T]: T[k][0]\n  }\n}\n\nexport const useAnimationOnDidMount = <T extends AnimationProps>(props: T) => {\n  const [didMount, setDidMount] = useState(false)\n  useEffect(() => setDidMount(true), [])\n  return useAnimation(didMount, props)\n}\n","import { action, observable } from 'mobx'\n\nexport type RnPickerOption = {\n  options: {\n    key: number | string\n    label: string\n    icon?: string\n  }[]\n  cancelLabel?: string\n  selectedKey?: string\n  onSelect: Function\n}\n\nexport class RnPickerStore {\n  @observable currentRnPicker: RnPickerOption | null = null\n\n  @action open = (picker: RnPickerOption) => {\n    this.currentRnPicker = picker\n  }\n  @action dismiss = () => {\n    this.currentRnPicker = null\n  }\n}\n\nexport const RnPicker = new RnPickerStore()\n","export const toBoolean = (s?: string) =>\n  s === 'on' || s === 'true' || s === '1' || (s as any) === true ? true : false\nexport const toBooleanFalsy = (s?: string) =>\n  !(s === 'off' || s === 'false' || s === '0' || (s as any) === false\n    ? false\n    : true)\n","import { decode } from 'html-entities'\n\nimport { getAuthStore } from '../stores/authStore'\nimport { ChatTarget } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\nimport { formatDuration } from './formatDuration'\n\nexport const formatChatContent = (c: {\n  text?: string\n  creatorId?: string\n  type?: number\n  ctype?: number\n}) => {\n  const type = c.type || c.ctype\n  let text = c.text || ''\n  const originalText = text\n  if (type !== 1) {\n    let o:\n      | undefined\n      | {\n          name?: string\n          talklen?: number\n          file_id?: string\n          additionals?: []\n          target?: ChatTarget\n        }\n    try {\n      o = JSON.parse(text)\n    } catch (err) {}\n    if (!o) {\n      o = {}\n    }\n    if (typeof o.talklen === 'number' || typeof o.talklen === 'string') {\n      text = !c.creatorId\n        ? intl`Call duration: ${formatDuration(o.talklen)}`\n        : c.creatorId === getAuthStore().getCurrentAccount()?.pbxUsername\n        ? intl`Outgoing call, duration: ${formatDuration(o.talklen)}`\n        : intl`Incoming call, duration: ${formatDuration(o.talklen)}`\n    } else if (o.name && o.file_id) {\n      text = `${o.name} ${!o.additionals ? `-> ${o.target?.user_id}` : ''}`\n    } else if (o.name && !o.file_id) {\n      text = o.name\n    }\n  }\n\n  // Fix migrate error from apps backend?\n  let isTextOnly = text.endsWith(' .txt')\n  if (isTextOnly) {\n    text = text.replace(/ \\.txt$/, '')\n  }\n  isTextOnly = isTextOnly || type === 1 || !originalText.startsWith('{')\n\n  return {\n    text: decode(text),\n    isTextOnly,\n  }\n}\n\nexport const filterTextOnly = <\n  T extends {\n    text?: string\n    creatorId?: string\n    type?: number\n    ctype?: number\n  },\n>(\n  arr?: T[],\n): T[] => (arr || []).filter(c => formatChatContent(c).isTextOnly)\n","import { Buffer } from 'buffer'\nimport { debounce } from 'lodash'\nimport { observable } from 'mobx'\nimport moment from 'moment'\nimport { Linking, Platform } from 'react-native'\nimport RNFS from 'react-native-fs'\nimport Share from 'react-native-share'\n\nimport { RnAsyncStorage } from '../components/Rn'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { intl, intlDebug } from './intl'\nimport { RnAlert } from './RnAlert'\n\ndeclare global {\n  interface Window {\n    debugStore: DebugStore\n  }\n}\n\nlet store = null as any as DebugStore\n// The location of 2 log file, log2 will be deleted and replaced by log1\n//    when log1 reach the limit, then log1 will be reset\n// The `log` will be used for combining the two above files in ios\n//    because in ios Share only works with `file://...` url\nconst [log, log1, log2] = ['log', 'log1', 'log2'].map(n =>\n  Platform.OS === 'web'\n    ? ''\n    : `${RNFS.DocumentDirectoryPath}/brekeke-phone-${n}.txt`,\n)\nconst maximumBytes = 100000 // 100KB\n\nclass DebugStore {\n  loading = true\n  // By default only error logs will be captured\n  // If this flag is turned on, all logs will be captured\n  // This flag will be saved to storage and we will read it again\n  //    as soon as possible when app starts up\n  @observable captureDebugLog = false\n  toggleCaptureDebugLog = () => {\n    this.captureDebugLog = !this.captureDebugLog\n    RnAsyncStorage.setItem(\n      'captureDebugLog',\n      JSON.stringify(this.captureDebugLog),\n    )\n  }\n\n  // Cache the size of log files\n  @observable logSizes = [0, 0]\n  getLogSize = () => this.logSizes.reduce((sum, s) => sum + s, 0)\n\n  // Use a queue to write logs to file in batch\n  logQueue: string[] = []\n\n  // The function to be called in src/utils/captureConsoleOutput.ts\n  captureConsoleOutput = (lv: string, msg: string) => {\n    if (lv !== 'error' && lv !== 'warn' && !this.captureDebugLog) {\n      return\n    }\n    msg =\n      moment().format('YYYY/MM/DD HH:mm:ss.SSS') +\n      ` [${lv.toUpperCase().padStart(5)}] ` +\n      msg.replace(/\\s*:\\s+log@\\/.+$/, '')\n    this.logQueue.push(msg)\n    this.writeFileBatch()\n  }\n  writeFile = async () => {\n    if (this.loading) {\n      BackgroundTimer.setTimeout(this.writeFileBatch, 300)\n      return\n    }\n    this.loading = true\n    await this.writeFileWithoutCatch().catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to write debug log to file`,\n        err,\n      })\n    })\n    this.loading = false\n  }\n  writeFileWithoutCatch = async () => {\n    if (!this.logQueue.length) {\n      return\n    }\n    const msg = this.logQueue.join('\\n')\n    this.logQueue = []\n    // Append to log1\n    await RNFS.appendFile(log1, msg + '\\n', 'utf8')\n    const { size } = await RNFS.stat(log1)\n    this.logSizes[0] = Number(size)\n    // If the size of log1 passes the limit\n    //    we will copy it to log2 and clear the log1\n    if (this.logSizes[0] > maximumBytes) {\n      this.logSizes[1] = this.logSizes[0]\n      await RNFS.unlink(log2).catch((err: Error) => {\n        console.error('debugStore RNFS.unlink(log2).catch error:', err)\n      })\n      await RNFS.moveFile(log1, log2)\n    }\n  }\n  writeFileBatch = debounce(this.writeFile, 300, { maxWait: 1000 })\n\n  openLogFile = () =>\n    this.openLogFileWithoutCatch().catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to build and open log file`,\n        err,\n      })\n    })\n  openLogFileWithoutCatch = async () => {\n    const promises = [log1, log2].map(l =>\n      RNFS.exists(l)\n        .then(e => (e ? RNFS.readFile(l, 'utf8') : ''))\n        .then(f => f || ''),\n    )\n    const [f0, f1] = await Promise.all(promises)\n    const title = `brekeke_phone_log_${moment().format('YYMMDDHHmmss')}.txt`\n    let url: string | null = null\n    // Share works inconsistency between android and ios\n    if (Platform.OS === 'ios') {\n      await RNFS.writeFile(log, f1 + f0, 'utf8')\n      url = log // only works with `file://...`\n    } else {\n      const b64 = Buffer.from(f1 + f0).toString('base64')\n      url = `data:text/plain;base64,${b64}` // only works with base64\n    }\n    Share.open({ title, url, subject: title })\n  }\n\n  clearLogFiles = () => {\n    RnAlert.prompt({\n      title: intl`Clear Logs`,\n      message: intl`Do you want to clear all the log files?`,\n      onConfirm: this.clearLogFilesWithoutPrompt,\n      confirmText: intl`CLEAR`,\n    })\n  }\n  clearLogFilesWithoutPrompt = () =>\n    this.clearLogFilesWithoutCatch().catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to clear the log files`,\n        err,\n      })\n    })\n  clearLogFilesWithoutCatch = () =>\n    Promise.all(\n      [log1, log2].map((l, i) =>\n        RNFS.exists(l)\n          .then(e => (e ? RNFS.unlink(l) : undefined))\n          .then(() => (this.logSizes[i] = 0)),\n      ),\n    )\n\n  @observable isCheckingForUpdate = false\n  @observable remoteVersion = ''\n  @observable remoteVersionLastCheck = 0\n\n  checkForUpdate = () => {\n    if (this.isCheckingForUpdate) {\n      return\n    }\n    this.isCheckingForUpdate = true\n    const p =\n      Platform.OS === 'android'\n        ? window\n            .fetch(\n              'https://play.google.com/store/apps/details?id=com.brekeke.phone&hl=en',\n            )\n            .then(res => res.text())\n            .then(\n              t =>\n                t.match(/\\[\\[\\[\"(\\d+\\.\\d+\\.\\d+)\"\\]/)?.[1].trim() ||\n                t.match(/Current Version.+>([\\d.]+)<\\/span>/)?.[1].trim(),\n            )\n        : window\n            .fetch('https://itunes.apple.com/lookup?bundleId=com.brekeke.phone')\n            .then(res => res.json())\n            .then(\n              (j: {\n                results?: {\n                  version: string\n                }[]\n              }) => j.results?.[0].version,\n            )\n    p.then(v => {\n      if (!v) {\n        throw new Error('The returned version from app store is empty')\n      }\n      this.remoteVersion = v\n      this.remoteVersionLastCheck = Date.now()\n      this.isCheckingForUpdate = false\n    })\n      .then(this.saveRemoteVersionToStorage)\n      .catch((err: Error) => {\n        console.error('Failed to get app version from app store:', err)\n        this.isCheckingForUpdate = false\n      })\n  }\n  saveRemoteVersionToStorage = () => {\n    RnAsyncStorage.setItem(\n      'remoteVersion',\n      JSON.stringify({\n        version: this.remoteVersion,\n        lastCheck: this.remoteVersionLastCheck,\n      }),\n    ).catch((err: Error) => {\n      console.error('Failed to save app version to storage:', err)\n    })\n  }\n\n  openInStore = () => {\n    Linking.openURL(\n      Platform.OS === 'android'\n        ? 'https://play.google.com/store/apps/details?id=com.brekeke.phone'\n        : 'itms-apps://apps.apple.com/app/id1233825750',\n    )\n  }\n  autoCheckForUpdate = () => {\n    // Check for update in every day\n    if (Date.now() - this.remoteVersionLastCheck > 24 * 60 * 60 * 1000) {\n      this.checkForUpdate()\n    }\n  }\n\n  init = async () => {\n    this.loading = true\n    // Read size of log files using stat for the initial state\n    const promises = [log1, log2].map((l, i) =>\n      RNFS.exists(l)\n        .then(e => (e ? RNFS.stat(l) : undefined))\n        .then(e => (e ? (this.logSizes[i] = Number(e.size) || 0) : 0))\n        .catch((err: Error) => {\n          RnAlert.error({\n            message: intlDebug`Failed to read debug log file size`,\n            err,\n          })\n        }),\n    )\n    // Delete the combined unused log file\n    // This file will be created every time user request opening the log file\n    //    (ios only because in ios Share only works with `file://...` url)\n    promises.push(\n      RNFS.exists(log)\n        .then(e => (e ? RNFS.unlink(log) : undefined))\n        .catch((err: Error) => {\n          RnAlert.error({\n            message: intlDebug`Failed to delete unused debug log file`,\n            err,\n          })\n        }),\n    )\n    // Read debug log settings from storage\n    promises.push(\n      RnAsyncStorage.getItem('captureDebugLog')\n        .then(v => v && (this.captureDebugLog = JSON.parse(v)))\n        .catch((err: Error) => {\n          RnAlert.error({\n            message: intlDebug`Failed to read debug log settings from storage`,\n            err,\n          })\n        }),\n    )\n    // Read remote app version from storage\n    promises.push(\n      RnAsyncStorage.getItem('remoteVersion')\n        .then(v => v && JSON.parse(v))\n        .then((v: { version: string; lastCheck: number }) => {\n          if (v) {\n            this.remoteVersion = v.version\n            this.remoteVersionLastCheck = v.lastCheck\n          }\n          this.autoCheckForUpdate()\n        })\n        .catch((err: Error) => {\n          console.error('Failed to read app version from storage:', err)\n        }),\n    )\n    //\n    await Promise.all(promises)\n    this.loading = false\n  }\n}\n\nif (Platform.OS !== 'web') {\n  // Assign to window to use in src/utils/captureConsoleOutput.ts\n  store = window.debugStore = new DebugStore()\n\n  // TODO call init together with other store\n  // Need to determine the order of init functions and call them using await\n  store.init()\n}\nexport const debugStore = store\n\nconst getSemVer = (v?: string) => {\n  const a =\n    v\n      ?.split(/\\./g)\n      .map(s => s.match(/^\\d+/)?.[0])\n      .map(Number) || []\n  return [a[0] || 0, a[1] || 0, a[2] || 0, a[3] || 0]\n}\n\n/**\n * Compare 2 semantic versions\n * @param a new version\n * @param b current version\n * @returns a > b ? 1 : a < b ? -1 : 0\n */\nexport const compareSemVer = (a?: string, b?: string) => {\n  const [aMajor, aMinor, aPatch, aFourth] = getSemVer(a)\n  const [bMajor, bMinor, bPatch, bFourth] = getSemVer(b)\n  if (bMajor !== aMajor) {\n    return aMajor > bMajor ? 1 : -1\n  }\n  if (bMinor !== aMinor) {\n    return aMinor > bMinor ? 1 : -1\n  }\n  if (bPatch !== aPatch) {\n    return aPatch > bPatch ? 1 : -1\n  }\n  if (bFourth !== aFourth) {\n    return aFourth > bFourth ? 1 : -1\n  }\n  return 0\n}\n","import { uc } from '../api/uc'\n\nexport const saveBlob = (blob: Blob, name: string) => {\n  const a = document.createElement('a')\n  a.setAttribute('style', 'display: none')\n  const url = window.URL.createObjectURL(blob)\n  a.href = url\n  a.download = name\n  a.click()\n  window.URL.revokeObjectURL(url)\n}\n\nexport const saveBlobFile = (\n  id: string,\n  topic_id: string,\n  type?: string,\n  data?: Blob,\n) =>\n  new Promise(async (resolve, reject) => {\n    try {\n      const dataBlob = data ? data : ((await uc.acceptFile(id)) as Blob)\n      const fr = new FileReader()\n      fr.onloadend = async event => {\n        const r = event.target?.result as ArrayBuffer\n        const cache = await caches.open(`${topic_id}`)\n        const videoBlob = new Blob([r], {\n          type: type === 'video' ? 'video/mp4' : 'image/jpg',\n        })\n        const response = new Response(videoBlob)\n        const urlCacheFile = `${topic_id}/${id}`\n        await cache.put(id, response)\n        resolve(urlCacheFile)\n      }\n      fr.onerror = err => {\n        console.error('saveBlobFile.web onerror error:', err)\n      }\n      fr.readAsArrayBuffer(dataBlob)\n    } catch (err) {\n      console.error('saveBlobFile.web catch error:', err)\n      reject(err)\n    }\n  })\n","import { action, observable } from 'mobx'\nimport { observer } from 'mobx-react'\n\nimport { RnText } from '../components/Rn'\nimport { TRnTextProps } from '../components/RnText'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { formatDuration } from '../utils/formatDuration'\n\nclass TimerStore {\n  @observable now = Date.now()\n  constructor() {\n    BackgroundTimer.setInterval(this.updateNow, 1000)\n  }\n  @action private updateNow = () => {\n    this.now = Date.now()\n  }\n}\n\nexport const timerStore = new TimerStore()\n\ntype TDurationProps = Omit<TRnTextProps, 'children'> & {\n  children: number\n}\n\nexport const Duration = observer(({ children, ...p }: TDurationProps) => (\n  <RnText {...p}>\n    {formatDuration(children && timerStore.now - children)}\n  </RnText>\n))\n","import moment from 'moment'\n\nimport { uc } from '../api/uc'\nimport { ChatMessage } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\n\nexport const numberOfChatsPerLoad = 20\n\nexport const groupByTimestamp = (arr: ChatMessage[]) => {\n  const me = uc.me()\n  const groupByDate: {\n    date: string\n    groupByTime: {\n      time: string\n      messages: ChatMessage[]\n      createdByMe: boolean\n    }[]\n  }[] = []\n  if (!arr?.length) {\n    return groupByDate\n  }\n  let lastDate: string\n  let groupByTime: typeof groupByDate[0]['groupByTime']\n  let lastMessage: ChatMessage\n  let messages: ChatMessage[]\n  arr.forEach(m => {\n    const d = moment(m.created)\n    const date = d.format('MMM D')\n    if (!lastDate || date !== lastDate) {\n      groupByTime = []\n      lastDate = date\n      groupByDate.push({\n        date: formatDateSemantic(m.created),\n        groupByTime,\n      })\n    }\n    if (\n      !lastMessage ||\n      m.creator !== lastMessage.creator ||\n      moment(m.created).valueOf() - moment(lastMessage.created).valueOf() >\n        10 * 60000\n    ) {\n      const time = d.format('HH:mm') // TODO intl\n      lastMessage = m\n      messages = []\n      groupByTime.push({\n        time,\n        messages,\n        createdByMe: m.creator === me.id,\n      })\n    }\n    messages.push(m)\n  })\n  return groupByDate\n}\n\nexport const formatDateSemantic = (d0: number | string) => {\n  const d = moment(d0)\n  const t = moment()\n  if (d.format('yyyy') !== t.format('yyyy')) {\n    return d.format('DD/MM/yyyy') // TODO intl\n  }\n  const today = t.format('MMM D')\n  const yesterday = t.add(-1, 'days').format('MMM D')\n  const date = d.format('MMM D') // TODO intl\n  return date === today\n    ? intl`Today`\n    : date === yesterday\n    ? intl`Yesterday`\n    : date\n}\n\nexport const formatDateTimeSemantic = (str: number | string) => {\n  const d = moment(str)\n  const t = moment()\n  let date = ''\n  if (d.format('yyyy') !== t.format('yyyy')) {\n    date = d.format('DD/MM/yyyy') // TODO intl\n  } else if (d.format('MMM D') !== t.format('MMM D')) {\n    date = d.format('MMM D') // TODO intl\n  }\n  if (date) {\n    date = ' ' + date\n  }\n  const time = moment(str).format('HH:mm') // TODO intl\n  return time + date\n}\n","import { TSyncPnToken } from './syncPnToken2'\n\nlet m: TSyncPnToken = null!\nexport const setSyncPnTokenModule = (m0: TSyncPnToken) => {\n  m = m0\n}\nexport const SyncPnToken = () => m\n","import { FC } from 'react'\nimport { StyleSheet, View, ViewProps } from 'react-native'\nimport Svg, { Path } from 'react-native-svg'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Icon: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\nexport const RnIcon: FC<\n  ViewProps & {\n    color?: string\n    path: string\n    size?: number\n    viewBox?: string\n  }\n> = ({ color, path, size = v.iconSize, viewBox, style, ...p }) => (\n  <View {...p} style={[css.Icon, style]}>\n    <Svg\n      height={size}\n      /* 24 is the regular size of the @mdi/js package */\n      viewBox={viewBox || '0 0 24 24'}\n      width={size}\n    >\n      <Path d={path} fill={color || 'black'} />\n    </Svg>\n  </View>\n)\n","import { useRef } from 'react'\n\nimport { CreatedStore, createStore } from './createStore'\n\nexport const useStore = (mixin?: Function) => {\n  const r = useRef<CreatedStore>()\n  if (!r.current) {\n    if (mixin && typeof mixin !== 'function') {\n      throw new Error(`useStore: mixin must be a function, found ${mixin}`)\n    }\n    const op = () => ({})\n    r.current = createStore(mixin || op)\n  }\n  return r.current\n}\n","import EventEmitter from 'eventemitter3'\nimport { unmountComponentAtNode } from 'react-dom'\n\nimport { MakeCallFn } from '../api/brekekejs'\nimport {\n  Account,\n  accountStore,\n  getAccountUniqueId,\n} from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { arrToMap } from '../utils/toMap'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { webPromptPermission } from '../utils/webPromptPermission'\n\nexport type EmbedSignInOptions = {\n  auto_login?: boolean\n  clear_existing_account?: boolean\n  accounts: EmbedAccount[]\n} & { [k: string]: string }\n\nexport class EmbedApi extends EventEmitter {\n  promptBrowserPermission = webPromptPermission\n\n  getCurrentAccount = () => getAuthStore().getCurrentAccount()\n\n  call: MakeCallFn = (...args) => getCallStore().startCall(...args)\n  getRunningCalls = () => getCallStore().calls\n\n  restart = async (o: EmbedSignInOptions) => {\n    getAuthStore().signOutWithoutSaving()\n    await waitTimeout()\n    await this._signIn(o)\n  }\n\n  cleanup = () => {\n    getAuthStore().signOutWithoutSaving()\n    if (this._rootTag) {\n      unmountComponentAtNode(this._rootTag)\n    }\n  }\n\n  _rootTag?: HTMLElement\n  _palParams?: { [k: string]: string }\n\n  _signIn = async (o: EmbedSignInOptions) => {\n    await accountStore.waitStorageLoaded()\n    if (o.clear_existing_account) {\n      accountStore.accounts = []\n      accountStore.accountData = []\n    }\n    const accountsMap = arrToMap(\n      accountStore.accounts,\n      getAccountUniqueId,\n      (p: Account) => p,\n    ) as { [k: string]: Account }\n    let firstAccountInOptions: Account | undefined\n    o.accounts.forEach(a => {\n      const fr = convertToStorage(a)\n      const to = accountsMap[getAccountUniqueId(fr)]\n      if (to) {\n        copyToStorage(fr, to)\n        firstAccountInOptions = firstAccountInOptions || to\n      } else {\n        accountStore.accounts.push(fr)\n        firstAccountInOptions = firstAccountInOptions || fr\n      }\n    })\n    await accountStore.saveAccountsToLocalStorageDebounced()\n    if (!o.auto_login) {\n      return\n    }\n    const as = getAuthStore()\n    if (firstAccountInOptions) {\n      as.signIn(firstAccountInOptions)\n      return\n    }\n    await as.autoSignInEmbed()\n  }\n}\n\nexport const embedApi = new EmbedApi()\n\ntype EmbedAccount = {\n  hostname: string\n  port: string\n  tenant?: string\n  username: string\n  password?: string\n  phoneIndex?: number\n  uc?: boolean\n  ucDisplayOfflineUsers?: boolean\n  parks?: string[]\n  parkNames?: string[]\n  pushNotification?: boolean\n}\nconst convertToStorage = (a: EmbedAccount): Account => {\n  const ea = accountStore.genEmptyAccount()\n  ea.pbxHostname = a.hostname || ''\n  ea.pbxPort = a.port || ''\n  ea.pbxTenant = a.tenant || ''\n  ea.pbxUsername = a.username || ''\n  ea.pbxPassword = a.password || ''\n  ea.pbxPhoneIndex = `${Number(a.phoneIndex) || 4}`\n  ea.ucEnabled = a.uc || false\n  ea.displayOfflineUsers = a.ucDisplayOfflineUsers || false\n  ea.parks = a.parks || []\n  ea.parkNames = a.parkNames || []\n  ea.pushNotificationEnabled = a.pushNotification || false\n  return ea\n}\nconst copyToStorage = (fr: Account, to: Account) => {\n  to.pbxHostname = fr.pbxHostname\n  to.pbxPort = fr.pbxPort\n  to.pbxTenant = fr.pbxTenant\n  to.pbxUsername = fr.pbxUsername\n  to.pbxPassword = fr.pbxPassword\n  to.pbxPhoneIndex = fr.pbxPhoneIndex\n  to.ucEnabled = fr.ucEnabled\n  to.displayOfflineUsers = fr.displayOfflineUsers\n  to.parks = fr.parks\n  to.parkNames = fr.parkNames\n  to.pushNotificationEnabled = fr.pushNotificationEnabled\n}\n","import { cloneDeep, uniq } from 'lodash'\nimport { action, observable } from 'mobx'\n\nexport type DropdownPosition = {\n  top?: number\n  left?: number\n  right?: number\n  bottom?: number\n}\n\nexport class RnDropdownStore {\n  @observable positions: DropdownPosition[] = []\n  @observable shouldUpdatePosition: boolean = false\n  @observable hiddenIndexes: number[] = []\n  @observable openedIndex: number = -1\n  itemHeight: number = 0\n  headerHeight: number = 0\n\n  @action toggleSection = (sectionIndex: number, itemSize: number) => {\n    //\n    const hiddenIndexes2 = [...this.hiddenIndexes]\n    const ii = hiddenIndexes2.indexOf(sectionIndex)\n    if (ii > -1) {\n      hiddenIndexes2.splice(ii, 1)\n    } else {\n      hiddenIndexes2.push(sectionIndex)\n    }\n    //\n    const positions2 = cloneDeep(this.positions)\n    const collapse = !this.hiddenIndexes.some(i => i === sectionIndex)\n    this.positions.forEach((i, index) => {\n      if (index > sectionIndex) {\n        positions2[index] = {\n          top:\n            (positions2[index].top || 0) +\n            (collapse ? -this.itemHeight : this.itemHeight) * itemSize,\n          right: positions2[index].right || 0,\n        }\n      }\n    })\n    //\n    this.openedIndex = -1\n    this.hiddenIndexes = uniq(hiddenIndexes2)\n    this.positions = positions2\n  }\n  @action removeSection = (sectionIndex: number, itemSize: number) => {\n    const positions2 = [...this.positions]\n    this.positions.forEach((_, index) => {\n      if (index > sectionIndex) {\n        positions2[index] = {\n          top:\n            (positions2[index].top || 0) -\n            this.itemHeight * itemSize -\n            this.headerHeight,\n          right: positions2[index].right || 0,\n        }\n      }\n    })\n    if (positions2.length >= 1) {\n      positions2.splice(sectionIndex, 1)\n    }\n    this.positions = positions2\n    this.hiddenIndexes = this.hiddenIndexes.map(idx => idx - 1)\n    this.openedIndex = -1\n  }\n\n  @action setPositions = (positions: DropdownPosition[]) => {\n    this.positions = positions\n  }\n  @action setShouldUpdatePosition = (v: boolean) => {\n    this.shouldUpdatePosition = v\n  }\n\n  @action open = (index: number) => {\n    this.openedIndex = index\n  }\n  @action toggle = (index: number) => {\n    this.openedIndex = index === this.openedIndex ? -1 : index\n    this.hiddenIndexes = this.hiddenIndexes.filter(i => i !== index)\n  }\n  @action close = () => {\n    this.openedIndex = -1\n  }\n\n  @action setHiddenIndexes = (indexes: number[]) => {\n    this.hiddenIndexes = indexes\n  }\n  @action addSection = () => {\n    this.hiddenIndexes = this.hiddenIndexes.map(i => i + 1)\n    this.shouldUpdatePosition = true\n  }\n\n  @action setHeaderHeight = (height: number) => {\n    this.headerHeight = height\n  }\n  @action setItemHeight = (height: number) => {\n    this.itemHeight = height\n  }\n}\n\nexport const RnDropdown = new RnDropdownStore()\n","import CiruclarJSON from 'circular-json'\nimport { debounce } from 'lodash'\nimport { action, Lambda, reaction } from 'mobx'\n\nimport { PbxGetProductInfoRes } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { sip, SipLoginOption } from '../api/sip'\nimport { updatePhoneIndex } from '../api/updatePhoneIndex'\nimport { SipPn } from '../utils/PushNotification-parse'\nimport { toBoolean } from '../utils/string'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\nimport { sipErrorEmitter } from './sipErrorEmitter'\n\nconst getPbxConfig = <K extends keyof PbxGetProductInfoRes>(k: K) =>\n  pbx.getConfig().then(c => c && c[k])\n\nclass AuthSIP {\n  private clearShouldAuthReaction?: Lambda\n\n  auth = () => {\n    this.authWithCheck()\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    this.clearShouldAuthReaction = reaction(\n      s.sipShouldAuth,\n      this.authWithCheckDebounced,\n    )\n  }\n  @action dispose = () => {\n    console.log('SIP PN debug: set sipState stopped dispose')\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    s.sipState = 'stopped'\n    sip.stopWebRTC()\n  }\n\n  private authPnWithoutCatch = async (pn: Partial<SipPn>) => {\n    const ca = getAuthStore().getCurrentAccount()\n    if (!ca) {\n      console.log('SIP PN debug: Already signed out after long await')\n      return\n    }\n    if (!pn.sipAuth || !pn.sipWssPort || !pn.phoneId) {\n      console.error(\n        `SIP PN debug: Invalid sip PN data: ${CiruclarJSON.stringify(pn)}`,\n      )\n      this.dispose()\n      return\n    }\n    const turnConfig: RTCIceServer | undefined = pn.turnServer\n      ? {\n          urls: pn.turnServer.split(',').map(s => s.trim()),\n          username: pn.turnUsername,\n          credential: pn.turnCredential,\n        }\n      : undefined\n    const o: SipLoginOption = {\n      hostname: ca.pbxHostname,\n      port: pn.sipWssPort,\n      username: pn.phoneId,\n      accessToken: pn.sipAuth,\n      pbxTurnEnabled: ca.pbxTurnEnabled,\n      dtmfSendPal: toBoolean(pn.dtmfSendPal),\n      turnConfig,\n    }\n    await sip.connect(o, ca)\n  }\n\n  @action private authWithoutCatch = async () => {\n    console.log('SIP PN debug: set sipState connecting')\n    const s = getAuthStore()\n    s.sipState = 'connecting'\n    sipErrorEmitter.removeAllListeners()\n    sipErrorEmitter.on('error', () => {\n      console.log('SIP PN debug: got error from sipErrorEmitter')\n      this.dispose()\n      this.authWithCheck()\n    })\n    //\n    const pn = s.sipPn\n    if (pn.sipAuth) {\n      console.log('SIP PN debug: AuthSIP.authPnWithoutCatch')\n      this.authPnWithoutCatch(pn)\n      return\n    }\n    console.log('SIP PN debug: AuthSIP.authWithoutCatch')\n    //\n    pn.sipWssPort = pn.sipWssPort || (await getPbxConfig('sip.wss.port'))\n    pn.dtmfSendPal =\n      pn.dtmfSendPal || (await getPbxConfig('webphone.dtmf.send.pal'))\n    pn.turnServer =\n      pn.turnServer || (await getPbxConfig('webphone.turn.server'))\n    pn.turnUsername =\n      pn.turnUsername || (await getPbxConfig('webphone.turn.username'))\n    pn.turnCredential =\n      pn.turnCredential || (await getPbxConfig('webphone.turn.credential'))\n    pn.phoneId = pn.phoneId || (await updatePhoneIndex().then(p => p?.id))\n    if (!pn.phoneId) {\n      throw new Error('Failed to get phoneId from updatePhoneIndex')\n    }\n    pn.sipAuth = await pbx.createSIPAccessToken(pn.phoneId)\n    pn.sipAuthAt = Date.now()\n    await this.authPnWithoutCatch(pn)\n  }\n\n  authWithCheck = async () => {\n    const s = getAuthStore()\n    if (!s.sipPn.sipAuthAt || Date.now() - s.sipPn.sipAuthAt > 90000) {\n      // Empty or expire after 90 seconds\n      s.sipPn = {}\n    }\n    const sipShouldAuth = s.sipShouldAuth()\n    console.log(`SIP PN debug: authWithCheck ${sipShouldAuth}`, {\n      sipState: s.sipState,\n      signedInId: !!s.signedInId,\n      sipAuth: !!s.sipPn.sipAuth,\n      pbxState: s.pbxState,\n      sipTotalFailure: s.sipTotalFailure,\n    })\n    if (!sipShouldAuth) {\n      return\n    }\n    if (s.sipTotalFailure > 1) {\n      s.sipState = 'waiting'\n      await waitTimeout(\n        s.sipTotalFailure < 5 ? s.sipTotalFailure * 1000 : 15000,\n      )\n    }\n    this.authWithoutCatch().catch(\n      action((err: Error) => {\n        console.log('SIP PN debug: set sipState failure catch')\n        s.sipState = 'failure'\n        s.sipTotalFailure += 1\n        sip.stopWebRTC()\n        console.error('Failed to connect to sip:', err)\n      }),\n    )\n  }\n  private authWithCheckDebounced = debounce(this.authWithCheck, 300)\n}\n\nexport const authSIP = new AuthSIP()\n","import { FC } from 'react'\nimport {\n  Platform,\n  StyleSheet,\n  TouchableOpacityProps,\n  View,\n  ViewProps,\n} from 'react-native'\nimport Svg, { Path } from 'react-native-svg'\n\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  ButtonIcon: {\n    alignItems: 'center',\n    marginHorizontal: 5,\n  },\n  ButtonIcon_Btn: {\n    borderWidth: 1,\n    padding: 12,\n  },\n  ButtonIcon_Name: {\n    paddingTop: 5,\n    minWidth: Platform.OS === 'ios' ? 70 : 80,\n    textAlign: 'center',\n  },\n})\n\nexport const ButtonIcon: FC<{\n  color: string\n  path: string\n  size?: number\n  disabled?: boolean\n  onPress?(): void\n  style?: TouchableOpacityProps['style']\n  bgcolor?: string\n  noborder?: boolean\n  bdcolor?: string\n  name?: string\n  textcolor?: string\n  styleContainer?: ViewProps['style']\n}> = p => {\n  const size = p.size || 15\n  return (\n    <View style={[css.ButtonIcon, p.styleContainer]}>\n      <RnTouchableOpacity\n        disabled={p.disabled}\n        onPress={p.onPress}\n        style={[\n          css.ButtonIcon_Btn,\n          p.style,\n          { borderRadius: size * 1.5 },\n          { backgroundColor: p?.disabled ? v.subColor : p.bgcolor },\n          p.noborder && { borderWidth: 0 },\n          { borderColor: p.bdcolor },\n        ]}\n      >\n        <Svg height={size} viewBox='0 0 24 24' width={size}>\n          <Path d={p.path} fill={p.color || 'black'} />\n        </Svg>\n      </RnTouchableOpacity>\n      {p.name && (\n        <RnText\n          small\n          style={[css.ButtonIcon_Name, !!p.textcolor && { color: p.textcolor }]}\n        >\n          {p.name}\n        </RnText>\n      )}\n    </View>\n  )\n}\n","import EventEmitter from 'eventemitter3'\n\nexport const sipErrorEmitter = new EventEmitter()\n","import {\n  mdiAccountCircleOutline,\n  mdiCogOutline,\n  mdiPhoneOutline,\n} from '../assets/icons'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { arrToMap } from '../utils/toMap'\n\nexport type Menu = {\n  key: string\n  icon: string\n  subMenus: SubMenu[]\n  defaultSubMenuKey: string\n  defaultSubMenu: SubMenu\n  subMenusMap: { [k: string]: SubMenu }\n  navFn(): void\n}\nexport type SubMenu = {\n  key: string\n  label: string\n  navFnKey: keyof ReturnType<typeof Nav>\n  ucRequired?: boolean\n  navFn(): void\n}\n\nconst genMenus = () => {\n  const arr = [\n    {\n      key: 'contact',\n      icon: mdiAccountCircleOutline,\n      subMenus: [\n        {\n          key: 'phonebook',\n          label: intl`PHONEBOOK`,\n          navFnKey: 'goToPageContactPhonebook',\n        },\n        {\n          key: 'users',\n          label: intl`USERS`,\n          navFnKey: 'goToPageContactUsers',\n        },\n        {\n          key: 'chat',\n          label: intl`CHAT`,\n          navFnKey: 'goToPageChatRecents',\n          ucRequired: true,\n        },\n        {\n          key: 'webchat',\n          label: intl`WEBCHAT`,\n          navFnKey: 'goToPageWebChat',\n          ucRequired: true,\n        },\n      ],\n      defaultSubMenuKey: 'users',\n    },\n    {\n      key: 'call',\n      icon: mdiPhoneOutline,\n      subMenus: [\n        {\n          key: 'keypad',\n          label: intl`KEYPAD`,\n          navFnKey: 'goToPageCallKeypad',\n        },\n        {\n          key: 'recents',\n          label: intl`RECENTS`,\n          navFnKey: 'goToPageCallRecents',\n        },\n        {\n          key: 'parks',\n          label: intl`PARKS`,\n          navFnKey: 'goToPageCallParks',\n        },\n      ],\n      defaultSubMenuKey: 'recents',\n    },\n    {\n      key: 'settings',\n      icon: mdiCogOutline,\n      subMenus: [\n        {\n          key: 'account',\n          label: intl`CURRENT ACCOUNT`,\n          navFnKey: 'goToPageSettingsCurrentAccount',\n        },\n        {\n          key: 'other',\n          label: intl`OTHER SETTINGS`,\n          navFnKey: 'goToPageSettingsOther',\n        },\n      ],\n      defaultSubMenuKey: 'account',\n    },\n  ] as Menu[]\n  //\n  arr.forEach((m, i) => {\n    m.subMenusMap = arrToMap(\n      m.subMenus,\n      (s: SubMenu) => s.key,\n      (s: SubMenu) => s,\n    ) as Menu['subMenusMap']\n    m.defaultSubMenu = m.subMenusMap?.[m.defaultSubMenuKey]\n    m.subMenus.forEach(s => {\n      s.navFn = () => {\n        if (s.ucRequired && !getAuthStore().getCurrentAccount()?.ucEnabled) {\n          m.defaultSubMenu.navFn()\n          return\n        }\n        // @ts-ignore\n        Nav()[s.navFnKey]()\n        saveNavigation(i, s.key)\n      }\n    })\n    m.navFn = () => {\n      let k = getAuthStore().getCurrentAccount()?.navSubMenus?.[i]\n      if (!k) {\n        return\n      }\n      if (!(k in m.subMenusMap)) {\n        k = m.defaultSubMenuKey\n      }\n      m.subMenusMap[k].navFn()\n    }\n  })\n  return arr\n}\n\nlet lastLocale = intlStore.locale\nlet lastMenus = genMenus()\nexport const menus = () => {\n  if (lastLocale !== intlStore.locale) {\n    lastLocale = intlStore.locale\n    lastMenus = genMenus()\n  }\n  return lastMenus\n}\n\nconst saveNavigation = (i: number, k: string) => {\n  const arr = menus()\n  const m = arr[i]\n  const ca = getAuthStore().getCurrentAccount()\n  if (!m || !ca) {\n    return\n  }\n  if (!(k in m.subMenusMap)) {\n    k = m.defaultSubMenuKey\n  }\n  normalizeSavedNavigation()\n  if (m.key !== 'settings') {\n    ca.navIndex = i\n  }\n  ca.navSubMenus[i] = k\n  accountStore.saveAccountsToLocalStorageDebounced()\n}\nexport const normalizeSavedNavigation = () => {\n  const arr = menus()\n  const ca = getAuthStore().getCurrentAccount()\n  if (!ca) {\n    return\n  }\n  if (!arr[ca.navIndex]) {\n    ca.navIndex = 0\n  }\n  if (ca.navSubMenus?.length !== arr.length) {\n    ca.navSubMenus = arr.map(() => '')\n  }\n  arr.forEach((m, i) => {\n    if (!(ca.navSubMenus[i] in m.subMenusMap)) {\n      ca.navSubMenus[i] = m.defaultSubMenuKey\n    }\n  })\n}\n\nexport const getSubMenus = (menu: string) => {\n  const arr = menus()\n  const m = arr.find(_ => _.key === menu)\n  if (!m) {\n    RnAlert.error({\n      unexpectedErr: new Error(`Can not find sub menus for ${menu}`),\n    })\n    return []\n  }\n  return m.subMenus.filter(\n    s => !(s.ucRequired && !getAuthStore().getCurrentAccount()?.ucEnabled),\n  )\n}\n","import { cloneDeep, isEqual } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Platform, View } from 'react-native'\n\nimport { Account, accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { debugStore } from '../stores/debugStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { useForm } from '../utils/useForm'\nimport { useStore } from '../utils/useStore'\nimport { Layout } from './Layout'\nimport { RnText } from './Rn'\n\nexport const AccountCreateForm: FC<{\n  updating?: Account\n  onBack: Function\n  onSave: Function\n  footerLogout?: boolean\n  title: string\n}> = observer(props => {\n  const isWeb = Platform.OS === 'web'\n  const m = () => ({\n    observable: {\n      account: {\n        ...accountStore.genEmptyAccount(),\n        ...cloneDeep(props.updating),\n      },\n      addingPark: { name: '', number: '' },\n    },\n    resetAllFields: () => {\n      RnAlert.prompt({\n        title: intl`Reset`,\n        message: intl`Do you want to reset the form to the original data?`,\n        onConfirm: () => {\n          $.set('account', (p: Account) => ({\n            ...accountStore.genEmptyAccount(),\n            ...cloneDeep(props.updating),\n            id: p.id,\n          }))\n        },\n        confirmText: intl`RESET`,\n      })\n    },\n    //\n    onAddingParkSubmit: () => {\n      $.set('account', (p: Account) => {\n        p.parks = p.parks || []\n        p.parkNames = p.parkNames || []\n        if ($.addingPark.name && $.addingPark.number) {\n          if (p.parkNames.length !== p.parks.length) {\n            const { parkNames } = p\n            p.parkNames = p.parks.map((_, i) => parkNames[i] || '')\n          }\n          if (p.parks.includes($.addingPark.number)) {\n            RnAlert.error({\n              message: intlDebug`Park number ${$.addingPark.number} already exist`,\n            })\n            return p\n          }\n          p.parks.push($.addingPark.number)\n          p.parkNames.push($.addingPark.name)\n          $.addingPark = { name: '', number: '' }\n        }\n        return p\n      })\n    },\n    onAddingParkRemove: (i: number) => {\n      RnAlert.prompt({\n        title: intl`Remove Park`,\n        message: (\n          <>\n            <RnText small>\n              Park {i + 1}:{' '}\n              {$.account.parks?.[i] + ' - ' + $.account.parkNames?.[i]}\n            </RnText>\n            <View />\n            <RnText>{intl`Do you want to remove this park?`}</RnText>\n          </>\n        ),\n        onConfirm: () => {\n          $.set('account', (p: Account) => {\n            p.parks = p.parks?.filter((p0, i0) => i0 !== i)\n            return p\n          })\n        },\n      })\n    },\n    //\n    hasUnsavedChanges: () => {\n      const a = props.updating || accountStore.genEmptyAccount()\n      if (!props.updating) {\n        Object.assign(a, {\n          id: $.account.id,\n        })\n      }\n      return !isEqual($.account, a)\n    },\n    onBackBtnPress: () => {\n      if (!$.hasUnsavedChanges()) {\n        props.onBack()\n        return\n      }\n      RnAlert.prompt({\n        title: intl`Discard Changes`,\n        message: intl`Do you want to discard all unsaved changes and go back?`,\n        onConfirm: props.onBack,\n        confirmText: intl`DISCARD`,\n      })\n    },\n    onValidSubmit: () => {\n      console.log({ account: $.account })\n      props.onSave($.account, $.hasUnsavedChanges())\n    },\n  })\n  type M0 = ReturnType<typeof m>\n  type M = Omit<M0, 'observable'> &\n    M0['observable'] &\n    ReturnType<typeof useStore>\n  const $ = useStore(m) as any as M\n  const [Form, submitForm] = useForm()\n  const as = getAuthStore()\n  return (\n    <Layout\n      description={\n        props.updating\n          ? `${props.updating.pbxUsername} - ${props.updating.pbxHostname}`\n          : intl`Create a new sign in account`\n      }\n      dropdown={\n        props.footerLogout\n          ? [\n              ...(as.isConnFailure()\n                ? [\n                    {\n                      label: intl`Reconnect to server`,\n                      onPress:\n                        as.resetFailureStateIncludeUcLoginFromAnotherPlace,\n                    },\n                  ]\n                : []),\n              ...(Platform.OS !== 'web'\n                ? [\n                    {\n                      label: intl`Open debug log`,\n                      onPress: debugStore.openLogFile,\n                    },\n                  ]\n                : []),\n              {\n                label: intl`Logout`,\n                onPress: as.signOut,\n                danger: true,\n              },\n            ]\n          : [\n              {\n                label: intl`Reset form`,\n                onPress: $.resetAllFields,\n              },\n            ]\n      }\n      fabOnBack={props.footerLogout ? undefined : $.onBackBtnPress}\n      fabOnNext={props.footerLogout ? undefined : (submitForm as () => void)}\n      menu={props.footerLogout ? 'settings' : undefined}\n      onBack={props.footerLogout ? undefined : $.onBackBtnPress}\n      subMenu={props.footerLogout ? 'account' : undefined}\n      title={props.title}\n    >\n      <Form\n        $={$}\n        fields={[\n          {\n            isGroup: true,\n            label: intl`PBX`,\n          },\n          {\n            // autoFocus: true, // TODO Animation issue\n            disabled: props.footerLogout,\n            name: 'pbxUsername',\n            label: intl`USERNAME`,\n            rule: 'required',\n          },\n          {\n            disabled: props.footerLogout,\n            secureTextEntry: true,\n            name: 'pbxPassword',\n            label: intl`PASSWORD`,\n            rule: 'required',\n          },\n          {\n            disabled: props.footerLogout,\n            name: 'pbxTenant',\n            label: intl`TENANT`,\n          },\n          {\n            disabled: props.footerLogout,\n            name: 'pbxHostname',\n            label: intl`HOSTNAME`,\n            rule: 'required|hostname',\n          },\n          {\n            disabled: props.footerLogout,\n            keyboardType: 'numeric',\n            name: 'pbxPort',\n            label: intl`PORT`,\n            rule: 'required|port',\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'RnPicker',\n            name: 'pbxPhoneIndex',\n            label: intl`PHONE`,\n            rule: 'required',\n            options: [1, 2, 3, 4].map(v => ({\n              key: `${v}`,\n              label: intl`Phone ${v}`,\n            })),\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'Switch',\n            name: 'pbxTurnEnabled',\n            label: intl`TURN`,\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'Switch',\n            name: 'pushNotificationEnabled',\n            label: intl`PUSH NOTIFICATION`,\n            hidden: isWeb,\n          },\n          {\n            isGroup: true,\n            label: intl`UC`,\n            hasMargin: true,\n          },\n          {\n            disabled: props.footerLogout,\n            type: 'Switch',\n            name: 'ucEnabled',\n            label: intl`UC`,\n            onValueChange: (v: boolean) => {\n              $.set('account', (p: Account) => {\n                p.ucEnabled = v\n                return p\n              })\n            },\n          },\n          {\n            isGroup: true,\n            label: intl`PARKS (${$.account.parks?.length})`,\n            hasMargin: true,\n          },\n          ...($.account.parks?.map((p, i) => {\n            const parkName = $.account.parkNames?.[i]\n            return {\n              disabled: true,\n              name: `parks[${i}]`,\n              type: 'PARK',\n              value: `${p} ${parkName ? '- ' + parkName : ''}`,\n              label: intl`PARK ${i + 1}`,\n              onRemoveBtnPress: props.footerLogout\n                ? null\n                : () => $.onAddingParkRemove(i),\n            }\n          }) || []),\n          ...(props.footerLogout\n            ? []\n            : [\n                {\n                  name: 'parks[new]',\n                  label: intl`NEW PARK`,\n                  type: 'PARK',\n                  value: $.addingPark,\n                  onValueChange: (v: { number: string; name?: string }) =>\n                    $.set('addingPark', v),\n                  onCreateBtnPress: $.onAddingParkSubmit,\n                },\n              ]),\n        ]}\n        k='account'\n        onValidSubmit={$.onValidSubmit}\n      />\n    </Layout>\n  )\n})\n","import { Platform } from 'react-native'\n\nexport const formatFileType = (name: string) => {\n  const typeImage = ['PNG', 'JPG', 'JPEG', 'GIF']\n  let typeVideo: string[] = []\n  if (Platform.OS === 'web') {\n    typeVideo = ['MP4', 'WEBM', 'OGG', 'MOV']\n    // ref: https://www.w3schools.com/tags/tag_video.asp\n  } else if (Platform.OS === 'ios') {\n    typeVideo = ['MP4', 'M4A', 'MOV', '3GP']\n    // ref: https://stackoverflow.com/questions/1535836/video-file-formats-supported-in-iphone\n  } else {\n    typeVideo = ['MP4', 'M4A', 'FMP4', 'WEBM', 'MKV', 'MPEG', 'FLV', 'MOV']\n    // ref: https://github.com/react-native-video/react-native-video/blob/master/android-exoplayer/README.md\n  }\n\n  const fileName = name.split('.').pop()?.toUpperCase() || ''\n  if (typeImage.includes(fileName)) {\n    return 'image'\n  }\n  if (typeVideo.includes(fileName)) {\n    return 'video'\n  }\n  return 'other'\n}\n","import { FC, PropsWithChildren, useState } from 'react'\nimport { Animated, StyleSheet, View, ViewProps } from 'react-native'\n\nimport { useAnimationOnDidMount } from '../utils/animation'\n\nconst css = StyleSheet.create({\n  Getter: {\n    opacity: 0,\n  },\n  GetterInner: {\n    position: 'absolute',\n  },\n  Inner: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n})\n\n// The style and innerStyle prop should only be used for positioning and theming\n// We should not use them for sizing like height/border/padding... -> use the children instead\nexport const AnimatedSize: FC<\n  ViewProps & {\n    animateWidth?: boolean\n    innerStyle?: ViewProps['style']\n  }\n> = p => {\n  const [size, setSize] = useState(0)\n  const Component = size ? Animation : Getter\n  return <Component {...p} setSize={setSize} size={size} />\n}\n\nconst Getter = (p: {\n  animateWidth?: boolean\n  children?: PropsWithChildren<{}>['children']\n  setSize: Function\n}) => {\n  const { animateWidth, children, setSize } = p\n  return (\n    <View style={css.Getter}>\n      <View\n        onLayout={e =>\n          setSize(e.nativeEvent.layout[animateWidth ? 'width' : 'height'])\n        }\n        style={css.GetterInner}\n      >\n        {children}\n      </View>\n    </View>\n  )\n}\nconst Animation = (p: {\n  animateWidth?: boolean\n  children?: PropsWithChildren<{}>['children']\n  innerStyle?: ViewProps['style']\n  size: number\n  style?: ViewProps['style']\n}) => {\n  const { animateWidth, children, innerStyle, size, style } = p\n  const cssAnimation = useAnimationOnDidMount({\n    [animateWidth ? 'width' : 'height']: [0, size],\n  })\n  return (\n    <Animated.View style={[style, cssAnimation]}>\n      <View style={[css.Inner, innerStyle]}>{children}</View>\n    </Animated.View>\n  )\n}\n","import { action } from 'mobx'\nimport { ReactComponentLike } from 'prop-types'\n\nimport { intl } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnStacker } from '../stores/RnStacker'\nimport { arrToMap } from '../utils/toMap'\nimport { Menu, SubMenu } from './navigationConfig'\n\nlet PageCallTransferChooseUser: ReactComponentLike\nexport const setPageCallTransferChooseUser = (p: ReactComponentLike) => {\n  PageCallTransferChooseUser = p\n}\nlet PageCallTransferDial: ReactComponentLike\nexport const setPageCallTransferDial = (p: ReactComponentLike) => {\n  PageCallTransferDial = p\n}\n\nexport const getTabs = (tab: string) => {\n  const arr = [\n    {\n      key: 'call_transfer',\n      icon: null,\n      subMenus: [\n        {\n          key: 'list_user',\n          label: intl`USER`,\n          navFnKey: { PageCallTransferChooseUser },\n        },\n        {\n          key: 'external_number',\n          label: intl`KEYPAD`,\n          navFnKey: { PageCallTransferDial },\n        },\n      ],\n      defaultSubMenuKey: 'list_user',\n    },\n  ] as any as Menu[]\n\n  const subMenuNames = arr[0].subMenus.map(s => Object.keys(s.navFnKey)[0])\n\n  arr.forEach((m, i) => {\n    m.subMenusMap = arrToMap(\n      m.subMenus,\n      (s: SubMenu) => s.key,\n      (s: SubMenu) => s,\n    ) as Menu['subMenusMap']\n    m.defaultSubMenu = m.subMenusMap?.[m.defaultSubMenuKey]\n    m.subMenus.forEach(s => {\n      s.navFn = action(() => {\n        const name = Object.keys(s.navFnKey)[0]\n        // @ts-ignore\n        const Component: ReactComponentLike = s.navFnKey[name]\n        const lastStack = RnStacker.stacks.pop()\n        if (lastStack && !subMenuNames.includes(lastStack.name)) {\n          RnStacker.stacks.push(lastStack)\n        }\n        RnStacker.stacks.push({\n          name,\n          Component,\n        })\n      })\n    })\n  })\n  const m = arr.find(_ => _.key === tab)\n  if (!m) {\n    RnAlert.error({\n      unexpectedErr: new Error(`Can not find sub menus for ${tab}`),\n    })\n    return []\n  }\n  return m.subMenus as SubMenu[]\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\nimport LinearGradient, {\n  LinearGradientProps,\n} from 'react-native-linear-gradient'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  BrekekeGradient: {\n    height: '100%',\n    minHeight: 550,\n  },\n})\n\nexport type BrekekeGradientProps = Omit<LinearGradientProps, 'colors'> & {\n  white?: boolean\n}\nexport const BrekekeGradient: FC<BrekekeGradientProps> = props => (\n  <LinearGradient\n    {...props}\n    colors={\n      props.white ? ['white', 'white'] : [v.colors.primaryFn(0.2), v.revBg]\n    }\n    style={[css.BrekekeGradient, props.style]}\n  />\n)\n","import { observer } from 'mobx-react'\nimport { Platform, StyleSheet, View, ViewProps } from 'react-native'\nimport { FastImageProps } from 'react-native-fast-image'\n\nimport avatarPlaceholder from '../assets/avatar-placeholder.png'\nimport { mdiRecord } from '../assets/icons'\nimport { getAuthStore } from '../stores/authStore'\nimport { RnIcon, RnImage } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Avatar: {\n    width: 50,\n    height: 50,\n  },\n  ImageOuter: {\n    flex: 1,\n    borderRadius: 50,\n    overflow: 'hidden',\n  },\n  Image: {\n    flex: 1,\n  },\n  Status: {\n    position: 'absolute',\n    top: 27,\n    left: 30,\n  },\n})\n\nconst statusMapColor = {\n  online: v.colors.primary,\n  idle: v.colors.warning,\n  busy: v.colors.danger,\n  offline: v.subColor,\n}\n\nexport const Avatar = observer(\n  (p: {\n    source?: string | { uri: string }\n    status?: string\n    style?: ViewProps['style']\n  }) => {\n    const { source, status, style } = p\n    const uri =\n      (typeof source !== 'string' &&\n        typeof source?.uri === 'string' &&\n        source?.uri) ||\n      (Platform.OS === 'web' && avatarPlaceholder) ||\n      avatarPlaceholder\n    const imgSource =\n      typeof uri === 'string' ? { uri } : (uri as FastImageProps['source'])\n    return (\n      <View style={[css.Avatar, style]}>\n        <View style={css.ImageOuter}>\n          <RnImage source={imgSource} style={css.Image} />\n        </View>\n        {getAuthStore().getCurrentAccount()?.ucEnabled &&\n          typeof status === 'string' && (\n            <RnIcon\n              color={statusMapColor[status as keyof typeof statusMapColor]}\n              path={mdiRecord}\n              style={css.Status}\n            />\n          )}\n      </View>\n    )\n  },\n)\n","import { Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiBackspace,\n  mdiKeyboard,\n  mdiPhone,\n  mdiPhoneForward,\n} from '../assets/icons'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  KeyPad_Number: {\n    flexDirection: 'row',\n  },\n  KeyPad_NumberTxt: {\n    fontSize: v.fontSizeTitle,\n    fontWeight: '600',\n    textAlign: 'center',\n    paddingVertical: 20,\n  },\n  KeyPad_NumberBtn: {\n    width: '33.3%',\n  },\n  KeyPad_Btn: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 25,\n  },\n  KeyPad_Btn__call: {\n    backgroundColor: v.colors.primary,\n    width: 64,\n    borderRadius: 40,\n    paddingVertical: 20,\n  },\n  KeyPad_Btn__call_2: {\n    backgroundColor: v.colors.primary,\n    width: 50,\n    height: 50,\n    justifyContent: 'center',\n    borderRadius: 25,\n  },\n  KeyPad_view: {\n    flex: 1,\n    flexDirection: 'row',\n    backgroundColor: v.colors.primaryFn(0.5),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    height: 50,\n    borderRadius: 50 / 2,\n  },\n})\n\nconst keys = [\n  ['1', '2', '3'],\n  ['4', '5', '6'],\n  ['7', '8', '9'],\n  ['*', '0', '#'],\n]\n\nexport const KeyPad = (p: {\n  onPressNumber(k: string): void\n  showKeyboard(): void\n  callVoice?(): void\n  callVoiceForward?(): void\n}) => (\n  <>\n    {keys.map((row, i) => (\n      <View key={i} style={css.KeyPad_Number}>\n        {row.map(key => (\n          <RnTouchableOpacity\n            key={key}\n            onPress={() => p.onPressNumber(key)}\n            style={css.KeyPad_NumberBtn}\n          >\n            <RnText style={css.KeyPad_NumberTxt}>{key}</RnText>\n          </RnTouchableOpacity>\n        ))}\n      </View>\n    ))}\n    <View style={css.KeyPad_Btn}>\n      <RnTouchableOpacity onPress={p.showKeyboard} style={css.KeyPad_NumberBtn}>\n        <RnIcon\n          color={Platform.OS === 'web' ? 'white' : undefined}\n          path={mdiKeyboard}\n        />\n      </RnTouchableOpacity>\n      <View style={p.callVoiceForward ? css.KeyPad_view : undefined}>\n        {p.callVoiceForward && (\n          <RnTouchableOpacity\n            onPress={p.callVoiceForward}\n            style={[css.KeyPad_NumberBtn, css.KeyPad_Btn__call_2]}\n          >\n            <RnIcon path={mdiPhoneForward} />\n          </RnTouchableOpacity>\n        )}\n        {p.callVoice && (\n          <RnTouchableOpacity\n            onPress={p.callVoice}\n            style={[\n              css.KeyPad_NumberBtn,\n              !p.callVoiceForward\n                ? css.KeyPad_Btn__call\n                : css.KeyPad_Btn__call_2,\n            ]}\n          >\n            <RnIcon path={mdiPhone} />\n          </RnTouchableOpacity>\n        )}\n      </View>\n      <RnTouchableOpacity\n        onPress={() => p.onPressNumber('')}\n        style={css.KeyPad_NumberBtn}\n      >\n        <RnIcon path={mdiBackspace} />\n      </RnTouchableOpacity>\n    </View>\n  </>\n)\n","import { FC, RefObject } from 'react'\nimport {\n  Keyboard,\n  NativeSyntheticEvent,\n  StyleSheet,\n  TextInput,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\n\nimport { intl } from '../stores/intl'\nimport { RnTextInput } from './Rn'\n\nconst css = StyleSheet.create({\n  ShowNumbers: {\n    flexDirection: 'row',\n  },\n  ShowNumbers_DisplayTxt: {\n    fontSize: 24,\n    padding: 15,\n    width: '100%',\n  },\n  ShowNumbers_BtnCall: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    width: 40,\n    height: 40,\n    borderRadius: 40,\n  },\n})\n\nexport const ShowNumber: FC<{\n  setTarget(v: string): void\n  selectionChange?(\n    e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ): void\n  refInput: RefObject<TextInput>\n  value: string\n}> = p => (\n  <View style={css.ShowNumbers}>\n    <RnTextInput\n      blurOnSubmit\n      keyboardType='default'\n      multiline\n      onChangeText={p.setTarget}\n      onEndEditing={() => {\n        Keyboard.dismiss()\n      }}\n      onSelectionChange={p.selectionChange}\n      placeholder={intl`Enter your number`}\n      ref={p.refInput}\n      style={css.ShowNumbers_DisplayTxt}\n      value={p.value}\n    />\n  </View>\n)\n","import { action, observable } from 'mobx'\nimport { Platform } from 'react-native'\nimport RNCallKeep from 'react-native-callkeep'\nimport IncallManager from 'react-native-incall-manager'\nimport { v4 as newUuid } from 'uuid'\n\nimport { Session, SessionStatus } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { sip } from '../api/sip'\nimport { getPartyName } from '../stores/contactStore'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\nimport { getCallStore } from './callStore'\nimport { CallStore } from './callStore2'\nimport { contactStore } from './contactStore'\nimport { intlDebug } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\n\nexport class Call {\n  constructor(private store: CallStore) {}\n\n  rawSession?: Session\n\n  @observable earlyMedia: MediaStream | null = null\n  @observable withSDP: boolean = false\n  @observable withSDPControls: boolean = false\n  @observable sessionStatus: SessionStatus = 'dialing'\n  @observable id = ''\n  @observable pnId = ''\n  @observable partyNumber = ''\n  @observable partyImageUrl = ''\n  @observable partyImageSize = ''\n  @observable talkingImageUrl = ''\n  /** @deprecated use below getDisplayName instead */\n  @observable partyName = ''\n  @observable pbxTalkerId = ''\n  @observable pbxTenant = ''\n  @observable isFrontCamera = true\n  @observable callConfig: CallConfig = {}\n\n  getDisplayName = () =>\n    getPartyName(this.partyNumber) ||\n    this.partyName ||\n    this.partyNumber ||\n    this.pbxTalkerId ||\n    this.id\n  createdAt = Date.now()\n\n  @observable incoming = false\n  @observable answered = false\n  @observable answeredAt = 0\n\n  getDuration = () => this.answeredAt && Date.now() - this.answeredAt\n\n  callkeepUuid = ''\n  callkeepAlreadyAnswered = false\n  callkeepAlreadyRejected = false\n\n  @action\n  answer = (\n    options?: { ignoreNav?: boolean },\n    videoOptions?: object,\n    exInfo?: object,\n  ) => {\n    const ignoreNav = options?.ignoreNav\n    if (options) {\n      delete options.ignoreNav\n    }\n    this.answered = true\n    this.store.currentCallId = this.id\n    // Hold other calls\n    this.store.calls\n      .filter(c => c.id !== this.id && c.answered && !c.holding)\n      .forEach(c => c.toggleHoldWithCheck())\n    sip.phone?.answer(\n      this.id,\n      options,\n      this.remoteVideoEnabled,\n      videoOptions,\n      exInfo,\n    )\n    if (!ignoreNav) {\n      Nav().goToPageCallManage()\n    }\n    this.answerCallKeep()\n  }\n  answerCallKeep = async () => {\n    if (Platform.OS === 'web') {\n      return\n    }\n    const updateCallKeep = () => {\n      RNCallKeep.setCurrentCallActive(this.callkeepUuid)\n      if (Platform.OS === 'android') {\n        RNCallKeep.setOnHold(this.callkeepUuid, false)\n      }\n      this.callkeepAlreadyAnswered = true\n    }\n    const startCallKeepCall = async () => {\n      RNCallKeep.startCall(this.callkeepUuid, this.partyNumber, 'Brekeke Phone')\n      await waitTimeout()\n    }\n    const updateIncoming = () => {\n      RNCallKeep.answerIncomingCall(this.callkeepUuid)\n      updateCallKeep()\n    }\n    const updateOutgoing = () => {\n      RNCallKeep.reportConnectedOutgoingCallWithUUID(this.callkeepUuid)\n      updateCallKeep()\n    }\n    // If it has callkeepUuid, which means: outgoing call / incoming PN call\n    if (this.callkeepUuid) {\n      if (this.incoming) {\n        updateIncoming()\n        return\n      }\n      if (Platform.OS === 'android') {\n        // android fix issue mix voice with gsm call\n        await startCallKeepCall()\n      }\n      updateOutgoing()\n      return\n    }\n    // If it doesnt have callkeepUuid, which means: incoming call without PN\n    // We'll treat them all as outgoing call in CallKeep\n    // We dont want to display incoming call here again\n    if (getAuthStore().getCurrentAccount()?.pushNotificationEnabled) {\n      return\n    }\n    this.callkeepUuid = newUuid().toUpperCase()\n    await startCallKeepCall()\n    updateOutgoing()\n  }\n\n  isAboutToHangup = false\n  hangupWithUnhold = async () => {\n    if (this.isAboutToHangup) {\n      return\n    }\n    this.isAboutToHangup = true\n    if (this.holding) {\n      await this.toggleHold().then(\n        success =>\n          !success &&\n          console.error(\n            'hangupWithUnhold: failed to unhold, possible issue with pbx connection',\n          ),\n      )\n      await waitTimeout()\n    }\n    sip.hangupSession(this.id)\n  }\n\n  @observable videoSessionId = ''\n  @observable localVideoEnabled = false\n  @observable remoteVideoEnabled = false\n  toggleVideo = () => {\n    const pbxUser = contactStore.getPbxUserById(this.partyNumber)\n    const callerStatus = pbxUser?.talkers?.[0]?.status\n    if (this.holding || callerStatus === 'holding') {\n      return\n    }\n    this.localVideoEnabled\n      ? sip.disableVideo(this.id)\n      : sip.enableVideo(this.id)\n  }\n  @action toggleSwitchCamera = () => {\n    this.isFrontCamera = !this.isFrontCamera\n    sip.switchCamera(this.id, this.isFrontCamera)\n    BrekekeUtils.setIsFrontCamera(this.callkeepUuid, this.isFrontCamera)\n  }\n\n  @observable remoteVideoStreamObject: MediaStream | null = null\n  voiceStreamObject: MediaStream | null = null\n\n  @observable muted = false\n  @action toggleMuted = () => {\n    this.muted = !this.muted\n    if (this.callkeepUuid) {\n      RNCallKeep.setMutedCall(this.callkeepUuid, this.muted)\n    }\n    return sip.setMuted(this.muted, this.id)\n  }\n\n  @observable recording = false\n  @action updateRecordingStatus = (status: boolean) => {\n    this.recording = status\n    BrekekeUtils.setRecordingStatus(this.callkeepUuid, this.recording)\n  }\n  @action toggleRecording = () => {\n    const fn = this.recording\n      ? pbx.stopRecordingTalker\n      : pbx.startRecordingTalker\n    this.recording = !this.recording\n    return fn(this.pbxTenant, this.pbxTalkerId)\n      .then(this.onToggleRecordingFailure)\n      .catch(this.onToggleRecordingFailure)\n  }\n  @action private onToggleRecordingFailure = (err: Error | boolean) => {\n    if (err === true) {\n      return\n    }\n    this.recording = !this.recording\n    if (typeof err !== 'boolean') {\n      const message = this.recording\n        ? intlDebug`Failed to stop recording the call`\n        : intlDebug`Failed to start recording the call`\n      RnAlert.error({ message, err })\n    }\n  }\n\n  toggleHoldWithCheck = () => {\n    if (this.isAboutToHangup) {\n      return\n    }\n    this.toggleHold()\n  }\n\n  @observable holding = false\n  private prevHoling = false\n\n  @action private toggleHold = () => {\n    const fn = this.holding ? pbx.unholdTalker : pbx.holdTalker\n    this.holding = !this.holding\n    if (!this.isAboutToHangup && !this.holding) {\n      this.store.currentCallId = this.id\n    }\n    if (!this.isAboutToHangup) {\n      if (this.callkeepUuid && !this.holding) {\n        if (Platform.OS === 'ios') {\n          hackyToggleSpeaker()\n        }\n        if (Platform.OS === 'android') {\n          RNCallKeep.setOnHold(this.callkeepUuid, false)\n        }\n      }\n      BrekekeUtils.setOnHold(this.callkeepUuid, this.holding)\n    }\n    return fn(this.pbxTenant, this.pbxTalkerId)\n      .then(this.onToggleHoldFailure)\n      .catch(this.onToggleHoldFailure)\n  }\n  @action private onToggleHoldFailure = (err: Error | boolean) => {\n    if (err === true) {\n      return true\n    }\n    this.holding = !this.holding\n    if (this.callkeepUuid && !this.holding && Platform.OS === 'android') {\n      RNCallKeep.setOnHold(this.callkeepUuid, false)\n    }\n    BrekekeUtils.setOnHold(this.callkeepUuid, this.holding)\n    if (typeof err !== 'boolean') {\n      const message = this.holding\n        ? intlDebug`Failed to unhold the call`\n        : intlDebug`Failed to hold the call`\n      RnAlert.error({ message, err })\n      // Already show error, considered it's handled\n      return true\n    }\n    return false\n  }\n\n  @observable transferring = ''\n  private prevTransferring = ''\n  transferBlind = (number: string) => {\n    Nav().goToPageCallRecents()\n    return pbx\n      .transferTalkerBlind(this.pbxTenant, this.pbxTalkerId, number)\n      .catch(this.onTransferFailure)\n  }\n  @action transferAttended = (number: string) => {\n    this.transferring = number\n    this.prevHoling = this.holding\n    this.holding = true\n    Nav().backToPageCallManage()\n    this.prevHoling = this.holding\n    this.holding = true\n    return pbx\n      .transferTalkerAttended(this.pbxTenant, this.pbxTalkerId, number)\n      .catch(this.onTransferFailure)\n  }\n  @action private onTransferFailure = (err: Error) => {\n    this.transferring = ''\n    this.holding = this.prevHoling\n    RnAlert.error({\n      message: intlDebug`Failed to transfer the call`,\n      err,\n    })\n  }\n\n  @action stopTransferring = () => {\n    this.prevTransferring = this.transferring\n    this.transferring = ''\n    // User cancel transfer and resume call -> unhold automatically from server side\n    this.prevHoling = this.holding\n    this.holding = false\n    return pbx\n      .stopTalkerTransfer(this.pbxTenant, this.pbxTalkerId)\n      .catch(this.onStopTransferringFailure)\n  }\n  @action private onStopTransferringFailure = (err: Error) => {\n    this.transferring = this.prevTransferring\n    this.holding = this.prevHoling\n    RnAlert.error({\n      message: intlDebug`Failed to stop the transfer`,\n      err,\n    })\n  }\n\n  @action conferenceTransferring = () => {\n    this.prevTransferring = this.transferring\n    this.transferring = ''\n    this.prevHoling = this.holding\n    this.holding = false\n    return pbx\n      .joinTalkerTransfer(this.pbxTenant, this.pbxTalkerId)\n      .catch(this.onConferenceTransferringFailure)\n  }\n  @action private onConferenceTransferringFailure = (err: Error) => {\n    this.transferring = this.prevTransferring\n    this.holding = this.prevHoling\n    RnAlert.error({\n      message: intlDebug`Failed to make conference for the transfer`,\n      err,\n    })\n  }\n\n  @action park = (number: string) => {\n    return pbx\n      .parkTalker(this.pbxTenant, this.pbxTalkerId, number)\n      .catch(this.onParkFailure)\n  }\n  private onParkFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to park the call`,\n      err,\n    })\n  }\n}\n\n// Hack to fix no voice after unhold using toggle loud speaker\n// This issue happens on ios only, toggle loud speaker reset the audio route\n// The actual issue could be related to ios audio route\n// Related packages: callkeep, webrtc, incall-manager...\nexport const hackyToggleSpeaker = async () => {\n  const c = getCallStore()\n  IncallManager.setForceSpeakerphoneOn(!c.isLoudSpeakerEnabled)\n  const conf = await pbx.getConfig()\n  const ms = Number(conf?.['webphone.hacky.speaker']) || 500\n  console.log(`webphone.hacky.speaker ${ms}ms`)\n  await waitTimeout(ms)\n  IncallManager.setForceSpeakerphoneOn(c.isLoudSpeakerEnabled)\n}\n\nexport type CallConfig = {\n  dtmf?: string\n  hangup?: string\n  hold?: string\n  mute?: string\n  park?: string\n  record?: string\n  speaker?: string\n  transfer?: string\n  video?: string\n}\nexport type CallConfigKey = keyof CallConfig\n","import { toJS } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { FC, Fragment, MutableRefObject, useEffect, useRef } from 'react'\nimport {\n  Platform,\n  SectionList,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  ViewProps,\n} from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport {\n  mdiMenuDown,\n  mdiMenuRight,\n  mdiMoreHoriz,\n  mdiPhone,\n  mdiPhoneForward,\n  mdiVideo,\n} from '../assets/icons'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { ChatMessage, chatStore } from '../stores/chatStore'\nimport { Nav } from '../stores/Nav'\nimport { DropdownPosition, RnDropdown } from '../stores/RnDropdown'\nimport { GroupUserSectionListData, userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { filterTextOnly } from '../utils/formatChatContent'\nimport { UserItem } from './ContactUserItem'\nimport { Dropdown } from './Dropdown'\nimport { DropdownItemProps } from './DropdownItem'\nimport { RnIcon } from './RnIcon'\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  container: {\n    marginTop: 15,\n  },\n  headerSectionList: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    backgroundColor: v.borderBg,\n    paddingHorizontal: 5,\n    alignItems: 'center',\n    paddingVertical: 12,\n    marginTop: 15,\n  },\n  leftSection: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  editGroupIcon: {\n    paddingHorizontal: 10,\n  },\n  containerDropdown: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'transparent',\n  },\n  disableMarginTop: { marginTop: 0 },\n})\n\ntype ContactSectionListProps = {\n  sectionListData: GroupUserSectionListData[]\n  isEditMode?: boolean\n  ddItems?: DropdownItemProps[]\n  isTransferCall?: boolean\n}\nexport const ContactSectionList: FC<ViewProps & ContactSectionListProps> =\n  observer(p => {\n    const sectionHeaderRefs = useRef<View[]>([])\n    const reCalculatedLayoutDropdownTimeoutId = useRef<number>(0)\n\n    useEffect(() => {\n      RnDropdown.setShouldUpdatePosition(true)\n      return () => {\n        sectionHeaderRefs.current = []\n        if (reCalculatedLayoutDropdownTimeoutId.current) {\n          BackgroundTimer.clearTimeout(\n            reCalculatedLayoutDropdownTimeoutId.current,\n          )\n        }\n      }\n    }, [])\n\n    useEffect(() => {\n      if (p.isEditMode && RnDropdown.shouldUpdatePosition) {\n        // recalculate position header dropdown\n        RnDropdown.setShouldUpdatePosition(false)\n        calculateSectionHeaderPosition()\n      }\n      // eslint-disable-next-line react-app/react-hooks/exhaustive-deps\n    }, [p.isEditMode, RnDropdown.shouldUpdatePosition])\n\n    const clearConnectTimeoutId = () => {\n      if (reCalculatedLayoutDropdownTimeoutId.current) {\n        BackgroundTimer.clearTimeout(\n          reCalculatedLayoutDropdownTimeoutId.current,\n        )\n        reCalculatedLayoutDropdownTimeoutId.current = 0\n      }\n    }\n\n    const calculateSectionHeaderPosition = () => {\n      if (reCalculatedLayoutDropdownTimeoutId.current) {\n        clearConnectTimeoutId()\n      }\n      // Must wrap in setTimeout to make sure the header view has completed render\n      reCalculatedLayoutDropdownTimeoutId.current = BackgroundTimer.setTimeout(\n        () => {\n          reCalculatedLayoutDropdownTimeoutId.current = 0\n          const listDropdownPosition: DropdownPosition[] = []\n          sectionHeaderRefs.current.forEach((ref: View, index) => {\n            if (ref) {\n              ref.measure((fx, fy, w, h, px, py) => {\n                listDropdownPosition.push({\n                  top: Platform.OS === 'ios' ? py : py + h,\n                  right: 20,\n                })\n                // After get all section list dropdown position\n                if (index === sectionHeaderRefs.current.length - 1) {\n                  RnDropdown.setPositions(listDropdownPosition)\n                  RnDropdown.setHeaderHeight(h)\n                }\n              })\n            }\n          })\n        },\n        500,\n      )\n    }\n\n    const { openedIndex, positions } = RnDropdown\n\n    const sectionListData: GroupUserSectionListData[] = toJS(p.sectionListData) //p.sectionListData\n\n    return (\n      <Fragment>\n        <SectionList\n          sections={sectionListData}\n          keyExtractor={item => item.user_id}\n          renderItem={({\n            item,\n            index,\n            section,\n          }: {\n            item: UcBuddy\n            index: Number\n            section: GroupUserSectionListData\n          }) => (\n            <RenderItemUser\n              sectionListData={sectionListData}\n              item={item}\n              title={section.title}\n              isEditMode={p?.isEditMode}\n              isTransferCall={p?.isTransferCall}\n            />\n          )}\n          renderSectionHeader={({ section: { title, data } }) => (\n            <RenderHeaderSection\n              sectionHeaderRefs={sectionHeaderRefs}\n              sectionListData={sectionListData}\n              isEditMode={p.isEditMode}\n              title={title}\n              data={data}\n            />\n          )}\n        />\n        {openedIndex >= 0 && (\n          <TouchableWithoutFeedback onPress={() => RnDropdown.close()}>\n            <View style={css.containerDropdown}>\n              <Dropdown position={positions[openedIndex]} items={p.ddItems} />\n            </View>\n          </TouchableWithoutFeedback>\n        )}\n      </Fragment>\n    )\n  })\nconst getLastMessageChat = (id: string) => {\n  const chats = filterTextOnly(chatStore.getMessagesByThreadId(id))\n  return chats.length ? chats[chats.length - 1] : ({} as ChatMessage)\n}\ntype ItemUser = {\n  sectionListData: GroupUserSectionListData[]\n  item: UcBuddy\n  title: string\n  isEditMode?: boolean\n  isTransferCall?: boolean\n}\nconst RenderItemUser = observer(\n  ({ sectionListData, item, title, isEditMode, isTransferCall }: ItemUser) => {\n    const index = sectionListData.findIndex(i => i.title === title)\n    const hidden = RnDropdown.hiddenIndexes.some(idx => idx === index)\n    const c = getCallStore().getCurrentCall()\n\n    return !hidden ? (\n      <View\n        key={`ItemUser-${item.user_id}-${index}`}\n        onLayout={e => {\n          RnDropdown.setItemHeight(e.nativeEvent.layout.height)\n        }}\n      >\n        {isEditMode ? (\n          <RnTouchableOpacity\n            onPress={() => userStore.selectUserId(item.user_id)}\n            disabled={userStore.isSelectedAddAllUser}\n          >\n            <UserItem\n              id={item.user_id}\n              name={item.name || item.user_id}\n              avatar={item.profile_image_url}\n              disabled={userStore.isSelectedAddAllUser}\n              isSelected={\n                userStore.isSelectedAddAllUser ||\n                userStore.selectedUserIds[item.user_id]\n              }\n              onSelect={() => userStore.selectUserId(item.user_id)}\n              isSelection\n            />\n          </RnTouchableOpacity>\n        ) : !isTransferCall ? (\n          <RnTouchableOpacity\n            onPress={\n              getAuthStore().getCurrentAccount()?.ucEnabled\n                ? () => Nav().goToPageChatDetail({ buddy: item.user_id })\n                : undefined\n            }\n          >\n            <UserItem\n              iconFuncs={[\n                () => getCallStore().startVideoCall(item.user_id),\n                () => getCallStore().startCall(item.user_id),\n              ]}\n              icons={[mdiVideo, mdiPhone]}\n              lastMessage={getLastMessageChat(item.user_id)?.text}\n              id={item.user_id}\n              name={item.name}\n              avatar={item.profile_image_url}\n              status={item.status}\n            />\n          </RnTouchableOpacity>\n        ) : (\n          <UserItem\n            iconFuncs={[\n              () => c?.transferAttended(item.user_id),\n              () => c?.transferBlind(item.user_id),\n            ]}\n            icons={[mdiPhoneForward, mdiPhone]}\n            id={item.user_id}\n            name={item.name}\n            avatar={item.profile_image_url}\n            status={item.status}\n          />\n        )}\n      </View>\n    ) : null\n  },\n)\ntype SectionHeader = {\n  sectionHeaderRefs: MutableRefObject<View[]>\n  sectionListData: GroupUserSectionListData[]\n  isEditMode?: boolean\n  title: string\n  data: readonly UcBuddy[]\n}\n\nconst RenderHeaderSection = observer(\n  ({\n    sectionHeaderRefs,\n    sectionListData,\n    isEditMode,\n    title,\n    data,\n  }: SectionHeader) => {\n    const index = sectionListData.findIndex(i => i.title === title)\n    const hidden = RnDropdown.hiddenIndexes.some(i => i === index)\n    const titleHeaderRender = userStore.getHeaderTitle(title, data, isEditMode)\n\n    const isDisableMarginTop =\n      !sectionListData[index - 1]?.data?.length ||\n      RnDropdown.hiddenIndexes.some(idx => idx === index - 1)\n\n    return (\n      <RnTouchableOpacity\n        onPress={() => RnDropdown.toggleSection(index, data.length)}\n      >\n        <View\n          style={[\n            css.headerSectionList,\n            isDisableMarginTop && css.disableMarginTop,\n          ]}\n          ref={c => {\n            if (c && isEditMode) {\n              sectionHeaderRefs.current[index] = c\n            }\n          }}\n        >\n          <Fragment>\n            <View style={css.leftSection}>\n              <View>\n                <RnIcon path={hidden ? mdiMenuRight : mdiMenuDown} />\n              </View>\n              <RnText small>{titleHeaderRender}</RnText>\n            </View>\n            {isEditMode && (\n              <RnTouchableOpacity\n                style={css.editGroupIcon}\n                onPress={() => {\n                  if (RnDropdown.hiddenIndexes.some(i => i === index)) {\n                    RnDropdown.toggleSection(index, data.length)\n                  }\n                  RnDropdown.toggle(index)\n                }}\n              >\n                <RnIcon path={mdiMoreHoriz} />\n              </RnTouchableOpacity>\n            )}\n          </Fragment>\n        </View>\n      </RnTouchableOpacity>\n    )\n  },\n)\n","// eslint-disable-next-line simple-import-sort/imports\nimport { Component } from 'react'\nimport {\n  View,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  ScrollView,\n  ActivityIndicator,\n} from 'react-native'\n\nimport { Layout } from '../components/Layout'\nimport { SelectionItem } from '../components/SelectionItem'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nimport { DropdownItemProps } from '../components/DropdownItem'\n\nimport { userStore } from '../stores/userStore'\nimport { RnDropdown } from '../stores/RnDropdown'\nimport { observer } from 'mobx-react'\nimport { uc } from '../api/uc'\nimport { RnAlert } from '../stores/RnAlert'\nimport { ContactSectionList } from '../components/ContactSectionList'\nimport { ContactList } from '../components/ContactList'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { RnIcon } from '../components/RnIcon'\nimport { mdiFolderPlus } from '../assets/icons'\nimport { RnText } from '../components/RnText'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { getAuthStore } from '../stores/authStore'\nimport { accountStore } from '../stores/accountStore'\n\nexport const css = StyleSheet.create({\n  listHeaderSection: {\n    paddingHorizontal: 10,\n  },\n  listTitleSection: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    marginVertical: 10,\n  },\n  rowGroupTitle: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  rowCapacity: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  errorText: {\n    color: 'red',\n  },\n  loadingIcon: {\n    marginTop: 20,\n  },\n})\n\n@observer\nexport class PageContactEdit extends Component {\n  state = { didMount: false }\n\n  componentDidMount = () => {\n    if (getAuthStore().getCurrentAccount()?.ucEnabled) {\n      userStore.loadUcBuddyList(true)\n    } else {\n      userStore.loadPbxBuddyList(true)\n    }\n    BackgroundTimer.setTimeout(() => this.setState({ didMount: true }), 300)\n  }\n  getDDOptions = (ddIndex: number): DropdownItemProps[] => {\n    return [\n      {\n        title: intl`Add/Remove user`,\n        onPress: () => this.onAddRemoveUser(ddIndex),\n        disabled: userStore.dataGroupAllUser.length - 1 === ddIndex,\n      },\n      {\n        title: intl`Check all`,\n        onPress: (e?: MouseEvent) => {\n          e?.stopPropagation?.()\n          this.onCheckAll(ddIndex)\n        },\n        disabled:\n          userStore.isSelectedAddAllUser ||\n          !userStore.dataGroupAllUser[ddIndex]?.data?.length,\n      },\n      {\n        title: intl`Uncheck all`,\n        onPress: (e?: MouseEvent) => {\n          e?.stopPropagation?.()\n          this.onUncheckAll(ddIndex)\n        },\n        disabled:\n          userStore.isSelectedAddAllUser ||\n          !userStore.dataGroupAllUser[ddIndex]?.data?.length,\n      },\n      {\n        title: intl`Remove group`,\n        onPress: () => this.onRemoveGroup(ddIndex),\n        disabled: userStore.dataGroupAllUser.length - 1 === ddIndex,\n      },\n    ]\n  }\n\n  onAddRemoveUser = (ddIndex: number) => {\n    RnDropdown.close()\n    Nav().goToPageContactGroupEdit({\n      groupName: userStore.dataGroupAllUser[ddIndex].title,\n      listItem: userStore.dataGroupAllUser[ddIndex].data.map(itm => itm),\n    })\n    this.scrollToTopListContact()\n  }\n\n  onCheckAll = (groupIndex: number) => {\n    RnDropdown.close()\n    userStore.selectAllUserIdsByGroup(groupIndex)\n  }\n\n  onUncheckAll = (groupIndex: number) => {\n    RnDropdown.close()\n    userStore.unselectAllUserIdsByGroup(groupIndex)\n  }\n\n  onRemoveGroup = (ddIndex: number) => {\n    RnDropdown.close()\n    RnDropdown.removeSection(\n      ddIndex,\n      userStore.dataGroupAllUser[ddIndex]?.data?.length,\n    )\n    userStore.removeGroup(ddIndex)\n  }\n\n  onSelectEditGroupingAndUserOrderOption = () => {\n    RnDropdown.close()\n    if (!userStore.isSelectEditGroupingAndUserOrder) {\n      RnDropdown.setShouldUpdatePosition(true)\n    }\n    userStore.toggleIsSelectEditGroupingAndUserOrder()\n  }\n\n  onAddGroup = () => {\n    Nav().goToPageContactGroupCreate()\n    this.scrollToTopListContact()\n  }\n\n  onGoBack = () => {\n    if (getAuthStore().getCurrentAccount()?.ucEnabled) {\n      userStore.loadUcBuddyList()\n    }\n    RnDropdown.close()\n    Nav().backToPageContactUsers()\n  }\n\n  view?: ScrollView\n  setViewRef = (ref: ScrollView) => {\n    this.view = ref\n  }\n\n  scrollToTopListContact = () =>\n    BackgroundTimer.setTimeout(() => {\n      this.view?.scrollTo({ y: 0, animated: true })\n    }, 1000)\n\n  render() {\n    const {\n      buddyMax,\n      dataListAllUser,\n      isSelectedAddAllUser,\n      selectedUserIds,\n      isDisableAddAllUserToTheList,\n      isSelectEditGroupingAndUserOrder,\n      isCapacityInvalid,\n      dataGroupAllUser,\n      buddyMode,\n    } = userStore\n    const { openedIndex } = RnDropdown\n    return (\n      <Layout\n        fabOnBack={this.onGoBack}\n        fabOnNext={this.save}\n        fabOnNextText={intl`SAVE`}\n        onBack={this.onGoBack}\n        title={intl`Edit buddy list`}\n        containerRef={this.setViewRef}\n      >\n        <TouchableWithoutFeedback onPress={RnDropdown.close}>\n          <View style={css.listHeaderSection}>\n            {!isDisableAddAllUserToTheList && (\n              <SelectionItem\n                isSelected={isSelectedAddAllUser}\n                onPress={userStore.toggleIsSelectedAddAllUser}\n                title={intl`Add all user to the list`}\n              />\n            )}\n            <View style={css.rowGroupTitle}>\n              <SelectionItem\n                isSelected={isSelectEditGroupingAndUserOrder}\n                onPress={this.onSelectEditGroupingAndUserOrderOption}\n                title={\n                  buddyMode === 2\n                    ? intl`Edit grouping and user order`\n                    : intl`Display with grouping`\n                }\n              />\n              {isSelectEditGroupingAndUserOrder && buddyMode === 2 && (\n                <RnTouchableOpacity onPress={this.onAddGroup}>\n                  <RnIcon path={mdiFolderPlus} />\n                </RnTouchableOpacity>\n              )}\n            </View>\n            <View style={css.listTitleSection}>\n              <View style={css.rowCapacity}>\n                <RnText>{`${intl`Capacity`}`}</RnText>\n                <RnText style={isCapacityInvalid && css.errorText}>{`    ${\n                  isSelectedAddAllUser\n                    ? dataListAllUser.length\n                    : Object.keys(selectedUserIds).length\n                }`}</RnText>\n                <RnText>{` / ${buddyMax}`}</RnText>\n              </View>\n            </View>\n          </View>\n        </TouchableWithoutFeedback>\n        {!this.state.didMount ? (\n          <ActivityIndicator style={css.loadingIcon} size='large' />\n        ) : isSelectEditGroupingAndUserOrder ? (\n          <ContactSectionList\n            sectionListData={dataGroupAllUser}\n            isEditMode={true}\n            ddItems={this.getDDOptions(openedIndex)}\n          />\n        ) : (\n          <ContactList data={dataListAllUser} />\n        )}\n      </Layout>\n    )\n  }\n\n  saveUC = () => {\n    const { isSelectedAddAllUser, groups, dataListAllUser, selectedUserIds } =\n      userStore\n    const data = [\n      ...groups,\n      ...dataListAllUser.filter(u => selectedUserIds[u.user_id]),\n    ]\n    uc.saveProperties(!isSelectedAddAllUser, data)\n      .then(this.onSaveSuccess)\n      .catch(this.onSaveFailure)\n  }\n  savePBX = () => {\n    const { isSelectedAddAllUser, groups, dataListAllUser, selectedUserIds } =\n      userStore\n    const data = {\n      screened: !isSelectedAddAllUser,\n      users: [\n        ...groups,\n        ...dataListAllUser.filter(u => selectedUserIds[u.user_id]),\n      ],\n    }\n    getAuthStore().savePbxBuddyList(data)\n    userStore.updateDisplayGroupList()\n    this.onGoBack()\n  }\n  save = () => {\n    const { isCapacityInvalid, type } = userStore\n    if (!isCapacityInvalid) {\n      type === 'UcBuddy' ? this.saveUC() : this.savePBX()\n    }\n  }\n  onSaveSuccess = () => {\n    accountStore.saveAccountsToLocalStorageDebounced()\n    userStore.updateDisplayGroupList()\n    this.onGoBack()\n  }\n  onSaveFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to save user list`,\n      err,\n    })\n  }\n}\n","import { flow, get } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Fragment } from 'react'\nimport { Platform } from 'react-native'\nimport Validator, { Rules } from 'validatorjs'\n\nimport { PbxBook } from '../api/brekekejs'\nimport { Field } from '../components/Field'\nimport { PhonebookAutoComplete } from '../components/PhonebookAutoComplete'\nimport { CreatedStore } from './createStore'\nimport { arrToMap, mapToMap } from './toMap'\nimport { useStore } from './useStore'\n\nconst noop = () => {}\n\nexport const useForm = () => {\n  const f0 = (\n    $: CreatedStore & {\n      dirtyMap: { [k: string]: boolean }\n      errorMap: { [k: string]: string }\n      currentFocus: string | undefined\n      props: {\n        $: CreatedStore\n        fields: FormField[]\n        k: string\n        onValidSubmit: Function\n      }\n      submit: Function\n      onFieldBlur: Function\n      onFieldChange: Function\n      onFocus: Function\n    },\n  ) => ({\n    observable: {\n      dirtyMap: {},\n      errorMap: {},\n      currentFocus: undefined,\n    },\n    props: {},\n    onFieldBlur: (k: string) => {\n      $.set(`dirtyMap.${k}`, true)\n      // $.set('currentFocus', undefined)\n    },\n    onFocus: (k: string) => {\n      $.set('currentFocus', k)\n    },\n    onFieldChange: (k: string, v: string) => {\n      // TODO batch, remember k\n      const rule = $.props.fields.find((f: FormField) => f.name === k)?.rule\n      const validator = rule ? new Validator({ [k]: v }, { [k]: rule }) : null\n      $.set(`errorMap.${k}`, validator?.fails() && validator.errors.first(k))\n    },\n    // Submit function to use outside of the hook\n    submit: () => {\n      const { $: $parent, fields, k, onValidSubmit } = $.props\n      const rules = arrToMap(\n        fields.filter((f: FormField) => f.rule && !f.disabled && !f.hidden),\n        (f: FormField) => f.name,\n        (f: FormField) => f.rule,\n      ) as { [k: string]: unknown }\n      const validator = new Validator(get($parent, k), rules as Rules)\n      if (validator.fails()) {\n        $.set(\n          'errorMap',\n          mapToMap(rules, undefined, (_: string) => validator.errors.first(_)),\n        )\n        // TODO show toast\n      } else {\n        $.set('errorMap', {})\n        if (onValidSubmit) {\n          onValidSubmit()\n        }\n      }\n      $.set(\n        'dirtyMap',\n        arrToMap(fields, (f: FormField) => f.name),\n      )\n    },\n    // Form component\n    render: observer((props: object) => {\n      $.props = Object.assign($.props, props)\n      const { $: $parent, fields, k } = $.props\n      const RnForm = Platform.OS === 'web' ? 'form' : Fragment\n      const formProps = Platform.OS === 'web' ? { onSubmit: $.submit } : null\n      return (\n        <RnForm {...(formProps as object)}>\n          {fields.map(\n            (f: FormField, i: number) =>\n              !f.hidden && (\n                <Field\n                  key={i}\n                  {...f}\n                  error={\n                    !f.disabled &&\n                    $.dirtyMap[f.name] &&\n                    $.currentFocus !== f.name\n                      ? $.errorMap[f.name]\n                      : undefined\n                  }\n                  onBlur={() => $.onFieldBlur(f.name)}\n                  // Mark this field dirty\n                  onValueChange={flow(\n                    [\n                      // Add change handler to trigger validate\n                      // TODO update all flows to regular funcs\n                      (v: string) => {\n                        $.onFieldChange(f.name, v)\n                        return v\n                      },\n                      // Default change handler from store\n                      f.onValueChange === undefined\n                        ? !f.disabled\n                          ? (v: string) => $parent.set(k + '.' + f.name, v)\n                          : noop\n                        : (...args: unknown[]) => f.onValueChange(...args),\n                    ].filter(_ => _),\n                  )}\n                  onFocus={() => $.onFocus(f.name)}\n                  // Error\n                  value={\n                    // Default value from store\n                    f.value === undefined\n                      ? get($parent, k + '.' + f.name)\n                      : f.value\n                  }\n                />\n              ),\n          )}\n          {k === 'phonebook' && $.currentFocus === 'phonebook' && (\n            <PhonebookAutoComplete\n              value={get($parent, k + '.phonebook')}\n              onPressItem={(item: PbxBook) => {\n                $parent.set(k + '.phonebook', item.phonebook)\n                $.onFieldChange('phonebook', item.phonebook)\n              }}\n            />\n          )}\n        </RnForm>\n      )\n    }),\n  })\n  const $ = useStore(f0) as any as FormContext\n  return [$.render, $.submit, $.onFieldChange]\n}\n\nexport type FormContext = {\n  render: Function\n  submit(): void\n  onFieldChange(f: string, v: string): void\n}\nexport type FormField = {\n  name: string\n  disabled: boolean\n  value: string\n  onValueChange: Function\n  rule: string\n  hidden?: boolean\n}\n","export const fcmApplicationId = '22177122297'\nexport const bundleIdentifier = 'com.brekeke.phonedev'\n","import { intl } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { getAudioVideoPermission } from './getAudioVideoPermission'\n\nlet alreadyPrompted = false\nexport const webPromptPermission = () => {\n  if (alreadyPrompted) {\n    return\n  }\n  alreadyPrompted = true\n  RnAlert.prompt({\n    title: intl`Action Required`,\n    message: intl`Web Phone needs your action to work well on browser. Press OK to continue`,\n    confirmText: 'OK',\n    dismissText: false,\n    onConfirm: getAudioVideoPermission,\n    onDismiss: getAudioVideoPermission,\n  })\n}\n","import { Platform } from 'react-native'\n\nimport { webPlayDing } from './webPlayDing'\n\nexport const getAudioVideoPermission = () => {\n  const cb = (stream: MediaStream) => stream.getTracks().forEach(t => t.stop())\n  // @ts-ignore\n  const eb = (err: MediaStreamError) => {\n    /* TODO */\n  }\n  // @ts-ignore\n  const p = window.navigator.getUserMedia(\n    { audio: true, video: true },\n    cb,\n    eb,\n  ) as any as Promise<MediaStream>\n  if (p?.then) {\n    p.then(cb).catch(eb)\n  }\n  if (Platform.OS === 'web') {\n    // trigger audio permission\n    webPlayDing()\n  }\n}\n","import ding from '../assets/ding.mp3'\nimport { waitTimeout } from './waitTimeout'\n\nexport const webPlayDing = async () => {\n  const a = new Audio()\n  a.volume = 0.05\n  a.src = ding\n  document.body.appendChild(a)\n  a.play()\n  await waitTimeout(3000)\n  document.body.removeChild(a)\n}\n","export const parsePalParams = (config?: object) =>\n  parseParamsWithPrefix('webphone.pal.param.', config)\nexport const parseCallParams = (config?: object) =>\n  parseParamsWithPrefix('webphone.call.', config)\n\nconst parseParamsWithPrefix = (prefix: string, o: object = {}) =>\n  Object.entries(o)\n    .filter(([k]) => k.startsWith(prefix))\n    .reduce((res, [k, v]: string[]) => {\n      res[k.replace(prefix, '')] = v\n      return res\n    }, {} as { [k: string]: string })\n","export type PnParams = {\n  // common\n  device_id: string\n  username: string\n  voip?: boolean\n  // for web browser\n  auth_secret?: string\n  endpoint?: string\n  key?: string\n}\nexport type PnParamsNew = PnParams & {\n  // new pnmanage in pbx 3.15 which can compose multile services\n  command: PnCommand\n  service_id: PnServiceId | PnServiceId[]\n  pnmanageNew?: boolean\n  device_id_voip?: string\n}\nexport enum PnCommand {\n  set = 'set',\n  remove = 'remove',\n}\nexport enum PnServiceId {\n  lpc = '4',\n  apns = '11',\n  fcm = '12',\n  web = '13',\n}\n","import { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { mdiCached, mdiKeyboardBackspace } from '../assets/icons'\nimport { intl } from '../stores/intl'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Actions: {\n    flex: 1,\n    flexDirection: 'row',\n    borderRadius: v.borderRadius,\n    overflow: 'hidden',\n  },\n  //\n  Btn: {\n    borderRadius: 0,\n    width: '25%',\n    paddingVertical: 8,\n  },\n  Btn__back: {\n    backgroundColor: v.colors.dangerFn(0.5),\n  },\n  Btn__more: {\n    backgroundColor: v.hoverBg,\n  },\n  Btn__next: {\n    width: '50%',\n    backgroundColor: v.colors.primary,\n  },\n  Btn__15: {\n    width: '15%',\n  },\n  Btn__33: {\n    width: `${(1 / 3) * 100}%`,\n  },\n  Btn__67: {\n    width: `${(2 / 3) * 100}%`,\n  },\n  Btn__100: {\n    width: '100%',\n  },\n  //\n  Text: {\n    flex: 1,\n    color: v.revColor,\n    lineHeight: v.iconSize,\n    textAlign: 'center',\n  },\n})\n\nexport const FooterActions: FC<\n  Partial<{\n    onBack(): void\n    onBackIcon: string\n    onMore(): void\n    onMoreIcon: string\n    onNext(): void\n    onNextColor: string\n    onNextText: string\n  }>\n> = p => {\n  const {\n    onBack,\n    onBackIcon,\n    onMore,\n    onMoreIcon,\n    onNext,\n    onNextColor,\n    onNextText,\n  } = p\n\n  return (\n    <View style={css.Actions}>\n      {onBack && (\n        <RnTouchableOpacity\n          onPress={onBack}\n          style={[css.Btn, css.Btn__back, !onMore && css.Btn__33]}\n        >\n          <RnIcon\n            color={v.colors.danger}\n            path={onBackIcon || mdiKeyboardBackspace}\n          />\n        </RnTouchableOpacity>\n      )}\n      {onMore && (\n        <RnTouchableOpacity\n          onPress={onMore}\n          style={[css.Btn, css.Btn__more, !onBack && css.Btn__33]}\n        >\n          <RnIcon path={onMoreIcon || mdiCached} />\n        </RnTouchableOpacity>\n      )}\n      <RnTouchableOpacity\n        onPress={onNext}\n        style={[\n          css.Btn,\n          css.Btn__next,\n          !(onBack && onMore) && css.Btn__67,\n          !(onBack || onMore) && css.Btn__100,\n          !!onNextColor && {\n            backgroundColor: onNextColor,\n          },\n        ]}\n      >\n        <RnText small style={css.Text}>\n          {onNextText || intl`SAVE`}\n        </RnText>\n      </RnTouchableOpacity>\n    </View>\n  )\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { getAuthStore } from '../stores/authStore'\nimport { chatStore } from '../stores/chatStore'\nimport { menus } from './navigationConfig'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nexport const css = StyleSheet.create({\n  Navigation: {\n    flexDirection: 'row',\n    alignSelf: 'stretch',\n  },\n  Btn: {\n    flex: 1,\n    padding: 4,\n    alignItems: 'center',\n  },\n  BtnBg: {\n    paddingVertical: 8,\n    width: '100%',\n  },\n  BtnBg__active: {\n    borderRadius: 22,\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n  UnreadOuter: {\n    position: 'absolute',\n    top: 10,\n    left: 0,\n    right: 0,\n    flex: 1,\n    alignItems: 'center',\n  },\n  Unread: {\n    left: 15,\n    width: 20,\n    height: 15,\n    borderRadius: v.borderRadius,\n    paddingTop: 3,\n    backgroundColor: v.colors.danger,\n    overflow: 'hidden',\n  },\n  UnreadText: {\n    fontSize: v.fontSizeSmall - 2,\n    lineHeight: v.fontSizeSmall - 2,\n  },\n})\n\nexport const Navigation: FC<{\n  menu: string\n}> = observer(({ menu }) => (\n  <View style={css.Navigation}>\n    {menus().map(m => {\n      const active = m.key === menu\n      const totalUnreadChat = chatStore.unreadCount\n      const totalNoticesWebchat = chatStore.getNumberWebchatNoti()\n      const totalNoticesContact = totalUnreadChat + totalNoticesWebchat\n      const showUnreadChat =\n        getAuthStore().getCurrentAccount()?.ucEnabled &&\n        !!totalNoticesContact &&\n        m.key === 'contact' &&\n        !active\n      return (\n        <RnTouchableOpacity\n          key={m.key}\n          onPress={active ? undefined : m.navFn}\n          style={css.Btn}\n        >\n          <View style={[css.BtnBg, active && css.BtnBg__active]}>\n            <RnIcon path={m.icon} />\n          </View>\n          {showUnreadChat && (\n            <View style={css.UnreadOuter}>\n              <View style={css.Unread}>\n                <RnText style={css.UnreadText} bold white center>\n                  {totalUnreadChat + totalNoticesWebchat}\n                </RnText>\n              </View>\n            </View>\n          )}\n        </RnTouchableOpacity>\n      )\n    })}\n  </View>\n))\n","const os = 1000\nconst om = 60 * os\nconst oh = 60 * om\n\nexport const formatDuration = (ms: number) => {\n  if (isNaN(ms) || ms <= 0) {\n    return '00:00'\n  }\n  const h = Math.floor(ms / oh)\n  ms %= oh\n  let m: number | string = Math.floor(ms / om)\n  if (m < 10) {\n    m = '0' + m\n  }\n  ms %= om\n  let s: number | string = Math.floor(ms / os)\n  if (s < 10) {\n    s = '0' + s\n  }\n  return (h ? `${h}:` : '') + `${m}:${s}`\n}\n","import { getAuthStore } from '../stores/authStore'\n\nexport const webShowNotification = async (body: string, tag: string) => {\n  if (getAuthStore().pbxConfig?.['webphone.desktop.notification'] === 'false') {\n    return\n  }\n  const notification = window.Brekeke.WebNotification\n  const id = notification.showNotification({\n    document,\n    timeout: 15000,\n    interval: 15000,\n    title: 'Brekeke Phone',\n    renotify: true,\n    body,\n    tag,\n    icon: 'https://apps.brekeke.com/favicon.ico',\n    noisiness: 1,\n    onclick: (e: unknown) => {\n      window.focus()\n    },\n    onclose: (e: unknown) => {\n      notification.closeNotification({ notificationId: id })\n    },\n  })\n}\n","export const trimHtml = (s: string) =>\n  s\n    .replace(/\\/html\\s+/, '')\n    .replace(/<([^>]+)>/gi, '')\n    .trim()\n","import { FC } from 'react'\nimport { StyleSheet, ViewProps } from 'react-native'\n\nimport { mdiCheck } from '../assets/icons'\nimport { RnIcon } from './RnIcon'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\nconst css = StyleSheet.create({\n  CheckBoxBtn: {\n    height: 22,\n    width: 22,\n    borderWidth: 2,\n    borderRadius: 2,\n  },\n  CheckBox__selected: {\n    backgroundColor: '#333',\n    borderWidth: 0,\n  },\n})\n\nexport const RnCheckBox: FC<\n  ViewProps & {\n    isSelected: boolean\n    onPress(): void\n    disabled: boolean\n  }\n> = ({ isSelected, onPress, disabled, style, ...p }) => {\n  return (\n    <RnTouchableOpacity\n      {...p}\n      onPress={onPress}\n      style={[css.CheckBoxBtn, isSelected && css.CheckBox__selected, style]}\n      disabled={disabled}\n    >\n      {isSelected && <RnIcon path={mdiCheck} color={'white'} />}\n    </RnTouchableOpacity>\n  )\n}\n","import { uniqBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\n@observer\nexport class PageCallParks extends Component<{\n  callParks2: boolean\n}> {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    if (!this.props.callParks2) {\n      return\n    }\n    const c = getCallStore().getCurrentCall()\n    if (this.prevId && this.prevId !== c?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = c?.id\n  }\n\n  state = {\n    selectedPark: '',\n  }\n\n  selectPark = (selectedPark: string) => {\n    this.setState({\n      selectedPark:\n        selectedPark === this.state.selectedPark ? '' : selectedPark,\n    })\n  }\n\n  park = () => {\n    const p = this.state.selectedPark\n    return this.props.callParks2\n      ? getCallStore().getCurrentCall()?.park(p)\n      : getCallStore().startCall(p || '')\n  }\n\n  render() {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n\n    const arr =\n      cp.parks?.map((p, i) => ({\n        park: p,\n        name: cp.parkNames?.[i] || '',\n      })) || []\n    const parks = uniqBy(arr, 'park')\n\n    const sp = this.state.selectedPark\n    const cp2 = this.props.callParks2\n    void getCallStore().getCurrentCall() // trigger componentDidUpdate\n    const isDisable = (parkNumber: string) => {\n      if (cp2) {\n        return !!getCallStore().parkNumbers[parkNumber]\n      }\n      return !getCallStore().parkNumbers[parkNumber]\n    }\n\n    return (\n      <Layout\n        description={intl`Your park numbers`}\n        fabOnNext={sp ? this.park : undefined}\n        fabOnNextText={cp2 ? intl`START PARKING` : intl`CALL PARK`}\n        menu={cp2 ? undefined : 'call'}\n        onBack={cp2 ? Nav().backToPageCallManage : undefined}\n        subMenu={cp2 ? undefined : 'parks'}\n        title={intl`Park`}\n      >\n        {!parks.length && (\n          <>\n            <Field isGroup label={intl`PARK (0)`} />\n            <RnText padding>{intl`This account has no park number`}</RnText>\n          </>\n        )}\n        {parks.map((p, i) => (\n          <RnTouchableOpacity\n            key={i}\n            onPress={() => {\n              if (!isDisable(p.park)) {\n                this.selectPark(p.park)\n              }\n            }}\n          >\n            <UserItem\n              key={i}\n              avatar=''\n              name={intl`Park` + ` ${i + 1}: ${p.name}`}\n              parkNumber={`${p.park}`}\n              selected={p.park === sp}\n              disabled={isDisable(p.park)}\n            />\n          </RnTouchableOpacity>\n        ))}\n      </Layout>\n    )\n  }\n}\n","import { AppState, Keyboard, NativeEventEmitter, Platform } from 'react-native'\nimport RNCallKeep, { Events } from 'react-native-callkeep'\n\nimport { sip } from '../api/sip'\nimport { getAuthStore } from '../stores/authStore'\nimport { hackyToggleSpeaker } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { RnPicker } from '../stores/RnPicker'\nimport { RnStacker } from '../stores/RnStacker'\nimport {\n  parseNotificationData,\n  signInByLocalNotification,\n} from './PushNotification-parse'\nimport { BrekekeUtils } from './RnNativeModules'\nimport { waitTimeout } from './waitTimeout'\n\nlet alreadySetupCallKeep = false\n\nconst setupCallKeepWithCheck = async () => {\n  if (alreadySetupCallKeep) {\n    return\n  }\n\n  // Do not re-setup ios calls\n  // https://github.com/react-native-webrtc/react-native-callkeep/issues/367#issuecomment-804923269\n  if (\n    Platform.OS === 'ios' &&\n    (Object.keys(await RNCallKeep.getCalls()).length ||\n      Object.keys(getCallStore().callkeepMap).length ||\n      AppState.currentState !== 'active')\n  ) {\n    return\n  }\n\n  alreadySetupCallKeep = true\n\n  await RNCallKeep.setup({\n    ios: {\n      appName: 'Brekeke Phone',\n      // Already put this on our fork to display our logo before js load\n      imageName: 'callkit.png',\n      // https://github.com/react-native-webrtc/react-native-callkeep/issues/193\n      // https://github.com/react-native-webrtc/react-native-callkeep/issues/181\n      supportsVideo: false,\n    },\n    android: {\n      alertTitle: intl`Permissions required`,\n      alertDescription: intl`Brekeke Phone needs to your permission to display calls`,\n      cancelButton: intl`Cancel`,\n      okButton: intl`OK`,\n      imageName: 'phone_account_icon',\n      additionalPermissions: [],\n      foregroundService: {\n        channelId: 'com.brekeke.phone',\n        channelName: intl`Background service for Brekeke Phone`,\n        notificationTitle: intl`Brekeke Phone is running on background`,\n        notificationIcon: 'ic_launcher',\n      },\n      selfManaged: true,\n    },\n  })\n    .then(() => {\n      if (Platform.OS === 'android') {\n        RNCallKeep.registerPhoneAccount()\n        RNCallKeep.registerAndroidEvents()\n        RNCallKeep.setAvailable(true)\n        RNCallKeep.canMakeMultipleCalls(true)\n      }\n    })\n    .catch((err: Error) => {\n      if (AppState.currentState !== 'active') {\n        console.error('RNCallKeep.setup error:', err)\n        return\n      }\n      RnAlert.error({\n        message: intlDebug`Can not get permission to show call notification`,\n        err,\n      })\n    })\n}\n\nexport type TEvent = {\n  callUUID: string\n}\nexport type TEventDidLoad = {\n  name: string\n  data: unknown\n}\n\nexport const setupCallKeep = async () => {\n  if (Platform.OS === 'web') {\n    return\n  }\n\n  await setupCallKeepWithCheck()\n\n  const didLoadWithEvents = (e: TEventDidLoad[]) => {\n    e.forEach(_ => {\n      didLoadWithEventsHandlers[_.name]?.(_.data)\n    })\n  }\n  const answerCall = (e: TEvent) => {\n    const uuid = e.callUUID.toUpperCase()\n    if (Platform.OS === 'android') {\n      // Handle action from CallKeep Notification on android\n      BrekekeUtils.onCallKeepAction(uuid, 'answerCall')\n    } else {\n      getCallStore().onCallKeepAnswerCall(uuid)\n    }\n  }\n  const endCall = (e: TEvent) => {\n    const uuid = e.callUUID.toUpperCase()\n    const cs = getCallStore()\n    if (Platform.OS === 'android') {\n      // Handle action from CallKeep Notification on android\n      BrekekeUtils.onCallKeepAction(uuid, 'rejectCall')\n    } else {\n      cs.setCalleeRejected({ callkeepUuid: uuid })\n      cs.onCallKeepEndCall(uuid)\n    }\n    // try to setup callkeep on each endcall if not yet\n    setupCallKeepWithCheck()\n  }\n  const didDisplayIncomingCall = (\n    e: TEvent & {\n      handle: string\n      localizedCallerName: string\n      hasVideo: string // '0' | '1'\n      fromPushKit: string // '0' | '1'\n      payload: object // VOIP\n      error: string // ios only\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    // Use the custom native incoming call module for android\n    if (Platform.OS === 'android') {\n      return\n    }\n    const n = parseNotificationData(e.payload)\n    console.log(\n      `SIP PN debug: callkeep.didDisplayIncomingCall has e.payload: ${!!e.payload} found pnData: ${!!n}`,\n    )\n    if (n) {\n      getAuthStore().signInByNotification(n)\n      getCallStore().onCallKeepDidDisplayIncomingCall(uuid, n)\n    } else {\n      console.log('SIP PN debug: call RNCallKeep.endCall: pnData not found')\n      RNCallKeep.endCall(uuid)\n    }\n  }\n  const didPerformSetMutedCallAction = (\n    e: TEvent & {\n      muted: boolean\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    const c = getCallStore().calls.find(_ => _.callkeepUuid === uuid)\n    if (c && c.muted !== e.muted) {\n      c.toggleMuted()\n    }\n  }\n  const didToggleHoldCallAction = (\n    e: TEvent & {\n      hold: boolean\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    const c = getCallStore().calls.find(_ => _.callkeepUuid === uuid)\n    if (c && c.holding !== e.hold) {\n      c.toggleHoldWithCheck()\n    }\n  }\n  const didPerformDTMFAction = (\n    e: TEvent & {\n      digits: string\n    },\n  ) => {\n    const uuid = e.callUUID.toUpperCase()\n    const c = getCallStore().calls.find(_ => _.callkeepUuid === uuid)\n    if (c) {\n      sip.sendDTMF({\n        sessionId: c.id,\n        signal: e.digits.charAt(e.digits.length - 1),\n        talkerId: c.pbxTalkerId,\n        tenant: c.pbxTenant,\n      })\n    }\n  }\n  const didActivateAudioSession = () => {\n    // Only in ios\n    console.log('CallKeep debug: didActivateAudioSession')\n    // TODO:\n    // hackyToggleSpeaker is only to fix some cases in multi calls\n    // Here if we call it, it may affect other cases such as single call?\n    hackyToggleSpeaker()\n  }\n  const didDeactivateAudioSession = () => {\n    // Only in ios\n    console.log('CallKeep debug: didDeactivateAudioSession')\n    const cs = getCallStore()\n    cs.calls\n      .filter(c => c.answered && !c.holding && c.id !== cs.currentCallId)\n      .forEach(c => c.toggleHoldWithCheck())\n  }\n\n  // https://github.com/react-native-webrtc/react-native-callkeep#--didloadwithevents\n  const didLoadWithEventsHandlers: { [k: string]: Function } = {\n    RNCallKeepPerformAnswerCallAction: answerCall,\n    RNCallKeepPerformEndCallAction: endCall,\n    RNCallKeepDidDisplayIncomingCall: didDisplayIncomingCall,\n    RNCallKeepDidPerformSetMutedCallAction: didPerformSetMutedCallAction,\n    RNCallKeepDidToggleHoldAction: didToggleHoldCallAction,\n    RNCallKeepDidPerformDTMFAction: didPerformDTMFAction,\n    RNCallKeepDidActivateAudioSession: didActivateAudioSession,\n    RNCallKeepDidDeactivateAudioSession: didDeactivateAudioSession,\n  }\n\n  Object.entries({\n    didLoadWithEvents,\n    answerCall,\n    endCall,\n    didDisplayIncomingCall,\n    didPerformSetMutedCallAction,\n    didToggleHoldCallAction,\n    didPerformDTMFAction,\n    didActivateAudioSession,\n    didDeactivateAudioSession,\n  }).forEach(([k, v]) => {\n    RNCallKeep.addEventListener(k as Events, v)\n  })\n\n  // Android self-managed connection service forked version\n  if (Platform.OS !== 'android') {\n    return\n  }\n\n  const nav = Nav()\n  // Events from our custom IncomingCall module\n  const eventEmitter = new NativeEventEmitter(BrekekeUtils)\n  eventEmitter.addListener('answerCall', (uuid: string) => {\n    getCallStore().onCallKeepAnswerCall(uuid.toUpperCase())\n    RNCallKeep.setOnHold(uuid, false)\n  })\n  eventEmitter.addListener('rejectCall', (uuid: string) => {\n    const cs = getCallStore()\n    if (uuid.startsWith('CalleeClickReject-')) {\n      uuid = uuid.replace('CalleeClickReject-', '').toUpperCase()\n      cs.setCalleeRejected({ callkeepUuid: uuid })\n    } else {\n      uuid = uuid.toUpperCase()\n    }\n    cs.onCallKeepEndCall(uuid)\n  })\n  eventEmitter.addListener('transfer', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallTransferChooseUser()\n  })\n  eventEmitter.addListener('showBackgroundCall', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallBackgrounds()\n  })\n  eventEmitter.addListener('park', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallParks2()\n  })\n  eventEmitter.addListener('video', (uuid: string) => {\n    getCallStore().getCurrentCall()?.toggleVideo()\n  })\n  eventEmitter.addListener('speaker', (uuid: string) => {\n    getCallStore().toggleLoudSpeaker()\n  })\n  eventEmitter.addListener('mute', (uuid: string) => {\n    getCallStore().getCurrentCall()?.toggleMuted()\n  })\n  eventEmitter.addListener('record', (uuid: string) => {\n    getCallStore().getCurrentCall()?.toggleRecording()\n  })\n  eventEmitter.addListener('dtmf', async (uuid: string) => {\n    await waitTimeout(100)\n    nav.goToPageCallDtmfKeypad()\n  })\n  eventEmitter.addListener('hold', (uuid: string) => {\n    getCallStore().getCurrentCall()?.toggleHoldWithCheck()\n  })\n  eventEmitter.addListener('switchCamera', (uuid: string) => {\n    getCallStore().getCurrentCall()?.toggleSwitchCamera()\n  })\n  eventEmitter.addListener('onNotificationPress', async (data: string) => {\n    if (!data) {\n      return\n    }\n    const raw: { id?: string } = JSON.parse(data)\n    const n = parseNotificationData(raw)\n    if (!n) {\n      return\n    }\n    await signInByLocalNotification(n)\n    if (raw.id?.startsWith('missedcall')) {\n      nav.goToPageCallRecents()\n    } else {\n      nav.goToPageChatRecents()\n    }\n  })\n  // Other utils\n  eventEmitter.addListener('onBackPressed', onBackPressed)\n  eventEmitter.addListener('onIncomingCallActivityBackPressed', () => {\n    if (!RnStacker.stacks.length) {\n      nav.goToPageIndex()\n    } else {\n      RnStacker.stacks = [RnStacker.stacks[0]]\n    }\n    getCallStore().inPageCallManage = undefined\n  })\n  eventEmitter.addListener('debug', (m: string) =>\n    console.log(`Android debug: ${m}`),\n  )\n}\n\nexport const onBackPressed = () => {\n  if (RnKeyboard.isKeyboardShowing) {\n    Keyboard.dismiss()\n    return true\n  }\n  if (RnAlert.alerts.length) {\n    RnAlert.dismiss()\n    return true\n  }\n  if (RnPicker.currentRnPicker) {\n    RnPicker.dismiss()\n    return true\n  }\n  const s = getCallStore()\n  if (s.inPageCallManage) {\n    s.inPageCallManage = undefined\n    return true\n  }\n  if (RnStacker.stacks.length > 1) {\n    RnStacker.stacks.pop()\n    return true\n  }\n  BrekekeUtils.backToBackground()\n  return true\n}\n","import jsonStableStringify from 'json-stable-stringify'\nimport { get } from 'lodash'\nimport { AppState, Platform } from 'react-native'\n\nimport { checkAndRemovePnTokenViaSip } from '../api/sip'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { Nav } from '../stores/Nav'\nimport { BrekekeUtils } from './RnNativeModules'\nimport { toBoolean } from './string'\nimport { waitTimeout } from './waitTimeout'\n\nconst keysInCustomNotification = [\n  'title',\n  'threadId',\n  'alert',\n  'body',\n  'message',\n  'from',\n  'image',\n  'image_size',\n  'displayname',\n  'to',\n  'tenant',\n  'host',\n  'pbxHostname',\n  'pbxPort',\n  'my_custom_data',\n  'is_local_notification',\n  // Quick login sip\n  'phone.id',\n  'auth',\n  'sip.wss.port',\n  'webphone.dtmf.send.pal',\n  'webphone.turn.server',\n  'webphone.turn.username',\n  'webphone.turn.credential',\n  'autoanswer',\n  // Others\n  'pn-id',\n  'callkeepUuid',\n  'callkeepAt',\n  'time',\n]\n// new logic to parse x_ keys\nkeysInCustomNotification.forEach(k => {\n  keysInCustomNotification.push('x_' + k)\n})\n\nconst parseNotificationDataMultiple = (...fields: object[]): ParsedPn => {\n  const n: ParsedPn = fields\n    .filter(f => !!f)\n    .map(f => {\n      // @ts-ignore\n      if (typeof f === 'string' && f.charAt(0) === '{') {\n        try {\n          return JSON.parse(f)\n        } catch (err) {}\n      }\n      return f\n    })\n    .reduce((map: { [k: string]: string }, f: { [k: string]: string }) => {\n      if (!f || typeof f !== 'object') {\n        return map\n      }\n      keysInCustomNotification.forEach(k => {\n        const v = f[k]\n        if (!(k in map) && v) {\n          map[k] = v\n        }\n      })\n      return map\n    }, {})\n  if (n.image) {\n    getCallStore().updateCallAvatar(n.image, n.image_size)\n  }\n  return n\n}\n\nexport const parseNotificationData = (raw: object) => {\n  let n: ParsedPn | undefined\n  if (Platform.OS === 'android') {\n    n = parseNotificationDataMultiple(\n      raw,\n      get(raw, 'fcm'),\n      get(raw, 'alert'),\n      get(raw, 'alert.custom_notification'),\n      get(raw, 'data'),\n      get(raw, 'data.alert'),\n      get(raw, 'data.custom_notification'),\n      get(raw, 'custom_notification'),\n    )\n  }\n  if (Platform.OS === 'ios') {\n    n = parseNotificationDataMultiple(\n      raw,\n      get(raw, 'custom_notification'),\n      get(raw, 'aps'),\n      get(raw, 'aps.alert'),\n      get(raw, 'aps.custom_notification'),\n      get(raw, 'data'),\n      get(raw, 'data.custom_notification'),\n      get(raw, '_data'),\n      get(raw, '_data.custom_notification'),\n      get(raw, '_alert'),\n      get(raw, '_alert.custom_notification'),\n    )\n  }\n  if (!n) {\n    return\n  }\n\n  // new logic to parse x_ keys\n  const n2 = n as { [k: string]: unknown }\n  Object.entries(n).forEach(([k, v]) => {\n    if (!k.startsWith('x_') || isNoU(v)) {\n      return\n    }\n    const k2 = k.substr(2)\n    n2[k2] = v\n  })\n\n  n.id = get(n, 'pn-id')\n  n.pbxHostname = n.pbxHostname || get(n, 'host')\n\n  const phoneId: string = get(n, 'phone.id')\n  const sipAuth: string = get(n, 'auth')\n  const sipWssPort: string = get(n, 'sip.wss.port')\n  const dtmfSendPal: string = get(n, 'webphone.dtmf.send.pal')\n  const turnServer: string = get(n, 'webphone.turn.server')\n  const turnUsername: string = get(n, 'webphone.turn.username')\n  const turnCredential: string = get(n, 'webphone.turn.credential')\n  const autoAnswer = toBoolean(get(n, 'autoanswer'))\n  n.sipPn = {\n    phoneId,\n    sipAuth,\n    sipAuthAt: Date.now(),\n    sipWssPort,\n    dtmfSendPal,\n    turnServer,\n    turnUsername,\n    turnCredential,\n    autoAnswer,\n  }\n\n  if (!n.body) {\n    n.body = n.message || n.title || n.alert\n  }\n  if (!n.body) {\n    return\n  }\n\n  const r1 = /from\\s+(.+)\\s+to\\s+(\\S+)/i\n  const matches =\n    r1.exec(n.body) ||\n    r1.exec(n.title) ||\n    r1.exec(n.message) ||\n    r1.exec(n.alert)\n  if (!n.from) {\n    n.from = matches?.[1] || ''\n  }\n  if (!n.to) {\n    n.to = matches?.[2] || ''\n  }\n  n.displayName = get(n, 'displayname') || n.from\n\n  n.isCall = !!n.id || !!n.sipPn.sipAuth\n  n.time = Number(n.time) || 0\n\n  return n\n}\n\nconst isNoU = (v: unknown) => v === null || v === undefined\nconst androidAlreadyProccessedPn: { [k: string]: boolean } = {}\n\nexport const signInByLocalNotification = async (n: ParsedPn) => {\n  const a = await accountStore.findByPn(n)\n  const as = getAuthStore()\n  if (as.signedInId === a?.id) {\n    as.resetFailureState()\n  }\n  if (a?.id && !as.signedInId) {\n    as.signIn(a)\n  }\n}\nexport const parse = async (raw: { [k: string]: unknown }, isLocal = false) => {\n  if (!raw) {\n    return\n  }\n  const n = parseNotificationData(raw)\n  if (!n) {\n    return\n  }\n  const accountExist = await checkAndRemovePnTokenViaSip(n)\n  //\n  // Handle duplicated pn on android\n  if (Platform.OS === 'android') {\n    const k = n.id || jsonStableStringify(raw)\n    if (androidAlreadyProccessedPn[k]) {\n      console.log(\n        `SIP PN debug: PushNotification-parse: already processed k=${k}`,\n      )\n      return\n    }\n    androidAlreadyProccessedPn[k] = true\n  }\n  //\n  // Update isLocal\n  isLocal = Boolean(\n    isLocal ||\n      raw.my_custom_data ||\n      raw.is_local_notification ||\n      n.my_custom_data ||\n      n.is_local_notification,\n  )\n  //\n  // Handle nav on notification\n  const rawId = raw['id'] as string | undefined\n  const nav = Nav()\n  if (!accountExist) {\n    // Do nothing\n  } else if (rawId?.startsWith('missedcall')) {\n    // Missed call local notification\n    nav.customPageIndex = nav.goToPageCallRecents\n    waitTimeout().then(Nav().goToPageCallRecents)\n  } else if (isLocal) {\n    // Chat local notification\n    await signInByLocalNotification(n)\n    if (n.threadId && n.threadId.length > 0) {\n      nav.customPageIndex = nav.goToPageChatDetail\n      waitTimeout().then(() => nav.goToPageChatDetail({ buddy: n.threadId }))\n    } else {\n      nav.customPageIndex = nav.goToPageChatRecents\n      waitTimeout().then(nav.goToPageChatRecents)\n    }\n    console.log('SIP PN debug: PushNotification-parse: local notification')\n    return\n  }\n  const as = getAuthStore()\n  const cs = getCallStore()\n  //\n  // Handle chat notification\n  if (!n.isCall) {\n    console.log('SIP PN debug: PushNotification-parse: n.isCall=false')\n    if (!accountExist) {\n      console.log(\n        'checkAndRemovePnTokenViaSip debug: do not show pn account not exist',\n      )\n      return\n    }\n    // App currently active and already logged in using this account\n    if (\n      AppState.currentState === 'active' &&\n      as.getCurrentAccount()?.pbxUsername === n.to\n    ) {\n      return\n    }\n    return n\n  }\n  //\n  // Handle call notification\n  if (n.callkeepAt) {\n    console.log(\n      `SIP PN debug: PN received on android java code at ${n.callkeepAt}`,\n    )\n  }\n  console.log('SIP PN debug: call signInByNotification')\n  as.signInByNotification(n)\n  // Custom fork of react-native-voip-push-notification to get callkeepUuid\n  // Also we forked fcm to insert callkeepUuid there as well\n  if (!n.callkeepUuid) {\n    // Should not happen\n    console.log(\n      `SIP PN debug: PushNotification-parse got pnId=${n.id} without callkeepUuid`,\n    )\n  }\n  cs.calls\n    .filter(c => c.pnId === n.id && !c.callkeepUuid)\n    .forEach(c => {\n      Object.assign(c, { callkeepUuid: n.callkeepUuid })\n    })\n\n  // Continue handling incoming call in android\n  if (Platform.OS === 'android') {\n    cs.showIncomingCallUi({ callUUID: n.callkeepUuid, pnData: n })\n    const action = await BrekekeUtils.getIncomingCallPendingUserAction(\n      n.callkeepUuid,\n    )\n    console.log(`SIP PN debug: getPendingUserAction=${action}`)\n    if (action === 'answerCall') {\n      cs.onCallKeepAnswerCall(n.callkeepUuid)\n    } else if (action === 'rejectCall') {\n      cs.onCallKeepEndCall(n.callkeepUuid)\n    }\n    // Already invoke callkeep in java code\n  }\n  // Let pbx/sip connect by this awaiting time\n  await waitTimeout(10000)\n  return\n}\n\nexport type ParsedPn = {\n  id: string\n  title: string\n  body: string\n  threadId: string\n  alert: string\n  message: string\n  from: string\n  image: string\n  image_size: string\n  displayName: string\n  to: string\n  tenant: string\n  pbxHostname?: string\n  pbxPort?: string\n  my_custom_data: unknown\n  is_local_notification: boolean\n  isCall: boolean\n  sipPn: SipPn\n  callkeepUuid: string\n  callkeepAt: string\n  time: number\n}\nexport type SipPn = {\n  phoneId: string\n  sipAuth: string\n  sipAuthAt: number\n  sipWssPort: string\n  dtmfSendPal: string\n  turnServer: string\n  turnUsername: string\n  turnCredential: string\n  autoAnswer: boolean\n}\n\nexport const toXPN = (n: object) =>\n  Object.entries(n).reduce((m, [k, v]: [string, unknown]) => {\n    m['x_' + k] = v\n    return m\n  }, {} as { [k: string]: unknown })\n","import { sortBy, uniqBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { ChatMessage } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { Avatar } from './Avatar'\nimport { groupByTimestamp } from './chatConfig'\nimport { Message } from './ChatMessage'\nimport { RnText } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  DateGroup: {\n    marginTop: 20,\n  },\n  DateGroup__first: {\n    marginTop: 0,\n  },\n  Date: {\n    alignSelf: 'center',\n    backgroundColor: 'white',\n    paddingHorizontal: 10,\n  },\n  //\n  Border: {\n    position: 'absolute',\n    top: v.lineHeight / 2,\n    left: 2,\n    right: 2,\n    height: 1,\n    backgroundColor: v.hoverBg,\n  },\n  //\n  TimeGroup: {\n    flexDirection: 'row',\n    marginTop: 10,\n    paddingLeft: 10,\n  },\n  TimeGroup__first: {\n    marginTop: 0,\n    paddingLeft: 10,\n  },\n  Time: {\n    paddingHorizontal: 4,\n    color: v.subColor,\n    fontSize: v.fontSizeSmall,\n  },\n  //\n  Creator: {\n    flexDirection: 'row',\n    flexWrap: 'nowrap',\n    paddingLeft: 10,\n  },\n  Right: {\n    flexDirection: 'column',\n  },\n})\n\nexport const MessageList: FC<{\n  acceptFile: Function\n  list: ChatMessage[]\n  loadMore: Function\n  rejectFile: Function\n  resolveChat: Function\n  isGroupChat?: boolean\n}> = observer(p => {\n  const { acceptFile, loadMore, rejectFile, resolveChat } = p\n  let { list } = p\n  // TODO unique and sort right after fetching\n  if (!Array.isArray(list)) {\n    list = []\n  }\n  list = uniqBy(list, 'id')\n  list = sortBy(list, 'created')\n\n  return (\n    <>\n      {groupByTimestamp(list).map(({ date, groupByTime }, i) => (\n        <View key={date} style={[css.DateGroup, !i && css.DateGroup__first]}>\n          <View style={css.Border} />\n          <RnText style={css.Date}>{date}</RnText>\n          {groupByTime.map(({ messages, time }, j) => {\n            const id = messages[0]?.id\n            const c0 = resolveChat(id) as ChatMessage & {\n              creatorName: string\n              creatorAvatar: string\n              creatorId: string\n            }\n            const name = c0?.creatorName\n            const status = contactStore.getUcUserById(c0.creatorId)?.status\n            return (\n              <View\n                key={`${time}${id}`}\n                style={[css.TimeGroup, !j && css.TimeGroup__first]}\n              >\n                <Avatar\n                  source={{ uri: c0.creatorAvatar as string }}\n                  status={status}\n                />\n                <View style={css.Right}>\n                  <View style={css.Creator}>\n                    <RnText bold singleLine>\n                      {name}\n                    </RnText>\n                    <RnText style={css.Time}>{time}</RnText>\n                  </View>\n                  <View>\n                    {messages.map(m => (\n                      <Message\n                        {...resolveChat(m.id)}\n                        acceptFile={acceptFile}\n                        key={m.id}\n                        loadMore={loadMore}\n                        rejectFile={rejectFile}\n                      />\n                    ))}\n                  </View>\n                </View>\n              </View>\n            )\n          })}\n        </View>\n      ))}\n    </>\n  )\n})\n","import { FC } from 'react'\nimport {\n  NativeSyntheticEvent,\n  StyleSheet,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\n\nimport { mdiEmoticon, mdiPaperclip, mdiSend } from '../assets/icons'\nimport { RnIcon, RnTextInput, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  ChatInput: {\n    flex: 1,\n    flexDirection: 'row',\n  },\n  Btn: {\n    width: 50,\n    paddingVertical: 8,\n  },\n  Btn__file: {\n    backgroundColor: v.hoverBg,\n    borderRightWidth: 1,\n    borderColor: v.borderBg,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n  },\n  Btn__emoji: {\n    backgroundColor: v.hoverBg,\n    borderRightWidth: 1,\n    borderColor: v.borderBg,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n  },\n  Btn__send: {\n    backgroundColor: v.colors.primary,\n    paddingLeft: 8,\n  },\n  Input: {\n    flex: 1,\n    // lineHeight: g.iconSize,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n  },\n})\n\nexport const ChatInput: FC<{\n  onEmojiTurnOn?(): void\n  onSelectionChange?(\n    event: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ): void\n  onTextChange(txt: string): void\n  onTextSubmit(): void\n  openFileRnPicker(): void\n  text: string\n}> = p => {\n  const {\n    onEmojiTurnOn,\n    onSelectionChange,\n    onTextChange,\n    onTextSubmit,\n    openFileRnPicker,\n    text,\n  } = p\n  return (\n    <View style={css.ChatInput}>\n      <RnTouchableOpacity\n        onPress={openFileRnPicker}\n        style={[css.Btn, css.Btn__file]}\n      >\n        <RnIcon path={mdiPaperclip} size={20} />\n      </RnTouchableOpacity>\n      <RnTouchableOpacity\n        onPress={onEmojiTurnOn}\n        style={[css.Btn, css.Btn__emoji]}\n      >\n        <RnIcon color='gray' path={mdiEmoticon} />\n      </RnTouchableOpacity>\n      <RnTextInput\n        blurOnSubmit={false}\n        onChangeText={onTextChange}\n        onSelectionChange={onSelectionChange}\n        onSubmitEditing={onTextSubmit}\n        style={css.Input}\n        value={text}\n      />\n      <RnTouchableOpacity\n        onPress={onTextSubmit}\n        style={[css.Btn, css.Btn__send]}\n      >\n        <RnIcon color='white' path={mdiSend} />\n      </RnTouchableOpacity>\n    </View>\n  )\n}\n","import { mdiDotsHorizontal } from '../assets/icons'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\n\n// Need to declare native intl here\n// So it will get bundled when build intl via web\nexport const pickFileNativeOptions = () => [\n  {\n    key: 0,\n    label: intl`Take a new photo`,\n    icon: mdiDotsHorizontal,\n  },\n  {\n    key: 1,\n    label: intl`Take a new video`,\n    icon: mdiDotsHorizontal,\n  },\n  {\n    key: 2,\n    label: intl`Select from photo library`,\n    icon: mdiDotsHorizontal,\n  },\n  {\n    key: 3,\n    label: intl`More...`,\n    icon: mdiDotsHorizontal,\n  },\n]\nexport const onPickFileNativeError = (err: Error) => {\n  RnAlert.error({\n    message: intlDebug`Failed to pick file from system`,\n    err,\n  })\n}\n\nexport const pickFile = (cb: Function) => {\n  const input = document.createElement('input')\n  input.type = 'file'\n  input.onchange = function () {\n    cb(input.files?.[0])\n  }\n  input.click()\n}\n","import jsonStableStringify from 'json-stable-stringify'\nimport { cloneDeep } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { contactStore, ItemPBForm, Phonebook } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { RnAlert } from '../stores/RnAlert'\nimport { useForm } from '../utils/useForm'\nimport { useStore } from '../utils/useStore'\nimport { Layout } from './Layout'\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst genEmptyPhonebook = (lang: string) => {\n  const emptyObj = {}\n  contactStore\n    .getManageItems(lang)\n    ?.filter(i => i?.onscreen)\n    .forEach(u => {\n      Object.assign(emptyObj, { [u.name]: '' })\n    })\n  return emptyObj\n}\nconst css = StyleSheet.create({\n  stylePreviewName: {\n    marginHorizontal: 20,\n  },\n  styleAddItem: {\n    marginVertical: 10,\n    marginHorizontal: 15,\n  },\n  labelAddItem: {\n    color: v.subColor,\n    fontWeight: v.fontWeight,\n  },\n})\n\nconst phonebookField = {\n  id: 'phonebook',\n  name: 'phonebook',\n  label: intl`PHONEBOOK`,\n  rule: 'required',\n  isFocus: false,\n  maxLength: 100,\n}\nexport const ContactsCreateForm: FC<{\n  updatingPhonebook?: Phonebook\n  phonebook?: string\n  onBack: Function\n  onSave: Function\n  title: string\n}> = observer(props => {\n  const lang = props.updatingPhonebook?.info?.$lang || intlStore.locale\n  const disabled = props.updatingPhonebook?.shared\n  const defaultObj = {\n    phonebook: props.updatingPhonebook?.phonebook || '',\n    $lang: lang,\n    ...genEmptyPhonebook(lang),\n    ...cloneDeep(props.updatingPhonebook?.info),\n  }\n\n  // don't show field: $lang\n  const getFields = () => {\n    if (props.updatingPhonebook) {\n      const fields = Object.keys(defaultObj)?.map(key => {\n        if (key === 'phonebook') {\n          return phonebookField\n        }\n        const item = contactStore.getManageItems(lang).find(_ => _.id === key)\n        if (item) {\n          return item\n        }\n        return {\n          id: key,\n          name: key,\n          label: key,\n          keyboardType: 'default',\n          maxLength: 50,\n        }\n      })\n\n      return (\n        fields\n          ?.filter(_ => _.label !== '$lang' || _.id !== '$lang')\n          ?.filter(_ => _.id !== 'get')\n          ?.map(i => ({ ...i, disabled })) || ([] as ItemPBForm[])\n      )\n    } else {\n      const items = contactStore.getManageItems(lang)?.filter(i => i?.onscreen)\n      return (\n        ([phonebookField, ...items]?.filter(\n          _ => _.label !== '$lang' || _.id !== '$lang',\n        ) as ItemPBForm[]) || []\n      )\n    }\n  }\n  const m = () => ({\n    observable: {\n      phonebook: { ...defaultObj },\n      fields: getFields() as ItemPBForm[],\n    },\n    hasUnsavedChanges: () => {\n      return !(\n        jsonStableStringify($.phonebook) === jsonStableStringify(defaultObj)\n      )\n    },\n\n    onBackBtnPress: () => {\n      if (!$.hasUnsavedChanges()) {\n        props.onBack()\n        return\n      }\n      RnAlert.prompt({\n        title: intl`Discard Changes`,\n        message: intl`Do you want to discard all unsaved changes and go back?`,\n        onConfirm: props.onBack,\n        confirmText: intl`DISCARD`,\n      })\n    },\n\n    onValidSubmit: () => {\n      props.onSave($.phonebook, $.hasUnsavedChanges())\n    },\n  })\n  type M0 = ReturnType<typeof m>\n  type M = Omit<M0, 'observable'> & M0['observable']\n  const $ = useStore(m) as any as M\n\n  const [Form, submitForm] = useForm()\n\n  const onSelectItem = (value: string) => {\n    value.replace('$', '') // prevent key on manage.item in phonebook.js\n    contactStore.dismissPicker()\n    const isExistField = !!$.fields.find(\n      _ => _.label === value || _.id === value,\n    )\n    if (isExistField) {\n      return\n    }\n    const itemExist = contactStore\n      .getManageItems(lang)\n      .find(_ => _.label === value || _.id === value)\n    if (itemExist) {\n      $.fields.push(itemExist)\n      $.phonebook = { ...$.phonebook, [itemExist.id]: '' }\n      return\n    }\n    const newField = {\n      label: value,\n      name: value,\n      id: value,\n      keyboardType: 'default',\n      maxLength: 50,\n    }\n    $.fields.push(newField)\n    $.phonebook = { ...$.phonebook, [newField.id]: '' }\n  }\n  const openPicker = () => {\n    contactStore.openPicker({\n      onSelect: onSelectItem,\n      listOption: contactStore.getManageItems(lang).filter(i => !i?.onscreen),\n    })\n  }\n  const previewName = contactStore\n    .getManagerContact($.phonebook?.$lang)\n    ?.toDisplayName($.phonebook)\n  return (\n    <Layout\n      fabOnBack={$.onBackBtnPress}\n      fabOnNext={disabled ? undefined : (submitForm as () => void)}\n      onBack={$.onBackBtnPress}\n      title={props.title}\n    >\n      {!disabled && (\n        <RnText\n          title\n          style={[\n            css.stylePreviewName,\n            { color: !previewName ? v.colors.greyTextChat : 'black' },\n          ]}\n        >\n          {previewName || intl`<Unnamed>`}\n        </RnText>\n      )}\n      <Form\n        $={$}\n        fields={$.fields}\n        k='phonebook'\n        onValidSubmit={$.onValidSubmit}\n      />\n      {!disabled && (\n        <RnTouchableOpacity style={css.styleAddItem} onPress={openPicker}>\n          <RnText small style={css.labelAddItem}>\n            {'>>' + intl`Add item`}\n          </RnText>\n        </RnTouchableOpacity>\n      )}\n    </Layout>\n  )\n})\n","import { getAuthStore } from '../stores/authStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { pbx } from './pbx'\n\nexport const updatePhoneIndex = async (\n  p = getAuthStore().getCurrentAccount(),\n  api = pbx,\n): Promise<null | {\n  id: string\n  type: string\n}> => {\n  if (!p) {\n    return null\n  }\n  //\n  const phoneIndex = parseInt(p.pbxPhoneIndex) || 4\n  const extProps = await api.getPbxPropertiesForCurrentUser(\n    p.pbxTenant,\n    p.pbxUsername,\n  )\n  if (!extProps) {\n    console.error('updatePhoneIndex.setExtensionProperties: extProps undefined')\n    return null\n  }\n  const phone = extProps.phones[phoneIndex - 1]\n  const phoneTypeCorrect = phone.type === 'Web Phone'\n  const { pbxTenant, pbxUsername } = p\n  const expectedPhoneId = `${pbxTenant}_${pbxUsername}_phone${phoneIndex}_webphone`\n  const phoneIdCorrect = phone.id === expectedPhoneId\n  //\n  const setExtensionProperties = async () => {\n    if (!api.client) {\n      console.error(\n        'updatePhoneIndex.setExtensionProperties: api.client undefined',\n      )\n      return\n    }\n    await api.client.call_pal('setExtensionProperties', {\n      tenant: pbxTenant,\n      extension: pbxUsername,\n      properties: {\n        // See ./pbx getExtensionProperties for the detail of parameters\n        pnumber: extProps.phones.map(({ id }) => id).join(','),\n        [`p${phoneIndex}_ptype`]: phone.type,\n      },\n    })\n    if (p === getAuthStore().getCurrentAccount()) {\n      getAuthStore().userExtensionProperties = extProps\n    }\n  }\n  //\n  if (phoneTypeCorrect && phoneIdCorrect) {\n    // Do nothing\n  } else if (phoneTypeCorrect && !phoneIdCorrect) {\n    phone.id = expectedPhoneId\n    await setExtensionProperties()\n  } else if (!phoneTypeCorrect && !phoneIdCorrect) {\n    phone.id = expectedPhoneId\n    phone.type = 'Web Phone'\n    await setExtensionProperties()\n  } else {\n    return new Promise(resolve => {\n      RnAlert.prompt({\n        title: intl`Warning`,\n        message: intl`This phone index is already in use. Do you want to continue?`,\n        onConfirm: () => {\n          phone.type = 'Web Phone'\n          setExtensionProperties()\n            .then(() => {\n              resolve(phone)\n            })\n            .catch((err: Error) => {\n              RnAlert.error({\n                message: intlDebug`Failed to set extension properties`,\n                err,\n              })\n              resolve(null)\n            })\n        },\n        onDismiss: () => {\n          Nav().goToPageAccountSignIn()\n          resolve(null)\n        },\n      })\n    })\n  }\n  return phone\n}\n","import { action, observable } from 'mobx'\nimport { AppState } from 'react-native'\n\nclass RnAppStateStore {\n  @observable foregroundOnce = AppState.currentState === 'active'\n  @observable currentState = AppState.currentState\n  constructor() {\n    AppState.addEventListener(\n      'change',\n      action(nextAppState => {\n        this.currentState = nextAppState\n        this.foregroundOnce = this.foregroundOnce || nextAppState === 'active'\n      }),\n    )\n  }\n}\n\nexport const RnAppState = new RnAppStateStore()\n","import { get } from 'lodash'\nimport qs from 'qs'\nimport Url from 'url-parse'\n\nexport const parse = (location: string | Url<any> | null) => {\n  if (!location) {\n    return null\n  }\n  if (typeof location === 'string') {\n    location = new Url(location, true)\n  }\n  //\n  const params: { [k: string]: string } = Object.assign(\n    qs.parse(location.hash.replace(/^[^?]*\\?*/, '')),\n    location.query || // type-coverage:ignore-line\n      qs.parse((get(location, 'search') as string).replace(/^\\?*/, '')),\n  )\n  //\n  if (params.url) {\n    const url = new Url(params.url)\n    if (url.hostname) {\n      params.host = url.hostname\n    }\n    if (url.port) {\n      params.port = url.port\n    } else if (/^ws:/.test(params.url)) {\n      params.port = '80'\n    } else {\n      params.port = '443'\n    }\n  }\n  //\n  if (!params.host) {\n    params.host = location.hostname\n  }\n  if (!params.port) {\n    params.port = '' + location.port\n  }\n  //\n  return params as any as UrlParams\n}\n\nexport interface UrlParams {\n  user: string\n  tenant: string\n  host: string\n  port: string\n  phone_idx: string\n  _wn: string\n}\n","const uint8ArrayToUrlBase64 = (arr: ArrayBuffer) =>\n  window\n    .btoa(\n      String.fromCharCode.apply(null, new Uint8Array(arr) as any as number[]),\n    )\n    .replace(/[+/]/g, '-')\n\nexport const PushNotification = {\n  register: async (initApp: Function) => {\n    await initApp()\n    if (!window.Notification || window.Notification.permission === 'granted') {\n      return\n    }\n    window.Notification.requestPermission()\n  },\n  getToken: async () => {\n    const sw = await navigator.serviceWorker.ready\n    const sub =\n      (await sw.pushManager.getSubscription()) ||\n      (await sw.pushManager.subscribe({\n        userVisibleOnly: true,\n      }))\n    return {\n      endpoint: sub.endpoint,\n      p256dh: uint8ArrayToUrlBase64(sub.getKey('p256dh') as ArrayBuffer),\n      auth: uint8ArrayToUrlBase64(sub.getKey('auth') as ArrayBuffer),\n    }\n  },\n  resetBadgeNumber: () => {\n    // Polyfill\n  },\n}\n","import { debounce } from 'lodash'\nimport { action, Lambda, reaction } from 'mobx'\n\nimport { pbx } from '../api/pbx'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { getAuthStore } from './authStore'\n\nclass AuthPBX {\n  private clearShouldAuthReaction?: Lambda\n\n  auth = () => {\n    this.authWithCheck()\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    this.clearShouldAuthReaction = reaction(\n      s.pbxShouldAuth,\n      this.authWithCheckDebounced,\n    )\n  }\n  @action dispose = () => {\n    console.log('PBX PN debug: disconnect by AuthPBX.dispose')\n    this.clearShouldAuthReaction?.()\n    this.clearShouldAuthReaction = undefined\n    pbx.disconnect()\n    const s = getAuthStore()\n    s.pbxState = 'stopped'\n  }\n\n  @action private authWithCheck = async () => {\n    const s = getAuthStore()\n    if (!s.pbxShouldAuth()) {\n      return\n    }\n    if (s.pbxTotalFailure > 1) {\n      s.pbxState = 'waiting'\n      await waitTimeout(\n        s.pbxTotalFailure < 5 ? s.pbxTotalFailure * 1000 : 15000,\n      )\n    }\n    console.log('PBX PN debug: disconnect by AuthPBX.authWithCheck')\n    pbx.disconnect()\n    s.pbxState = 'connecting'\n    pbx\n      .connect(s.getCurrentAccount())\n      .then(connected => {\n        if (!connected) {\n          throw new Error('Pbx login connection timed out')\n        }\n      })\n      .catch(\n        action((err: Error) => {\n          s.pbxState = 'failure'\n          s.pbxTotalFailure += 1\n          console.error('Failed to connect to pbx:', err)\n        }),\n      )\n  }\n  private authWithCheckDebounced = debounce(this.authWithCheck, 300)\n}\n\nexport const authPBX = new AuthPBX()\n","import { action, observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, Fragment } from 'react'\nimport { Platform, StyleSheet, View } from 'react-native'\n\nimport { mdiCheck, mdiClose } from '../assets/icons'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { ButtonIcon } from './ButtonIcon'\nimport { IncomingItem } from './CallVoicesUI'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Notify: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    backgroundColor: v.hoverBg,\n  },\n  Notify_Info: {\n    flex: 1,\n    paddingLeft: 12,\n    paddingVertical: 5,\n  },\n  Notify_Btn_reject: {\n    borderColor: v.colors.danger,\n  },\n  Notify_Btn_accept: {\n    borderColor: v.colors.primary,\n  },\n})\n\n@observer\nexport class DidMountTimer extends Component {\n  private didMountTimer = 0\n  @observable didMount = false\n  componentDidMount() {\n    this.didMountTimer = BackgroundTimer.setTimeout(\n      action(() => {\n        this.didMountTimer = 0\n        this.didMount = true\n      }),\n      1000,\n    )\n  }\n  componentWillUnmount() {\n    if (this.didMountTimer) {\n      BackgroundTimer.clearTimeout(this.didMountTimer)\n    }\n  }\n  render() {\n    return this.didMount ? this.props.children : null\n  }\n}\n\nexport const CallNotify = observer(() => {\n  // Try trigger observer?\n  void Object.keys(getCallStore().callkeepMap)\n  void getCallStore().calls.map(_ => _.callkeepUuid)\n  const c = getCallStore().getCallInNotify()\n  // Do not show notify if in page call manage\n  if (getCallStore().inPageCallManage || !c) {\n    return null\n  }\n  const k = getCallStore().callkeepMap[c.callkeepUuid]\n  const Wrapper =\n    k?.hasAction ||\n    Platform.OS === 'web' ||\n    !getAuthStore().getCurrentAccount()?.pushNotificationEnabled\n      ? Fragment\n      : DidMountTimer\n  const configure = getAuthStore().pbxConfig\n  const hideHangup =\n    c.incoming && configure?.['webphone.call.hangup'] === 'false'\n  const n = getCallStore().calls.filter(\n    _ => _.incoming && !_.answered && _.id !== c.id,\n  ).length\n  return (\n    <Wrapper>\n      {getCallStore().shouldRingInNotify(c.callkeepUuid) && <IncomingItem />}\n      <RnTouchableOpacity\n        style={css.Notify}\n        onPress={() => Nav().goToPageCallManage()}\n      >\n        <View style={css.Notify_Info}>\n          <RnText bold>{c.getDisplayName()}</RnText>\n          <RnText>\n            {intl`Incoming Call`}\n            {n > 0 ? ' (' + intl`${n} in background` + ')' : ''}\n          </RnText>\n        </View>\n        {!hideHangup && (\n          <ButtonIcon\n            bdcolor={v.colors.danger}\n            color={v.colors.danger}\n            onPress={c.hangupWithUnhold}\n            path={mdiClose}\n            size={20}\n            style={css.Notify_Btn_reject}\n          />\n        )}\n        <ButtonIcon\n          bdcolor={v.colors.primary}\n          color={v.colors.primary}\n          onPress={() => c.answer()}\n          path={mdiCheck}\n          size={20}\n          style={css.Notify_Btn_accept}\n        />\n      </RnTouchableOpacity>\n    </Wrapper>\n  )\n})\n\nexport const IncomingItemWithTimer = () => (\n  <DidMountTimer>\n    <IncomingItem />\n  </DidMountTimer>\n)\n","import { Component, createRef } from 'react'\n\nimport ringback from '../assets/incallmanager_ringback.mp3'\nimport ringtone from '../assets/incallmanager_ringtone.mp3'\n\nexport const IncomingItem = () => (\n  <audio autoPlay loop src={ringtone} muted={false} />\n)\nexport const OutgoingItem = () => (\n  <audio autoPlay loop src={ringback} muted={false} />\n)\n\nexport class OutgoingItemWithSDP extends Component<{\n  earlyMedia: MediaStream | null\n}> {\n  audioRef = createRef<HTMLAudioElement>()\n  componentDidMount() {\n    if (!this.audioRef.current) {\n      return\n    }\n\n    if (\n      this.props.earlyMedia &&\n      this.props.earlyMedia !== this.audioRef.current.srcObject\n    ) {\n      this.audioRef.current.srcObject = this.props.earlyMedia\n      this.audioRef.current.play()\n    }\n  }\n  componentDidUpdate() {\n    this.componentDidMount()\n  }\n  render() {\n    return <audio autoPlay ref={this.audioRef} muted={false} />\n  }\n}\nexport class AnsweredItem extends Component<{\n  voiceStreamObject: MediaStream | null\n}> {\n  audioRef = createRef<HTMLAudioElement>()\n  componentDidMount() {\n    if (!this.audioRef.current) {\n      return\n    }\n    if (\n      this.props.voiceStreamObject &&\n      this.props.voiceStreamObject !== this.audioRef.current.srcObject\n    ) {\n      this.audioRef.current.srcObject = this.props.voiceStreamObject\n      this.audioRef.current.play()\n    }\n  }\n  componentDidUpdate() {\n    this.componentDidMount()\n  }\n  render() {\n    return <audio autoPlay ref={this.audioRef} muted={false} />\n  }\n}\n","import { observer } from 'mobx-react'\nimport { ActivityIndicator, StyleSheet } from 'react-native'\n\nconst css = StyleSheet.create({\n  loading: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n    padding: 50,\n  },\n})\n\nexport const VideoPlayer = observer((p: { sourceObject: MediaStream }) =>\n  p.sourceObject ? (\n    <video\n      ref={video => {\n        if (video) {\n          video.srcObject = p.sourceObject\n        }\n      }}\n      style={{\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n      }}\n      autoPlay\n    />\n  ) : (\n    <ActivityIndicator style={css.loading} />\n  ),\n)\n","import './embed/polyfill'\nimport './utils/captureConsoleOutput'\nimport './polyfill'\nimport './polyfill/mobx'\nimport './utils/validator'\nimport './stores/Nav2' // Fix circular dependencies\nimport './stores/callStore2' // Fix circular dependencies\nimport './stores/authStore2' // Fix circular dependencies\nimport './api/syncPnToken2' // Fix circular dependencies\nimport 'brekekejs/lib/phonebook'\nimport 'brekekejs/lib/webnotification'\n\nimport { AppRegistry } from 'react-native'\n\nimport { App } from './components/App'\nimport { exposeEmbedApi } from './embed/exposeEmbedApi'\n\nAppRegistry.registerComponent('BrekekePhone', () => App)\n\nconst runApp = (rootTag: HTMLElement) => {\n  AppRegistry.runApplication('BrekekePhone', { rootTag })\n}\n\nif (window._BrekekePhoneWebRoot) {\n  runApp(window._BrekekePhoneWebRoot)\n}\nexposeEmbedApi(runApp)\n","import { Platform } from 'react-native'\n\ndeclare global {\n  interface Window {\n    _BrekekePhoneWebRoot?: HTMLElement | null\n    _BrekekePhoneCaptureConsole?: boolean\n  }\n}\n\nif (Platform.OS === 'web') {\n  window._BrekekePhoneWebRoot = document.getElementById(\n    '__brekeke_phone_web_root',\n  )\n  if (typeof window._BrekekePhoneCaptureConsole !== 'boolean') {\n    window._BrekekePhoneCaptureConsole = !!window._BrekekePhoneWebRoot\n  }\n}\n\nif (!window.Brekeke) {\n  // type-coverage:ignore-next-line\n  window.Brekeke = {} as any\n}\nif (!window.Brekeke.Phone) {\n  // type-coverage:ignore-next-line\n  window.Brekeke.Phone = {} as any\n}\n","import CircularJSON from 'circular-json'\nimport moment from 'moment'\nimport { Platform } from 'react-native'\nimport { format } from 'util'\n\nimport { sipErrorEmitter } from '../stores/sipErrorEmitter'\n\nconst formatErrors = (...errs: Error[]) => {\n  // Normalize and fix circular json\n  let msgs = errs.map(e =>\n    !e\n      ? `${e}`\n      : e.message\n      ? e.message\n      : typeof e === 'object'\n      ? CircularJSON.stringify(e)\n      : `${e}`,\n  )\n  let tpl = msgs.shift() || ''\n  // Remove %c on web from the debug lib\n  if (Platform.OS === 'web') {\n    const m: { [k: number]: boolean } = {}\n    const regex = /%\\w/g\n    let mi = 0\n    let match: RegExpExecArray | null = null\n    while ((match = regex.exec(tpl)) !== null) {\n      if (match[0] === '%c') {\n        m[mi] = true\n      }\n      mi++\n    }\n    tpl = tpl.replace(/%c/g, '')\n    msgs = msgs.filter((m0, i) => !m[i])\n  }\n  // Apply format and remove whitespaces\n  let msg = format(tpl, ...msgs)\n    .replace(/\\s+/g, ' ')\n    .trim()\n  // Remove stack trace and cleanup output from lib `debug` in jssip\n  msg = msg.replace(/((\\s+@\\s+)|( : \\w+@index)|(\\W\\w*@http)).+/, '')\n  msg = msg.replace(/ : Error at \\w+\\.log \\(http.+/, '')\n  msg = msg.replace(/^.+\\[(trial|debug|log|info|warn|error)\\]\\s*/, '')\n  // SIP error emitter\n  if (msg.indexOf('JsSIP:Transport reconnection attempt') >= 0) {\n    sipErrorEmitter.emit('error', null)\n  }\n  // RN 0.65 warning\n  if (msg.indexOf('`new NativeEventEmitter()` was called') >= 0) {\n    return\n  }\n  return msg\n}\n\nconst captureConsoleOutput = () => {\n  if (Platform.OS === 'web' && !window._BrekekePhoneCaptureConsole) {\n    return\n  }\n  const customConsoleObject = ['debug', 'log', 'info', 'warn', 'error'].reduce(\n    (m, k) => {\n      const f0 = console[k as keyof Console] as Function\n      const f = f0.bind(console) as Function\n      m[k] =\n        Platform.OS === 'web' || process.env.NODE_ENV !== 'production'\n          ? (...args: Error[]) => {\n              const msg = formatErrors(...args)\n              // add timestamp on dev (prod already added in debugStore)\n              if (msg) {\n                f(moment().format('YYYY/MM/DD HH:mm:ss.SSS') + ' ' + msg)\n              }\n            }\n          : (...args: Error[]) => {\n              // debugStore was added globally in src/stores/debugStore.ts\n              //    so it can be used here\n              const msg = formatErrors(...args)\n              if (msg) {\n                window.debugStore?.captureConsoleOutput(k, msg)\n              }\n            }\n      return m\n    },\n    {} as { [k: string]: Function },\n  )\n  Object.entries(customConsoleObject).forEach(([k, v]) => {\n    Object.defineProperty(console, k, {\n      get() {\n        return v\n      },\n      set() {\n        // Prevent set to keep using our functions\n      },\n    })\n  })\n  // Write a log to console to note about this\n  console.info('captureConsoleOutput: console output is being captured!')\n}\n\ncaptureConsoleOutput()\n","import './dev'\nimport './shared'\n\nimport PropTypes from 'prop-types'\nimport * as Rn from 'react-native'\n\n// @ts-ignore\nconst Rn0 = Rn as { [k: string]: { [k: string]: unknown } }\n\n// Fix error in react-native-keyboard-spacer\nRn0.ViewPropTypes = Rn0.ViewPropTypes || {}\n// Fix error in react-native-hyperlink\nRn0.Text.propTypes = Rn0.Text.propTypes || { style: PropTypes.any }\n\n// window.navigator.getUserMedia is not a function\n// @ts-ignore\nwindow.navigator.getUserMedia =\n  // @ts-ignore\n  window.navigator.getUserMedia ||\n  window.navigator.mediaDevices.getUserMedia ||\n  // @ts-ignore\n  navigator.mozGetUserMedia\n","export const _ = Object.assign(window, {\n  __DEV__: process.env.NODE_ENV !== 'production',\n})\n","import 'es6-shim'\nimport 'es7-shim'\n\nimport JsSIP from 'jssip'\nimport MD5 from 'md5'\n\ndeclare global {\n  interface Window {\n    JsSIP: typeof JsSIP\n    CryptoJS: {\n      MD5: Function\n    }\n  }\n}\n\n// Dependency for brekekejs\nwindow.JsSIP = window.JsSIP || JsSIP\nwindow.CryptoJS = window.CryptoJS || { MD5 }\n","import { configure, onReactionError } from 'mobx'\n\nconfigure({\n  enforceActions: 'never',\n  computedRequiresReaction: false,\n  observableRequiresReaction: false,\n  reactionRequiresObservable: false,\n  disableErrorBoundaries: false,\n})\nonReactionError((err: Error) => {\n  console.error('onReactionError:', err)\n})\n","import Validator from 'validatorjs'\nimport en from 'validatorjs/src/lang/en'\n\nValidator.setMessages('en', {\n  ...en,\n  required: 'This field is required',\n})\nValidator.useLang('en')\n\nValidator.register(\n  'hostname',\n  v => {\n    if (typeof v !== 'string') {\n      return false\n    }\n    return !(\n      /[^\\w-.]/.test(v) || // any special character except - . => invalid\n      /^[-.]/.test(v) || // special character at the beginning => invalid\n      /[-.]$/.test(v) || // special character at the end => invalid\n      /\\.{2,}/.test(v) || // two dots near to each other => invalid\n      v.length > 255 || // too long => invalid\n      false\n    )\n  },\n  'Invalid host name',\n)\n\nValidator.register(\n  'port',\n  v => {\n    if (typeof v !== 'string') {\n      return false\n    }\n    return !(\n      /\\D/.test(v) || // non numeric character => invalid\n      /^0/.test(v) || // starts with 0 => invalid\n      parseInt(v) > 65535 || // greater than max => invalid\n      false\n    )\n  },\n  'Invalid port',\n)\n","var map = {\n\t\"./ar\": 159,\n\t\"./ar.js\": 159,\n\t\"./az\": 160,\n\t\"./az.js\": 160,\n\t\"./be\": 161,\n\t\"./be.js\": 161,\n\t\"./bg\": 162,\n\t\"./bg.js\": 162,\n\t\"./bs\": 163,\n\t\"./bs.js\": 163,\n\t\"./ca\": 164,\n\t\"./ca.js\": 164,\n\t\"./cs\": 165,\n\t\"./cs.js\": 165,\n\t\"./cy\": 166,\n\t\"./cy.js\": 166,\n\t\"./da\": 167,\n\t\"./da.js\": 167,\n\t\"./de\": 168,\n\t\"./de.js\": 168,\n\t\"./el\": 169,\n\t\"./el.js\": 169,\n\t\"./en\": 102,\n\t\"./en.js\": 102,\n\t\"./es\": 170,\n\t\"./es.js\": 170,\n\t\"./et\": 171,\n\t\"./et.js\": 171,\n\t\"./eu\": 172,\n\t\"./eu.js\": 172,\n\t\"./fa\": 173,\n\t\"./fa.js\": 173,\n\t\"./fi\": 174,\n\t\"./fi.js\": 174,\n\t\"./fr\": 175,\n\t\"./fr.js\": 175,\n\t\"./hr\": 176,\n\t\"./hr.js\": 176,\n\t\"./hu\": 177,\n\t\"./hu.js\": 177,\n\t\"./id\": 178,\n\t\"./id.js\": 178,\n\t\"./it\": 179,\n\t\"./it.js\": 179,\n\t\"./ja\": 180,\n\t\"./ja.js\": 180,\n\t\"./ka\": 181,\n\t\"./ka.js\": 181,\n\t\"./ko\": 182,\n\t\"./ko.js\": 182,\n\t\"./lt\": 183,\n\t\"./lt.js\": 183,\n\t\"./lv\": 184,\n\t\"./lv.js\": 184,\n\t\"./mk\": 185,\n\t\"./mk.js\": 185,\n\t\"./mn\": 186,\n\t\"./mn.js\": 186,\n\t\"./ms\": 187,\n\t\"./ms.js\": 187,\n\t\"./nb_NO\": 188,\n\t\"./nb_NO.js\": 188,\n\t\"./nl\": 189,\n\t\"./nl.js\": 189,\n\t\"./pl\": 190,\n\t\"./pl.js\": 190,\n\t\"./pt\": 191,\n\t\"./pt.js\": 191,\n\t\"./pt_BR\": 192,\n\t\"./pt_BR.js\": 192,\n\t\"./ro\": 193,\n\t\"./ro.js\": 193,\n\t\"./ru\": 194,\n\t\"./ru.js\": 194,\n\t\"./se\": 195,\n\t\"./se.js\": 195,\n\t\"./sl\": 196,\n\t\"./sl.js\": 196,\n\t\"./sq\": 197,\n\t\"./sq.js\": 197,\n\t\"./sr\": 198,\n\t\"./sr.js\": 198,\n\t\"./sv\": 199,\n\t\"./sv.js\": 199,\n\t\"./tr\": 200,\n\t\"./tr.js\": 200,\n\t\"./ua\": 201,\n\t\"./ua.js\": 201,\n\t\"./uk\": 202,\n\t\"./uk.js\": 202,\n\t\"./vi\": 203,\n\t\"./vi.js\": 203,\n\t\"./zh\": 204,\n\t\"./zh.js\": 204,\n\t\"./zh_TW\": 205,\n\t\"./zh_TW.js\": 205\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 630;","import { ComponentProps } from 'react'\n\nimport { menus, normalizeSavedNavigation } from '../components/navigationConfig'\nimport { PageAccountCreate } from '../pages/PageAccountCreate'\nimport { PageAccountSignIn } from '../pages/PageAccountSignIn'\nimport { PageAccountUpdate } from '../pages/PageAccountUpdate'\nimport { PageCallBackgrounds } from '../pages/PageCallBackgrounds'\nimport { PageCallDtmfKeypad } from '../pages/PageCallDtmfKeypad'\nimport { PageCallKeypad } from '../pages/PageCallKeypad'\nimport { PageCallParks } from '../pages/PageCallParks'\nimport { PageCallParks2 } from '../pages/PageCallParks2'\nimport { PageCallRecents } from '../pages/PageCallRecents'\nimport { PageCallTransferChooseUser } from '../pages/PageCallTransferChooseUser'\nimport { PageCallTransferDial } from '../pages/PageCallTransferDial'\nimport { PageChatDetail } from '../pages/PageChatDetail'\nimport { PageChatGroupCreate } from '../pages/PageChatGroupCreate'\nimport { PageChatGroupDetail } from '../pages/PageChatGroupDetail'\nimport { PageChatGroupInvite } from '../pages/PageChatGroupInvite'\nimport { PageChatRecents } from '../pages/PageChatRecents'\nimport { PageContactEdit } from '../pages/PageContactEdit'\nimport { PageContactGroupCreate } from '../pages/PageContactGroupCreate'\nimport { PageContactGroupEdit } from '../pages/PageContactGroupEdit'\nimport { PageContactPhonebook } from '../pages/PageContactPhonebook'\nimport { PageContactUsers } from '../pages/PageContactUsers'\nimport { PagePhonebookCreate } from '../pages/PagePhonebookCreate'\nimport { PagePhonebookUpdate } from '../pages/PagePhonebookUpdate'\nimport { PageSettingsCurrentAccount } from '../pages/PageSettingsCurrentAccount'\nimport { PageSettingsDebug } from '../pages/PageSettingsDebug'\nimport { PageSettingsOther } from '../pages/PageSettingsOther'\nimport { PageWebChat } from '../pages/PageWebChat'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { getAuthStore } from './authStore'\nimport { getCallStore } from './callStore'\nimport { CallStore } from './callStore2'\nimport { setNav } from './Nav'\nimport { RnStacker } from './RnStacker'\n\nexport class Nav2 {\n  // root account/login\n  goToPageAccountSignIn = RnStacker.createGoTo<\n    ComponentProps<typeof PageAccountSignIn>\n  >({ PageAccountSignIn }, true)\n  backToPageAccountSignIn = RnStacker.createBackTo<\n    ComponentProps<typeof PageAccountSignIn>\n  >({ PageAccountSignIn }, true)\n\n  // root user/chat\n  goToPageContactPhonebook = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactPhonebook>\n  >({ PageContactPhonebook }, true)\n  backToPageContactPhonebook = RnStacker.createBackTo<\n    ComponentProps<typeof PageContactPhonebook>\n  >({ PageContactPhonebook }, true)\n  goToPageContactUsers = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactUsers>\n  >({ PageContactUsers }, true)\n  backToPageContactUsers = RnStacker.createBackTo<\n    ComponentProps<typeof PageContactUsers>\n  >({ PageContactUsers }, true)\n  goToPageChatRecents = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatRecents>\n  >({ PageChatRecents }, true)\n  backToPageChatRecents = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatRecents>\n  >({ PageChatRecents }, true)\n  goToPageWebChat = RnStacker.createGoTo<ComponentProps<typeof PageWebChat>>(\n    { PageWebChat },\n    true,\n  )\n  backToPageWebChat = RnStacker.createBackTo<\n    ComponentProps<typeof PageWebChat>\n  >({ PageWebChat }, true)\n\n  // root call\n  goToPageCallKeypad = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallKeypad>\n  >({ PageCallKeypad }, true)\n  backToPageCallKeypad = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallKeypad>\n  >({ PageCallKeypad }, true)\n  goToPageCallRecents = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallRecents>\n  >({ PageCallRecents }, true)\n  backToPageCallRecents = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallRecents>\n  >({ PageCallRecents }, true)\n  goToPageCallParks = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallParks>\n  >({ PageCallParks }, true)\n  backToPageCallParks = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallParks>\n  >({ PageCallParks }, true)\n\n  // root settings\n  goToPageSettingsOther = RnStacker.createGoTo<\n    ComponentProps<typeof PageSettingsOther>\n  >({ PageSettingsOther }, true)\n  backToPageSettingsOther = RnStacker.createBackTo<\n    ComponentProps<typeof PageSettingsOther>\n  >({ PageSettingsOther }, true)\n  goToPageSettingsCurrentAccount = RnStacker.createGoTo<\n    ComponentProps<typeof PageSettingsCurrentAccount>\n  >({ PageSettingsCurrentAccount }, true)\n  backToPageSettingsCurrentAccount = RnStacker.createBackTo<\n    ComponentProps<typeof PageSettingsCurrentAccount>\n  >({ PageSettingsCurrentAccount }, true)\n\n  // account\n  goToPageAccountCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PageAccountCreate>\n  >({ PageAccountCreate })\n  backToPageAccountCreate = RnStacker.createBackTo<\n    ComponentProps<typeof PageAccountCreate>\n  >({ PageAccountCreate })\n  goToPageAccountUpdate = RnStacker.createGoTo<\n    ComponentProps<typeof PageAccountUpdate>\n  >({ PageAccountUpdate })\n  backToPageAccountUpdate = RnStacker.createBackTo<\n    ComponentProps<typeof PageAccountUpdate>\n  >({ PageAccountUpdate })\n  goToPagePhonebookCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PagePhonebookCreate>\n  >({ PagePhonebookCreate })\n  backToPagePhonebookCreate = RnStacker.createBackTo<\n    ComponentProps<typeof PagePhonebookCreate>\n  >({ PagePhonebookCreate })\n  goToPagePhonebookUpdate = RnStacker.createGoTo<\n    ComponentProps<typeof PagePhonebookUpdate>\n  >({ PagePhonebookUpdate })\n  backToPagePhonebookUpdate = RnStacker.createBackTo<\n    ComponentProps<typeof PagePhonebookUpdate>\n  >({ PagePhonebookUpdate })\n\n  // call\n  goToPageCallManage = (\n    props?: CallStore['inPageCallManage'] & { isOutgoingCall?: boolean },\n  ) => {\n    const s = getCallStore()\n    const c = s.getCurrentCall()\n    const uuid = c?.callkeepUuid\n    if (!props?.isOutgoingCall && uuid && !c.transferring) {\n      BrekekeUtils.onPageCallManage(uuid)\n    }\n    s.inPageCallManage = {\n      isFromCallBar: props?.isFromCallBar,\n    }\n  }\n  backToPageCallManage = (props?: CallStore['inPageCallManage']) => {\n    const s = getCallStore()\n    const c = s.getCurrentCall()\n    const uuid = c?.callkeepUuid\n    if (uuid && !c.transferring) {\n      BrekekeUtils.onPageCallManage(uuid)\n    }\n    s.inPageCallManage = {\n      isFromCallBar: props?.isFromCallBar,\n    }\n    if (RnStacker.stacks.length > 1) {\n      RnStacker.dismiss()\n    }\n  }\n  goToPageCallBackgrounds = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallBackgrounds>\n  >({ PageCallBackgrounds })\n  backToPageCallBackgrounds = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallBackgrounds>\n  >({ PageCallBackgrounds })\n  goToPageCallTransferChooseUser = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallTransferChooseUser>\n  >({ PageCallTransferChooseUser })\n  backToPageCallTransferChooseUser = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallTransferChooseUser>\n  >({ PageCallTransferChooseUser })\n  goToPageCallTransferDial = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallTransferDial>\n  >({ PageCallTransferDial })\n  backToPageCallTransferDial = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallTransferDial>\n  >({ PageCallTransferDial })\n  goToPageCallParks2 = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallParks2>\n  >({ PageCallParks2 })\n  backToPageCallParks2 = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallParks2>\n  >({ PageCallParks2 })\n  goToPageCallDtmfKeypad = RnStacker.createGoTo<\n    ComponentProps<typeof PageCallDtmfKeypad>\n  >({ PageCallDtmfKeypad })\n  backToPageCallDtmfKeypad = RnStacker.createBackTo<\n    ComponentProps<typeof PageCallDtmfKeypad>\n  >({ PageCallDtmfKeypad })\n\n  // chat\n  goToPageChatDetail = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatDetail>\n  >({ PageChatDetail })\n  backToPageChatDetail = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatDetail>\n  >({ PageChatDetail })\n  goToPageChatGroupCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatGroupCreate>\n  >({ PageChatGroupCreate })\n  backToPageChatGroupCreate = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatGroupCreate>\n  >({ PageChatGroupCreate })\n  goToPageChatGroupInvite = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatGroupInvite>\n  >({ PageChatGroupInvite })\n  backToPageChatGroupInvite = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatGroupInvite>\n  >({ PageChatGroupInvite })\n  goToPageChatGroupDetail = RnStacker.createGoTo<\n    ComponentProps<typeof PageChatGroupDetail>\n  >({ PageChatGroupDetail })\n  backToPageChatGroupDetail = RnStacker.createBackTo<\n    ComponentProps<typeof PageChatGroupDetail>\n  >({ PageChatGroupDetail })\n\n  // settings\n  goToPageSettingsDebug = RnStacker.createGoTo<\n    ComponentProps<typeof PageSettingsDebug>\n  >({ PageSettingsDebug })\n  backToPageSettingsDebug = RnStacker.createBackTo<\n    ComponentProps<typeof PageSettingsDebug>\n  >({ PageSettingsDebug })\n\n  // contact\n  goToPageContactEdit = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactEdit>\n  >({\n    PageContactEdit,\n  })\n  backToPageContactEdit = RnStacker.createBackTo<\n    ComponentProps<typeof PageContactEdit>\n  >({ PageContactEdit }, true)\n  goToPageContactGroupCreate = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactGroupCreate>\n  >({\n    PageContactGroupCreate,\n  })\n  goToPageContactGroupEdit = RnStacker.createGoTo<\n    ComponentProps<typeof PageContactGroupEdit>\n  >({\n    PageContactGroupEdit,\n  })\n\n  customPageIndex?: Function\n  goToPageIndex = () => {\n    const ca = getAuthStore().getCurrentAccount()\n    if (!ca) {\n      this.customPageIndex = undefined\n      this.goToPageAccountSignIn()\n      return\n    }\n    if (this.customPageIndex) {\n      this.customPageIndex()\n      this.customPageIndex = undefined\n      return\n    }\n    const arr = menus()\n    normalizeSavedNavigation()\n    const i = ca.navIndex\n    const k = ca.navSubMenus?.[i]\n    arr[i].subMenusMap[k].navFn()\n  }\n}\n\nsetNav(new Nav2())\n","import { observer } from 'mobx-react'\n\nexport const AudioPlayer = observer(() => {\n  return null\n})\n","import { FC, useCallback, useEffect, useState } from 'react'\nimport { ActivityIndicator, StyleSheet, View, ViewProps } from 'react-native'\nimport FastImage from 'react-native-fast-image'\nimport Svg, { Path } from 'react-native-svg'\n\nimport { mdiImageBrokenVariant } from '../assets/icons'\nimport { ChatFile } from '../stores/chatStore'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst size = 200\nconst css = StyleSheet.create({\n  image: {\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n  },\n  video: {\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n    backgroundColor: v.layerBgVideo,\n  },\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    backgroundColor: v.layerBg,\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n  },\n  loadingVideo: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    backgroundColor: v.layerBg,\n    width: size,\n    height: size,\n    borderRadius: 5,\n    overflow: 'hidden',\n  },\n  imageBroken: {\n    marginLeft: 0,\n    marginTop: 0,\n    backgroundColor: 'blue',\n    aspectRatio: 1,\n    alignItems: 'center',\n    width: '100%',\n    height: size,\n  },\n})\n\nexport const RnImageVideoLoader: FC<ViewProps & ChatFile> = ({\n  url,\n  state,\n  fileType,\n}) => {\n  const [objectURL, setObjectUrl] = useState<string>('')\n\n  const onShowImage = useCallback(() => {\n    const image = new Image()\n    image.src = objectURL || ''\n    const w = window.open('')\n    w?.document.write(image.outerHTML)\n  }, [objectURL])\n\n  const readImage = async (_: string) => {\n    try {\n      const urlImage = _.split('/')\n      const cache = await caches.open(urlImage[0])\n      const request = new Request(urlImage[1])\n      const response = await cache.match(request)\n      const blobFile = await response?.blob()\n      if (blobFile) {\n        setObjectUrl(URL.createObjectURL(blobFile))\n      }\n    } catch (err) {\n      setObjectUrl('')\n      console.error('ImageVideoLoader.readImage error:', err)\n    }\n  }\n  useEffect(() => {\n    if (url) {\n      readImage(url)\n    }\n  }, [url])\n\n  const renderView = () => {\n    if (fileType === 'image') {\n      return (\n        <RnTouchableOpacity onPress={onShowImage}>\n          <FastImage source={{ uri: objectURL }} style={css.image} />\n        </RnTouchableOpacity>\n      )\n    } else {\n      return (\n        <View style={css.video}>\n          <video\n            controls\n            src={objectURL}\n            playsInline\n            width={size}\n            height={size}\n          />\n        </View>\n      )\n    }\n  }\n  const isLoading =\n    state !== 'success' && state !== 'failure' && state !== 'stopped'\n  const isLoadFailed = state === 'failure' || state === 'stopped'\n  const isLoadSuccess = state === 'success' && !!objectURL\n  if (state === 'success' && !objectURL) {\n    return null\n  }\n  const cssLoading = fileType === 'image' ? css.loading : css.loadingVideo\n  return (\n    <View style={css.image}>\n      {isLoading && (\n        <ActivityIndicator size='small' color='white' style={cssLoading} />\n      )}\n      {isLoadSuccess && renderView()}\n      {isLoadFailed && (\n        <Svg\n          preserveAspectRatio='xMinYMin slice'\n          height={size}\n          viewBox='3 3  18 18'\n          width={size}\n        >\n          <Path d={mdiImageBrokenVariant} fill={v.colors.greyTextChat} />\n        </Svg>\n      )}\n    </View>\n  )\n}\n","import { FC } from 'react'\nimport { Platform, StatusBar, StyleSheet, View } from 'react-native'\nimport { getStatusBarHeight } from 'react-native-iphone-x-helper'\n\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnStatusBar: {\n    backgroundColor: v.hoverBg,\n    ...v.backdropZindex,\n    ...Platform.select({\n      ios: {\n        height: getStatusBarHeight(true),\n      },\n    }),\n  },\n  RnStatusBar__warning: {\n    backgroundColor: v.colors.warning,\n    borderColor: v.colors.warning,\n  },\n  RnStatusBar__danger: {\n    backgroundColor: v.colors.danger,\n    borderColor: v.colors.danger,\n  },\n  Border: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    borderColor: v.borderBg,\n    borderBottomWidth: 1,\n    ...v.backdropZindex,\n  },\n})\n\nexport type TRnStatusBarProps = {\n  danger?: boolean\n  warning?: boolean\n  onPress?(): void\n}\nexport const RnStatusBar: FC<TRnStatusBarProps> = p =>\n  Platform.OS === 'web' ? null : (\n    <RnTouchableOpacity\n      style={[\n        css.RnStatusBar,\n        p.warning && css.RnStatusBar__warning,\n        p.danger && css.RnStatusBar__danger,\n      ]}\n      onPress={p.onPress}\n    >\n      <StatusBar\n        backgroundColor={\n          p.danger ? v.colors.danger : p.warning ? v.colors.warning : v.hoverBg\n        }\n        barStyle='dark-content'\n      />\n      <View style={css.Border} />\n    </RnTouchableOpacity>\n  )\n","import { FC } from 'react'\nimport { StyleSheet, View, ViewProps } from 'react-native'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnSwitch: {\n    height: 12,\n    width: 32,\n    backgroundColor: v.fn.darken(0.05, v.hoverBg),\n    borderRadius: 12,\n  },\n  RnSwitch__enabled: {\n    backgroundColor: v.colors.primaryFn(0.1),\n  },\n  Circle: {\n    position: 'absolute',\n    top: -3,\n    left: -1,\n    width: 18,\n    height: 18,\n    borderRadius: 18,\n    backgroundColor: v.fn.darken(0.05, v.borderBg),\n    ...v.boxShadow,\n  },\n  Circle__enabled: {\n    left: null as any,\n    right: -1,\n    backgroundColor: v.colors.primary,\n  },\n})\n\nexport const RnSwitch: FC<\n  ViewProps & {\n    enabled: boolean\n  }\n> = ({ enabled, style, ...p }) => (\n  <View {...p} style={[css.RnSwitch, enabled && css.RnSwitch__enabled, style]}>\n    <View style={[css.Circle, enabled && css.Circle__enabled]} />\n  </View>\n)\n","import { forwardRef } from 'react'\nimport { Platform, StyleSheet, TextInput, TextInputProps } from 'react-native'\n\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  RnTextInput: {\n    position: 'relative',\n    fontSize: v.fontSize,\n    fontWeight: v.fontWeight,\n    fontFamily: v.fontFamily,\n    color: v.color,\n  },\n})\n\nexport type RnTextInputProps = TextInputProps & {\n  disabled?: boolean\n}\n\nexport const RnTextInput = forwardRef(\n  ({ keyboardType, style, ...props }: RnTextInputProps, ref) => (\n    <TextInput\n      autoCapitalize='none'\n      ref={ref as (instance: unknown) => void}\n      {...props}\n      keyboardType={\n        (Platform.OS === 'web'\n          ? null\n          : keyboardType) as TextInputProps['keyboardType']\n      }\n      style={[css.RnTextInput, style]}\n    />\n  ),\n)\n","import { AccountCreateForm } from '../components/AccountCreateForm'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nexport const PageAccountCreate = () => (\n  <AccountCreateForm\n    onBack={Nav().backToPageAccountSignIn}\n    onSave={(p: Account) => {\n      accountStore.upsertAccount(p)\n      Nav().backToPageAccountSignIn()\n    }}\n    title={intl`New Account`}\n  />\n)\n","import { get, set } from 'lodash'\nimport { extendObservable } from 'mobx'\n\nexport const createStore = (mixin: Function, ...args: unknown[]) => {\n  const $ = {\n    set: (k: string, v: unknown) => {\n      set($, k, typeof v === 'function' ? v(get($, k)) : v)\n    },\n    upsert: (k: string, v: { [k: string]: unknown }, idKey = 'id') => {\n      $.set(k, (arr: { [k: string]: unknown }[]) => {\n        const updated = arr.reduce(\n          (u: boolean, v0: { [k: string]: unknown }) => {\n            if (!u && v0[idKey] === v[idKey]) {\n              Object.assign(v0, v)\n              return true\n            }\n            return u\n          },\n          false,\n        )\n        if (!updated) {\n          arr.push(v)\n        }\n        return arr\n      })\n    },\n    remove: (k: string, id: string, idKey = 'id') => {\n      $.set(k, (arr: { [k: string]: unknown }[]) =>\n        arr.filter(v => v[idKey] !== id),\n      )\n    },\n    extends: (\n      mx:\n        | Function\n        | {\n            observable?: object\n          },\n      ...a: unknown[]\n    ) => {\n      if (!mx) {\n        return\n      }\n      if (typeof mx === 'function') {\n        mx = mx($, ...a)\n      }\n      if (typeof mx === 'function') {\n        return\n      }\n      const ks = (mx.observable ? Object.keys(mx.observable) : []).concat(\n        Object.keys(mx),\n      )\n      ks.forEach(k => {\n        if (k in $) {\n          throw new Error(`createStore.extends: Duplicated key ${k}`)\n        }\n      })\n      if (mx.observable) {\n        extendObservable($, mx.observable)\n        delete mx.observable\n      }\n      Object.assign($, mx)\n    },\n  }\n  $.extends(mixin, ...args)\n  return $\n}\n\nexport type CreatedStore = ReturnType<typeof createStore>\n","import { FC, useEffect, useState } from 'react'\nimport {\n  Dimensions,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  Text,\n  TouchableOpacityProps,\n  View,\n} from 'react-native'\n\nimport { PbxBook } from '../api/brekekejs'\nimport { contactStore } from '../stores/contactStore'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  txtPb: {\n    width: '100%',\n    textAlign: 'left',\n    marginHorizontal: 10,\n  },\n  itemPb: {\n    width: '100%',\n    paddingVertical: 5,\n    borderBottomColor: 'grey',\n    borderBottomWidth: 0.5,\n  },\n  autocompleteContainer: {\n    // Hack required to make the autocomplete\n    // work on Andrdoid\n    flex: 1,\n    left: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    zIndex: 1,\n    padding: 5,\n    backgroundColor: 'blue',\n    ...Platform.select({\n      web: {\n        marginTop: 0,\n      },\n      default: {\n        marginTop: 25,\n      },\n    }),\n  },\n  viewFlatList: {\n    position: 'absolute',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    width: Dimensions.get('screen').width - 30,\n    maxHeight: 300,\n    top: 188,\n    zIndex: 100000,\n    marginHorizontal: 15,\n    ...Platform.select({\n      ios: {\n        shadowColor: v.borderBg,\n        shadowOpacity: 0.45,\n        shadowRadius: 5,\n        shadowOffset: {\n          width: 5,\n          height: 10,\n        },\n      },\n      android: {\n        elevation: 10,\n      },\n      web: {\n        boxShadow: `${0}px ${0}px ${10}px ${v.borderBg}`,\n      },\n    }),\n  },\n})\n\nexport const PhonebookAutoComplete: FC<\n  Partial<{\n    style?: TouchableOpacityProps['style']\n    // onCreateBtnPress(): void\n    // label: string\n    value: string\n    layout?: Object\n    // textInputStyle?: TextInputProps['style']\n    onPressItem(item: PbxBook): void\n  }>\n> = p0 => {\n  const { value, onPressItem } = p0\n  const [isChoose, setChoose] = useState(false)\n\n  useEffect(() => {\n    contactStore.loadPbxBoook()\n    setChoose(false)\n  }, [value])\n\n  const getData = () => {\n    if (!contactStore.pbxBooks.length) {\n      return []\n    }\n    if (!value) {\n      return [...contactStore.pbxBooks]\n    }\n    const result = contactStore.pbxBooks.filter(item => {\n      // make same web search\n      return item.phonebook.toLowerCase().startsWith(value.toLowerCase())\n    })\n    if (\n      !result.length ||\n      (result.length === 1 && value === result[0].phonebook)\n    ) {\n      return []\n    }\n    return result\n  }\n  const result = [...getData()]\n\n  if (!result.length || isChoose === true) {\n    return null\n  }\n  return (\n    <View style={[css.viewFlatList]}>\n      <ScrollView>\n        {result.map((item, index) => (\n          <RnTouchableOpacity\n            key={index}\n            style={css.itemPb}\n            onPress={() => {\n              setChoose(true)\n              onPressItem?.(item)\n            }}\n          >\n            <Text style={css.txtPb}>{item.phonebook}</Text>\n          </RnTouchableOpacity>\n        ))}\n      </ScrollView>\n    </View>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/ding.4bf3338b.mp3\";","import { lowerFirst } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\nimport { getBottomSpace } from 'react-native-iphone-x-helper'\n\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { arrToMap } from '../utils/toMap'\nimport { FooterActions } from './FooterActions'\nimport { Navigation } from './FooterNavigation'\nimport { ToggleKeyboard } from './FooterToggleKeyboard'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Footer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n  },\n  Footer__noKeyboard: {\n    left: 0,\n    paddingBottom: getBottomSpace(),\n    backgroundColor: v.bg,\n    ...v.boxShadow,\n  },\n  //\n  // Fix bug margin auto can not be used\n  ActionsOuter: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingHorizontal: 10,\n    marginVertical: 8,\n  },\n  ActionsSpacing: {\n    flex: 1,\n  },\n  //\n  ActionsInner: {\n    flexDirection: 'row',\n    width: '100%',\n    minWidth: 260,\n    maxWidth: v.maxModalWidth,\n  },\n})\n\nexport const Footer: FC<{\n  menu: string\n  isTab?: boolean\n}> = observer(props => {\n  const fabProps: {\n    onNext?(): void\n    render: Function\n    onShowKeyboard(): void\n  } = arrToMap(\n    Object.keys(props).filter(k => k.startsWith('fab')),\n    (k: string) => lowerFirst(k.replace('fab', '')),\n    (k: string) => props[k as keyof typeof props],\n  ) as any\n  const { menu, isTab } = props\n  const { onNext, render } = fabProps\n  if (\n    !render &&\n    ((!menu && !onNext && !RnKeyboard.isKeyboardShowing) ||\n      RnKeyboard.isKeyboardAnimating)\n  ) {\n    return null\n  }\n  return (\n    <View\n      style={[\n        css.Footer,\n        (render || !RnKeyboard.isKeyboardShowing) && css.Footer__noKeyboard,\n      ]}\n    >\n      {render ? (\n        render()\n      ) : RnKeyboard.isKeyboardShowing ? (\n        <ToggleKeyboard {...fabProps} />\n      ) : onNext ? (\n        <View style={css.ActionsOuter}>\n          <View style={css.ActionsSpacing} />\n          <View style={css.ActionsInner}>\n            <FooterActions {...fabProps} />\n          </View>\n          <View style={css.ActionsSpacing} />\n        </View>\n      ) : null}\n      {!RnKeyboard.isKeyboardShowing && menu && !isTab && (\n        <Navigation menu={menu} />\n      )}\n    </View>\n  )\n})\n","import { Vibration } from 'react-native'\n\nexport const rnVibrate = () => {\n  Vibration.vibrate(1000)\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Keyboard, Platform, StyleSheet } from 'react-native'\n\nimport { mdiKeyboardOffOutline, mdiKeyboardOutline } from '../assets/icons'\nimport { RnKeyboard } from '../stores/RnKeyboard'\nimport { AnimatedSize } from './AnimatedSize'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  ToggleKeyboard: {\n    flexDirection: 'row',\n    marginRight: 8,\n    marginBottom: 4,\n    borderRadius: v.borderRadius,\n    paddingVertical: 8,\n    width: v.iconSize + 24,\n    backgroundColor: v.hoverBg,\n    ...v.boxShadow,\n  },\n  Text: {\n    /* Fix button size does not equal with the Actions */\n    width: 0,\n    lineHeight: v.iconSize,\n    overflow: 'hidden',\n  },\n})\n\nexport const ToggleKeyboard: FC<{\n  onShowKeyboard(): void\n}> = observer(({ onShowKeyboard }) => {\n  if (\n    Platform.OS === 'web' ||\n    (!RnKeyboard.isKeyboardShowing && !onShowKeyboard)\n  ) {\n    return null\n  }\n  return (\n    <AnimatedSize animateWidth>\n      <RnTouchableOpacity\n        onPress={\n          RnKeyboard.isKeyboardShowing ? Keyboard.dismiss : onShowKeyboard\n        }\n        style={css.ToggleKeyboard}\n      >\n        {/* Fix button size does not equal with the Actions */}\n        <RnText style={css.Text}>{'\\u200a'}</RnText>\n        <RnIcon\n          path={\n            RnKeyboard.isKeyboardShowing\n              ? mdiKeyboardOffOutline\n              : mdiKeyboardOutline\n          }\n        />\n      </RnTouchableOpacity>\n    </AnimatedSize>\n  )\n})\n","import { FC, useState } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { BackBtn } from './HeaderBackBtn'\nimport { CreateBtn } from './HeaderCreateBtn'\nimport { Dropdown, DropdownBtn, HeaderDropdownItem } from './HeaderDropdown'\nimport { Navigation } from './HeaderNavigation'\nimport { Title } from './HeaderTitle'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Header: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n  },\n  Outer: {\n    backgroundColor: v.bg,\n  },\n  Outer__compact: {\n    ...v.boxShadow,\n  },\n  Outer__transparent: {\n    backgroundColor: 'transparent',\n  },\n  Inner__hasBackBtn: {\n    paddingLeft: 35,\n  },\n})\n\nexport const Header: FC<\n  Partial<{\n    compact: boolean\n    description: string\n    dropdown: HeaderDropdownItem[]\n    menu: string\n    onBack(): void\n    onCreate(): void\n    subMenu: string\n    title: string\n    transparent: boolean\n    isTab?: boolean\n  }>\n> = p => {\n  const {\n    compact,\n    description,\n    dropdown,\n    menu,\n    onBack,\n    onCreate,\n    subMenu,\n    title,\n    isTab,\n    transparent,\n  } = p\n  const [dropdownActive, setDropdownActive] = useState(false)\n  return (\n    <>\n      <View style={css.Header}>\n        <View\n          style={[\n            css.Outer,\n            compact && css.Outer__compact,\n            transparent && css.Outer__transparent,\n          ]}\n        >\n          <View style={onBack && css.Inner__hasBackBtn}>\n            <Title\n              compact={compact as boolean}\n              description={description}\n              title={title as string}\n            />\n            {onBack && (\n              <BackBtn compact={compact as boolean} onPress={onBack} />\n            )}\n            {dropdown && (\n              <DropdownBtn onPress={() => setDropdownActive(true)} />\n            )}\n          </View>\n          {menu && (\n            <Navigation isTab={isTab} menu={menu} subMenu={subMenu as string} />\n          )}\n        </View>\n      </View>\n      {dropdown && dropdownActive && (\n        <Dropdown\n          close={() => setDropdownActive(false)}\n          compact={compact as boolean}\n          dropdown={dropdown}\n        />\n      )}\n      {\n        /* No compact mode, should only use in the noScroll layout (such as the account list page)\n       Can not use together with dropdown */\n        !dropdown && onCreate && (\n          <CreateBtn onPress={onCreate} white={transparent as boolean} />\n        )\n      }\n    </>\n  )\n}\n","import { FC } from 'react'\nimport { Animated, StyleSheet } from 'react-native'\n\nimport { mdiKeyboardBackspace } from '../assets/icons'\nimport { useAnimation } from '../utils/animation'\nimport { RnIcon, RnTouchableOpacity } from './Rn'\n\nconst css = StyleSheet.create({\n  BackBtn: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n  },\n  Inner: {\n    width: 50,\n    height: 70,\n    paddingHorizontal: 0,\n    paddingVertical: 20,\n    borderRadius: 0,\n  },\n})\n\nexport const BackBtn: FC<{\n  compact: boolean\n  onPress(): void\n}> = p => {\n  const { compact, onPress } = p\n  const cssInnerA = useAnimation(compact, {\n    height: [70, 40],\n    paddingVertical: [20, 5],\n  })\n  return (\n    <RnTouchableOpacity onPress={onPress} style={css.BackBtn}>\n      <Animated.View style={[css.Inner, cssInnerA]}>\n        <RnIcon path={mdiKeyboardBackspace} />\n      </Animated.View>\n    </RnTouchableOpacity>\n  )\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { mdiPlus } from '../assets/icons'\nimport { RnIcon, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  CreateBtn: {\n    position: 'absolute',\n    top: 11,\n    right: 5,\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: v.colors.primary,\n  },\n  CreateBtn__white: {\n    backgroundColor: v.bg,\n  },\n})\n\nexport const CreateBtn: FC<{\n  white: boolean\n  onPress(): void\n}> = p => {\n  const { onPress, white } = p\n  return (\n    <RnTouchableOpacity\n      onPress={onPress}\n      style={[css.CreateBtn, white && css.CreateBtn__white]}\n    >\n      <RnIcon color={white ? 'black' : 'white'} path={mdiPlus} />\n    </RnTouchableOpacity>\n  )\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { mdiDotsVertical } from '../assets/icons'\nimport { AnimatedSize } from './AnimatedSize'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Backdrop: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: v.fn.transparentize(0.8, 'black'),\n    ...v.backdropZindex,\n  },\n  //\n  Dropdown: {\n    position: 'absolute',\n    top: 60,\n    right: 15,\n    width: 250,\n    ...v.boxShadow,\n    ...v.backdropZindex,\n  },\n  Dropdown__compact: {\n    top: 35,\n  },\n  Inner: {\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n  },\n  //\n  Item: {\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n  },\n  Item__last: {\n    borderBottomWidth: 0,\n  },\n  //\n  Btn: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    width: 50,\n  },\n})\n\nexport type HeaderDropdownItem = Partial<{\n  danger: boolean\n  label: string\n  onPress(): void\n  primary: boolean\n  warning: boolean\n}>\nexport const Dropdown: FC<{\n  close(): void\n  compact: boolean\n  dropdown: HeaderDropdownItem[]\n}> = p => {\n  const { close, compact, dropdown } = p\n  return (\n    <>\n      <RnTouchableOpacity\n        activeOpacity={1}\n        onPress={close}\n        style={css.Backdrop}\n      />\n      <AnimatedSize\n        innerStyle={css.Inner}\n        style={[css.Dropdown, compact && css.Dropdown__compact]}\n      >\n        {dropdown.map(({ danger, label, onPress, primary, warning }, i) => (\n          <RnTouchableOpacity\n            key={i}\n            onPress={() => {\n              close()\n              onPress?.()\n            }}\n            style={[css.Item, i === dropdown.length - 1 && css.Item__last]}\n          >\n            <RnText {...{ primary, warning, danger }}>{label}</RnText>\n          </RnTouchableOpacity>\n        ))}\n      </AnimatedSize>\n    </>\n  )\n}\n\nexport const DropdownBtn: FC<{ onPress(): void }> = ({ onPress }) => (\n  <RnTouchableOpacity onPress={onPress} style={css.Btn}>\n    <RnIcon path={mdiDotsVertical} />\n  </RnTouchableOpacity>\n)\n","import { observer } from 'mobx-react'\nimport { FC, useCallback } from 'react'\nimport { StyleSheet, View, ViewStyle } from 'react-native'\n\nimport { chatStore } from '../stores/chatStore'\nimport { css as fcss } from './FooterNavigation'\nimport { getSubMenus } from './navigationConfig'\nimport { getTabs } from './navigationConfig2'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Navigation: {\n    flexDirection: 'row',\n    alignSelf: 'stretch',\n\n    backgroundColor: v.bg,\n  },\n  Btn: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderBottomWidth: 3,\n    borderColor: v.borderBg,\n  },\n  Btn__active: {\n    borderColor: v.colors.primary,\n  },\n  Text__active: {\n    color: v.colors.primary,\n  },\n  Unread: {\n    top: -5,\n    left: 25,\n  },\n  ml: {\n    left: 35,\n    width: 20,\n  },\n})\n\nexport const Navigation: FC<{\n  menu: string\n  subMenu: string\n  isTab?: boolean\n}> = observer(p => {\n  const { menu, subMenu, isTab } = p\n  const tabs = isTab ? getTabs(menu) : getSubMenus(menu)\n\n  const renderIconNotices = useCallback(\n    (totalNotice: number, style?: ViewStyle) => {\n      return (\n        <View style={fcss.UnreadOuter}>\n          <View style={[fcss.Unread, css.Unread, style]}>\n            <RnText style={fcss.UnreadText} bold white center>\n              {totalNotice}\n            </RnText>\n          </View>\n        </View>\n      )\n    },\n    [],\n  )\n\n  return (\n    <View style={css.Navigation}>\n      {tabs.map(s => {\n        const active = s.key === subMenu\n        const totalUnreadChat = chatStore.unreadCount\n        const totalNoticesWebchat = chatStore.getNumberWebchatNoti()\n\n        return (\n          <RnTouchableOpacity\n            key={s.key}\n            onPress={active ? undefined : s.navFn}\n            style={[css.Btn, active && css.Btn__active]}\n          >\n            <RnText small style={active && css.Text__active}>\n              {s.label}\n            </RnText>\n            {s.key === 'chat' &&\n              !!totalUnreadChat &&\n              renderIconNotices(totalUnreadChat)}\n            {s.key === 'webchat' &&\n              !!totalNoticesWebchat &&\n              renderIconNotices(totalNoticesWebchat, css.ml)}\n          </RnTouchableOpacity>\n        )\n      })}\n    </View>\n  )\n})\n","import { FC } from 'react'\nimport { Animated, StyleSheet } from 'react-native'\n\nimport { useAnimation } from '../utils/animation'\nimport { RnText } from './Rn'\nimport { AnimatedText } from './RnText'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Container: {\n    padding: 15,\n  },\n  Title: {\n    fontSize: v.fontSizeTitle,\n    lineHeight: v.lineHeightTitle,\n    fontWeight: 'bold',\n    color: 'black',\n  },\n  Description: {\n    color: v.subColor,\n  },\n})\n\nexport const Title: FC<{\n  compact: boolean\n  description?: string\n  title: string\n}> = p => {\n  const { compact, description, title } = p\n  const cssContainerA = useAnimation(compact, {\n    paddingVertical: [15, 10],\n  })\n  const cssTitleA = useAnimation(compact, {\n    fontSize: [v.fontSizeTitle, v.fontSizeSubTitle],\n    lineHeight: [v.lineHeightTitle, 20],\n  })\n  return (\n    <Animated.View style={[css.Container, cssContainerA]}>\n      <AnimatedText style={[css.Title, cssTitleA]}>{title}</AnimatedText>\n      {!compact && (\n        <RnText style={css.Description}>{description || '\\u200a'}</RnText>\n      )}\n    </Animated.View>\n  )\n}\n","import { FC, useEffect, useState } from 'react'\nimport { Animated, StyleSheet, View } from 'react-native'\n\nimport { RnText } from './Rn'\n\nconst css = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    right: 0,\n    left: 0,\n    top: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  content: {\n    padding: 10,\n    backgroundColor: '#000',\n    maxWidth: '50%',\n    opacity: 0.8,\n    borderRadius: 5,\n  },\n  textStyle: {\n    fontSize: 16,\n    color: '#fff',\n    textAlign: 'center',\n  },\n})\n\ntype ToastProps = {\n  title: string\n  isVisible?: boolean\n  duration?: number\n  containerStyles?: {}\n}\n\nconst TOAST_ANIMATION_DURATION = 3000\nconst MAX_LENGTH_TEXT = 50\n\nexport const Toast: FC<ToastProps> = ({\n  title,\n  isVisible,\n  containerStyles,\n}: ToastProps) => {\n  const [fadeAnim] = useState(new Animated.Value(0))\n  const validTitle =\n    title.length > MAX_LENGTH_TEXT\n      ? `${title.substring(0, MAX_LENGTH_TEXT)}...`\n      : title\n\n  useEffect(() => {\n    if (isVisible) {\n      fadeAnim.setValue(1)\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: TOAST_ANIMATION_DURATION,\n        useNativeDriver: true,\n      }).start()\n    }\n  }, [fadeAnim, isVisible])\n\n  return (\n    <View style={[css.container, containerStyles]}>\n      <Animated.View style={[css.content, { opacity: fadeAnim }]}>\n        <RnText style={css.textStyle}>{validTitle}</RnText>\n      </Animated.View>\n    </View>\n  )\n}\n","import { observer } from 'mobx-react'\nimport { FlatList, Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiDotsHorizontal,\n  mdiLadybug,\n  mdiUnfoldMoreHorizontal,\n} from '../assets/icons'\nimport { AccountSignInItem } from '../components/AccountSignInItem'\nimport { BrekekeGradient } from '../components/BrekekeGradient'\nimport { Layout } from '../components/Layout'\nimport { RnIcon, RnText, RnTouchableOpacity } from '../components/Rn'\nimport { currentVersion, v } from '../components/variables'\nimport { accountStore } from '../stores/accountStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { Nav } from '../stores/Nav'\n\nconst css = StyleSheet.create({\n  PageAccountSignIn_ListServers: {\n    height: '70%',\n    minHeight: 320,\n  },\n  PageAccountSignIn_Spacing: {\n    flex: 1,\n    maxHeight: '20%',\n  },\n  Space: {\n    height: 15,\n  },\n  CornerButton: {\n    position: 'absolute',\n    bottom: 0,\n    paddingTop: 25,\n    paddingBottom: 10,\n    paddingHorizontal: 15,\n    ...v.backdropZindex,\n  },\n  CornerButton__info: {\n    left: 0,\n  },\n  CornerButton__language: {\n    right: 0,\n  },\n  CornerButton_Inner: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n  },\n  CornerButton_Inner__info: {\n    paddingLeft: 19,\n  },\n  CornerButton_Inner__language: {\n    paddingRight: 18,\n  },\n  CornerButton_Icon: {\n    position: 'absolute',\n    ...Platform.select({\n      android: {\n        top: 4,\n      },\n      default: {\n        top: 2,\n      },\n    }),\n  },\n  CornerButton_Icon__info: {\n    left: 0,\n  },\n  CornerButton_Icon__language: {\n    right: 0,\n  },\n})\n\nexport const PageAccountSignIn = observer(() => {\n  const ids = accountStore.accounts.map(a => a.id).filter(id => id)\n  const l = ids.length\n  return (\n    <BrekekeGradient>\n      <Layout\n        description={intl`${l} accounts in total`}\n        noScroll\n        onCreate={!!l ? Nav().goToPageAccountCreate : undefined}\n        title={intl`Accounts`}\n        transparent\n      >\n        <View\n          style={{\n            flexDirection: 'column',\n            width: '100%',\n            justifyContent: 'space-around',\n          }}\n        ></View>\n        <View style={css.PageAccountSignIn_Spacing} />\n        {!l ? (\n          <AccountSignInItem empty />\n        ) : (\n          <FlatList\n            data={ids}\n            horizontal\n            keyExtractor={(id: string) => id}\n            renderItem={({ index, item }) => (\n              <AccountSignInItem id={item} last={index === l - 1} />\n            )}\n            showsHorizontalScrollIndicator={false}\n            style={css.PageAccountSignIn_ListServers}\n          />\n        )}\n      </Layout>\n      <RnTouchableOpacity\n        onPress={Nav().goToPageSettingsDebug}\n        style={css.CornerButton}\n      >\n        <View style={[css.CornerButton_Inner, css.CornerButton_Inner__info]}>\n          <RnIcon\n            color='white'\n            path={mdiLadybug}\n            size={16}\n            style={[css.CornerButton_Icon, css.CornerButton_Icon__info]}\n          />\n          <RnText bold white>\n            {currentVersion}\n          </RnText>\n        </View>\n      </RnTouchableOpacity>\n      <RnTouchableOpacity\n        onPress={intlStore.localeLoading ? undefined : intlStore.selectLocale}\n        style={[css.CornerButton, css.CornerButton__language]}\n      >\n        <View\n          style={[css.CornerButton_Inner, css.CornerButton_Inner__language]}\n        >\n          <RnText bold white>\n            {intlStore.localeLoading ? '\\u200a' : intlStore.getLocaleName()}\n          </RnText>\n          <RnIcon\n            color='white'\n            path={\n              intlStore.localeLoading\n                ? mdiDotsHorizontal\n                : mdiUnfoldMoreHorizontal\n            }\n            size={16}\n            style={[css.CornerButton_Icon, css.CornerButton_Icon__language]}\n          />\n        </View>\n      </RnTouchableOpacity>\n      <View style={css.Space} />\n    </BrekekeGradient>\n  )\n})\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiAccountCircleOutline,\n  mdiApplicationOutline,\n  mdiClose,\n  mdiDotsHorizontal,\n  mdiServerNetwork,\n  mdiWeb,\n} from '../assets/icons'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { Field } from './Field'\nimport { FooterActions } from './FooterActions'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  AccountSignInItem: {\n    backgroundColor: v.bg,\n    marginBottom: 15,\n    marginLeft: 15,\n    borderRadius: v.borderRadius,\n    width: 280,\n  },\n  AccountSignInItem__last: {\n    marginRight: 15,\n  },\n  AccountSignInItem__empty: {\n    height: '70%',\n    minHeight: 320,\n    marginVertical: 45,\n    marginLeft: 15,\n    padding: 15,\n  },\n  AccountSignInItem_Btns: {\n    position: 'absolute',\n    bottom: 15,\n    left: 15,\n    right: 15,\n  },\n})\n\nexport const AccountSignInItem: FC<{\n  empty?: boolean\n  id?: string\n  last?: boolean\n}> = observer(props => {\n  if (props.empty) {\n    return (\n      <View style={[css.AccountSignInItem, css.AccountSignInItem__empty]}>\n        <RnText subTitle>{intl`No account`}</RnText>\n        <RnText>{intl`There is no account created`}</RnText>\n        <RnText>{intl`Tap the below button to create one`}</RnText>\n        <View style={css.AccountSignInItem_Btns}>\n          <FooterActions\n            onNext={Nav().goToPageAccountCreate}\n            onNextText={intl`CREATE NEW ACCOUNT`}\n          />\n        </View>\n      </View>\n    )\n  }\n  if (!props.id) {\n    return null\n  }\n  const a = accountStore.accountsMap[props.id]\n  if (!a) {\n    return null\n  }\n  const isLoading = accountStore.pnSyncLoadingMap[props.id]\n\n  return (\n    <View\n      style={[css.AccountSignInItem, props.last && css.AccountSignInItem__last]}\n    >\n      <RnTouchableOpacity\n        onPress={() => Nav().goToPageAccountUpdate({ id: a.id })}\n      >\n        <Field\n          icon={mdiAccountCircleOutline}\n          label={intl`USERNAME`}\n          value={a.pbxUsername}\n        />\n        <Field\n          icon={mdiApplicationOutline}\n          label={intl`TENANT`}\n          value={a.pbxTenant}\n        />\n        <Field icon={mdiWeb} label={intl`HOSTNAME`} value={a.pbxHostname} />\n        <Field icon={mdiServerNetwork} label={intl`PORT`} value={a.pbxPort} />\n      </RnTouchableOpacity>\n      <Field\n        label={intl`PUSH NOTIFICATION`}\n        onValueChange={(e: boolean) =>\n          accountStore.upsertAccount({\n            id: a.id,\n            pushNotificationEnabled: e,\n          })\n        }\n        type='Switch'\n        value={a.pushNotificationEnabled}\n        loading={isLoading}\n      />\n      <Field\n        label={intl`UC`}\n        onValueChange={(e: boolean) =>\n          accountStore.upsertAccount({ id: a.id, ucEnabled: e })\n        }\n        type='Switch'\n        value={a.ucEnabled}\n      />\n      <View style={css.AccountSignInItem_Btns}>\n        <FooterActions\n          onBack={() => {\n            RnAlert.prompt({\n              title: intl`Remove Account`,\n              message: (\n                <>\n                  <View>\n                    <RnText small>\n                      {a.pbxUsername} - {a.pbxHostname}\n                    </RnText>\n                  </View>\n                  <RnText>{intl`Do you want to remove this account?`}</RnText>\n                </>\n              ),\n              onConfirm: () => {\n                accountStore.removeAccount(a.id)\n              },\n            })\n          }}\n          onBackIcon={mdiClose}\n          onMore={() => Nav().goToPageAccountUpdate({ id: a.id })}\n          onMoreIcon={mdiDotsHorizontal}\n          onNext={() => {\n            getAuthStore().signIn(a)\n            // Try to end callkeep if it's stuck\n            if (Platform.OS !== 'web') {\n              getCallStore().endCallKeepAllCalls()\n            }\n          }}\n          onNextText={intl`SIGN IN`}\n        />\n      </View>\n    </View>\n  )\n})\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\n\nimport { AccountCreateForm } from '../components/AccountCreateForm'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nexport const PageAccountUpdate: FC<{\n  id: string\n}> = observer(props => {\n  return (\n    <AccountCreateForm\n      onBack={Nav().backToPageAccountSignIn}\n      onSave={(p: Account) => {\n        accountStore.upsertAccount(p)\n        Nav().backToPageAccountSignIn()\n      }}\n      title={intl`Update Account`}\n      updating={accountStore.accountsMap[props.id]}\n    />\n  )\n})\n","import { observer } from 'mobx-react'\n\nimport { mdiPhone, mdiPhoneHangup } from '../assets/icons'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { Call } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\n\nexport const PageCallBackgrounds = observer(() => {\n  const bg = getCallStore().calls.filter(\n    c => c.id !== getCallStore().currentCallId,\n  )\n  const currentCall = getCallStore().getCurrentCall()\n  const renderItemCall = (c: Immutable<Call>, isCurrentCall?: boolean) => {\n    const icons = [\n      mdiPhoneHangup,\n      ...(!c.answered && c.incoming ? [mdiPhone] : []),\n    ]\n    const iconColors = [\n      v.colors.danger,\n      ...(!c.answered && c.incoming ? [v.colors.primary] : []),\n    ]\n    const iconFuncs = [\n      c.hangupWithUnhold,\n      ...(!c.answered && c.incoming\n        ? [\n            () => {\n              c.answer()\n              getCallStore().onSelectBackgroundCall(c)\n            },\n          ]\n        : []),\n    ]\n    return (\n      <UserItem\n        icons={icons}\n        iconColors={iconColors}\n        iconFuncs={iconFuncs}\n        key={c.id}\n        lastMessage={\n          !c.answered ? (\n            c.incoming ? (\n              intl`Incoming Call`\n            ) : (\n              intl`Dialing...`\n            )\n          ) : c.transferring ? (\n            intl`Transferring`\n          ) : c.holding ? (\n            intl`On hold`\n          ) : (\n            <Duration>{c.answeredAt}</Duration>\n          )\n        }\n        selected={isCurrentCall}\n        {...c}\n      />\n    )\n  }\n  return (\n    <Layout\n      compact\n      onBack={Nav().backToPageCallManage}\n      title={intl`Background calls`}\n    >\n      <Field isGroup label={intl`CURRENT CALL`} />\n      {(currentCall ? [currentCall] : []).map(c => (\n        <RnTouchableOpacity\n          key={c.id}\n          onPress={() => Nav().backToPageCallManage()}\n        >\n          {renderItemCall(c, true)}\n        </RnTouchableOpacity>\n      ))}\n      {!!bg.length && (\n        <Field hasMargin isGroup label={intl`BACKGROUND CALLS`} />\n      )}\n      {bg.map(c => (\n        <RnTouchableOpacity\n          key={c.id}\n          onPress={\n            !c.answered && c.incoming\n              ? undefined\n              : () => getCallStore().onSelectBackgroundCall(c)\n          }\n        >\n          {renderItemCall(c)}\n        </RnTouchableOpacity>\n      ))}\n    </Layout>\n  )\n})\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABU1BMVEUAAAD////////j4+Pm5ubm5ubg4Ovf3+fi4unj4+q+vsTe4+Pf4+Pg5OTe4uLf4uLf4uLe4eHg4OC9wMC5vLzg4uTh4ePh4+Pg4OHf3+Hf4OLg4OHf3+C1tbXf4eHg4OHf4OHg4OHg4OHg4OPf3+Hg4eHg4OHg4OHf4OHg4OLh4eLf4OGxsbGxsbHg4OHf3+Df4eLf4OHg4OHg4OHg4eHg4OHf3+Cqq6uqqqqoqKjf3+Df4ODf39+lpaWmpqbf3+ClpaXg4OHf4ODg4ODf3+Df4ODg4OCenp6fn5+goKChoaGjo6OlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+ysrKzs7O3t7e4uLi5ubm7u7u+vr6/v7/AwMDCwsLDw8PFxcXGxsbIyMjJycnMzMzNzc3W1tbX19fY2NjZ2dna2trc3Nzf39/f3+Dg4OCTBZWQAAAAR3RSTlMABAUJChQZICMkKzY3OT5HV15kbW6EkJGSmK+8wMHJy87Oz9DS1NXX2Nvb3N3f4OHi5Obt7e7v8fX29vb4+vr6+/v9/f7+/kiNpIAAAAGUSURBVBgZdcFpQ1JRFAXQLY6oZTk0UFraZHOaUWaGpHkohkgKyqwstIEE9v//FOK75953eW8thE2kHmXYkXmYmkCs0wsZOjJXTyHK0HX2uDaEHjObjLA5g7DBu4xxexCOZJqx0kmo/hVazV/1+u8mrccJGA+oDorSVTykuonARaqyqB2qC+ga2aaxI46PNLaSOLZI40BCDmksomOMKi8hBapxAPM0/orniMYVoO8Vje/i+Ukjm8Ak1Qfx1KjO4jLVe/FUqFJYpiqI5x3VEl5Q5cWTp3qONlVJPGWqNlpUFfFUqFpoUVXFU6VqoU31VTz7VG2sUf0TzxHVGpZpvZGQt7SWcInWroR8oZXCJK2muHJ0nEEiS+ubOOq0sn3AHB1VUTU65gCM01WUQJmuMXTcoksCdM3jWPI1rc8S2KW1NYKu8zQaJVGlBo1zCNzhiT0J2eOJGzD6V0j+qYkv96lB8kkCaji9X5BIhR/pYTgG1iXG+gDCZiXSLHqMPpMeT0cRZXo1J47c6jRiTd3fkK6X96YQ8h9ti83kCEQM1AAAAABJRU5ErkJggg==\"","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, createRef } from 'react'\nimport {\n  NativeSyntheticEvent,\n  TextInput,\n  TextInputSelectionChangeEventData,\n} from 'react-native'\n\nimport { sip } from '../api/sip'\nimport { KeyPad } from '../components/CallKeyPad'\nimport { ShowNumber } from '../components/CallShowNumbers'\nimport { Layout } from '../components/Layout'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnKeyboard } from '../stores/RnKeyboard'\n\n@observer\nexport class PageCallDtmfKeypad extends Component {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const c = getCallStore().getCurrentCall()\n    if (this.prevId && this.prevId !== c?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = c?.id\n  }\n\n  @observable txt = ''\n  txtRef = createRef<TextInput>()\n  txtSelection = { start: 0, end: 0 }\n\n  showKeyboard = () => {\n    this.txtRef.current?.focus()\n  }\n\n  sendKey = (key: string) => {\n    const c = getCallStore().getCurrentCall()\n    const cp = getAuthStore().getCurrentAccount()\n    if (!c || !cp) {\n      return\n    }\n    sip.sendDTMF({\n      signal: key,\n      sessionId: c.id,\n      tenant: c.pbxTenant || cp.pbxTenant,\n      talkerId: c.pbxTalkerId || c.partyNumber,\n    })\n  }\n\n  render() {\n    const c = getCallStore().getCurrentCall()\n    return (\n      <Layout\n        title={c?.getDisplayName()}\n        description={intl`Keypad dial manually`}\n        onBack={Nav().backToPageCallManage}\n      >\n        <ShowNumber\n          refInput={this.txtRef}\n          selectionChange={\n            RnKeyboard.isKeyboardShowing\n              ? undefined\n              : (\n                  e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n                ) => {\n                  Object.assign(this.txtSelection, {\n                    start: e.nativeEvent.selection.start,\n                    end: e.nativeEvent.selection.end,\n                  })\n                }\n          }\n          setTarget={(v: string) => {\n            this.txt = v\n          }}\n          value={this.txt}\n        />\n        {!RnKeyboard.isKeyboardShowing && (\n          <KeyPad\n            onPressNumber={v => {\n              this.sendKey(v)\n              const { end, start } = this.txtSelection\n              let min = Math.min(start, end)\n              const max = Math.max(start, end)\n              const isDelete = v === ''\n              if (isDelete) {\n                if (start === end && start) {\n                  min = min - 1\n                }\n              }\n              const t = this.txt\n              this.txt = t.substring(0, min) + v + t.substring(max)\n              const position = min + (isDelete ? 0 : 1)\n              this.txtSelection.start = position\n              this.txtSelection.end = position\n            }}\n            showKeyboard={this.showKeyboard}\n          />\n        )}\n      </Layout>\n    )\n  }\n}\n","import { getCallStore } from './callStore'\n\nexport const cancelRecentPn = (n?: CancelRecentPn) =>\n  getCallStore().onSipUaCancel(n)\n\nexport type CancelRecentPn = {\n  pnId?: string\n  completedElseWhere?: boolean\n}\n","import { Platform } from 'react-native'\n\nimport { intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\n\ndeclare global {\n  interface MediaDeviceInfo {\n    id: string\n    facing: string\n  }\n}\nexport const getCameraSourceId = async (isFront: boolean) => {\n  const mediaDevices = window.navigator.mediaDevices\n  if (!mediaDevices) {\n    RnAlert.error({\n      unexpectedErr: new Error(\n        'Can not access mediaDevices, check if your connection is https secured',\n      ),\n    })\n    return undefined\n  }\n  return mediaDevices\n    .enumerateDevices()\n    .then(a => {\n      const value = a.find(i =>\n        /videoinput/i.test(i.kind) && isFront\n          ? /front/i.test(i.facing)\n          : /environment/i.test(i.facing),\n      )\n      return value\n    })\n    .then(i => {\n      return i?.deviceId || undefined\n    })\n    .catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to get front camera information`,\n        err,\n      })\n      return undefined\n    })\n}\nexport const getCameraSourceIds = async () => {\n  const mediaDevices = window.navigator.mediaDevices\n  if (!mediaDevices) {\n    RnAlert.error({\n      unexpectedErr: new Error(\n        'Can not access mediaDevices, check if your connection is https secured',\n      ),\n    })\n    return []\n  }\n\n  return mediaDevices\n    .enumerateDevices()\n    .then(a => {\n      const videoInputs = a.filter(i => /videoinput/i.test(i.kind))\n      if (videoInputs.length === 1) {\n        return [...videoInputs, ...videoInputs]\n      }\n      const frontCamera = videoInputs.find(i =>\n        Platform.OS === 'web'\n          ? i.label.includes('Front')\n          : i.facing.includes('front'),\n      )\n      const backCamera = videoInputs.find(i =>\n        Platform.OS === 'web'\n          ? i.label.includes('Back')\n          : i.facing.includes('environment'),\n      )\n      const result: MediaDeviceInfo[] = []\n      if (frontCamera) {\n        result.push(frontCamera)\n      }\n      if (backCamera) {\n        result.push(backCamera)\n      }\n      return result\n    })\n    .catch((err: Error) => {\n      RnAlert.error({\n        message: intlDebug`Failed to get front camera information`,\n        err,\n      })\n      return []\n    })\n}\n","export default {\n  pcConfig: {\n    iceServers: [\n      {\n        urls: 'turn:coolturn.sip-proxy-server.com:3478?transport=tcp',\n        username: 'turnuser',\n        credential: 'Happy1131turn',\n      },\n    ],\n  },\n};\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, createRef } from 'react'\nimport {\n  NativeSyntheticEvent,\n  TextInput,\n  TextInputSelectionChangeEventData,\n} from 'react-native'\n\nimport { KeyPad } from '../components/CallKeyPad'\nimport { ShowNumber } from '../components/CallShowNumbers'\nimport { Layout } from '../components/Layout'\nimport { getCallStore } from '../stores/callStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnKeyboard } from '../stores/RnKeyboard'\n\n@observer\nexport class PageCallKeypad extends Component {\n  @observable txt = ''\n  txtRef = createRef<TextInput>()\n  txtSelection = { start: 0, end: 0 }\n\n  showKeyboard = () => {\n    this.txtRef.current?.focus()\n  }\n  callVoice = () => {\n    this.txt = this.txt.trim()\n    if (!this.txt) {\n      RnAlert.error({\n        message: intlDebug`No target to call`,\n      })\n      return\n    }\n    getCallStore().startCall(this.txt)\n  }\n\n  render() {\n    return (\n      <Layout\n        description={intl`Keypad dial manually`}\n        fabOnNext={RnKeyboard.isKeyboardShowing ? this.callVoice : undefined}\n        fabOnNextText={intl`DIAL`}\n        menu='call'\n        subMenu='keypad'\n        title={intl`Keypad`}\n      >\n        <ShowNumber\n          refInput={this.txtRef}\n          selectionChange={(\n            e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n          ) => {\n            Object.assign(this.txtSelection, {\n              start: e.nativeEvent.selection.end,\n              end: e.nativeEvent.selection.end,\n            })\n          }}\n          setTarget={(v: string) => {\n            this.txt = v\n          }}\n          value={this.txt}\n        />\n        {!RnKeyboard.isKeyboardShowing && (\n          <KeyPad\n            callVoice={this.callVoice}\n            onPressNumber={v => {\n              const { end, start } = this.txtSelection\n              let min = Math.min(start, end)\n              const max = Math.max(start, end)\n              const isDelete = v === ''\n              if (isDelete) {\n                if (start === end && start) {\n                  min = min - 1\n                }\n              }\n              // Update text to trigger render\n              const t = this.txt\n              this.txt = t.substring(0, min) + v + t.substring(max)\n              //\n              const p = min + (isDelete ? 0 : 1)\n              this.txtSelection.start = p\n              this.txtSelection.end = p\n            }}\n            showKeyboard={this.showKeyboard}\n          />\n        )}\n      </Layout>\n    )\n  }\n}\n","import { PageCallParks } from './PageCallParks'\n\nexport const PageCallParks2 = (p?: object) => (\n  <PageCallParks {...p} callParks2 />\n)\n","import { observer } from 'mobx-react'\nimport moment from 'moment'\nimport { Component } from 'react'\nimport { AppState, NativeEventSubscription, Platform } from 'react-native'\n\nimport { mdiMagnify, mdiPhone, mdiVideo } from '../assets/icons'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { accountStore, RecentCall } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { PushNotification } from '../utils/PushNotification.ios'\n\n@observer\nexport class PageCallRecents extends Component {\n  appStateSubscription?: NativeEventSubscription\n  componentDidMount = () => {\n    if (Platform.OS === 'ios') {\n      const h = () => {\n        if (AppState.currentState === 'active') {\n          PushNotification.resetBadgeNumber()\n        }\n      }\n      // Reset notification badge whenever go to this page\n      h()\n      this.appStateSubscription = AppState.addEventListener('change', h)\n    }\n  }\n  componentWillUnmount = () => {\n    this.appStateSubscription?.remove()\n  }\n\n  isMatchUser = (call: RecentCall) => {\n    if (call.partyNumber.includes(contactStore.callSearchRecents)) {\n      return call.id\n    }\n    return ''\n  }\n  getAvatar = (id: string) => {\n    const ucUser = contactStore.getUcUserById(id) || {}\n    return {\n      id,\n      avatar: ucUser.avatar,\n    }\n  }\n  getMatchedCalls = () => {\n    const as = getAuthStore()\n    const d = as.getCurrentData()\n    if (!d) {\n      accountStore.findDataAsync(as.getCurrentAccount())\n    }\n    const calls = d?.recentCalls.filter(this.isMatchUser) || []\n    // Backward compatibility to remove invalid items from the previous versions\n    const filteredCalls = calls.filter(\n      c =>\n        typeof c.created === 'string' &&\n        // HH:mm - MMM D\n        ((c.created + '').length === 13 || (c.created + '').length === 14),\n    )\n    const today = moment().format('MMM D')\n    return filteredCalls.map(c => ({\n      ...c,\n      created: (c.created + '').replace(` - ${today}`, ''),\n    }))\n  }\n\n  render() {\n    const calls = this.getMatchedCalls()\n    return (\n      <Layout\n        description={intl`Voicemail and recent calls`}\n        menu='call'\n        subMenu='recents'\n        title={intl`Recents`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH NAME, PHONE NUMBER ...`}\n          onValueChange={(v: string) => {\n            // TODO use debounced value to perform data filter\n            contactStore.callSearchRecents = v\n          }}\n          value={contactStore.callSearchRecents}\n        />\n        <Field\n          isGroup\n          label={intl`VOICEMAIL (${getCallStore().newVoicemailCount})`}\n        />\n        <UserItem\n          iconFuncs={[() => getCallStore().startCall('8')]}\n          icons={[mdiPhone]}\n          name={intl`Voicemail`}\n          isVoicemail\n        />\n        <Field isGroup label={intl`RECENT CALLS (${calls.length})`} />\n        {calls.map((c, i) => (\n          <UserItem\n            iconFuncs={[\n              () => getCallStore().startVideoCall(c.partyNumber),\n              () => getCallStore().startCall(c.partyNumber),\n            ]}\n            {...contactStore.getUcUserById(c.partyNumber)}\n            icons={[mdiVideo, mdiPhone]}\n            isRecentCall\n            canChat={getAuthStore().getCurrentAccount()?.ucEnabled}\n            key={i}\n            {...this.getAvatar(c.partyNumber)}\n            {...c}\n          />\n        ))}\n      </Layout>\n    )\n  }\n}\n","import './callkeep'\n\nimport PushNotificationIOS, {\n  PushNotification as PN,\n} from '@react-native-community/push-notification-ios'\nimport Voip from 'react-native-voip-push-notification'\n\nimport { parse } from './PushNotification-parse'\n\nlet voipApnsToken = ''\nconst onVoipToken = (t: string) => {\n  if (t) {\n    voipApnsToken = t\n  }\n}\n\nlet apnsToken = ''\nconst onToken = (t: string) => {\n  if (t) {\n    apnsToken = t\n  }\n}\n\nconst onNotification = async (\n  n0: PN | null,\n  initApp: Function,\n  isLocal = false,\n) => {\n  const withGetData: unknown = n0?.getData ? n0.getData() : n0\n  // Custom fork of react-native-voip-push-notification to get callkeepUuid\n  const withDictionaryPayload = withGetData as {\n    dictionaryPayload: {\n      [k: string]: unknown\n    }\n    callkeepUuid: string\n  }\n  let withCallKeepUuid = withGetData as {\n    [k: string]: unknown\n  }\n  if (withDictionaryPayload && withDictionaryPayload.dictionaryPayload) {\n    withCallKeepUuid = withDictionaryPayload.dictionaryPayload\n    withCallKeepUuid.callkeepUuid = withDictionaryPayload.callkeepUuid\n  }\n  await initApp()\n  const n = await parse(withCallKeepUuid, isLocal)\n  if (!n) {\n    return\n  }\n  // TODO ios present local PN?\n  // Modify server to set background mode \"content only\"?\n  // toXPN\n}\n\nexport const PushNotification = {\n  register: async (initApp: Function) => {\n    initApp()\n    //\n    Voip.addEventListener('register', onVoipToken)\n    Voip.addEventListener('notification', (n: PN) => onNotification(n, initApp))\n    Voip.addEventListener(\n      'didLoadWithEvents',\n      (e: { name: string; data: PN }[]) => {\n        if (!e?.length) {\n          return\n        }\n        e.forEach(({ name, data }) => {\n          if (name === Voip.RNVoipPushRemoteNotificationsRegisteredEvent) {\n            if (typeof data === 'string') {\n              onVoipToken(data)\n            }\n          } else if (name === Voip.RNVoipPushRemoteNotificationReceivedEvent) {\n            onNotification(data, initApp)\n          }\n        })\n      },\n    )\n    Voip.registerVoipToken()\n    //\n    PushNotificationIOS.addEventListener('register', onToken)\n    PushNotificationIOS.addEventListener('notification', (n: PN) =>\n      onNotification(n, initApp),\n    )\n    PushNotificationIOS.addEventListener('localNotification', (n: PN) =>\n      onNotification(n, initApp, true),\n    )\n    //\n    PushNotificationIOS.requestPermissions()\n    //\n    const n0 = await PushNotificationIOS.getInitialNotification()\n    onNotification(n0, initApp, true)\n  },\n  getVoipToken: () => {\n    return Promise.resolve(voipApnsToken)\n  },\n  getToken: () => {\n    return Promise.resolve(apnsToken)\n  },\n  resetBadgeNumber: () => {\n    PushNotificationIOS.setApplicationIconBadgeNumber(0)\n  },\n}\n","import { orderBy } from 'lodash'\nimport { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { SectionList } from 'react-native'\n\nimport { mdiMagnify, mdiPhone, mdiPhoneForward } from '../assets/icons'\nimport { ContactSectionList } from '../components/ContactSectionList'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { setPageCallTransferChooseUser } from '../components/navigationConfig2'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { userStore } from '../stores/userStore'\n\n@observer\nexport class PageCallTransferChooseUser extends Component {\n  prevId?: string\n  @observable txtSearch: string = ''\n  componentDidMount() {\n    if (!contactStore.pbxUsers.length) {\n      contactStore.getPbxUsers()\n    }\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const c = getCallStore().getCurrentCall()\n    if (this.prevId && this.prevId !== c?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = c?.id\n  }\n\n  resolveMatch = (id: string) => {\n    const match = contactStore.getPbxUserById(id)\n    const ucUser = contactStore.getUcUserById(id) || {}\n    return {\n      name: match.name,\n      avatar: ucUser.avatar,\n      number: id,\n      status: ucUser.status,\n      calling: !!match.talkers?.filter(t => t.status === 'calling').length,\n      ringing: !!match.talkers?.filter(t => t.status === 'ringing').length,\n      talking: !!match.talkers?.filter(t => t.status === 'talking').length,\n      holding: !!match.talkers?.filter(t => t.status === 'holding').length,\n    }\n  }\n  renderUserSelectionMode = () => {\n    const { displayUsers } = userStore.filterUser(this.txtSearch, true)\n    return <ContactSectionList sectionListData={displayUsers} isTransferCall />\n  }\n  renderAllUserMode = () => {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const datas = contactStore.pbxUsers.map(u => u.id).map(this.resolveMatch)\n    const users = datas.filter(i => {\n      const name = i.name.toLowerCase()\n      const txtSearch = this.txtSearch.toLowerCase()\n      const number = i.number.toLowerCase()\n      return name.includes(txtSearch) || number.includes(txtSearch)\n    })\n    type User = typeof users[0]\n\n    const map = {} as { [k: string]: User[] }\n    users.forEach(u => {\n      u.name = u.name || u.number || ''\n      let c0 = u.name.charAt(0).toUpperCase()\n      if (!/[A-Z]/.test(c0)) {\n        c0 = '#'\n      }\n      if (!map[c0]) {\n        map[c0] = []\n      }\n      map[c0].push(u)\n    })\n\n    let groups = Object.keys(map).map(k => ({\n      title: k,\n      data: map[k],\n    }))\n    groups = orderBy(groups, 'title')\n    groups.forEach(gr => {\n      gr.data = orderBy(gr.data, 'name')\n    })\n    return (\n      <SectionList\n        sections={groups}\n        keyExtractor={(item, index) => item.number}\n        renderItem={({\n          item,\n          index,\n        }: {\n          item: ItemUser['item']\n          index: number\n        }) => <RenderItemUser item={item} index={index} />}\n        renderSectionHeader={({ section: { title } }) => (\n          <Field isGroup label={title} />\n        )}\n      />\n    )\n  }\n  render() {\n    const s = getAuthStore()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const isUserSelectionMode = s.isBigMode() || !cp.pbxLocalAllUsers\n\n    return (\n      <Layout\n        description={intl`Select target to start transfer`}\n        onBack={Nav().backToPageCallManage}\n        menu={'call_transfer'}\n        subMenu={'list_user'}\n        isTab\n        title={intl`Transfer`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH FOR USERS`}\n          onValueChange={(v: string) => {\n            // TODO use debounced value to perform data filter\n            this.txtSearch = v\n          }}\n          value={this.txtSearch}\n        />\n        {isUserSelectionMode\n          ? this.renderUserSelectionMode()\n          : this.renderAllUserMode()}\n      </Layout>\n    )\n  }\n}\n\nsetPageCallTransferChooseUser(PageCallTransferChooseUser)\ntype ItemUser = {\n  item: {\n    number: string\n  }\n  index: number\n}\nconst RenderItemUser = observer(({ item, index }: ItemUser) => {\n  const c = getCallStore().getCurrentCall()\n  return (\n    <UserItem\n      iconFuncs={[\n        () => c?.transferAttended(item.number),\n        () => c?.transferBlind(item.number),\n      ]}\n      icons={[mdiPhoneForward, mdiPhone]}\n      key={index}\n      {...item}\n    />\n  )\n})\n","import { FC } from 'react'\nimport { Platform, StyleSheet, View, ViewProps } from 'react-native'\n\nimport { DropdownPosition } from '../stores/RnDropdown'\nimport { DropdownItem, DropdownItemProps } from './DropdownItem'\nimport { v } from './variables'\n\ntype DropdownProps = {\n  items?: DropdownItemProps[]\n  position: DropdownPosition\n}\n\nconst css = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    ...Platform.select({\n      ios: {\n        shadowColor: v.borderBg,\n        shadowOpacity: 0.45,\n        shadowRadius: 5,\n        shadowOffset: {\n          width: 5,\n          height: 10,\n        },\n      },\n      android: {\n        elevation: 10,\n      },\n      web: {\n        boxShadow: `${0}px ${0}px ${10}px ${v.borderBg}`,\n      },\n    }),\n  },\n})\n\nexport const Dropdown: FC<ViewProps & DropdownProps> = ({\n  items = [],\n  position = {},\n}: DropdownProps) => {\n  return (\n    <View style={[css.container, { ...position }]}>\n      {items.map((item, index) => (\n        <DropdownItem\n          key={`DropdownItem - ${index}`}\n          title={item.title}\n          onPress={item.onPress}\n          disabled={item.disabled}\n        />\n      ))}\n    </View>\n  )\n}\n","import { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nexport type DropdownItemProps = {\n  title?: string\n  onPress?: () => void\n  disabled?: boolean\n}\n\nconst css = StyleSheet.create({\n  container: {\n    paddingVertical: 5,\n  },\n  disableText: {\n    color: v.colors.greyTextChat,\n  },\n})\n\nexport const DropdownItem: FC<DropdownItemProps> = ({\n  title,\n  onPress,\n  disabled = false,\n}: DropdownItemProps) => {\n  return (\n    <RnTouchableOpacity\n      onPress={onPress}\n      style={css.container}\n      disabled={disabled}\n    >\n      <RnText style={disabled && css.disableText}>{title}</RnText>\n    </RnTouchableOpacity>\n  )\n}\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, createRef } from 'react'\nimport {\n  NativeSyntheticEvent,\n  TextInput,\n  TextInputSelectionChangeEventData,\n} from 'react-native'\n\nimport { KeyPad } from '../components/CallKeyPad'\nimport { ShowNumber } from '../components/CallShowNumbers'\nimport { Layout } from '../components/Layout'\nimport { setPageCallTransferDial } from '../components/navigationConfig2'\nimport { getCallStore } from '../stores/callStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnKeyboard } from '../stores/RnKeyboard'\n\n@observer\nexport class PageCallTransferDial extends Component {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const cs = getCallStore()\n    if (this.prevId && this.prevId !== cs.currentCallId) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = cs.currentCallId\n  }\n\n  @observable txt = ''\n  txtRef = createRef<TextInput>()\n  txtSelection = { start: 0, end: 0 }\n\n  showKeyboard = () => {\n    this.txtRef.current?.focus()\n  }\n\n  transferBlind = () => {\n    this.txt = this.txt.trim()\n    if (!this.txt) {\n      RnAlert.error({\n        message: intlDebug`No target`,\n      })\n      return\n    }\n    getCallStore().getCurrentCall()?.transferBlind(this.txt)\n  }\n  transferAttended = () => {\n    this.txt = this.txt.trim()\n    if (!this.txt) {\n      RnAlert.error({\n        message: intlDebug`No target`,\n      })\n      return\n    }\n    getCallStore().getCurrentCall()?.transferAttended(this.txt)\n  }\n\n  render() {\n    return (\n      <Layout\n        description={intl`Select target to start transfer`}\n        onBack={Nav().backToPageCallManage}\n        menu={'call_transfer'}\n        subMenu={'external_number'}\n        isTab\n        title={intl`Transfer`}\n      >\n        <ShowNumber\n          refInput={this.txtRef}\n          selectionChange={(\n            e: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n          ) => {\n            Object.assign(this.txtSelection, {\n              start: e.nativeEvent.selection.end,\n              end: e.nativeEvent.selection.end,\n            })\n          }}\n          setTarget={(v: string) => {\n            this.txt = v\n          }}\n          value={this.txt}\n        />\n        {!RnKeyboard.isKeyboardShowing && (\n          <KeyPad\n            callVoice={this.transferBlind}\n            callVoiceForward={this.transferAttended}\n            onPressNumber={v => {\n              // TODO create new component with PageCallDtmfKeypad\n              // to avoid duplicated code\n              const { end, start } = this.txtSelection\n              let min = Math.min(start, end)\n              const max = Math.max(start, end)\n              const isDelete = v === ''\n              if (isDelete) {\n                if (start === end && start) {\n                  min = min - 1\n                }\n              }\n              const t = this.txt\n              this.txt = t.substring(0, min) + v + t.substring(max)\n              const position = min + (isDelete ? 0 : 1)\n              this.txtSelection.start = position\n              this.txtSelection.end = position\n            }}\n            showKeyboard={this.showKeyboard}\n          />\n        )}\n      </Layout>\n    )\n  }\n}\n\nsetPageCallTransferDial(PageCallTransferDial)\n","import { computed } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport {\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\nimport EmojiSelector, { Categories } from 'react-native-emoji-selector'\n\nimport { uc } from '../api/uc'\nimport { numberOfChatsPerLoad } from '../components/chatConfig'\nimport { MessageList } from '../components/ChatMessageList'\nimport { ChatInput } from '../components/FooterChatInput'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { getCallStore } from '../stores/callStore'\nimport { ChatFile, ChatMessage, chatStore } from '../stores/chatStore'\nimport { contactStore, getPartyName } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { formatFileType } from '../utils/formatFileType'\nimport { pickFile } from '../utils/pickFile'\nimport { saveBlob } from '../utils/saveBlob'\nimport { saveBlobFile } from '../utils/saveBlob.web'\nimport { arrToMap } from '../utils/toMap'\n\nconst css = StyleSheet.create({\n  LoadMore: {\n    alignSelf: 'center',\n    paddingBottom: 15,\n    fontSize: v.fontSizeSmall,\n    paddingHorizontal: 10,\n  },\n  LoadMore__btn: {\n    color: v.colors.primary,\n  },\n  LoadMore__finished: {\n    color: v.colors.warning,\n  },\n})\n\n@observer\nexport class PageChatDetail extends Component<{\n  buddy: string\n}> {\n  @computed get chatById() {\n    return arrToMap(\n      chatStore.getMessagesByThreadId(this.props.buddy),\n      'id',\n      (m: ChatMessage) => m,\n    ) as { [k: string]: ChatMessage }\n  }\n  state = {\n    loadingRecent: false,\n    loadingMore: false,\n    editingText: '',\n    blobFile: {\n      url: '',\n      fileType: '',\n    },\n    topic_id: '',\n    emojiTurnOn: false,\n    blobVideo: undefined,\n  }\n  numberOfChatsPerLoadMore = numberOfChatsPerLoad\n  edittingTextEmoji = ''\n  editingTextReplace = false\n\n  componentDidMount() {\n    this.loadRecent()\n    const { buddy: id } = this.props\n    uc.readUnreadChats(id)\n    chatStore.updateThreadConfig(id, false, {\n      isUnread: false,\n    })\n  }\n  componentDidUpdate() {\n    const { buddy: id } = this.props\n    if (chatStore.getThreadConfig(id).isUnread) {\n      chatStore.updateThreadConfig(id, false, {\n        isUnread: false,\n      })\n    }\n  }\n  componentWillUnmount() {\n    if (Platform.OS === 'web') {\n      const { topic_id } = this.state\n      if (topic_id) {\n        caches.delete(topic_id)\n      }\n    }\n  }\n  renderChatInput = () => {\n    return (\n      <ChatInput\n        onEmojiTurnOn={() =>\n          this.setState({ emojiTurnOn: !this.state.emojiTurnOn }, () => {\n            this.view?.scrollToEnd()\n          })\n        }\n        onSelectionChange={this.onSelectionChange}\n        onTextChange={this.setEditingText}\n        onTextSubmit={this.submitEditingText}\n        openFileRnPicker={() => pickFile(this.sendFile)}\n        text={this.state.editingText}\n      />\n    )\n  }\n\n  render() {\n    const { buddy: id } = this.props\n    const { allMessagesLoaded, isUnread } = chatStore.getThreadConfig(id)\n    const { loadingMore, loadingRecent, emojiTurnOn } = this.state\n    const listMessage = chatStore.getMessagesByThreadId(this.props.buddy)\n    const incomingMessage = listMessage\n      ? listMessage[listMessage.length - 1]?.text\n      : undefined\n    const isShowToastMessage = emojiTurnOn && isUnread\n\n    return (\n      <Layout\n        compact\n        containerOnContentSizeChange={this.onContentSizeChange}\n        containerOnScroll={this.onScroll}\n        containerRef={this.setViewRef}\n        fabRender={this.renderChatInput}\n        onBack={Nav().backToPageChatRecents}\n        title={getPartyName(id) || id} // for user not set username\n        isShowToastMessage={isShowToastMessage}\n        incomingMessage={incomingMessage}\n        dropdown={[\n          {\n            label: intl`Start voice call`,\n            onPress: () => getCallStore().startCall(id),\n          },\n          {\n            label: intl`Start video call`,\n            onPress: () => getCallStore().startVideoCall(id),\n          },\n        ]}\n      >\n        {loadingRecent ? (\n          <RnText style={css.LoadMore}>{intl`Loading...`}</RnText>\n        ) : allMessagesLoaded ? (\n          <RnText center style={[css.LoadMore, css.LoadMore__finished]}>\n            {!chatStore.getMessagesByThreadId(this.props.buddy).length\n              ? intl`There's currently no message in this thread`\n              : intl`All messages in this thread have been loaded`}\n          </RnText>\n        ) : (\n          <RnTouchableOpacity\n            onPress={loadingMore ? undefined : () => this.loadMore()}\n          >\n            <RnText\n              bold={!loadingMore}\n              style={[css.LoadMore, !loadingMore && css.LoadMore__btn]}\n            >\n              {loadingMore ? intl`Loading...` : intl`Load more messages`}\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        <MessageList\n          acceptFile={this.acceptFile}\n          list={listMessage}\n          loadMore={this.loadMore}\n          rejectFile={this.rejectFile}\n          resolveChat={this.resolveChat}\n        />\n        {emojiTurnOn && (\n          <View>\n            <EmojiSelector\n              category={Categories.emotion}\n              columns={10}\n              onEmojiSelected={emoji => this.emojiSelectFunc(emoji)}\n              showHistory={true}\n              showSearchBar={true}\n              showSectionTitles={true}\n              showTabs={true}\n            />\n          </View>\n        )}\n        {/* <video src={this.state.blobVideo}id='video' controls width='320' height='240'/> */}\n      </Layout>\n    )\n  }\n\n  onSelectionChange = (\n    event: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ) => {\n    const selection = event.nativeEvent.selection\n    this.editingTextReplace = false\n    if (selection.start !== selection.end) {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        selection.start,\n        selection.end,\n      )\n      this.editingTextReplace = true\n    } else {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        0,\n        selection.start,\n      )\n    }\n  }\n  emojiSelectFunc = (emoji: string) => {\n    const newText = this.edittingTextEmoji.concat(emoji)\n    if (this.state.editingText === '') {\n      this.setState({ editingText: emoji })\n      this.edittingTextEmoji = emoji\n    } else {\n      if (!this.editingTextReplace) {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            newText,\n          ),\n        })\n        this.edittingTextEmoji = this.edittingTextEmoji.concat(emoji)\n      } else {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            emoji,\n          ),\n        })\n        this.editingTextReplace = false\n        this.edittingTextEmoji = emoji\n      }\n    }\n  }\n\n  view?: ScrollView\n  setViewRef = (ref: ScrollView) => {\n    this.view = ref\n  }\n\n  private justMounted = true\n  private closeToBottom = true\n  private currentScrollPosition = 0\n  private isLoadingMore = false\n\n  onContentSizeChange = (newWidth?: number, newHeight?: number) => {\n    if (!this.view || this.state.emojiTurnOn) {\n      return\n    }\n    if (this.closeToBottom) {\n      this.view?.scrollToEnd({\n        animated: !this.justMounted,\n      })\n      if (this.justMounted) {\n        this.justMounted = false\n      }\n    }\n    // scroll to last position after load more\n    if (newHeight && this.isLoadingMore) {\n      this.isLoadingMore = false\n      this.view?.scrollTo({\n        y: newHeight - this.currentScrollPosition,\n        animated: false,\n      })\n    }\n  }\n\n  onScroll = (ev: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const layoutSize = ev.nativeEvent.layoutMeasurement\n    const layoutHeight = layoutSize.height\n    const contentOffset = ev.nativeEvent.contentOffset\n    const contentSize = ev.nativeEvent.contentSize\n    const contentHeight = contentSize.height\n    const paddingToBottom = 20\n    this.closeToBottom =\n      layoutHeight + contentOffset.y >= contentHeight - paddingToBottom\n    this.currentScrollPosition = contentHeight\n  }\n\n  resolveChat = (id: string) => {\n    const chat = this.chatById[id] as ChatMessage\n    const file = chatStore.getFileById(chat.file)\n    const text = chat.text\n    const creator = this.resolveCreator(chat.creator)\n    return {\n      id,\n      creatorId: creator.id,\n      creatorName: creator.name || creator.id,\n      creatorAvatar: creator.avatar,\n      text,\n      type: chat.type,\n      file,\n      created: chat.created,\n      createdByMe: creator.id === this.me.id,\n    }\n  }\n  me = uc.me()\n  resolveCreator = (creator: string) => {\n    if (creator === this.me.id) {\n      return this.me\n    }\n    return contactStore.getUcUserById(creator) || {}\n  }\n  loadRecent = () => {\n    this.setState({ loadingRecent: true })\n    const { buddy: id } = this.props\n    uc.getBuddyChats(id, {\n      max: numberOfChatsPerLoad,\n    })\n      .then(chats => {\n        chatStore.pushMessages(id, chats)\n        BackgroundTimer.setTimeout(this.onContentSizeChange, 300)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get recent chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingRecent: false })\n      })\n  }\n\n  loadMore = () => {\n    this.isLoadingMore = true\n    this.setState({ loadingMore: true })\n    this.numberOfChatsPerLoadMore =\n      this.numberOfChatsPerLoadMore + numberOfChatsPerLoad\n    const oldestChat =\n      chatStore.getMessagesByThreadId(this.props.buddy)[0] ||\n      ({} as ChatMessage)\n    const oldestCreated = oldestChat.created || 0\n    const max = this.numberOfChatsPerLoadMore\n    const end = oldestCreated\n    const query = { max, end }\n    const { buddy: id } = this.props\n    uc.getBuddyChats(id, query)\n      .then(chats => {\n        chatStore.pushMessages(id, chats)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get more chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingMore: false })\n      })\n      .then(() => {\n        const { buddy } = this.props\n        const totalChatLoaded = chatStore.getMessagesByThreadId(buddy).length\n        if (totalChatLoaded < this.numberOfChatsPerLoadMore) {\n          chatStore.updateThreadConfig(buddy, false, {\n            allMessagesLoaded: true,\n          })\n        }\n      })\n  }\n\n  setEditingText = (editingText: string) => {\n    this.setState({ editingText })\n  }\n  submitting = false\n  submitEditingText = () => {\n    const txt = this.state.editingText.trim()\n    if (!txt || this.submitting) {\n      return\n    }\n    if (this.state.emojiTurnOn) {\n      this.setState({ emojiTurnOn: !this.state.emojiTurnOn })\n    }\n    this.submitting = true\n    //\n    uc.sendBuddyChatText(this.props.buddy, txt)\n      .then(this.onSubmitEditingTextSuccess)\n      .catch(this.onSubmitEditingTextFailure)\n      .then(() => {\n        this.submitting = false\n      })\n  }\n  onSubmitEditingTextSuccess = (chat: unknown) => {\n    chatStore.pushMessages(this.props.buddy, chat as ChatMessage)\n    this.setState({ editingText: '' })\n  }\n  onSubmitEditingTextFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to send the message`,\n      err,\n    })\n  }\n  acceptFile = (file: { id: string; name: string; fileType: string }) => {\n    uc.acceptFile(file.id)\n      .then(blob => this.onAcceptFileSuccess(blob as Blob, file))\n      .catch(this.onAcceptFileFailure)\n  }\n\n  onAcceptFileSuccess = (blob: Blob, file: { id: string; name: string }) => {\n    const fileType = formatFileType(file.name)\n    const reader = new FileReader()\n    reader.onload = async event => {\n      const url = event.target?.result\n      const f = chatStore.getFileById(file.id)\n      if (!f) {\n        return\n      }\n      Object.assign(f, {\n        url,\n        fileType,\n      })\n    }\n    reader.readAsDataURL(blob)\n    saveBlob(blob, file.name)\n  }\n  onAcceptFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to accept file`,\n      err,\n    })\n  }\n  rejectFile = (file: object) => {\n    uc.rejectFile(file).catch(this.onRejectFileFailure)\n  }\n  onRejectFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject file`,\n      err,\n    })\n  }\n\n  readFile = (file: { type: string; name: string; uri: string }) => {\n    const fileType = formatFileType(file.name)\n    this.setState({ blobFile: { url: file.uri, fileType } })\n  }\n  handleSaveBlobFileWeb = async (\n    data: Blob,\n    file: ChatFile,\n    chat: ChatMessage,\n  ) => {\n    const buddyId = this.props.buddy\n    try {\n      const url = await saveBlobFile(\n        file.id,\n        file.topic_id,\n        file.fileType,\n        data,\n      )\n      Object.assign(file, { url })\n      chatStore.upsertFile(file)\n      chatStore.pushMessages(buddyId, chat)\n    } catch (err) {\n      console.error('PageChatDetail.handleSaveBlobFileWeb err', err)\n    }\n  }\n  sendFile = (file: { type: string; name: string; uri: string }) => {\n    this.readFile(file)\n    const u = contactStore.getUcUserById(this.props.buddy)\n    uc.sendFile(u?.id, file as any as Blob)\n      .then(res => {\n        this.setState({ topic_id: res.file.topic_id })\n        const buddyId = this.props.buddy\n        Object.assign(res.file, this.state.blobFile, { save: 'success' })\n        Object.assign(res.file, { target: { user_id: buddyId } })\n        if (Platform.OS === 'web') {\n          this.handleSaveBlobFileWeb(\n            file as any as Blob,\n            res.file as ChatFile,\n            res.chat,\n          )\n        } else {\n          chatStore.upsertFile(res.file)\n          chatStore.pushMessages(buddyId, res.chat)\n        }\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to send file`,\n          err,\n        })\n      })\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component, FC } from 'react'\nimport {\n  Clipboard,\n  Dimensions,\n  Linking,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\nimport Hyperlink from 'react-native-hyperlink'\nimport Share from 'react-native-share'\n\nimport { mdiDotsHorizontal, mdiFile } from '../assets/icons'\nimport { ChatFile } from '../stores/chatStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnPicker } from '../stores/RnPicker'\nimport { formatChatContent } from '../utils/formatChatContent'\nimport { trimHtml } from '../utils/trimHtml'\nimport { ItemImageVideoChat } from './ItemImageVideoChat'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Message: {\n    position: 'relative',\n    paddingBottom: 5,\n    paddingHorizontal: 10,\n    overflow: 'hidden',\n    ...Platform.select({\n      web: {\n        maxWidth: 'calc(100vw - 60px)',\n      },\n      default: {\n        maxWidth: Dimensions.get('screen').width - 60, // 50px of avatar and 10px of padding\n      },\n    }),\n  },\n  //\n  File: {\n    marginTop: 0,\n  },\n  Image: {\n    width: 150,\n    height: 150,\n  },\n\n  Message__call: {\n    fontSize: v.fontSizeSmall,\n    color: v.colors.warning,\n  },\n\n  Message_File_Button_Wrapper: {\n    flexDirection: 'row',\n  },\n  Message_File_Button: {\n    flex: 1,\n    paddingVertical: 1,\n    paddingHorizontal: 8,\n    fontSize: 12,\n    marginTop: 4,\n    borderRadius: 4,\n  },\n  Message_File_Cancel_Button: {\n    color: v.colors.danger,\n    borderWidth: 1,\n    borderColor: v.colors.danger,\n  },\n  Message_File_Accept_Button: {\n    backgroundColor: v.colors.primary,\n    borderWidth: 1,\n    borderColor: v.colors.primary,\n    marginLeft: 4,\n    color: '#fff',\n  },\n  Message_File_Preview_Wrapper: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  Message_File_Preview_Info: {\n    marginLeft: 5,\n    ...Platform.select({\n      web: {\n        width: 'calc(100vw - 119px)',\n      },\n      default: {\n        width: Dimensions.get('screen').width - 119,\n      },\n    }),\n  },\n  Message_File_Preview_Info_Size: {\n    color: '#9e9e9e',\n    fontSize: 13,\n  },\n  Message_File_Preview_Status: {\n    fontWeight: v.fontWeight,\n  },\n  Message_File_Preview_Status__Success: {\n    color: v.colors.primary,\n  },\n  Message_File_Preview_Status__Failed: {\n    color: v.colors.danger,\n  },\n\n  Link: {\n    color: v.colors.primary,\n    padding: 0,\n    ...Platform.select({\n      web: {\n        display: 'inline' as any as undefined,\n      },\n    }),\n  },\n})\n\nconst File: FC<\n  Partial<{\n    fileType: string\n    url: string\n    name: string\n    size: string\n    state: string\n    reject(): void\n    incoming: boolean\n    accept(): void\n    createdByMe: boolean\n  }>\n> = observer(p => (\n  <View style={[css.File, css.Message]}>\n    <View>\n      <View style={css.Message_File_Preview_Wrapper}>\n        <RnIcon path={mdiFile} size={50} />\n        <View style={css.Message_File_Preview_Info}>\n          <RnText numberOfLines={1}>{p.name}</RnText>\n          <RnText style={css.Message_File_Preview_Info_Size}>\n            {p.size} KB\n          </RnText>\n        </View>\n      </View>\n      <View style={css.Message_File_Button_Wrapper}>\n        {p.state === 'waiting' && p.fileType !== 'image' && (\n          <RnTouchableOpacity onPress={p.reject}>\n            <RnText\n              style={[css.Message_File_Button, css.Message_File_Cancel_Button]}\n            >\n              Cancel\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        {!!p.incoming && p.state === 'waiting' && p.fileType !== 'image' && (\n          <RnTouchableOpacity onPress={p.accept}>\n            <RnText\n              style={[css.Message_File_Button, css.Message_File_Accept_Button]}\n            >\n              Accept\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n      </View>\n      {p.state === 'success' && p.fileType !== 'image' && (\n        <RnText\n          style={[\n            css.Message_File_Preview_Status,\n            css.Message_File_Preview_Status__Success,\n          ]}\n        >\n          ({intl`Success`})\n        </RnText>\n      )}\n      {p.state === 'failure' && p.fileType !== 'image' && (\n        <RnText\n          style={[\n            css.Message_File_Preview_Status,\n            css.Message_File_Preview_Status__Failed,\n          ]}\n        >\n          ({intl`Failed`})\n        </RnText>\n      )}\n      {p.state === 'stopped' && p.fileType !== 'image' && (\n        <RnText\n          style={[\n            css.Message_File_Preview_Status,\n            css.Message_File_Preview_Status__Failed,\n          ]}\n        >\n          ({intl`Canceled`})\n        </RnText>\n      )}\n    </View>\n  </View>\n))\n\n@observer\nexport class Message extends Component<{\n  text: string\n  type?: number\n  creatorId: string\n  file: string\n  acceptFile: Function\n  rejectFile: Function\n  createdByMe: boolean\n}> {\n  onLinkPress = (url: string) => {\n    if (Platform.OS === 'web') {\n      window.open(url, '_blank', 'noopener')\n      return\n    }\n    if (!Linking.canOpenURL(url)) {\n      RnAlert.error({\n        message: intlDebug`Can not open the url`,\n      })\n    } else {\n      Linking.openURL(url)\n    }\n  }\n  onLinkLongPress = (url: string) => {\n    RnPicker.open({\n      options: [\n        {\n          key: 2,\n          label: intl`Copy link`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 3,\n          label: intl`Share link to external app`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 0,\n          label: intl`Copy message`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 1,\n          label: intl`Share message to external app`,\n          icon: mdiDotsHorizontal,\n        },\n      ],\n      onSelect: (k: number) => this.onRnPickerSelect(k, url),\n    })\n  }\n  onMessagePress = () => {\n    RnPicker.open({\n      options: [\n        {\n          key: 0,\n          label: intl`Copy message`,\n          icon: mdiDotsHorizontal,\n        },\n        {\n          key: 1,\n          label: intl`Share message to external app`,\n          icon: mdiDotsHorizontal,\n        },\n      ],\n      onSelect: this.onRnPickerSelect,\n    })\n  }\n\n  onRnPickerSelect = (k: number, url: string) => {\n    const message = !k || k === 1 ? this.props.text : url\n    if (!k || k === 2) {\n      Clipboard.setString(message)\n    } else {\n      Share.open({ message })\n    }\n  }\n\n  render() {\n    const p = this.props\n    const file = p.file as any as ChatFile\n    const isImage =\n      file && (file.fileType === 'image' || file.fileType === 'video')\n    const TextContainer = Platform.OS === 'web' ? View : RnTouchableOpacity\n    const { text, isTextOnly } = formatChatContent(p)\n\n    return (\n      <>\n        {!!text && !file && (\n          <TextContainer style={css.Message} onLongPress={this.onMessagePress}>\n            <Hyperlink\n              onPress={this.onLinkPress}\n              linkStyle={css.Link}\n              onLongPress={this.onLinkLongPress}\n            >\n              <RnText style={!isTextOnly && css.Message__call}>\n                {trimHtml(text)}\n              </RnText>\n            </Hyperlink>\n          </TextContainer>\n        )}\n        {!!file && isImage && <ItemImageVideoChat {...file} />}\n        {!!file && !isImage && (\n          <File\n            {...(p.file as any)}\n            accept={() => p.acceptFile(p.file)}\n            createdByMe={p.createdByMe}\n            reject={() => p.rejectFile(p.file)}\n          />\n        )}\n      </>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { Dimensions, Platform, StyleSheet, View } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { mdiCloseCircle } from '../assets/icons'\nimport { ChatFile } from '../stores/chatStore'\nimport { intlDebug } from '../stores/intl'\nimport { RnAlert } from '../stores/RnAlert'\nimport { formatBytes } from '../utils/formatBytes'\nimport { RnIcon, RnImageVideoLoader, RnText } from './Rn'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  vMessage: {\n    marginBottom: 5,\n    marginLeft: 10,\n    ...Platform.select({\n      web: {\n        width: 'calc(100vw - 119px)',\n      },\n      default: {\n        width: Dimensions.get('screen').width - 119,\n      },\n    }),\n  },\n  textFileInfo: {\n    color: v.colors.greyTextChat,\n    fontSize: 13,\n  },\n  textFileInfoLineThrough: {\n    color: v.colors.greyTextChat,\n    fontSize: 13,\n    textDecorationLine: 'line-through',\n  },\n  vHorizontal: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n})\n\nexport const ItemImageVideoChat: FC<ChatFile> = observer(p => {\n  const displaySendTo =\n    p.incoming || !p.target?.user_id ? '' : ` -> ${p.target?.user_id}`\n  const isStopped = p.state === 'stopped'\n  const isDisableCancel =\n    isStopped || p.state === 'success' || p.state === 'failure'\n  const styleText = !isStopped ? css.textFileInfo : css.textFileInfoLineThrough\n\n  const onCancelFile = () => {\n    uc.rejectFile(p).catch(onRejectFileFailure)\n  }\n  const onRejectFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject file`,\n      err,\n    })\n  }\n  return (\n    <View>\n      <View style={css.vMessage}>\n        <RnText numberOfLines={2} style={styleText}>\n          {p.name}\n          {displaySendTo}\n        </RnText>\n        <View style={css.vHorizontal}>\n          <RnText style={styleText}>\n            {formatBytes(p?.size || 0, 2)}\n            {` (${p.transferPercent}%) `}\n          </RnText>\n          {!isDisableCancel && (\n            <RnTouchableOpacity onPress={onCancelFile}>\n              <RnIcon path={mdiCloseCircle} color={'black'} size={13} />\n            </RnTouchableOpacity>\n          )}\n        </View>\n        {<RnImageVideoLoader {...p} />}\n      </View>\n    </View>\n  )\n})\n","export const formatBytes = (bytes: number | string, decimals = 2) => {\n  bytes = +bytes\n  if (!bytes) {\n    return '0 Bytes'\n  }\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + '' + sizes[i]\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { uc } from '../api/uc'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/Rn'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PageChatGroupCreate extends Component {\n  state: {\n    name: string\n    members: string[]\n  } = {\n    name: '',\n    members: [],\n  }\n\n  render() {\n    return (\n      <Layout\n        fabOnBack={Nav().goToPageChatRecents}\n        fabOnNext={this.create}\n        fabOnNextText={intl`CREATE`}\n        onBack={Nav().backToPageChatRecents}\n        title={intl`New Group`}\n      >\n        <Field\n          label={intl`GROUP NAME`}\n          onValueChange={this.setName}\n          value={this.state.name}\n        />\n        <Field isGroup label={intl`Members`} />\n        {contactStore.ucUsers.map((u, i) => (\n          <RnTouchableOpacity key={i} onPress={() => this.toggleBuddy(u.id)}>\n            <UserItem\n              key={u.id}\n              {...u}\n              selected={this.state.members.includes(u.id)}\n            />\n          </RnTouchableOpacity>\n        ))}\n      </Layout>\n    )\n  }\n\n  setName = (name: string) => {\n    this.setState({\n      name,\n    })\n  }\n  toggleBuddy = (buddy: string) => {\n    const { members } = this.state\n    if (members.includes(buddy)) {\n      this.setState({\n        members: members.filter(id => id !== buddy),\n      })\n    } else {\n      this.setState({\n        members: [...members, buddy],\n      })\n    }\n  }\n  create = () => {\n    const { members, name } = this.state\n    if (!name.trim()) {\n      RnAlert.error({\n        message: intlDebug`Group name is required`,\n      })\n      return\n    }\n    uc.createChatGroup(name, members)\n      .then(this.onCreateSuccess)\n      .catch(this.onCreateFailure)\n  }\n  onCreateSuccess = (group: { id: string; name: string; jointed: boolean }) => {\n    chatStore.upsertGroup(group)\n    uc.joinChatGroup(group.id)\n    Nav().goToPageChatRecents()\n  }\n  onCreateFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to create the group chat`,\n      err,\n    })\n  }\n}\n","import { computed } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport {\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  TextInputSelectionChangeEventData,\n  View,\n} from 'react-native'\nimport EmojiSelector, { Categories } from 'react-native-emoji-selector'\n\nimport { Constants, uc } from '../api/uc'\nimport { numberOfChatsPerLoad } from '../components/chatConfig'\nimport { MessageList } from '../components/ChatMessageList'\nimport { ChatInput } from '../components/FooterChatInput'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/RnText'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { v } from '../components/variables'\nimport { getCallStore } from '../stores/callStore'\nimport {\n  ChatFile,\n  ChatGroup,\n  ChatMessage,\n  chatStore,\n} from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { formatFileType } from '../utils/formatFileType'\nimport { pickFile } from '../utils/pickFile'\nimport { saveBlob } from '../utils/saveBlob'\nimport { saveBlobFile } from '../utils/saveBlob.web'\nimport { arrToMap } from '../utils/toMap'\n\nconst css = StyleSheet.create({\n  LoadMore: {\n    alignSelf: 'center',\n    paddingBottom: 15,\n    fontSize: v.fontSizeSmall,\n    paddingHorizontal: 10,\n  },\n  LoadMore__btn: {\n    color: v.colors.primary,\n  },\n  LoadMore__finished: {\n    color: v.colors.warning,\n  },\n})\n\n@observer\nexport class PageChatGroupDetail extends Component<{\n  groupId: string\n}> {\n  @computed get chatById() {\n    return arrToMap(\n      chatStore.getMessagesByThreadId(this.props.groupId),\n      'id',\n      (m: ChatMessage) => m,\n    ) as { [k: string]: ChatMessage }\n  }\n\n  state = {\n    target: '',\n    loadingRecent: false,\n    loadingMore: false,\n    editingText: '',\n    blobFile: {\n      url: '',\n      fileType: '',\n    },\n    topic_id: '',\n    emojiTurnOn: false,\n  }\n  numberOfChatsPerLoadMore = numberOfChatsPerLoad\n  edittingTextEmoji = ''\n  editingTextReplace = false\n  componentDidMount() {\n    this.loadRecent()\n    chatStore.updateThreadConfig(this.props.groupId, true, {\n      isUnread: false,\n    })\n  }\n  componentDidUpdate() {\n    const { groupId } = this.props\n    if (chatStore.getThreadConfig(groupId).isUnread) {\n      chatStore.updateThreadConfig(groupId, false, {\n        isUnread: false,\n      })\n    }\n  }\n  componentWillUnmount() {\n    if (Platform.OS === 'web') {\n      const { topic_id } = this.state\n      if (topic_id) {\n        caches.delete(topic_id)\n      }\n    }\n  }\n\n  renderChatInput = () => {\n    return (\n      <ChatInput\n        onEmojiTurnOn={() =>\n          this.setState({ emojiTurnOn: !this.state.emojiTurnOn })\n        }\n        onSelectionChange={this.onSelectionChange}\n        onTextChange={this.setEditingText}\n        onTextSubmit={this.submitEditingText}\n        openFileRnPicker={() => pickFile(this.sendFile)}\n        text={this.state.editingText}\n      />\n    )\n  }\n  render() {\n    const id = this.props.groupId\n    const gr = chatStore.getGroupById(id)\n    const { allMessagesLoaded } = chatStore.getThreadConfig(id)\n    const { loadingMore, loadingRecent } = this.state\n    const chats = chatStore.getMessagesByThreadId(this.props.groupId)\n    return (\n      <Layout\n        compact\n        containerOnContentSizeChange={this.onContentSizeChange}\n        containerOnScroll={this.onScroll}\n        fabRender={this.renderChatInput}\n        containerRef={this.setViewRef}\n        dropdown={[\n          {\n            label: intl`Invite more people`,\n            onPress: this.invite,\n          },\n          {\n            label: intl`Start voice call`,\n            onPress: this.callVoiceConference,\n          },\n          {\n            label: intl`Start video call`,\n            onPress: this.callVideoConference,\n          },\n          {\n            label: intl`Leave group`,\n            onPress: this.leave,\n            danger: true,\n          },\n        ]}\n        onBack={Nav().backToPageChatRecents}\n        title={gr?.name}\n      >\n        {loadingRecent ? (\n          <RnText style={css.LoadMore}>{intl`Loading...`}</RnText>\n        ) : allMessagesLoaded ? (\n          <RnText center style={[css.LoadMore, css.LoadMore__finished]}>\n            {!chatStore.getMessagesByThreadId(this.props.groupId).length\n              ? intl`There's currently no message in this thread`\n              : intl`All messages in this thread have been loaded`}\n          </RnText>\n        ) : (\n          <RnTouchableOpacity\n            onPress={loadingMore ? undefined : () => this.loadMore()}\n          >\n            <RnText\n              bold={!loadingMore}\n              style={[css.LoadMore, !loadingMore && css.LoadMore__btn]}\n            >\n              {loadingMore ? intl`Loading...` : intl`Load more messages`}\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        <MessageList\n          acceptFile={this.acceptFile}\n          isGroupChat\n          list={chats}\n          loadMore={this.loadMore}\n          rejectFile={this.rejectFile}\n          resolveChat={this.resolveChat}\n        />\n        {this.state.emojiTurnOn && (\n          <View>\n            <EmojiSelector\n              category={Categories.emotion}\n              columns={10}\n              onEmojiSelected={emoji => this.emojiSelectFunc(emoji)}\n              showHistory={true}\n              showSearchBar={true}\n              showSectionTitles={true}\n              showTabs={true}\n            />\n          </View>\n        )}\n      </Layout>\n    )\n  }\n  onSelectionChange = (\n    event: NativeSyntheticEvent<TextInputSelectionChangeEventData>,\n  ) => {\n    const selection = event.nativeEvent.selection\n    this.editingTextReplace = false\n    if (selection.start !== selection.end) {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        selection.start,\n        selection.end,\n      )\n      this.editingTextReplace = true\n    } else {\n      this.edittingTextEmoji = this.state.editingText.substring(\n        0,\n        selection.start,\n      )\n    }\n  }\n  emojiSelectFunc = (emoji: string) => {\n    const newText = this.edittingTextEmoji.concat(emoji)\n    if (this.state.editingText === '') {\n      this.setState({ editingText: emoji })\n      this.edittingTextEmoji = emoji\n    } else {\n      if (!this.editingTextReplace) {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            newText,\n          ),\n        })\n        this.edittingTextEmoji = this.edittingTextEmoji.concat(emoji)\n      } else {\n        this.setState({\n          editingText: this.state.editingText.replace(\n            this.edittingTextEmoji,\n            emoji,\n          ),\n        })\n        this.editingTextReplace = false\n        this.edittingTextEmoji = emoji\n      }\n    }\n  }\n  view?: ScrollView\n  setViewRef = (ref: ScrollView) => {\n    this.view = ref\n  }\n\n  private justMounted = true\n  private closeToBottom = true\n  private currentScrollPosition = 0\n  private isLoadingMore = false\n  onContentSizeChange = (newWidth?: number, newHeight?: number) => {\n    if (this.closeToBottom) {\n      this.view?.scrollToEnd({\n        animated: !this.justMounted,\n      })\n      if (this.justMounted) {\n        this.justMounted = false\n      }\n    }\n    // scroll to last position after load more\n    if (newHeight && this.isLoadingMore) {\n      this.isLoadingMore = false\n      this.view?.scrollTo({\n        y: newHeight - this.currentScrollPosition,\n        animated: false,\n      })\n    }\n  }\n  onScroll = (ev: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const layoutSize = ev.nativeEvent.layoutMeasurement\n    const layoutHeight = layoutSize.height\n    const contentOffset = ev.nativeEvent.contentOffset\n    const contentSize = ev.nativeEvent.contentSize\n    const contentHeight = contentSize.height\n    const paddingToBottom = 20\n    this.closeToBottom =\n      layoutHeight + contentOffset.y >= contentHeight - paddingToBottom\n    this.currentScrollPosition = contentHeight\n  }\n\n  me = uc.me()\n  resolveBuddy = (creator: string) => {\n    if (creator === this.me.id) {\n      return this.me\n    }\n    if (creator.startsWith('#')) {\n      // check message come from guest\n      return { id: creator.replace('#', ''), name: 'Guest', avatar: null }\n    }\n    return contactStore.getUcUserById(creator) || {}\n  }\n  resolveChat = (id: string) => {\n    const chat = this.chatById[id] as ChatMessage\n    const text = chat.text\n    const file = chatStore.getFileById(chat.file)\n    const creator = this.resolveBuddy(chat.creator)\n    return {\n      id,\n      creatorId: creator.id,\n      creatorName: creator.name || creator.id,\n      creatorAvatar: creator.avatar,\n      file,\n      text,\n      type: chat.type,\n      created: chat.created,\n      createdByMe: creator.id === this.me.id,\n    }\n  }\n\n  loadRecent() {\n    this.setState({ loadingRecent: true })\n    uc.getGroupChats(this.props.groupId, {\n      max: numberOfChatsPerLoad,\n    })\n      .then(chats => {\n        chatStore.pushMessages(this.props.groupId, chats)\n        BackgroundTimer.setTimeout(this.onContentSizeChange, 300)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get recent chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingRecent: false })\n      })\n  }\n\n  loadMore = () => {\n    this.isLoadingMore = true\n    this.setState({ loadingMore: true })\n    this.numberOfChatsPerLoadMore =\n      this.numberOfChatsPerLoadMore + numberOfChatsPerLoad\n    const oldestChat =\n      chatStore.getMessagesByThreadId(this.props.groupId)[0] ||\n      ({} as ChatMessage)\n    const oldestCreated = oldestChat.created || 0\n    const max = this.numberOfChatsPerLoadMore\n    const end = oldestCreated\n    const query = {\n      max,\n      end,\n    }\n    uc.getGroupChats(this.props.groupId, query)\n      .then(chats => {\n        chatStore.pushMessages(this.props.groupId, chats)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to get more chats`,\n          err,\n        })\n      })\n      .then(() => {\n        this.setState({ loadingMore: false })\n      })\n      .then(() => {\n        const id = this.props.groupId\n        const totalChatLoaded = chatStore.getMessagesByThreadId(id).length\n        if (totalChatLoaded < this.numberOfChatsPerLoadMore) {\n          chatStore.updateThreadConfig(id, true, {\n            allMessagesLoaded: true,\n          })\n        }\n      })\n  }\n\n  setEditingText = (editingText: string) => {\n    this.setState({\n      editingText,\n    })\n  }\n\n  submitting = false\n  submitEditingText = () => {\n    if (this.submitting) {\n      return\n    }\n    const txt = this.state.editingText.trim()\n    if (!txt) {\n      return\n    }\n    if (this.state.emojiTurnOn) {\n      this.setState({ emojiTurnOn: !this.state.emojiTurnOn })\n    }\n    this.submitting = true\n    uc.sendGroupChatText(this.props.groupId, txt)\n      .then(chat => {\n        chatStore.pushMessages(this.props.groupId, [chat as ChatMessage])\n        this.setState({ editingText: '' })\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to send the message`,\n          err,\n        })\n      })\n      .then(() => {\n        this.submitting = false\n      })\n  }\n  updateConfStatus = (conf_id: string, isClose: boolean) => {\n    const g = chatStore.getGroupById(conf_id)\n    const newItem = {\n      ...g,\n      webchat: {\n        ...g.webchat,\n        conf_status: isClose\n          ? Constants.CONF_STATUS_INACTIVE\n          : Constants.CONF_STATUS_INVITED,\n      },\n    } as ChatGroup\n    chatStore.upsertGroup(newItem)\n  }\n  leave = () => {\n    const conf_id = this.props.groupId\n    uc.leaveChatConference(conf_id, true)\n      .then(res => {\n        const isWebchat = chatStore.isWebchat(conf_id)\n        if (isWebchat) {\n          // leave webchat then close conference\n          // update conf_status\n          this.updateConfStatus(conf_id, res.closes)\n        } else {\n          chatStore.removeGroup(conf_id)\n        }\n        Nav().backToPageChatRecents()\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to leave the group`,\n          err,\n        })\n      })\n  }\n\n  invite = () => {\n    Nav().goToPageChatGroupInvite({ groupId: this.props.groupId })\n  }\n  call = (target: string, bVideoEnabled: boolean) => {\n    bVideoEnabled\n      ? getCallStore().startVideoCall(target)\n      : getCallStore().startCall(target)\n  }\n  callVoiceConference = () => {\n    let target = this.props.groupId\n    if (!target.startsWith('uc')) {\n      target = 'uc' + this.props.groupId\n    }\n    this.call(target, false)\n  }\n  callVideoConference = () => {\n    let target = this.props.groupId\n    if (!target.startsWith('uc')) {\n      target = 'uc' + this.props.groupId\n    }\n    this.call(target, true)\n  }\n\n  readFile = (file: { type: string; name: string; uri: string }) => {\n    const fileType = formatFileType(file.name)\n    this.setState({ blobFile: { url: file.uri, fileType } })\n  }\n\n  sendFile = (file: { type: string; name: string; uri: string }) => {\n    this.readFile(file)\n    const groupId = this.props.groupId\n    uc.sendFiles(groupId, file as any as Blob)\n      .then(res => this.onSendFileSuccess(res, file as any as Blob))\n      .catch(this.onSendFileFailure)\n  }\n  handleSaveBlobFileWeb = async (\n    data: Blob,\n    file: ChatFile,\n    chat: ChatMessage,\n  ) => {\n    const { groupId } = this.props\n    try {\n      const url = await saveBlobFile(\n        file.id,\n        file.topic_id,\n        file.fileType,\n        data,\n      )\n      Object.assign(file, { url })\n      chatStore.upsertFile(file)\n      chatStore.pushMessages(groupId, chat)\n    } catch (err) {\n      console.error('PageChatGroupDetail.handleSaveBlobFileWeb err', err)\n    }\n  }\n  onSendFileSuccess = (\n    res: { file: ChatFile; chat: ChatMessage },\n    file: Blob,\n  ) => {\n    const groupId = this.props.groupId\n    const { blobFile } = this.state\n    this.setState({ topic_id: res.file.topic_id })\n    Object.assign(res.file, blobFile, { save: 'success' })\n    if (Platform.OS === 'web') {\n      this.handleSaveBlobFileWeb(file, res.file as ChatFile, res.chat)\n    } else {\n      chatStore.upsertFile(res.file)\n      chatStore.pushMessages(groupId, res.chat)\n    }\n  }\n  onSendFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to send file`,\n      err,\n    })\n  }\n  acceptFile = (file: { id: string; name: string }) => {\n    uc.acceptFile(file.id)\n      .then(blob => this.onAcceptFileSuccess(blob as Blob, file))\n      .catch(this.onAcceptFileFailure)\n  }\n\n  onAcceptFileSuccess = (\n    blob: Blob,\n    file: {\n      id: string\n      name: string\n    },\n  ) => {\n    const type = ['PNG', 'JPG', 'JPEG', 'GIF']\n    const fileType = type.includes(\n      file.name.split('.').pop()?.toUpperCase() || '',\n    )\n      ? 'image'\n      : 'other'\n    const reader = new FileReader()\n    reader.onload = async event => {\n      const url = event.target?.result\n      const f = chatStore.getFileById(file.id)\n      if (!f) {\n        return\n      }\n      Object.assign(f, {\n        url,\n        fileType,\n      })\n    }\n\n    reader.readAsDataURL(blob)\n\n    saveBlob(blob, file.name)\n  }\n\n  onAcceptFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to accept file`,\n      err,\n    })\n  }\n  rejectFile = (file: { id: string }) => {\n    uc.rejectFile(file).catch(this.onRejectFileFailure)\n  }\n  onRejectFileFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject file`,\n      err,\n    })\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\nconst css = StyleSheet.create({\n  PageChatGroupInvite: {},\n  PageChatGroupInvite_TextInput: {\n    padding: 10,\n    ...v.boxShadow,\n  },\n  PageChatGroupInvite_Outer: {\n    paddingTop: 5,\n    paddingHorizontal: 10,\n  },\n  PageChatGroupInvite_BtnSave: {\n    marginTop: 15,\n    padding: 10,\n    borderRadius: v.borderRadius,\n    backgroundColor: v.colors.primary,\n  },\n  PageChatGroupInvite_BtnText: {\n    alignItems: 'center',\n    color: 'white',\n    fontSize: v.fontSizeSubTitle,\n  },\n  PageChatGroupInvite_GroupName: {\n    fontSize: v.fontSizeTitle,\n    padding: 5,\n  },\n  PageChatGroupInvite_Text: {\n    paddingTop: 15,\n    fontSize: v.fontSizeTitle,\n  },\n})\n\n@observer\nexport class PageChatGroupInvite extends Component<{\n  groupId: string\n}> {\n  state = {\n    selectedBuddy: {} as { [k: string]: boolean },\n  }\n\n  render() {\n    return (\n      <Layout onBack={this.back} title={intl`Inviting Group Member`}>\n        <View style={css.PageChatGroupInvite_Outer}>\n          <RnText style={css.PageChatGroupInvite_GroupName}>\n            {chatStore.getGroupById(this.props.groupId).name}\n          </RnText>\n          <RnTouchableOpacity\n            onPress={this.invite}\n            style={css.PageChatGroupInvite_BtnSave}\n          >\n            <RnText\n              style={css.PageChatGroupInvite_BtnText}\n            >{intl`Invite`}</RnText>\n          </RnTouchableOpacity>\n          <RnText style={css.PageChatGroupInvite_Text}>{intl`Members`}</RnText>\n        </View>\n        <Field isGroup />\n        {contactStore.ucUsers\n          .map(u => u.id)\n          .filter(this.isNotMember)\n          .map((id, i) => (\n            <RnTouchableOpacity key={i} onPress={() => this.toggleBuddy(id)}>\n              <UserItem\n                key={id}\n                {...this.resolveBuddy(id)}\n                selected={this.state.selectedBuddy[id]}\n              />\n            </RnTouchableOpacity>\n          ))}\n      </Layout>\n    )\n  }\n\n  isNotMember = (buddy: string) =>\n    !chatStore.getGroupById(this.props.groupId).members?.includes(buddy)\n  resolveBuddy = (buddy: string) => contactStore.getUcUserById(buddy)\n  toggleBuddy = (buddy: string) => {\n    let { selectedBuddy } = this.state\n    selectedBuddy = {\n      ...selectedBuddy,\n      [buddy]: !selectedBuddy[buddy],\n    }\n    this.setState({\n      selectedBuddy,\n    })\n  }\n\n  invite = () => {\n    const { selectedBuddy } = this.state\n    const members = Object.keys(selectedBuddy)\n    if (!members.length) {\n      RnAlert.error({\n        message: intlDebug`No buddy selected`,\n      })\n      return\n    }\n    uc.inviteChatGroupMembers(this.props.groupId, members)\n      .catch(this.onInviteFailure)\n      .then(this.back)\n  }\n  onInviteFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to invite group chat`,\n      err,\n    })\n  }\n  back = () => {\n    Nav().backToPageChatGroupDetail({ groupId: this.props.groupId })\n  }\n}\n","import jsonStableStringify from 'json-stable-stringify'\nimport { orderBy, uniqBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { Conference, UcMessageLog } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport { ListUsers } from '../components/ChatListUsers'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/Rn'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { ChatGroup, ChatMessage, chatStore } from '../stores/chatStore'\nimport { contactStore, UcUser } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { filterTextOnly, formatChatContent } from '../utils/formatChatContent'\nimport { arrToMap } from '../utils/toMap'\n\n@observer\nexport class PageChatRecents extends Component {\n  getLastChat = (id: string) => {\n    const chats = filterTextOnly(chatStore.getMessagesByThreadId(id))\n    return chats.length ? chats[chats.length - 1] : ({} as ChatMessage)\n  }\n  saveLastChatItem = async (\n    arr: {\n      id: string\n      name: string\n      text: string\n      type: number\n      group: boolean\n      unread: boolean\n      created: string\n    }[],\n  ) => {\n    // Not show other message content type different than normal text chat\n    const arr2 = [...arr].filter(c => c?.created || c?.group)\n    while (arr2.length > 20) {\n      arr2.pop()\n    }\n    const d = await getAuthStore().getCurrentDataAsync()\n    if (jsonStableStringify(arr2) !== jsonStableStringify(d.recentChats)) {\n      d.recentChats = arr2\n      accountStore.saveAccountsToLocalStorageDebounced()\n    }\n  }\n  handleGroupSelect = async (groupId: string) => {\n    const groupInfo: Conference = uc.getChatGroupInfo(groupId)\n    const groupStatus = groupInfo.conf_status\n    if (groupStatus === Constants.CONF_STATUS_INACTIVE) {\n      RnAlert.error({\n        message: intlDebug`You have rejected this group or this group has been deleted`,\n      })\n      const d = await getAuthStore().getCurrentDataAsync()\n      const newList = d.recentChats.filter(c => c.id !== groupId)\n      d.recentChats = [...newList]\n    } else if (groupStatus === Constants.CONF_STATUS_INVITED) {\n      RnAlert.prompt({\n        title: '',\n        message: intl`Do you want to join this group?`,\n        confirmText: intl`Join`,\n        onConfirm: async () => {\n          await uc.joinChatGroup(groupId)\n          Nav().goToPageChatGroupDetail({ groupId })\n        },\n        onDismiss: () => {},\n      })\n    } else {\n      Nav().goToPageChatGroupDetail({ groupId })\n    }\n  }\n\n  render() {\n    const webchatInactive = chatStore.groups.filter(\n      gr =>\n        gr.webchat && gr.webchat.conf_status !== Constants.CONF_STATUS_JOINED,\n    )\n\n    const groupIds = chatStore.groups.filter(gr => gr.jointed).map(gr => gr.id)\n\n    const threadIds = chatStore.threadIdsOrderedByRecent\n\n    const groupById = arrToMap(chatStore.groups, 'id', (g: ChatGroup) => g) as {\n      [k: string]: ChatGroup\n    }\n    const userById = arrToMap(contactStore.ucUsers, 'id', (u: UcUser) => u) as {\n      [k: string]: UcUser\n    }\n\n    const as = getAuthStore()\n    const d = as.getCurrentData()\n    if (!d) {\n      accountStore.findDataAsync(as.getCurrentAccount())\n    }\n    const recentFromStorage =\n      d?.recentChats.filter(\n        c => groupIds.indexOf(c.id) < 0 && threadIds.indexOf(c.id) < 0,\n      ) || []\n    type WithThreadId = {\n      threadId: string\n    }\n    type ChatFromStorage = typeof recentFromStorage[0] & WithThreadId\n    type ChatWithThreadId = ChatMessage & WithThreadId\n\n    const recentGroups = recentFromStorage.filter(\n      c => c.group,\n    ) as any as ChatWithThreadId[]\n    recentGroups.push(\n      ...groupIds.map(id => ({ ...this.getLastChat(id), threadId: id })),\n    )\n\n    const recentUsers = recentFromStorage.filter(\n      c => !c.group,\n    ) as any as ChatWithThreadId[]\n    recentUsers.push(\n      ...threadIds.map(id => ({ ...this.getLastChat(id), threadId: id })),\n    )\n\n    const fn = (group: boolean) => (c0: ChatWithThreadId) => {\n      const c = c0 as any as ChatFromStorage\n\n      const id = typeof c.group === 'boolean' ? c.id : c.threadId\n      const x = (group ? groupById : userById)[id] as {\n        name: string\n      }\n      const name: string = x?.name || c.name || ''\n      let unread = chatStore.getThreadConfig(id).isUnread\n      if (typeof unread !== 'boolean') {\n        unread = c.unread || false\n      }\n      // check webchat inactive\n      const isWebchat = chatStore.isWebchat(id)\n      const isWebchatJoined = chatStore.isWebchatJoined(id)\n      if (isWebchat && !isWebchatJoined) {\n        unread = true\n      }\n      const { text, isTextOnly } = formatChatContent(c)\n\n      return {\n        id,\n        name,\n        text,\n        type: isTextOnly ? 1 : c.type || (c as any as UcMessageLog).ctype,\n        group: !!group,\n        unread,\n        created: c.created,\n      }\n    }\n    let arr = [...recentGroups.map(fn(true)), ...recentUsers.map(fn(false))]\n\n    arr = filterTextOnly(arr)\n    arr = uniqBy(arr, 'id')\n    const arrMap = arr.reduce((m, c) => {\n      m[c.id] = true\n      return m\n    }, {} as { [k: string]: boolean })\n\n    filterTextOnly(d?.recentChats).forEach(c => {\n      if (!arrMap[c.id]) {\n        arr.push(c)\n      }\n    })\n\n    // don't display webchat\n    arr = arr.filter(c => !webchatInactive.some(gr => gr.id === c.id))\n    arr = orderBy(arr, ['created', 'name'])\n      // .filter(c => !!c.created && !c.group)\n      .reverse()\n\n    // when anyItem changes page will be render again => don't need timeout\n    this.saveLastChatItem(arr)\n\n    return (\n      <Layout\n        description={intl`UC recent active chat`}\n        dropdown={[\n          {\n            label: intl`Create group chat`,\n            onPress: Nav().goToPageChatGroupCreate,\n          },\n        ]}\n        menu='contact'\n        subMenu='chat'\n        title={intl`Chat`}\n      >\n        <Field isGroup label={intl`RECENT CHAT THREADS`} />\n        {!arr.length && (\n          <RnText center normal small warning style={{ marginTop: 5 }}>\n            {intl`There's no active chat thread`}\n          </RnText>\n        )}\n        <ListUsers\n          recents={arr}\n          groupById={groupById}\n          onGroupSelect={this.handleGroupSelect}\n          userById={userById}\n          onUserSelect={id => Nav().goToPageChatDetail({ buddy: id })}\n        />\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { StyleSheet } from 'react-native'\n\n// import {intl} from '../stores/intl'\nimport { chatStore } from '../stores/chatStore'\nimport { getPartyName } from '../stores/contactStore'\nimport { formatDateTimeSemantic } from './chatConfig'\nimport { UserItem } from './ContactUserItem'\nimport { RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Unread: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n})\n\nexport const ListUsers: FC<{\n  recents: {\n    id: string\n    name: string\n    group: boolean\n    text: string\n    unread: boolean\n    created: string\n  }[]\n  onGroupSelect: Function\n  onUserSelect: (id: string) => void\n  groupById: { [k: string]: object }\n  userById: { [k: string]: object }\n}> = observer(p => (\n  <>\n    {p.recents.map(({ id, name, group, text, unread, created }) => (\n      <RnTouchableOpacity\n        key={id}\n        onPress={() => (group ? p.onGroupSelect(id) : p.onUserSelect(id))} // TODO group\n        style={(unread || chatStore.getThreadConfig(id).isUnread) && css.Unread}\n      >\n        <UserItem\n          key={id}\n          name={name || getPartyName(id)}\n          {...(group ? p.groupById : p.userById)[id]}\n          lastMessage={text}\n          group={group}\n          isRecentChat\n          lastMessageDate={formatDateTimeSemantic(created)}\n        />\n      </RnTouchableOpacity>\n    ))}\n  </>\n))\n","import { FC } from 'react'\nimport { StyleSheet, ViewProps } from 'react-native'\n\nimport { RnCheckBox } from './RnCheckbox'\nimport { RnText } from './RnText'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\nconst css = StyleSheet.create({\n  SelectionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 5,\n  },\n  SelectionItem_Disabled: {\n    opacity: 0.5,\n  },\n  SelectionItem_Title: {\n    marginLeft: 12,\n  },\n})\n\nexport const SelectionItem: FC<\n  ViewProps & {\n    isSelected: boolean\n    onPress(): void\n    title: string\n    disabled?: boolean\n  }\n> = ({ isSelected, title, onPress, disabled = false, style, ...p }) => (\n  <RnTouchableOpacity\n    {...p}\n    style={[css.SelectionItem, disabled && css.SelectionItem_Disabled, style]}\n    onPress={() => {\n      if (!disabled) {\n        onPress()\n      }\n    }}\n  >\n    <RnCheckBox\n      isSelected={isSelected}\n      onPress={() => {\n        if (!disabled) {\n          onPress()\n        }\n      }}\n      disabled={disabled}\n    />\n    <RnText style={css.SelectionItem_Title}>{title}</RnText>\n  </RnTouchableOpacity>\n)\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\nimport { FlatList, View } from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport { userStore } from '../stores/userStore'\nimport { UserItem } from './ContactUserItem'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\n\ntype ContactListProps = {\n  data: UcBuddy[]\n}\n\nexport const ContactList: FC<ContactListProps> = observer(p => (\n  <View>\n    <FlatList\n      data={p.data}\n      renderItem={({ item }: { item: UcBuddy }) => <RenderItem item={item} />}\n      keyExtractor={item => item.user_id}\n    />\n  </View>\n))\n\nconst RenderItem = observer(({ item }: { item: UcBuddy }) => {\n  return (\n    <View key={item.user_id}>\n      <RnTouchableOpacity\n        onPress={() => userStore.selectUserId(item.user_id)}\n        disabled={userStore.isSelectedAddAllUser}\n      >\n        <UserItem\n          id={item.user_id}\n          name={item.name || item.user_id}\n          avatar={item.profile_image_url}\n          disabled={userStore.isSelectedAddAllUser}\n          isSelected={\n            userStore.isSelectedAddAllUser ||\n            userStore.selectedUserIds[item.user_id]\n          }\n          onSelect={() => userStore.selectUserId(item.user_id)}\n          isSelection\n        />\n      </RnTouchableOpacity>\n    </View>\n  )\n})\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { ActivityIndicator, FlatList, View } from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnDropdown } from '../stores/RnDropdown'\nimport { userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { css } from './PageContactEdit'\n\n@observer\nexport class PageContactGroupCreate extends Component {\n  @observable selectedUserItems: { [k: string]: UcBuddy } = {}\n\n  state = {\n    name: '',\n    didMount: false,\n  }\n  componentDidMount() {\n    BackgroundTimer.setTimeout(() => this.setState({ didMount: true }), 300)\n  }\n\n  render() {\n    return (\n      <Layout\n        fabOnBack={Nav().goToPageContactEdit}\n        fabOnNext={this.create}\n        fabOnNextText={intl`CREATE`}\n        onBack={Nav().backToPageContactEdit}\n        title={intl`New Group`}\n      >\n        <Field\n          label={intl`GROUP NAME`}\n          onValueChange={this.setName}\n          value={this.state.name}\n        />\n        <Field isGroup label={intl`Members`} />\n        {!this.state.didMount ? (\n          <ActivityIndicator style={css.loadingIcon} size='large' />\n        ) : (\n          <FlatList\n            data={userStore.dataListAllUser}\n            renderItem={({ item, index }: { item: UcBuddy; index: number }) => (\n              <RenderItem\n                item={item}\n                index={index}\n                selectedUsers={this.selectedUserItems}\n              />\n            )}\n            keyExtractor={item => item.user_id}\n          />\n        )}\n      </Layout>\n    )\n  }\n\n  setName = (name: string) =>\n    this.setState({\n      name,\n    })\n\n  create = () => {\n    const { name } = this.state\n\n    if (!name.trim()) {\n      RnAlert.error({\n        message: intlDebug`Group name is required`,\n      })\n      return\n    } else if (userStore.groups.some(group => group.name === name.trim())) {\n      RnAlert.error({\n        message: intlDebug`Group name is existed`,\n      })\n      return\n    }\n    // const selectedUsers = userStore.dataListAllUser.filter(\n    //   u => this.selectedUsers[u.user_id],\n    // )\n    userStore.addGroup(name, this.selectedUserItems)\n    RnDropdown.setShouldUpdatePosition(true)\n    Nav().backToPageContactEdit()\n  }\n}\n\nconst RenderItem = observer(\n  ({\n    item,\n    index,\n    selectedUsers,\n  }: {\n    item: UcBuddy\n    index: number\n    selectedUsers: { [k: string]: UcBuddy }\n  }) => {\n    const selectUser = (i: UcBuddy) => {\n      if (selectedUsers[i.user_id]) {\n        delete selectedUsers[item.user_id]\n      } else {\n        selectedUsers[i.user_id] = i\n      }\n    }\n    return (\n      <View key={`PageContactGroupCreate-${item.user_id}-${index}`}>\n        <RnTouchableOpacity onPress={() => selectUser(item)}>\n          <UserItem\n            id={item.user_id}\n            name={item.name || item.user_id}\n            avatar={item.profile_image_url}\n            isSelected={!!selectedUsers[item.user_id]}\n            onSelect={() => selectUser(item)}\n            isSelection\n          />\n        </RnTouchableOpacity>\n      </View>\n    )\n  },\n)\n","import { observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { ActivityIndicator, FlatList, View } from 'react-native'\n\nimport { UcBuddy } from '../api/brekekejs'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnDropdown } from '../stores/RnDropdown'\nimport { userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { css } from './PageContactEdit'\n\n@observer\nexport class PageContactGroupEdit extends Component<{\n  groupName: string\n  listItem: UcBuddy[]\n}> {\n  @observable selectedUserItems: { [k: string]: UcBuddy } = {}\n  state = {\n    didMount: false,\n  }\n  componentDidMount() {\n    this.props.listItem.forEach(u => {\n      if (userStore.selectedUserIds[u.user_id]) {\n        this.selectedUserItems[u.user_id] = u\n      }\n    })\n    BackgroundTimer.setTimeout(() => this.setState({ didMount: true }), 300)\n  }\n\n  render() {\n    return (\n      <Layout\n        fabOnBack={Nav().goToPageContactEdit}\n        fabOnNext={this.create}\n        fabOnNextText={intl`SAVE`}\n        onBack={Nav().backToPageContactEdit}\n        title={intl`Add/Remove Contact`}\n      >\n        <Field\n          label={intl`GROUP NAME`}\n          value={this.props.groupName}\n          disabled={true}\n        />\n        <Field isGroup label={intl`Members`} disabled={true} />\n        {!this.state.didMount ? (\n          <ActivityIndicator size='large' />\n        ) : (\n          <FlatList\n            data={userStore.dataListAllUser}\n            renderItem={({ item, index }: { item: UcBuddy; index: number }) => (\n              <RenderItem\n                item={item}\n                index={index}\n                selectedUsers={this.selectedUserItems}\n              />\n            )}\n            keyExtractor={item => item.user_id}\n          />\n        )}\n      </Layout>\n    )\n  }\n\n  selectUser = (item: UcBuddy) => {\n    if (this.selectedUserItems[item.user_id]) {\n      delete this.selectedUserItems[item.user_id]\n    } else {\n      this.selectedUserItems[item.user_id] = item\n    }\n  }\n\n  create = () => {\n    const listItemRemoved = this.props.listItem.filter(\n      itm => !this.selectedUserItems[itm.user_id],\n    )\n    userStore.editGroup(\n      this.props.groupName,\n      listItemRemoved,\n      this.selectedUserItems,\n    )\n    RnDropdown.setShouldUpdatePosition(true)\n    Nav().backToPageContactEdit()\n  }\n}\n\nconst RenderItem = observer(\n  ({\n    item,\n    index,\n    selectedUsers,\n  }: {\n    item: UcBuddy\n    index: number\n    selectedUsers: { [k: string]: UcBuddy }\n  }) => {\n    const selectUser = (i: UcBuddy) => {\n      if (selectedUsers[item.user_id]) {\n        delete selectedUsers[item.user_id]\n      } else {\n        selectedUsers[item.user_id] = item\n      }\n    }\n    return (\n      <View key={`PageContactGroupEdit-${item.user_id}-${index}`}>\n        <RnTouchableOpacity\n          style={css.loadingIcon}\n          onPress={() => selectUser(item)}\n        >\n          <UserItem\n            id={item.user_id}\n            name={item.name || item.user_id}\n            avatar={item.profile_image_url}\n            isSelected={!!selectedUsers[item.user_id]}\n            onSelect={() => selectUser(item)}\n            isSelection\n          />\n        </RnTouchableOpacity>\n      </View>\n    )\n  },\n)\n","import { debounce, isEmpty, orderBy } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component, Fragment } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { pbx } from '../api/pbx'\nimport {\n  mdiBriefcase,\n  mdiCellphone,\n  mdiHome,\n  mdiInformation,\n  mdiMagnify,\n  mdiPhone,\n} from '../assets/icons'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore, Phonebook } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnPicker } from '../stores/RnPicker'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\n\nconst css = StyleSheet.create({\n  Loading: {\n    marginTop: 20,\n  },\n})\n\n@observer\nexport class PageContactPhonebook extends Component {\n  componentDidMount() {\n    contactStore.getManageItems()\n    const id = BackgroundTimer.setInterval(() => {\n      if (!pbx.client) {\n        return\n      }\n      contactStore.loadContactsFirstTime()\n      BackgroundTimer.clearInterval(id)\n    }, 1000)\n  }\n  componentWillUnmount() {\n    if (contactStore.isDeleteState) {\n      contactStore.isDeleteState = false\n      contactStore.selectedContactIds = {}\n    }\n  }\n  update = (id: string) => {\n    const contact = contactStore.getPhonebookById(id)\n    if (contact?.loaded) {\n      Nav().goToPagePhonebookUpdate({\n        contact,\n      })\n    } else {\n      this.loadContactDetail(id, (ct: Phonebook) => {\n        Nav().goToPagePhonebookUpdate({\n          contact: ct,\n        })\n      })\n    }\n  }\n\n  loadContactDetail = (id: string, cb: Function) => {\n    pbx\n      .getContact(id)\n      .then(ct => {\n        if (!ct) {\n          return\n        }\n        const x = {\n          ...ct,\n          loaded: true,\n        }\n        contactStore.upsertPhonebook(x as Phonebook)\n        cb(x)\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to load contact detail for ${id}`,\n          err,\n        })\n      })\n  }\n\n  callRequest = (number: string, u: Phonebook) => {\n    if (number !== '') {\n      getCallStore().startCall(number.replace(/\\s+/g, ''))\n    } else {\n      this.update(u.id)\n      RnAlert.error({\n        message: intlDebug`This contact doesn't have any phone number`,\n      })\n    }\n  }\n\n  onIcon0 = (u0: Phonebook) => {\n    if (!u0) {\n      return\n    }\n\n    const onIcon0 = (u: Phonebook) => {\n      if (!u) {\n        return\n      }\n      if (!u.info.$tel_work && !u.info.$tel_home && !u.info.$tel_mobile) {\n        this.callRequest('', u)\n        return\n      }\n      const numbers: {\n        key: string\n        value: string\n        icon: string\n      }[] = []\n      if (u.info.$tel_work) {\n        numbers.push({\n          key: 'workNumber',\n          value: u.info.$tel_work,\n          icon: mdiBriefcase,\n        })\n      }\n      if (u.info.$tel_mobile) {\n        numbers.push({\n          key: 'cellNumber',\n          value: u.info.$tel_mobile,\n          icon: mdiCellphone,\n        })\n      }\n      if (u.info.$tel_home) {\n        numbers.push({\n          key: 'homeNumber',\n          value: u.info.$tel_home,\n          icon: mdiHome,\n        })\n      }\n      if (numbers.length === 1) {\n        this.callRequest(numbers[0].value, u)\n        return\n      }\n      RnPicker.open({\n        options: numbers.map(i => ({\n          key: i.value,\n          label: i.value,\n          icon: i.icon,\n        })),\n        onSelect: (e: string) => this.callRequest(e, u),\n      })\n    }\n    if (u0.loaded) {\n      onIcon0(u0)\n      return\n    }\n    this.loadContactDetail(u0.id, () => {\n      onIcon0(u0)\n    })\n  }\n\n  updateSearchText = (v: string) => {\n    // TODO use debounced value to perform data filter\n    contactStore.phonebookSearchTerm = v\n    this.updateListPhoneBook()\n    contactStore.selectedContactIds = {}\n  }\n\n  updateListPhoneBook = debounce(() => {\n    contactStore.offset = 0\n    contactStore.loadContacts()\n  }, 500)\n  onDelete = async () => {\n    if (isEmpty(contactStore.selectedContactIds)) {\n      return\n    }\n    try {\n      const result = await pbx.deleteContact(\n        Object.keys(contactStore.selectedContactIds),\n      )\n      if (result?.succeeded?.length) {\n        contactStore.removeContacts(result.succeeded)\n      }\n      contactStore.selectedContactIds = {}\n    } catch (err) {\n      RnAlert.error({\n        message: intlDebug`Failed to delete contact`,\n        err: err as Error,\n      })\n    }\n  }\n  onCancel = () => {\n    contactStore.isDeleteState = false\n    contactStore.selectedContactIds = {}\n  }\n  render() {\n    const phonebooks = contactStore.phoneBooks\n    const map = {} as { [k: string]: Phonebook[] }\n    phonebooks.forEach(u => {\n      let c0 = u?.display_name?.charAt(0).toUpperCase()\n      if (!/[A-Z]/.test(c0)) {\n        c0 = '#'\n      }\n      if (!map[c0]) {\n        map[c0] = []\n      }\n      map[c0].push(u)\n    })\n\n    let groups = Object.keys(map).map(k => ({\n      key: k,\n      phonebooks: map[k],\n    }))\n\n    groups = orderBy(groups, 'key')\n    groups.forEach(gr => {\n      gr.phonebooks = orderBy(gr.phonebooks, 'name')\n    })\n    const optionDelete = [\n      {\n        label:\n          intl`Delete ` +\n          `(${Object.keys(contactStore.selectedContactIds).length})`,\n        onPress: this.onDelete,\n      },\n      {\n        label: intl`Cancel`,\n        onPress: this.onCancel,\n      },\n    ]\n    const options = [\n      {\n        label: intl`Create new contact`,\n        onPress: Nav().goToPagePhonebookCreate,\n      },\n      {\n        label: intl`Delete contacts`,\n        onPress: () => {\n          contactStore.isDeleteState = true\n        },\n      },\n      {\n        label: intl`Reload`,\n        onPress: contactStore.loadContacts,\n      },\n    ]\n\n    return (\n      <Layout\n        description={intl`Your phonebook contacts`}\n        dropdown={contactStore.isDeleteState ? optionDelete : options}\n        menu='contact'\n        subMenu='phonebook'\n        title={intl`Phonebook`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH CONTACTS`}\n          onValueChange={this.updateSearchText}\n          value={contactStore.phonebookSearchTerm}\n        />\n        <View>\n          {groups.map(gr => (\n            <Fragment key={gr.key}>\n              <Field isGroup label={gr.key} />\n              {gr.phonebooks.map((u, i) =>\n                contactStore.isDeleteState ? (\n                  <RnTouchableOpacity\n                    onPress={() => contactStore.selectContactId(u.id)}\n                    disabled={u.shared}\n                  >\n                    <UserItem\n                      key={i}\n                      name={u?.display_name || intl`<Unnamed>`}\n                      isSelection\n                      isSelected={contactStore.selectedContactIds[u.id]}\n                      disabled={u.shared}\n                      onSelect={() => contactStore.selectContactId(u.id)}\n                    />\n                  </RnTouchableOpacity>\n                ) : (\n                  <UserItem\n                    iconFuncs={[() => this.onIcon0(u), () => this.update(u.id)]}\n                    icons={[mdiPhone, mdiInformation]}\n                    key={i}\n                    phonebook={`${u.phonebook}${u.shared ? 'Ⓢ' : ''}`}\n                    name={`${u?.display_name || intl`<Unnamed>`}`}\n                  />\n                ),\n              )}\n            </Fragment>\n          ))}\n        </View>\n        {contactStore.loading ? (\n          <RnText\n            style={css.Loading}\n            warning\n            small\n            normal\n            center\n          >{intl`Loading...`}</RnText>\n        ) : contactStore.hasLoadmore ? (\n          <RnTouchableOpacity onPress={contactStore.loadMoreContacts}>\n            <RnText\n              style={css.Loading}\n              primary\n              small\n              normal\n              center\n            >{intl`Load more contacts`}</RnText>\n          </RnTouchableOpacity>\n        ) : null}\n      </Layout>\n    )\n  }\n}\n","import { orderBy, uniq } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { SectionList } from 'react-native'\n\nimport { mdiMagnify, mdiPhone, mdiVideo } from '../assets/icons'\nimport { ContactSectionList } from '../components/ContactSectionList'\nimport { UserItem } from '../components/ContactUserItem'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/RnTouchableOpacity'\nimport { accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { getCallStore } from '../stores/callStore'\nimport { ChatMessage, chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { userStore } from '../stores/userStore'\nimport { DelayFlag } from '../utils/DelayFlag'\nimport { filterTextOnly } from '../utils/formatChatContent'\n\n@observer\nexport class PageContactUsers extends Component {\n  displayOfflineUsers = new DelayFlag()\n\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n\n  getMatchUserIds() {\n    const userIds = uniq([\n      ...contactStore.pbxUsers.map(u => u.id),\n      ...contactStore.ucUsers.map(u => u.id),\n    ])\n    return userIds.filter(this.isMatchUser)\n  }\n  resolveUser = (id: string) => {\n    const pbxUser = contactStore.getPbxUserById(id) || {}\n    const ucUser = contactStore.getUcUserById(id) || {}\n    const u = {\n      ...pbxUser,\n      ...ucUser,\n    }\n    return u\n  }\n  isMatchUser = (id: string) => {\n    if (!id) {\n      return false\n    }\n    let userId = id\n    let pbxUserName: string\n    const pbxUser = contactStore.getPbxUserById(id)\n    if (pbxUser) {\n      pbxUserName = pbxUser.name\n    } else {\n      pbxUserName = ''\n    }\n    let ucUserName: string\n    const ucUser = contactStore.getUcUserById(id)\n    if (ucUser) {\n      ucUserName = ucUser.name\n    } else {\n      ucUserName = ''\n    }\n    //\n    userId = userId.toLowerCase()\n    pbxUserName = pbxUserName.toLowerCase()\n    ucUserName = ucUserName.toLowerCase()\n    const txt = contactStore.usersSearchTerm.toLowerCase()\n    return (\n      userId.includes(txt) ||\n      pbxUserName.includes(txt) ||\n      ucUserName.includes(txt)\n    )\n  }\n\n  componentDidUpdate() {\n    const cp = getAuthStore().getCurrentAccount()\n    if (this.displayOfflineUsers.enabled !== cp?.displayOfflineUsers) {\n      this.displayOfflineUsers.setEnabled(cp?.displayOfflineUsers)\n    }\n  }\n  getDescription = (isUserSelectionMode: boolean) => {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return ''\n    }\n    if (!isUserSelectionMode) {\n      const allUsers = this.getMatchUserIds().map(this.resolveUser)\n      const onlineUsers = allUsers.filter(\n        i => i.status && i.status !== 'offline',\n      )\n      let desc = intl`Users, ${allUsers.length} total`\n      if (allUsers.length && cp.ucEnabled) {\n        desc = desc.replace(\n          intl`${allUsers.length} total`,\n          intl`${onlineUsers.length}/${allUsers.length} online`,\n        )\n      }\n      return desc\n    } else {\n      const searchTxt = contactStore.usersSearchTerm.toLowerCase()\n      const isShowOfflineUser =\n        !cp.ucEnabled || this.displayOfflineUsers.enabled\n      const { totalContact = 0, totalOnlineContact = 0 } = userStore.filterUser(\n        searchTxt,\n        isShowOfflineUser,\n      )\n      let desc = intl`Users, ${totalContact} total`\n      if (cp.ucEnabled) {\n        desc = desc.replace(\n          intl`${totalContact} total`,\n          intl`${totalOnlineContact}/${totalContact} online`,\n        )\n      }\n      return desc\n    }\n  }\n  renderUserSelectionMode = () => {\n    const searchTxt = contactStore.usersSearchTerm.toLowerCase()\n    const isShowOfflineUser =\n      !getAuthStore().getCurrentAccount()?.ucEnabled ||\n      this.displayOfflineUsers.enabled\n    const { displayUsers } = userStore.filterUser(searchTxt, isShowOfflineUser)\n    return <ContactSectionList sectionListData={displayUsers} />\n  }\n  renderAllUserMode = () => {\n    const cp = getAuthStore().getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const allUsers = this.getMatchUserIds().map(this.resolveUser)\n    const onlineUsers = allUsers.filter(i => i.status && i.status !== 'offline')\n    type User = typeof allUsers[0]\n    const displayUsers =\n      !this.displayOfflineUsers.enabled && cp.ucEnabled ? onlineUsers : allUsers\n    const map = {} as { [k: string]: User[] }\n    displayUsers.forEach(u => {\n      u.name = u.name || u.id || ''\n      let c0 = u.name.charAt(0).toUpperCase()\n      if (!/[A-Z]/.test(c0)) {\n        c0 = '#'\n      }\n      if (!map[c0]) {\n        map[c0] = []\n      }\n      map[c0].push(u)\n    })\n    let groups = Object.keys(map).map(k => ({\n      title: k,\n      data: map[k],\n    }))\n    groups = orderBy(groups, 'title')\n    groups.forEach(gr => {\n      gr.data = orderBy(gr.data, 'name')\n    })\n    return (\n      <SectionList\n        sections={groups}\n        keyExtractor={(item, index) => item.id}\n        renderItem={({\n          item,\n          index,\n        }: {\n          item: ItemUser['item']\n          index: number\n        }) => <RenderItemUser item={item} index={index} />}\n        renderSectionHeader={({ section: { title } }) => (\n          // TODO move to a new component with observer\n          <Field isGroup label={title} />\n        )}\n      />\n    )\n  }\n\n  render() {\n    const s = getAuthStore()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return null\n    }\n    const isUserSelectionMode = s.isBigMode() || !cp.pbxLocalAllUsers\n    const description = this.getDescription(isUserSelectionMode)\n    return (\n      <Layout\n        description={description}\n        dropdown={[\n          {\n            label: intl`Edit buddy list`,\n            onPress: Nav().goToPageContactEdit,\n          },\n        ]}\n        menu='contact'\n        subMenu='users'\n        title={intl`Users`}\n      >\n        <Field\n          icon={mdiMagnify}\n          label={intl`SEARCH FOR USERS`}\n          onValueChange={(v: string) => {\n            // TODO use debounced value to perform data filter\n            contactStore.usersSearchTerm = v\n          }}\n          value={contactStore.usersSearchTerm}\n        />\n        {getAuthStore().getCurrentAccount()?.ucEnabled && (\n          <Field\n            label={intl`SHOW OFFLINE USERS`}\n            onValueChange={(v: boolean) => {\n              accountStore.upsertAccount({\n                id: getAuthStore().signedInId,\n                displayOfflineUsers: v,\n              })\n            }}\n            type='Switch'\n            value={cp.displayOfflineUsers}\n          />\n        )}\n        {isUserSelectionMode\n          ? this.renderUserSelectionMode()\n          : this.renderAllUserMode()}\n      </Layout>\n    )\n  }\n}\n\nconst getLastMessageChat = (id: string) => {\n  const chats = filterTextOnly(chatStore.getMessagesByThreadId(id))\n  return chats.length ? chats[chats.length - 1] : ({} as ChatMessage)\n}\ntype ItemUser = {\n  item: {\n    id: string\n  }\n  index: number\n}\nconst RenderItemUser = observer(({ item, index }: ItemUser) => (\n  // TODO move to a new component with observer\n  <RnTouchableOpacity\n    key={index}\n    onPress={\n      getAuthStore().getCurrentAccount()?.ucEnabled\n        ? () => Nav().goToPageChatDetail({ buddy: item.id })\n        : undefined\n    }\n  >\n    <UserItem\n      iconFuncs={[\n        () => getCallStore().startVideoCall(item.id),\n        () => getCallStore().startCall(item.id),\n      ]}\n      icons={[mdiVideo, mdiPhone]}\n      lastMessage={getLastMessageChat(item.id)?.text}\n      {...item}\n    />\n  </RnTouchableOpacity>\n))\n","import { action, observable } from 'mobx'\n\nimport { BackgroundTimer } from './BackgroundTimer'\n\nexport class DelayFlag {\n  @observable enabled = false\n  timeoutId = 0\n\n  setEnabled = (enabled?: boolean) => {\n    if (this.timeoutId) {\n      BackgroundTimer.clearTimeout(this.timeoutId)\n    }\n    this.timeoutId = BackgroundTimer.setTimeout(\n      action(() => {\n        this.enabled = !!enabled\n        this.timeoutId = 0\n      }),\n      300,\n    )\n  }\n}\n","import { isEmpty } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { pbx } from '../api/pbx'\nimport { ContactsCreateForm } from '../components/ContactCreateForm'\nimport { getAuthStore } from '../stores/authStore'\nimport { ContactInfo, contactStore, Phonebook } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PagePhonebookCreate extends Component<{\n  phonebook?: string\n}> {\n  render() {\n    return (\n      <ContactsCreateForm\n        phonebook={this.props.phonebook}\n        onBack={Nav().backToPageContactPhonebook}\n        onSave={(p: ContactInfo) => {\n          if (pbx.client && getAuthStore().pbxState === 'success') {\n            this.save(p)\n          }\n        }}\n        title={intl`New Phonebook`}\n      />\n    )\n  }\n\n  save = (p: ContactInfo) => {\n    if (isEmpty(p)) {\n      return\n    }\n    const phonebook = p.phonebook\n    delete p.phonebook\n    const contact = {\n      display_name: contactStore.getManagerContact(p.$lang)?.toDisplayName(p),\n      phonebook,\n      shared: false, // admin can't login on brekeke phone => share = false\n      info: p,\n    } as Phonebook\n\n    pbx\n      .setContact(contact)\n      .then(val => {\n        if (!val) {\n          return\n        }\n        contactStore.upsertPhonebook(\n          Object.assign(contact, {\n            id: val.aid,\n          }),\n        )\n      })\n      .then(this.onSaveSuccess)\n      .catch(this.onSaveFailure)\n  }\n  onSaveSuccess = () => {\n    Nav().goToPageContactPhonebook()\n  }\n  onSaveFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to save the contact`,\n      err,\n    })\n  }\n}\n","import { isEmpty } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { pbx } from '../api/pbx'\nimport { ContactsCreateForm } from '../components/ContactCreateForm'\nimport { getAuthStore } from '../stores/authStore'\nimport { ContactInfo, contactStore, Phonebook } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PagePhonebookUpdate extends Component<{\n  contact: Phonebook\n}> {\n  render() {\n    return (\n      <ContactsCreateForm\n        onBack={Nav().backToPageContactPhonebook}\n        onSave={(p: ContactInfo, hasUnsavedChanges: boolean) => {\n          if (pbx.client && getAuthStore().pbxState === 'success') {\n            this.save(p, hasUnsavedChanges)\n          }\n        }}\n        title={intl`Update Phonebook`}\n        updatingPhonebook={this.props.contact}\n      />\n    )\n  }\n\n  save = (p: ContactInfo, hasUnsavedChanges: boolean) => {\n    if (!hasUnsavedChanges) {\n      Nav().goToPageContactPhonebook()\n      return\n    }\n    if (isEmpty(p)) {\n      return\n    }\n    const phonebook = p.phonebook\n    delete p.phonebook\n\n    const contactUpdate = {\n      id: this.props.contact.id,\n      display_name: contactStore.getManagerContact(p.$lang)?.toDisplayName(p),\n      phonebook,\n      shared: !!this.props.contact?.shared,\n      info: { ...p },\n    } as Phonebook\n    pbx\n      .setContact(contactUpdate)\n      .then(() => this.onSaveSuccess(contactUpdate))\n      .catch(this.onSaveFailure)\n  }\n  onSaveSuccess = (phonebook: Phonebook) => {\n    Nav().goToPageContactPhonebook()\n    contactStore.upsertPhonebook(phonebook)\n  }\n  onSaveFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to save the contact`,\n      err,\n    })\n  }\n}\n","import { observer } from 'mobx-react'\n\nimport { AccountCreateForm } from '../components/AccountCreateForm'\nimport { Account, accountStore } from '../stores/accountStore'\nimport { getAuthStore } from '../stores/authStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\n\nexport const PageSettingsCurrentAccount = observer(() => (\n  <AccountCreateForm\n    footerLogout\n    onBack={Nav().backToPageContactUsers}\n    onSave={(p: Account, hasUnsavedChanges: boolean) => {\n      if (!hasUnsavedChanges) {\n        Nav().backToPageContactPhonebook()\n      }\n      RnAlert.prompt({\n        title: intl`Save Account`,\n        message: intl`Do you want to update your account?\\nYou'll need to sign out and then sign in again.`,\n        onConfirm: () => {\n          accountStore.upsertAccount(p)\n          Nav().goToPageAccountSignIn()\n          BackgroundTimer.setTimeout(() => getAuthStore().signIn(p), 300)\n        },\n        confirmText: intl`SAVE`,\n      })\n    }}\n    title={intl`Current Account`}\n    updating={getAuthStore().getCurrentAccount()}\n  />\n))\n","import filesize from 'filesize'\nimport { observer } from 'mobx-react'\nimport moment from 'moment'\nimport { Component } from 'react'\nimport { Platform, StyleSheet } from 'react-native'\n\nimport { mdiKeyboardBackspace } from '../assets/icons'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/Rn'\nimport { currentVersion } from '../components/variables'\nimport { compareSemVer, debugStore } from '../stores/debugStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nconst css = StyleSheet.create({\n  BtnIcon: {\n    transform: [\n      {\n        rotate: '180deg',\n      },\n    ],\n  },\n  Text: {\n    paddingHorizontal: 20,\n  },\n})\n\n@observer\nexport class PageSettingsDebug extends Component {\n  render() {\n    const isUpdateAvailable =\n      Platform.OS !== 'web' &&\n      compareSemVer(debugStore.remoteVersion, currentVersion) > 0\n    return (\n      <Layout\n        description={intl`App information and debugging`}\n        dropdown={\n          Platform.OS !== 'web'\n            ? [\n                {\n                  label: intl`Clear all log files`,\n                  onPress: debugStore.clearLogFiles,\n                  danger: true,\n                },\n                {\n                  label: intl`Manually check for update`,\n                  onPress: debugStore.checkForUpdate,\n                },\n              ]\n            : undefined\n        }\n        onBack={Nav().backToPageAccountSignIn}\n        title={intl`Debug`}\n      >\n        {Platform.OS !== 'web' && (\n          <>\n            <Field isGroup label={intl`DEBUG LOG`} />\n            <Field\n              label={intl`CAPTURE ALL DEBUG LOG`}\n              onValueChange={debugStore.toggleCaptureDebugLog}\n              type='Switch'\n              value={debugStore.captureDebugLog}\n            />\n            <Field\n              createBtnIcon={mdiKeyboardBackspace}\n              createBtnIconStyle={css.BtnIcon}\n              label={intl`OPEN DEBUG LOG`}\n              onCreateBtnPress={debugStore.openLogFile}\n              onTouchPress={debugStore.openLogFile}\n              value={filesize(debugStore.getLogSize(), { round: 0 })}\n            />\n\n            <Field hasMargin isGroup label={intl`UPDATE`} />\n            <Field\n              createBtnIcon={mdiKeyboardBackspace}\n              createBtnIconStyle={css.BtnIcon}\n              label={intl`UPDATE`}\n              onCreateBtnPress={debugStore.openInStore}\n              onTouchPress={debugStore.openInStore}\n              value={intl`Open Brekeke Phone on store`}\n            />\n            <RnText\n              normal\n              primary={!isUpdateAvailable}\n              small\n              style={css.Text}\n              warning={isUpdateAvailable}\n            >\n              {intl`Current version: ${currentVersion}`}\n              {'\\n'}\n              {debugStore.isCheckingForUpdate\n                ? intl`Checking for update...`\n                : isUpdateAvailable\n                ? intl`A new version is available: ${debugStore.remoteVersion}`\n                : intl`Brekeke Phone is up-to-date, checked ${moment(\n                    debugStore.remoteVersionLastCheck,\n                  ).fromNow()}`}\n            </RnText>\n          </>\n        )}\n        {Platform.OS === 'web' && (\n          <>\n            <RnText normal primary small style={css.Text}>\n              {intl`Current version: ${currentVersion}`}\n            </RnText>\n            <RnText normal warning small style={css.Text}>\n              {intl`You are running an in-browser version of Web Phone`}\n            </RnText>\n          </>\n        )}\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { Platform } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { mdiCheck, mdiTranslate } from '../assets/icons'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { getAuthStore } from '../stores/authStore'\nimport { debugStore } from '../stores/debugStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { RnAlert } from '../stores/RnAlert'\n\n@observer\nexport class PageSettingsOther extends Component {\n  state = {\n    status: '',\n    statusText: '',\n  }\n  componentDidMount() {\n    const me = uc.me()\n    this.setState({\n      status: me.status,\n      statusText: me.statusText,\n    })\n  }\n  setStatusText = (statusText: string) => {\n    this.setState({ statusText })\n  }\n  submitStatusText = () => {\n    this.setStatus(this.state.status, this.state.statusText)\n  }\n  submitStatus = (status: string) => {\n    this.setStatus(status, this.state.statusText)\n  }\n  setStatus = (status: string, statusText: string) => {\n    uc.setStatus(status, statusText)\n      .then(() => {\n        const me = uc.me()\n        this.setState({\n          status: me.status,\n          statusText: me.statusText,\n        })\n      })\n      .catch((err: Error) => {\n        RnAlert.error({\n          message: intlDebug`Failed to change UC status`,\n          err,\n        })\n      })\n  }\n  render() {\n    const as = getAuthStore()\n    const cp = as.getCurrentAccount()\n    return (\n      <Layout\n        description={intl`Other settings for PBX/UC`}\n        dropdown={[\n          ...(as.isConnFailure()\n            ? [\n                {\n                  label: intl`Reconnect to server`,\n                  onPress: as.resetFailureStateIncludeUcLoginFromAnotherPlace,\n                },\n              ]\n            : []),\n          ...(Platform.OS !== 'web'\n            ? [\n                {\n                  label: intl`Open debug log`,\n                  onPress: debugStore.openLogFile,\n                },\n              ]\n            : []),\n          {\n            label: intl`Logout`,\n            onPress: as.signOut,\n            danger: true,\n          },\n        ]}\n        menu='settings'\n        subMenu='other'\n        title={intl`Other Settings`}\n      >\n        <Field isGroup label={intl`LOCALIZATION`} />\n        <Field\n          icon={mdiTranslate}\n          label={intl`LANGUAGE`}\n          onTouchPress={intlStore.selectLocale}\n          value={intlStore.locale}\n          valueRender={() => intlStore.getLocaleName()}\n        />\n        {cp?.ucEnabled && (\n          <>\n            <Field isGroup label={intl`UC`} />\n            <Field\n              disabled={!cp.ucEnabled}\n              label={intl`STATUS`}\n              onValueChange={this.submitStatus}\n              options={[\n                { key: 'online', label: intl`Online` },\n                { key: 'offline', label: intl`Invisible` },\n                { key: 'busy', label: intl`Busy` },\n              ]}\n              type='RnPicker'\n              value={this.state.status}\n            />\n            <Field\n              createBtnIcon={mdiCheck}\n              disabled={!cp.ucEnabled}\n              label={intl`STATUS NOTE`}\n              onCreateBtnPress={this.submitStatusText}\n              onSubmitEditing={this.submitStatusText}\n              onValueChange={this.setStatusText}\n              value={this.state.statusText}\n            />\n          </>\n        )}\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { ListWebchats } from '../components/ChatListWebchats'\nimport { Field } from '../components/Field'\nimport { Layout } from '../components/Layout'\nimport { RnText } from '../components/Rn'\nimport { chatStore } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\n@observer\nexport class PageWebChat extends Component {\n  render() {\n    const arr = chatStore.groups.filter(group => group.webchat)\n    return (\n      <Layout\n        description={intl`UC recent active chat`}\n        dropdown={[\n          {\n            label: intl`Create group chat`,\n            onPress: Nav().goToPageChatGroupCreate,\n          },\n        ]}\n        menu='contact'\n        subMenu='webchat'\n        title={intl`WebChat`}\n      >\n        <Field isGroup label={intl`WEBCHAT THREADS`} />\n        {!arr.length && (\n          <RnText center normal small warning style={{ marginTop: 5 }}>\n            {intl`There's no active chat thread`}\n          </RnText>\n        )}\n        <ListWebchats datas={arr} />\n      </Layout>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { FC } from 'react'\n\nimport { ChatGroup } from '../stores/chatStore'\nimport { WebchatItem } from './WebchatItem'\n\nexport const ListWebchats: FC<{\n  datas: ChatGroup[]\n}> = observer(p => (\n  <>\n    {p.datas.map(\n      (item: ChatGroup) =>\n        item.webchat && <WebchatItem key={item.id} data={item.webchat} />,\n    )}\n  </>\n))\n","import { observer } from 'mobx-react'\nimport { FC, useCallback } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { Conference } from '../api/brekekejs'\nimport { Constants, uc } from '../api/uc'\nimport { mdiClose } from '../assets/icons'\nimport { chatStore } from '../stores/chatStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Row: {\n    flexDirection: 'row',\n    paddingHorizontal: 5,\n    alignItems: 'center',\n    borderBottomWidth: 0.5,\n    borderBottomColor: v.borderBg,\n  },\n  Column: {\n    // flex:1,\n    padding: 5,\n  },\n  BtnText: {\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    minWidth: 80,\n    backgroundColor: v.colors.primary,\n    borderRadius: 4,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginVertical: 5,\n  },\n  Text: {\n    paddingLeft: 10,\n    paddingHorizontal: 5,\n    paddingVertical: 10,\n    textAlign: 'left',\n    minWidth: 80,\n  },\n  TextMessage: {\n    flex: 1,\n  },\n  icon: {\n    padding: 10,\n  },\n  bgUnread: {\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n})\n\nexport const WebchatItem: FC<{\n  data: Conference\n}> = observer(({ data }) => {\n  // const data = p.webchat\n  // CONF_STATUS_INACTIVE: 0 => disable all , show close\n  // CONF_STATUS_INVITED: 1 => enabled join\n  // CONF_STATUS_JOINED: 2 => enable show\n  // CONF_STATUS_INVITED_WEBCHAT: 5 => enabled answer\n  const messages = chatStore.getMessagesByThreadId(data.conf_id)\n  const isEnabledAnswer =\n    data.conf_status === Constants.CONF_STATUS_INVITED_WEBCHAT\n  const isEnabledJoin = data.conf_status === Constants.CONF_STATUS_INVITED\n  const isDisplayClose = data.conf_status === Constants.CONF_STATUS_INACTIVE\n  const isDisplayShow = data.conf_status === Constants.CONF_STATUS_JOINED\n  const textDisplay = messages.slice(Math.max(messages.length - 5, 0))\n\n  const answerPress = useCallback(() => {\n    uc.answerWebchatConference(data.conf_id)\n    Nav().goToPageChatGroupDetail({ groupId: data.conf_id })\n  }, [data.conf_id])\n\n  const showPress = useCallback(() => {\n    Nav().goToPageChatGroupDetail({ groupId: data.conf_id })\n  }, [data.conf_id])\n\n  const joinPress = useCallback(() => {\n    uc.joinWebchatConference(data.conf_id)\n    Nav().goToPageChatGroupDetail({ groupId: data.conf_id })\n  }, [data.conf_id])\n\n  const closePress = useCallback(() => {\n    chatStore.removeWebchatItem(data.conf_id)\n  }, [data.conf_id])\n\n  return (\n    <View style={[css.Row, isEnabledAnswer ? css.bgUnread : null]}>\n      <View style={css.Column}>\n        {isEnabledAnswer ? (\n          <RnTouchableOpacity onPress={answerPress} style={css.BtnText}>\n            <RnText normal white bold>\n              {intl`Answer`}\n            </RnText>\n          </RnTouchableOpacity>\n        ) : (\n          <RnTouchableOpacity\n            // disabled={!isDisplayShow}\n            onPress={showPress}\n            style={[\n              css.BtnText,\n              { backgroundColor: isDisplayShow ? v.layerBg : v.borderBg },\n            ]}\n          >\n            <RnText normal white bold>\n              {intl`Show`}\n            </RnText>\n          </RnTouchableOpacity>\n        )}\n        <RnTouchableOpacity\n          disabled={!isEnabledJoin}\n          onPress={joinPress}\n          style={[\n            css.BtnText,\n            { backgroundColor: isEnabledJoin ? v.layerBg : v.borderBg },\n          ]}\n        >\n          <RnText normal white bold>\n            {intl`Join`}\n          </RnText>\n        </RnTouchableOpacity>\n      </View>\n      {!isEnabledAnswer ? (\n        <RnText normal singleLine small style={css.Text}>\n          {data.assigned.user_id || ''}\n        </RnText>\n      ) : (\n        <Duration normal singleLine small style={css.Text}>\n          {data.created_tstamp}\n        </Duration>\n      )}\n\n      <RnText normal singleLine small style={css.Text}>\n        {data.webchatinfo.profinfo_formatted || ''}\n      </RnText>\n      <RnText\n        normal\n        small\n        style={[css.Text, css.TextMessage]}\n        // numberOfLines={5}\n      >\n        {textDisplay.map((text, i, { length }) => {\n          return `${text.text}${i === length - 1 ? '' : '\\n'}`\n        })}\n      </RnText>\n      {isDisplayClose && (\n        <RnTouchableOpacity onPress={closePress}>\n          <RnIcon path={mdiClose} style={css.icon} />\n        </RnTouchableOpacity>\n      )}\n    </View>\n  )\n})\n","import { debounce } from 'lodash'\nimport { action, observable, runInAction } from 'mobx'\nimport { AppState, Platform } from 'react-native'\nimport RNCallKeep, { CONSTANTS } from 'react-native-callkeep'\nimport IncallManager from 'react-native-incall-manager'\nimport { v4 as newUuid } from 'uuid'\n\nimport { MakeCallFn, Session } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { checkAndRemovePnTokenViaSip, sip } from '../api/sip'\nimport { uc } from '../api/uc'\nimport { embedApi } from '../embed/embedApi'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { TEvent } from '../utils/callkeep'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { arrToMap } from '../utils/toMap'\nimport { webShowNotification } from '../utils/webShowNotification'\nimport { accountStore } from './accountStore'\nimport { addCallHistory } from './addCallHistory'\nimport { authSIP } from './AuthSIP'\nimport { getAuthStore, reconnectAndWaitSip } from './authStore'\nimport { Call } from './Call'\nimport { setCallStore } from './callStore'\nimport { CancelRecentPn } from './cancelRecentPn'\nimport { intl, intlDebug } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\nimport { RnAppState } from './RnAppState'\nimport { RnStacker } from './RnStacker'\nimport { timerStore } from './timerStore'\n\nexport class CallStore {\n  @observable inPageCallManage?: {\n    isFromCallBar?: boolean\n  } = undefined\n\n  private recentCallActivityAt = 0\n\n  private getCallKeep = (\n    uuid: string,\n    o?: {\n      includingOutgoing?: boolean\n      includingAnswered?: boolean\n      includingRejected?: boolean\n    },\n  ) => {\n    const pnId = this.getPnIdFromUuid(uuid)\n    return this.calls.find(\n      c =>\n        (!pnId || c.pnId === pnId) &&\n        (!c.callkeepUuid || c.callkeepUuid === uuid) &&\n        (o?.includingOutgoing || c.incoming) &&\n        (o?.includingAnswered || (!c.answered && !c.callkeepAlreadyAnswered)) &&\n        (o?.includingRejected || !c.callkeepAlreadyRejected) &&\n        !c.isAboutToHangup,\n    )\n  }\n\n  private autoAnswer = (uuid: string) => {\n    if (Platform.OS === 'ios') {\n      RNCallKeep.answerIncomingCall(uuid)\n    }\n    BrekekeUtils.onCallKeepAction(uuid, 'answerCall')\n  }\n  @action onCallKeepDidDisplayIncomingCall = async (\n    uuid: string,\n    n: ParsedPn,\n  ) => {\n    if (n.sipPn.autoAnswer && !this.calls.some(c => c.callkeepUuid !== uuid)) {\n      if (RnAppState.foregroundOnce && AppState.currentState !== 'active') {\n        RNCallKeep.backToForeground()\n      }\n      BackgroundTimer.setTimeout(() => this.autoAnswer(uuid), 2000)\n    }\n    this.setAutoEndCallKeepTimer(uuid, n)\n    checkAndRemovePnTokenViaSip(n)\n    // Find the current incoming call which is not callkeep\n    // Assign the data and config\n    const c = this.getCallKeep(uuid)\n    if (c) {\n      c.callkeepUuid = uuid\n      BrekekeUtils.setCallConfig(uuid, JSON.stringify(c.callConfig))\n    }\n    // Check if call is rejected already\n    const rejected = this.isCallRejected({\n      callkeepUuid: uuid,\n      pnId: n.id,\n    })\n    // Check if call is expired already\n    let expired = false\n    const d = await accountStore.findDataByPn(n)\n    const pnExpires = Number(d?.pnExpires) || 50000 // default to 50s\n    const now = Date.now()\n    if (n.time) {\n      expired = now > n.time + pnExpires\n    }\n    console.log(\n      `SIP PN debug: onCallKeepDidDisplayIncomingCall uuid=${uuid} pnId=${n.id} sessionId=${c?.id} rejected=${rejected} now=${now} n.time=${n.time} pnExpires=${pnExpires} expired=${expired}`,\n    )\n    if (rejected || expired) {\n      this.endCallKeep(uuid)\n      return\n    }\n    // Auto reconnect if no activity\n    // This logic is about the case connection has dropped silently\n    // So even if sipState is `success` but the connection has dropped\n    // We just drop the connection no matter if it is alive or not\n    // Then construct a new connection to receive the call as quickly as possible\n    if (now - this.recentCallActivityAt > 3000) {\n      const as = getAuthStore()\n      if (as.sipState === 'connecting') {\n        return\n      }\n      const count = sip.phone?.getSessionCount()\n      if (!count) {\n        console.log(\n          `SIP PN debug: new notification: phone.getSessionCount()=${count} | call destroyWebRTC()`,\n        )\n        as.sipState = 'stopped'\n        sip.destroyWebRTC()\n        authSIP.authWithCheck()\n      }\n    }\n  }\n  @action onCallKeepAnswerCall = (uuid: string) => {\n    this.setCallKeepAction({ callkeepUuid: uuid }, 'answerCall')\n    const c = this.getCallKeep(uuid)\n    console.log(`SIP PN debug: onCallKeepAnswerCall found: ${!!c}`)\n    if (c && !c.callkeepAlreadyAnswered) {\n      c.callkeepAlreadyAnswered = true\n      c.answer()\n    }\n  }\n  @action onCallKeepEndCall = (uuid: string) => {\n    this.setCallKeepAction({ callkeepUuid: uuid }, 'rejectCall')\n    const c = this.getCallKeep(uuid, {\n      includingAnswered: true,\n      includingRejected: Platform.OS === 'android',\n      includingOutgoing: Platform.OS === 'ios',\n    })\n    console.log(`SIP PN debug: onCallKeepEndCall found: ${!!c}`)\n    if (c) {\n      c.callkeepAlreadyRejected = true\n      c.hangupWithUnhold()\n    }\n    this.endCallKeep(uuid)\n  }\n\n  @observable calls: Call[] = []\n  @observable currentCallId: string = ''\n\n  getCurrentCall = () => {\n    this.updateCurrentCallDebounce()\n    const curr = this.calls.find(c => c.id === this.currentCallId)\n    // TODO:\n    // Should not modify state in getter\n    // This will throw an error in mobx-react\n    // Currently we forked mobx-react to temporary get over this error\n    // In the future we need to rewrite and refactor the whole stores/actions\n    if (curr) {\n      const ucEnabled = getAuthStore()?.getCurrentAccount()?.ucEnabled\n      if (\n        !curr.answered &&\n        (!curr.partyImageUrl || !curr.partyImageUrl?.length)\n      ) {\n        curr.partyImageUrl = ucEnabled\n          ? this.getOriginalUserImageUrl(curr.pbxTenant, curr.partyNumber)\n          : ''\n        curr.partyImageSize = ucEnabled ? 'large' : ''\n      }\n      if (\n        curr.answered &&\n        (!curr.talkingImageUrl || !curr.talkingImageUrl.length)\n      ) {\n        curr.talkingImageUrl = ucEnabled\n          ? this.getOriginalUserImageUrl(curr.pbxTenant, curr.partyNumber)\n          : ''\n      }\n    }\n    return curr\n  }\n\n  @action updateCallAvatar = (url: string, size?: string) => {\n    const c = this.getCurrentCall()\n    if (c) {\n      c.partyImageUrl = url\n      c.partyImageSize = size || 'small'\n    }\n  }\n\n  private getOriginalUserImageUrl = (tenant: string, name: string): string => {\n    if (!tenant || !name) {\n      return ''\n    }\n    const a = getAuthStore().getCurrentAccount()\n    if (!a) {\n      return ''\n    }\n    const { pbxHostname, pbxPort } = a\n    let ucHost = `${pbxHostname}:${pbxPort}`\n    if (ucHost.indexOf(':') < 0) {\n      ucHost += ':443'\n    }\n    const ucScheme = ucHost.endsWith(':80') ? 'http' : 'https'\n    const baseUrl = `${ucScheme}://${ucHost}`\n    return `${baseUrl}/uc/image?ACTION=DOWNLOAD&tenant=${tenant}&user=${name}&SIZE=ORIGINAL`\n  }\n\n  private incallManagerStarted = false\n  onCallUpsert: CallStore['upsertCall'] = c => {\n    this.upsertCall(c)\n    if (\n      Platform.OS === 'android' &&\n      !this.incallManagerStarted &&\n      this.calls.find(_ => _.answered || !_.incoming)\n    ) {\n      this.incallManagerStarted = true\n      IncallManager.start()\n      // Reset loud speaker on each call\n      IncallManager.setForceSpeakerphoneOn(false)\n    }\n  }\n  @action private upsertCall = (\n    // partial\n    p: Pick<Call, 'id'> & Partial<Omit<Call, 'id'>>,\n  ) => {\n    this.updateCurrentCallDebounce()\n    const now = Date.now()\n    this.recentCallActivityAt = now\n    //\n    // existing\n    const e = this.calls.find(c => c.id === p.id)\n    if (e) {\n      if (p.callConfig) {\n        // Merge new config with current config instead of replacing\n        Object.assign(e.callConfig, p.callConfig)\n      }\n      delete p.callConfig\n      if (e.callkeepUuid) {\n        BrekekeUtils.setCallConfig(e.callkeepUuid, JSON.stringify(e.callConfig))\n      }\n      if (p.rawSession && e.rawSession) {\n        Object.assign(e.rawSession, p.rawSession)\n        delete p.rawSession\n      }\n      if (\n        p.videoSessionId &&\n        e.videoSessionId &&\n        p.videoSessionId !== e.videoSessionId &&\n        !p.remoteVideoEnabled\n      ) {\n        delete p.videoSessionId\n        delete p.remoteVideoEnabled\n        delete p.remoteVideoStreamObject\n      }\n      if (!e.answered && p.answered) {\n        this.currentCallId = e.id\n        e.answerCallKeep()\n        p.answeredAt = now\n        BrekekeUtils.onCallConnected(e.callkeepUuid)\n      }\n      Object.assign(e, p, {\n        withSDPControls: e.withSDPControls || p.withSDP,\n      })\n      if (e.incoming && e.callkeepUuid) {\n        BrekekeUtils.setRemoteVideoStreamURL(\n          e.callkeepUuid,\n          e.remoteVideoStreamObject ? e.remoteVideoStreamObject.toURL() : '',\n        )\n      }\n      if (e.talkingImageUrl && e.talkingImageUrl.length > 0) {\n        BrekekeUtils.setTalkingAvatar(\n          e.callkeepUuid,\n          e.talkingImageUrl,\n          e.partyImageSize === 'large',\n        )\n      }\n      if (\n        e.incoming &&\n        e.callkeepUuid &&\n        typeof e.localVideoEnabled === 'boolean'\n      ) {\n        BrekekeUtils.setIsVideoCall(e.callkeepUuid, !!e.localVideoEnabled)\n      }\n      // Emit to embed api\n      if (!window._BrekekePhoneWebRoot) {\n        embedApi.emit('call_update', e)\n      }\n      return\n    }\n    //\n    // Construct a new call\n    const c = new Call(this)\n    Object.assign(c, p)\n    this.calls = [c, ...this.calls]\n    this.currentCallId = c.id\n    // Update java and embed api\n    BrekekeUtils.setJsCallsSize(this.calls.length)\n    // Emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('call', c)\n    }\n    // Desktop notification\n    if (Platform.OS === 'web' && c.incoming && !c.answered) {\n      webShowNotification(\n        c.getDisplayName() + ' ' + intl`Incoming call`,\n        c.getDisplayName(),\n      )\n    }\n    // Get and check callkeep if pending incoming call\n    if (Platform.OS === 'web' || !c.incoming || c.answered) {\n      return\n    }\n    c.callkeepUuid = c.callkeepUuid || this.getUuidFromPnId(c.pnId) || ''\n    const callkeepAction = this.getCallKeepAction(c)\n    console.log(\n      `PN ID debug: upsertCall pnId=${c.pnId} callkeepUuid=${c.callkeepUuid} callkeepAction=${callkeepAction}`,\n    )\n    if (callkeepAction === 'answerCall') {\n      c.callkeepAlreadyAnswered = true\n      c.answer()\n      console.log('SIP PN debug: answer by recentPnAction')\n    } else if (callkeepAction === 'rejectCall') {\n      c.callkeepAlreadyRejected = true\n      c.hangupWithUnhold()\n      console.log('SIP PN debug: reject by recentPnAction')\n    }\n  }\n\n  @action onCallRemove = async (rawSession: Session) => {\n    this.updateCurrentCallDebounce()\n    this.recentCallActivityAt = Date.now()\n    const c = this.calls.find(_ => _.id === rawSession.sessionId)\n    if (!c) {\n      return\n    }\n    if (c.rawSession) {\n      Object.assign(c.rawSession, rawSession)\n    } else {\n      c.rawSession = rawSession\n    }\n    this.onSipUaCancel({ pnId: c.pnId })\n    if (c.callkeepUuid) {\n      this.endCallKeep(c.callkeepUuid)\n    }\n    await addCallHistory(c)\n    c.callkeepUuid = ''\n    c.callkeepAlreadyRejected = true\n\n    this.calls = this.calls.filter(c0 => c0 !== c)\n    // Set number of total calls in our custom java incoming call module\n    BrekekeUtils.setJsCallsSize(this.calls.length)\n    // When if this is a outgoing call, try to insert a call history to uc chat\n    if (getAuthStore().ucState === 'success' && c.answeredAt && !c.incoming) {\n      uc.sendCallResult(c.getDuration(), c.partyNumber)\n    }\n    // Reset loud speaker if there's no call left\n    if (Platform.OS !== 'web' && !this.calls.length) {\n      this.isLoudSpeakerEnabled = false\n      IncallManager.setForceSpeakerphoneOn(false)\n    }\n    // Stop android incall manager if there's no call left\n    if (\n      Platform.OS === 'android' &&\n      this.incallManagerStarted &&\n      !this.calls.length\n    ) {\n      this.incallManagerStarted = false\n      IncallManager.stop()\n    }\n    // Emit to embed api\n    if (!window._BrekekePhoneWebRoot) {\n      embedApi.emit('call_end', c)\n    }\n  }\n\n  @action onSelectBackgroundCall = (c: Immutable<Call>) => {\n    if (c.holding) {\n      c.toggleHoldWithCheck()\n    }\n    this.currentCallId = c.id\n    Nav().backToPageCallManage()\n  }\n\n  private startCallIntervalAt = 0\n  private startCallIntervalId = 0\n  private clearStartCallIntervalTimer = () => {\n    if (this.startCallIntervalId) {\n      BackgroundTimer.clearInterval(this.startCallIntervalId)\n      this.startCallIntervalId = 0\n    }\n  }\n  startCall: MakeCallFn = (number: string, ...args) => {\n    const as = getAuthStore()\n    if (as.sipConnectingOrFailure()) {\n      as.sipTotalFailure = 0\n      // TODO reset waiting in AuthSIP as well\n      return\n    }\n\n    if (this.calls.filter(c => !c.incoming && !c.answered).length) {\n      RnAlert.error({\n        message: intlDebug`Only make one outgoing call`,\n      })\n      return\n    }\n\n    let reconnectCalled = false\n    const sipCreateSession = () => sip.phone?.makeCall(number, ...args)\n    try {\n      // Try to call pbx first to see if there's any error with the network\n      // TODO\n      void pbx\n      sipCreateSession()\n    } catch (err) {\n      reconnectCalled = true\n      reconnectAndWaitSip().then(sipCreateSession)\n    }\n    Nav().goToPageCallManage({ isOutgoingCall: true })\n    // Start call logic in RNCallKeep\n    // Adding this will help the outgoing call automatically hold on GSM call\n    let uuid = ''\n    if (Platform.OS !== 'web') {\n      uuid = newUuid().toUpperCase()\n      if (Platform.OS === 'ios') {\n        RNCallKeep.startCall(uuid, number, 'Brekeke Phone')\n      }\n      this.setAutoEndCallKeepTimer(uuid)\n    }\n    // Check for each 0.5s: auto update currentCallId\n    // The call will be emitted from sip, we'll use interval here to set it\n    runInAction(() => {\n      this.currentCallId = ''\n    })\n    const prevIds = arrToMap(this.calls, 'id') as { [k: string]: boolean }\n    // Also if after 3s there's no call in store, reconnect\n    this.clearStartCallIntervalTimer()\n    this.startCallIntervalAt = Date.now()\n    this.startCallIntervalId = BackgroundTimer.setInterval(\n      action(() => {\n        const curr = this.calls.find(c => !c.incoming && !prevIds[c.id])\n        if (curr) {\n          if (uuid) {\n            curr.callkeepUuid = uuid\n          }\n          this.currentCallId = curr.id\n          this.clearStartCallIntervalTimer()\n          return\n        }\n        const diff = Date.now() - this.startCallIntervalAt\n        // Add a guard of 10s to clear the interval\n        if (diff > 10000) {\n          if (uuid) {\n            this.endCallKeep(uuid)\n          }\n          this.clearStartCallIntervalTimer()\n          return\n        }\n        // And if after 3s there's no call in store, reconnect\n        // It's likely a connection issue occurred\n        if (!curr && !reconnectCalled && diff > 3000) {\n          reconnectCalled = true\n          reconnectAndWaitSip().then(sipCreateSession)\n          this.clearStartCallIntervalTimer()\n        }\n      }),\n      500,\n    )\n  }\n  startVideoCall = (number: string) => this.startCall(number, undefined, true)\n\n  private updateBackgroundCalls = () => {\n    // Auto hold background calls\n    if (!this.currentCallId) {\n      return\n    }\n    this.calls\n      .filter(\n        c =>\n          c.id !== this.currentCallId &&\n          c.answered &&\n          !c.transferring &&\n          !c.holding &&\n          !c.isAboutToHangup,\n      )\n      .forEach(c => c.toggleHoldWithCheck())\n  }\n  private updateBackgroundCallsDebounce = debounce(\n    this.updateBackgroundCalls,\n    300,\n    { maxWait: 1000 },\n  )\n  @action private updateCurrentCall = () => {\n    const curr =\n      this.calls.find(c => c.id === this.currentCallId) ||\n      this.calls.find(c => c.answered && !c.holding && !c.isAboutToHangup) ||\n      this.calls.find(c => c)\n    this.currentCallId = curr?.id || ''\n    if (!this.currentCallId) {\n      const [s0, ...stacks] = RnStacker.stacks\n      if (stacks.some(s => s.name.startsWith('PageCall'))) {\n        RnStacker.stacks = [s0]\n      }\n    }\n    this.updateBackgroundCallsDebounce()\n  }\n  private updateCurrentCallDebounce = debounce(this.updateCurrentCall, 300, {\n    maxWait: 1000,\n  })\n\n  // CallKeep + PN data\n  @observable callkeepMap: {\n    [uuid: string]: {\n      uuid: string\n      at: number\n      incomingPnData?: ParsedPn\n      hasAction?: boolean\n    }\n  } = {}\n  private getUuidFromPnId = (pnId: string) =>\n    Object.values(this.callkeepMap)\n      .map(c => c.incomingPnData)\n      .find(d => d?.id === pnId)?.callkeepUuid\n  private getPnIdFromUuid = (uuid: string) =>\n    this.callkeepMap[uuid]?.incomingPnData?.id\n  private getSetUuidPnId = (c: TCallKeepIds) => {\n    if (c.callkeepUuid && !c.pnId) {\n      c.pnId = this.getPnIdFromUuid(c.callkeepUuid)\n    }\n    if (c.pnId && !c.callkeepUuid) {\n      c.callkeepUuid = this.getUuidFromPnId(c.pnId)\n    }\n  }\n\n  // Logic to end call if timeout of 20s\n  private autoEndCallKeepTimerId = 0\n  private clearAutoEndCallKeepTimer = () => {\n    if (Platform.OS === 'web' || !this.autoEndCallKeepTimerId) {\n      return\n    }\n    BackgroundTimer.clearInterval(this.autoEndCallKeepTimerId)\n    this.autoEndCallKeepTimerId = 0\n  }\n  @action private setAutoEndCallKeepTimer = (\n    uuid: string,\n    incomingPnData?: ParsedPn,\n  ) => {\n    if (Platform.OS === 'web') {\n      return\n    }\n    if (incomingPnData) {\n      incomingPnData.callkeepUuid = uuid\n    }\n    this.callkeepMap[uuid] = {\n      uuid,\n      at: Date.now(),\n      incomingPnData,\n    }\n    this.clearAutoEndCallKeepTimer()\n    this.autoEndCallKeepTimerId = BackgroundTimer.setInterval(() => {\n      const n = Date.now()\n      Object.values(this.callkeepMap).forEach(k => {\n        if (n - k.at > 20000) {\n          const c = this.calls.find(_ => _.callkeepUuid === k.uuid)\n          if (!c) {\n            this.endCallKeep(k.uuid)\n          }\n        }\n      })\n      if (!Object.keys(this.callkeepMap).length) {\n        this.clearAutoEndCallKeepTimer()\n      }\n    }, 500)\n  }\n  @action private endCallKeep = (\n    uuid: string,\n    {\n      setAction = true,\n      completedElseWhere,\n    }: {\n      setAction?: boolean\n      completedElseWhere?: boolean\n    } = {},\n  ) => {\n    if (!uuid) {\n      return\n    }\n    console.log('PN callkeep debug: endCallKeep ' + uuid)\n    if (setAction) {\n      this.setCallKeepAction({ callkeepUuid: uuid }, 'rejectCall')\n    }\n    const pnData = this.callkeepMap[uuid]?.incomingPnData\n    if (\n      pnData &&\n      !this.calls.some(c => c.callkeepUuid === uuid || c.pnId === pnData.id) &&\n      !completedElseWhere\n    ) {\n      addCallHistory(pnData)\n    }\n    if (!this.callkeepMap[uuid] && Platform.OS === 'ios') {\n      return\n    }\n    delete this.callkeepMap[uuid]\n    RNCallKeep.rejectCall(uuid)\n    RNCallKeep.endCall(uuid)\n    RNCallKeep.reportEndCallWithUUID(\n      uuid,\n      CONSTANTS.END_CALL_REASONS.REMOTE_ENDED,\n    )\n    BrekekeUtils.closeIncomingCall(uuid)\n  }\n  endCallKeepAllCalls = () => {\n    if (Platform.OS !== 'web') {\n      RNCallKeep.endAllCalls()\n    }\n    BrekekeUtils.closeAllIncomingCalls()\n    this.onCallKeepAction()\n  }\n  @action onCallKeepAction = () => {\n    this.calls\n      .map(c => this.callkeepMap[c.callkeepUuid])\n      .filter(c => c)\n      .forEach(c => {\n        c.hasAction = true\n      })\n  }\n\n  // Move from callkeep.ts to avoid circular dependencies\n  // Logic to show incoming call ui in case of already have a running call in RNCallKeep android\n  private alreadyShowIncomingCallUi: { [k: string]: boolean } = {}\n  showIncomingCallUi = (e: TEvent & { pnData: ParsedPn }) => {\n    const uuid = e.callUUID.toUpperCase()\n    if (this.alreadyShowIncomingCallUi[uuid]) {\n      console.log('SIP PN debug: showIncomingCallUi: already show this uuid')\n      return\n    }\n    this.alreadyShowIncomingCallUi[uuid] = true\n    if (this.isCallRejected({ callkeepUuid: uuid, pnId: e.pnData.id })) {\n      console.log(\n        'SIP PN debug: showIncomingCallUi: call already rejected on js side',\n      )\n      this.endCallKeep(uuid)\n      return\n    }\n    this.onCallKeepDidDisplayIncomingCall(uuid, e.pnData)\n  }\n\n  // Actions map in case of call is not available at the time receive the action\n  // This map wont be deleted if the callkeep end\n  @observable callkeepActionMap: {\n    [uuidOrPnId: string]: TCallKeepAction\n  } = {}\n  private setCallKeepAction = (c: TCallKeepIds, a: TCallKeepAction) => {\n    this.getSetUuidPnId(c)\n    if (c.callkeepUuid) {\n      this.callkeepActionMap[c.callkeepUuid] = a\n    }\n    if (c.pnId) {\n      this.callkeepActionMap[c.pnId] = a\n    }\n    this.onCallKeepAction()\n  }\n\n  private getCallKeepAction = (c: TCallKeepIds) =>\n    (c.callkeepUuid && this.callkeepActionMap[c.callkeepUuid]) ||\n    (c.pnId && this.callkeepActionMap[c.pnId])\n  isCallRejected = (c?: TCallKeepIds) =>\n    c && this.getCallKeepAction(c) === 'rejectCall'\n\n  calleeRejectedMap: {\n    [uuidOrPnId: string]: boolean\n  } = {}\n  setCalleeRejected = (c: TCallKeepIds) => {\n    this.getSetUuidPnId(c)\n    if (c.callkeepUuid) {\n      this.calleeRejectedMap[c.callkeepUuid] = true\n    }\n    if (c.pnId) {\n      this.calleeRejectedMap[c.pnId] = true\n    }\n  }\n\n  getCallInNotify = () => {\n    // Do not display our callbar if already show callkeep\n    return this.calls.find(_ => {\n      const k = this.callkeepMap[_.callkeepUuid]\n      return (\n        _.incoming &&\n        !_.answered &&\n        (!k ||\n          k.hasAction ||\n          // Trigger timerStore.now observer at last\n          timerStore.now - _.createdAt > 1000)\n      )\n    })\n  }\n  shouldRingInNotify = (uuid?: string) => {\n    // Disable ringtone when enable PN\n    if (getAuthStore().getCurrentAccount()?.pushNotificationEnabled) {\n      return false\n    }\n\n    if (Platform.OS === 'web' || !uuid) {\n      return true\n    }\n\n    // Do not ring on background\n    if (RnAppState.currentState !== 'active') {\n      return false\n    }\n    // Do not ring if has an ongoing answered call\n    if (this.calls.some(_ => _.answered)) {\n      return false\n    }\n    // ios: Do not ring if has a callkeep with no action yet\n    if (\n      Platform.OS === 'ios' &&\n      Object.keys(this.callkeepMap).some(\n        _ => _ !== uuid && !this.callkeepActionMap[_],\n      )\n    ) {\n      return false\n    }\n\n    return true\n  }\n\n  // To be used in sip.phone._ua.on('newNotify')\n  onSipUaCancel = (n?: CancelRecentPn) => {\n    if (!n?.pnId) {\n      return\n    }\n    const uuid = this.getUuidFromPnId(n.pnId)\n    console.log(`SIP PN debug: cancel PN uuid=${uuid}`)\n    this.setCallKeepAction({ pnId: n.pnId }, 'rejectCall')\n    uuid &&\n      this.endCallKeep(uuid, {\n        completedElseWhere: n.completedElseWhere,\n      })\n  }\n\n  constructor() {\n    if (Platform.OS !== 'android') {\n      return\n    }\n    BrekekeUtils.setIsAppActive(AppState.currentState === 'active', false)\n    // If it is locked right after blur 300ms\n    //    we assume it was put in background because of lock\n    // No need to remove listener since this is singleton without cleanup for now\n    AppState.addEventListener('change', currentState => {\n      BrekekeUtils.setIsAppActive(currentState === 'active', false)\n      if (currentState === 'active') {\n        return\n      }\n      BackgroundTimer.setTimeout(async () => {\n        if (await BrekekeUtils.isLocked()) {\n          BrekekeUtils.setIsAppActive(false, true)\n        }\n      }, 300)\n    })\n  }\n\n  @observable parkNumbers: { [k: string]: boolean } = {}\n  @action addParkNumber = (parkNumber: string) => {\n    this.parkNumbers[parkNumber] = true\n  }\n  @action removeParkNumber = (parkNumber: string) => {\n    delete this.parkNumbers[parkNumber]\n  }\n\n  // Some other fields\n  // TODO move them somewhere else\n  @observable isLoudSpeakerEnabled = false\n  @action toggleLoudSpeaker = () => {\n    if (Platform.OS !== 'web') {\n      this.isLoudSpeakerEnabled = !this.isLoudSpeakerEnabled\n      IncallManager.setForceSpeakerphoneOn(this.isLoudSpeakerEnabled)\n    }\n  }\n  @observable newVoicemailCount = 0\n  @action setNewVoicemailCount = (n: number) => {\n    this.newVoicemailCount = n\n  }\n  // Style in CallVideosUI to save the previous video position\n  @observable videoPositionT = 25\n  @observable videoPositionL = 5\n}\n\nconst callStore = new CallStore()\nsetCallStore(callStore)\n\nexport type TCallKeepAction = 'answerCall' | 'rejectCall'\ntype TCallKeepIds = Partial<Pick<Call, 'callkeepUuid' | 'pnId'>>\n","import PushNotificationIOS from '@react-native-community/push-notification-ios'\nimport moment from 'moment'\nimport { AppState, Platform } from 'react-native'\nimport FCM from 'react-native-fcm'\nimport { v4 as newUuid } from 'uuid'\n\nimport { getPartyName } from '../stores/contactStore'\nimport { ParsedPn } from '../utils/PushNotification-parse'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { accountStore } from './accountStore'\nimport { getAuthStore } from './authStore'\nimport { Call } from './Call'\nimport { getCallStore } from './callStore'\nimport { intl } from './intl'\n\nconst alreadyAddHistoryMap: { [pnId: string]: true } = {}\nexport const addCallHistory = async (c: Call | ParsedPn) => {\n  const isTypeCall = c instanceof Call || 'partyNumber' in c\n\n  if (isTypeCall && c.partyNumber === '8') {\n    // voice mail\n    return\n  }\n  const pnId = isTypeCall ? c.pnId : c.id\n\n  if (pnId) {\n    if (alreadyAddHistoryMap[pnId]) {\n      return\n    }\n    alreadyAddHistoryMap[pnId] = true\n  }\n\n  if (!isTypeCall && !(await accountStore.findByPn(c))) {\n    console.log(\n      'checkAndRemovePnTokenViaSip debug: do not add history account not exist',\n    )\n    return\n  }\n\n  const id = newUuid()\n  const created = moment().format('HH:mm - MMM D')\n  const info = isTypeCall\n    ? {\n        id,\n        created,\n        incoming: c.incoming,\n        answered: c.answered,\n        partyName: c.getDisplayName(),\n        partyNumber: c.partyNumber,\n        duration: c.getDuration(),\n        isAboutToHangup: c.isAboutToHangup,\n      }\n    : {\n        id,\n        created,\n        incoming: true,\n        answered: false,\n        partyName: getPartyName(c.from) || c.displayName || c.from,\n        partyNumber: c.from,\n        duration: 0,\n        // TODO: B killed app, A call B, B reject quickly, then A cancel quickly\n        // -> B got cancel event from sip\n        isAboutToHangup: false,\n      }\n\n  // do not show notification if rejected by callee\n  const m = getCallStore().calleeRejectedMap\n  const calleeRejected = m[c.callkeepUuid] || m[pnId]\n  if (!calleeRejected) {\n    presentNotification(info)\n  }\n\n  // try to wait for login?\n  // TODO\n  // add method based on the Account class\n  // allow multiple accounts at the same time\n  const as = getAuthStore()\n  const current = as.getCurrentAccount()\n  if (!current) {\n    await waitTimeout()\n  }\n  if (!as.getCurrentAccount()) {\n    return\n  }\n  as.pushRecentCall(info)\n}\n\nconst presentNotification = (c: {\n  id: string\n  incoming: boolean\n  answered: boolean\n  partyName: string\n  partyNumber: string\n  duration: number\n  created: string\n  isAboutToHangup: boolean\n}) => {\n  if (Platform.OS === 'web') {\n    return\n  }\n  if (c.answered || !c.incoming || c.isAboutToHangup) {\n    return\n  }\n  const title = intl`Missed call`\n  const body = c.partyName || c.partyNumber\n  if (Platform.OS === 'android') {\n    FCM.presentLocalNotification({\n      title,\n      body,\n      number: 0,\n      priority: 'high',\n      show_in_foreground: true,\n      local_notification: true,\n      wake_screen: false,\n      ongoing: false,\n      lights: true,\n      channel: 'default',\n      icon: 'ic_launcher',\n      id: `missedcall-${Date.now()}`,\n      pre_app_state: AppState.currentState,\n      my_custom_data: 'local_notification',\n      is_local_notification: 'local_notification',\n    })\n  } else {\n    PushNotificationIOS.getApplicationIconBadgeNumber(badge => {\n      badge = 1 + (Number(badge) || 0)\n      PushNotificationIOS.addNotificationRequest({\n        id: `missedcall-${Date.now()}`,\n        title,\n        body,\n        sound: undefined,\n        badge,\n        userInfo: {\n          id: `missedcall-${Date.now()}`,\n          aps: {\n            title,\n            body,\n            my_custom_data: 'local_notification',\n            pre_app_state: AppState.currentState,\n            local_notification: true,\n            is_local_notification: 'local_notification',\n          },\n        },\n      })\n      PushNotificationIOS.setApplicationIconBadgeNumber(badge)\n    })\n  }\n}\n","import { debounce } from 'lodash'\nimport { action, observable } from 'mobx'\nimport { AppState, Platform } from 'react-native'\n\nimport {\n  PbxGetProductInfoRes,\n  UcBuddy,\n  UcBuddyGroup,\n  UcConfig,\n} from '../api/brekekejs'\nimport { sip } from '../api/sip'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { getUrlParams } from '../utils/deeplink'\nimport { ParsedPn, SipPn } from '../utils/PushNotification-parse'\nimport {\n  Account,\n  accountStore,\n  getAccountUniqueId,\n  getLastSignedInId,\n  saveLastSignedInId,\n} from './accountStore'\nimport { authSIP } from './AuthSIP'\nimport { setAuthStore } from './authStore'\nimport { Call } from './Call'\nimport { getCallStore } from './callStore'\nimport { chatStore } from './chatStore'\nimport { contactStore } from './contactStore'\nimport { intlDebug } from './intl'\nimport { Nav } from './Nav'\nimport { RnAlert } from './RnAlert'\nimport { RnAppState } from './RnAppState'\nimport { userStore } from './userStore'\n\ntype ConnectionState =\n  | 'stopped'\n  | 'waiting'\n  | 'connecting'\n  | 'success'\n  | 'failure'\n\nexport class AuthStore {\n  hasInternetConnected: boolean | null = null\n\n  @observable sipPn: Partial<SipPn> = {}\n\n  @observable pbxState: ConnectionState = 'stopped'\n  @observable pbxTotalFailure = 0\n  @observable sipState: ConnectionState = 'stopped'\n  @observable sipTotalFailure = 0\n  @observable ucState: ConnectionState = 'stopped'\n  @observable ucTotalFailure = 0\n  @observable ucLoginFromAnotherPlace = false\n\n  pbxShouldAuth = () => {\n    return (\n      this.getCurrentAccount() &&\n      this.pbxState !== 'waiting' &&\n      // Do not auth pbx if sip token is provided in case of PN\n      // Wait until sip login success or failure\n      (!this.sipPn.sipAuth ||\n        this.sipState === 'success' ||\n        this.sipState === 'failure') &&\n      (this.pbxState === 'stopped' ||\n        (this.pbxState === 'failure' &&\n          !this.pbxTotalFailure &&\n          RnAppState.currentState === 'active'))\n    )\n  }\n  pbxConnectingOrFailure = () => {\n    return ['waiting', 'connecting', 'failure'].some(s => s === this.pbxState)\n  }\n\n  sipShouldAuth = () => {\n    return (\n      this.sipState !== 'waiting' &&\n      this.sipState !== 'connecting' &&\n      this.sipState !== 'success' &&\n      ((this.signedInId && this.sipPn.sipAuth) ||\n        (this.pbxState === 'success' &&\n          (this.sipState === 'stopped' ||\n            (this.sipState === 'failure' &&\n              !this.sipTotalFailure &&\n              RnAppState.currentState === 'active'))))\n    )\n  }\n  sipConnectingOrFailure = () => {\n    return ['waiting', 'connecting', 'failure'].some(s => s === this.sipState)\n  }\n\n  ucShouldAuth = () => {\n    return (\n      this.getCurrentAccount()?.ucEnabled &&\n      !this.ucLoginFromAnotherPlace &&\n      !this.isSignInByNotification &&\n      this.pbxState === 'success' &&\n      (this.ucState === 'stopped' ||\n        (this.ucState === 'failure' &&\n          !this.ucTotalFailure &&\n          RnAppState.currentState === 'active'))\n    )\n  }\n  ucConnectingOrFailure = () => {\n    return (\n      this.getCurrentAccount()?.ucEnabled &&\n      ['connecting', 'failure'].some(s => s === this.ucState)\n    )\n  }\n\n  isConnFailure = () => {\n    return [\n      this.pbxState,\n      this.sipState,\n      this.getCurrentAccount()?.ucEnabled && this.ucState,\n    ].some(s => s === 'failure')\n  }\n\n  @observable signedInId = ''\n  getCurrentAccount = () =>\n    accountStore.accounts.find(a => a.id === this.signedInId) as Account\n  getCurrentData = () => accountStore.findDataSync(this.getCurrentAccount())\n  getCurrentDataAsync = () =>\n    accountStore.findDataAsync(this.getCurrentAccount())\n\n  @observable ucConfig?: UcConfig\n  @observable pbxConfig?: PbxGetProductInfoRes\n\n  isBigMode() {\n    return this.pbxConfig?.['webphone.allusers'] === 'false'\n  }\n\n  signIn = async (a?: Account, autoSignIn?: boolean) => {\n    if (!a) {\n      return false\n    }\n    const d = await accountStore.findDataAsync(a)\n    if (!a.pbxPassword && !d.accessToken) {\n      Nav().goToPageAccountUpdate({ id: a.id })\n      RnAlert.error({\n        message: intlDebug`The account password is empty`,\n      })\n      return true\n    }\n    this.signedInId = a.id\n    if (!autoSignIn) {\n      await saveLastSignedInId(getAccountUniqueId(a))\n    }\n    return true\n  }\n  autoSignInEmbed = async () => {\n    const d = await getLastSignedInId()\n    this.signIn(\n      accountStore.accounts.find(_ => getAccountUniqueId(_) === d.id) ||\n        accountStore.accounts[0],\n    )\n  }\n\n  signOut = () => {\n    console.log('signOut debug: autoStore.signOut')\n    saveLastSignedInId(false)\n    this.signOutWithoutSaving()\n  }\n  signOutWithoutSaving = () => {\n    try {\n      getCallStore().calls.forEach(c => c.hangupWithUnhold())\n      if (Platform.OS !== 'web') {\n        // Try to end callkeep if it's stuck\n        getCallStore().endCallKeepAllCalls()\n      }\n      this.resetState()\n    } catch (err) {\n      console.error('signOut debug: signOutWithoutSaving error:', err)\n    }\n    console.log('signOut debug: goToPageAccountSignIn')\n    Nav().goToPageAccountSignIn()\n    console.log('signOut debug: goToPageAccountSignIn done')\n  }\n  @action private resetState = () => {\n    this.signedInId = ''\n    this.pbxState = 'stopped'\n    console.log('SIP PN debug: set sipState stopped sign out')\n    this.sipState = 'stopped'\n    this.sipPn = {}\n    sip.stopWebRTC()\n    this.ucState = 'stopped'\n    this.resetFailureStateIncludeUcLoginFromAnotherPlace()\n    this.pbxConfig = undefined\n    this.ucConfig = undefined\n    userStore.clearStore()\n    contactStore.clearStore()\n    chatStore.clearStore()\n  }\n\n  @action resetFailureState = () => {\n    this.pbxTotalFailure = 0\n    this.sipTotalFailure = 0\n    this.ucTotalFailure = 0\n  }\n  @action reconnectPbx = () => {\n    this.resetFailureState()\n    this.pbxState = 'stopped'\n  }\n  @action reconnectSip = () => {\n    console.log('SIP PN debug: set sipState stopped reconnect')\n    this.resetFailureState()\n    this.sipState = 'stopped'\n    // Mobx observe not call automatically?\n    authSIP.authWithCheck()\n  }\n  @action resetFailureStateIncludeUcLoginFromAnotherPlace = () => {\n    this.resetFailureState()\n    this.ucLoginFromAnotherPlace = false\n  }\n\n  pushRecentCall = async (call: {\n    id: string\n    incoming: boolean\n    answered: boolean\n    partyName: string\n    partyNumber: string\n    duration: number\n    created: string\n  }) => {\n    const d = await this.getCurrentDataAsync()\n    d.recentCalls = [call, ...d.recentCalls]\n    if (d.recentCalls.length > 20) {\n      d.recentCalls.pop()\n    }\n    accountStore.saveAccountsToLocalStorageDebounced()\n  }\n\n  updatePartyNameRecentCall = async (\n    fragment: Pick<Call, 'partyNumber' | 'partyName'>,\n  ) => {\n    const d = await this.getCurrentDataAsync()\n    if (!d.recentCalls?.length) {\n      return\n    }\n    d.recentCalls\n      .filter(c => c.partyNumber === fragment.partyNumber)\n      .forEach(c => Object.assign(c, fragment))\n    accountStore.saveAccountsToLocalStorageDebounced()\n  }\n\n  savePbxBuddyList = async (pbxBuddyList: {\n    screened: boolean\n    users: (UcBuddy | UcBuddyGroup)[]\n  }) => {\n    const d = await this.getCurrentDataAsync()\n    d.pbxBuddyList = pbxBuddyList\n    accountStore.saveAccountsToLocalStorageDebounced()\n  }\n\n  handleUrlParams = async () => {\n    if (\n      Object.keys(getCallStore().callkeepMap).length ||\n      sip.phone?.getSessionCount() ||\n      getCallStore().calls.length\n    ) {\n      return false\n    }\n    //\n    const urlParams = await getUrlParams()\n    if (!urlParams) {\n      return false\n    }\n    //\n    const { _wn, host, phone_idx, port, tenant, user } = urlParams\n    if (!tenant || !user) {\n      return false\n    }\n    //\n    const a = await accountStore.find({\n      pbxUsername: user,\n      pbxTenant: tenant,\n      pbxHostname: host,\n      pbxPort: port,\n    })\n    let phoneIdx = parseInt(phone_idx)\n    if (!phoneIdx || phoneIdx <= 0 || phoneIdx > 4) {\n      phoneIdx = 4\n    }\n    //\n    if (a) {\n      if (!a.pbxHostname) {\n        a.pbxHostname = host\n      }\n      if (!a.pbxPort) {\n        a.pbxPort = port\n      }\n      a.pbxPhoneIndex = `${phoneIdx}`\n      const d = await accountStore.findDataAsync(a)\n      if (_wn) {\n        d.accessToken = _wn\n      }\n      //\n      accountStore.upsertAccount(a)\n      if (a.pbxPassword || d.accessToken) {\n        this.signIn(a)\n      } else {\n        Nav().goToPageAccountUpdate({ id: a.id })\n      }\n      return true\n    }\n    //\n    const newP = {\n      ...accountStore.genEmptyAccount(),\n      pbxTenant: tenant,\n      pbxUsername: user,\n      pbxHostname: host,\n      pbxPort: port,\n      pbxPhoneIndex: `${phoneIdx}`,\n    }\n    const d = await accountStore.findDataAsync(newP)\n    //\n    accountStore.upsertAccount(newP)\n    if (d.accessToken) {\n      this.signIn(newP)\n    } else {\n      Nav().goToPageAccountUpdate({ id: newP.id })\n    }\n    return true\n  }\n\n  @observable isSignInByNotification = false\n  clearSignInByNotification = debounce(\n    () => {\n      // clearSignInByNotification will activate UC login\n      // We will only allow UC login when the app is active\n      if (AppState.currentState !== 'active') {\n        BackgroundTimer.setTimeout(this.clearSignInByNotification, 17)\n      } else {\n        this.isSignInByNotification = false\n      }\n    },\n    10000,\n    {\n      maxWait: 15000,\n    },\n  )\n\n  @action signInByNotification = async (n: ParsedPn) => {\n    console.log(\n      `SIP PN debug: signInByNotification pnId=${n.id} token=${n.sipPn.sipAuth}`,\n    )\n    this.sipPn = n.sipPn\n    this.resetFailureState()\n    // Find account for the notification target\n    const a = await accountStore.findByPn(n)\n    if (!a?.id) {\n      console.log('SIP PN debug: can not find account from notification')\n      return false\n    }\n    // Use isSignInByNotification to disable UC auto sign in for a while\n    if (n.isCall) {\n      this.isSignInByNotification = true\n      this.clearSignInByNotification()\n    }\n    if (this.signedInId !== a.id) {\n      return this.signIn(a)\n    }\n    return false\n  }\n\n  userExtensionProperties: null | {\n    id: string\n    name: string\n    language: string\n    phones: {\n      id: string\n      type: string\n    }[]\n  } = null\n}\n\nconst authStore = new AuthStore()\n\nsetAuthStore(authStore)\n","import Url from 'url-parse'\n\nimport { parse } from './deeplink-parse'\n\nlet alreadyHandleFirstOpen = false\nconst params = parse(window.location as any as Url<any>)\n\nexport const getUrlParams = () => {\n  if (alreadyHandleFirstOpen) {\n    return Promise.resolve(null)\n  }\n  alreadyHandleFirstOpen = true\n  return Promise.resolve(params)\n}\n","import { Platform } from 'react-native'\nimport { getCurrentWifiSSID } from 'react-native-wifi-reborn'\n\nimport { Account, accountStore } from '../stores/accountStore'\nimport { compareSemVer } from '../stores/debugStore'\n// @ts-ignore\nimport { PushNotification } from '../utils/PushNotification'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { toBoolean } from '../utils/string'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { PBX } from './pbx'\nimport { PnCommand, PnServiceId } from './pnConfig'\nimport { setSyncPnTokenModule } from './syncPnToken'\nimport { updatePhoneIndex } from './updatePhoneIndex'\n\nconst syncPnTokenWithoutCatch = async (\n  p: Account,\n  { noUpsert }: Pick<SyncPnTokenOption, 'noUpsert'>,\n) => {\n  console.log('PN sync debug: syncPnTokenWithoutCatch')\n\n  if (Platform.OS === 'web') {\n    // TODO should be implemented by now\n    console.log('PN sync debug: not implemented yet on web browser')\n    return\n  }\n\n  if (!p.pbxUsername) {\n    console.log('PN sync debug: invalid data')\n    return\n  }\n\n  const pnEnabled = p.pushNotificationEnabled\n  console.log(\n    `PN sync debug: trying to turn ${pnEnabled ? 'on' : 'off'} PN for account ${\n      p.pbxUsername\n    }`,\n  )\n\n  const pbx = new PBX()\n  pbx.isMainInstance = false\n  const disconnectPbx = (success?: boolean) => {\n    console.log(\n      `PN sync debug: pbx disconnect by syncPnToken success=${success} noUpsert=${noUpsert}`,\n    )\n    pbx.disconnect()\n    if (success && !noUpsert && p.id) {\n      accountStore.upsertAccount({\n        id: p.id,\n        pushNotificationEnabledSynced: true,\n      })\n    }\n  }\n\n  try {\n    const success = await pbx.connect(p)\n    if (!success) {\n      console.log('PN sync debug: failed to connect to pbx')\n      return disconnectPbx()\n    }\n\n    const webPhone = await updatePhoneIndex(p, pbx)\n    if (!webPhone) {\n      console.log('PN sync debug: can not find webphone')\n      return disconnectPbx()\n    }\n\n    const username = webPhone.id\n    let t = await PushNotification.getToken()\n    let tvoip = t\n    if (Platform.OS === 'ios') {\n      tvoip = await PushNotification.getVoipToken()\n      if (!tvoip) {\n        throw new Error('PN sync debug: Empty ios voip PN token')\n      }\n      if (!t) {\n        // TODO pn token empty when dev app refresh?\n        t = tvoip\n      }\n    }\n    if (!t) {\n      throw new Error('PN sync debug: Empty PN token')\n    }\n\n    const c = await pbx.getConfig()\n    const pnmanageNew = compareSemVer(c?.version, '3.14.5') >= 0\n    console.log(\n      `PN sync debug: pbx version=${c?.version} pnmanageNew=${pnmanageNew}`,\n    )\n\n    const params = {\n      username,\n      device_id: t,\n    }\n    const newParams = pnmanageNew\n      ? {\n          ...params,\n          command: pnEnabled ? PnCommand.set : PnCommand.remove,\n          service_id: [\n            Platform.OS === 'android' ? PnServiceId.fcm : PnServiceId.apns,\n          ],\n          pnmanageNew: true,\n          device_id_voip: tvoip,\n        }\n      : undefined\n\n    if (Platform.OS === 'android') {\n      if (newParams) {\n        await pbx.pnmanage(newParams)\n      } else {\n        // backward compatibility\n        const fn = pnEnabled ? pbx.setFcmPnToken : pbx.removeFcmPnToken\n        await Promise.all([fn(params), fn({ ...params, voip: true })])\n      }\n      return disconnectPbx(true)\n    }\n\n    const lpcPort = parseInt(c?.['webphone.lpc.port'] || '0', 10)\n    const tlsKeyHash = c?.['webphone.lpc.keyhash'] || ''\n    // never establish plain non-tls lpc connection\n    const lpcEnabled = lpcPort && tlsKeyHash\n    if (lpcPort && !tlsKeyHash) {\n      console.warn(\n        'webphone.lpc.port is present but empty webphone.lpc.keyhash, thus lpc is disabled since we dont allow non-tls lpc connection',\n      )\n    }\n    // if lpc is enabled pnmanageNew must be true\n    // since lpc is only available in pbx 3.14.5 and above\n    if (!lpcEnabled || !newParams) {\n      BrekekeUtils.disableLPC()\n      if (newParams) {\n        await pbx.pnmanage(newParams)\n      } else {\n        // backward compatibility\n        const fn = pnEnabled ? pbx.setApnsToken : pbx.removeApnsToken\n        await Promise.all([\n          fn(params),\n          fn({ ...params, device_id: tvoip, voip: true }),\n        ])\n      }\n      return disconnectPbx(true)\n    }\n\n    const remoteSsids =\n      c?.['webphone.lpc.wifi']\n        ?.split(',')\n        .map(w => w.trim())\n        .filter(w => w) || []\n    const localSsid = remoteSsids.length ? '' : await getLocalSsid()\n    const lpcPn = toBoolean(c?.['webphone.lpc.pn'])\n    console.log('PN sync debug: lpc data', {\n      pnmanageNew,\n      lpcPort,\n      remoteSsids,\n      localSsid,\n      tlsKeyHash,\n      lpcPn,\n    })\n    if (pnEnabled) {\n      BrekekeUtils.enableLPC(\n        t,\n        tvoip,\n        username,\n        p.pbxHostname,\n        lpcPort,\n        remoteSsids,\n        localSsid,\n        tlsKeyHash,\n      )\n    } else {\n      BrekekeUtils.disableLPC()\n    }\n    newParams.service_id = [PnServiceId.lpc]\n    if (lpcPn) {\n      newParams.service_id.push(PnServiceId.apns)\n    }\n    await pbx.pnmanage(newParams)\n    return disconnectPbx(true)\n  } catch (err) {\n    console.error('PN sync debug: catch error:', err)\n    return disconnectPbx()\n  }\n}\n\nexport interface SyncPnTokenOption {\n  noUpsert?: boolean\n  onError?: (err: Error) => void\n}\n\nconst syncPnToken = async (p: Account, o: SyncPnTokenOption = {}) => {\n  if (accountStore.pnSyncLoadingMap[p.id]) {\n    console.log('PN sync debug: sync is loading')\n    return\n  }\n  accountStore.pnSyncLoadingMap[p.id] = true\n  await syncPnTokenWithoutCatch(p, o).catch((err: Error) => {\n    if (o.onError) {\n      o.onError(err)\n      return\n    }\n    console.error(\n      `Failed to sync Push Notification settings for ${p.pbxUsername}`,\n      err,\n    )\n  })\n  accountStore.pnSyncLoadingMap[p.id] = false\n}\n\nconst syncPnTokenForAllAccounts = () => {\n  accountStore.accounts.forEach(a => {\n    if (a.pushNotificationEnabledSynced) {\n      return\n    }\n    syncPnToken(a)\n  })\n}\n\nconst m = {\n  sync: syncPnToken,\n  syncForAllAccounts: syncPnTokenForAllAccounts,\n}\nsetSyncPnTokenModule(m)\n\nexport type TSyncPnToken = typeof m\n\nconst getLocalSsid = () =>\n  Promise.race([getCurrentWifiSSID(), waitTimeout(10000)])\n    .then(v => v || '')\n    .catch(() => '')\n","// Main entry for the create-react-app web bundle\n\nimport qs from 'qs'\nimport { ReactElement, useState } from 'react'\nimport { isAndroid, isIOS } from 'react-device-detect'\nimport { StyleSheet, View } from 'react-native'\nimport Url from 'url-parse'\n\nimport brand from '../assets/brand.png'\nimport { mdiAndroid, mdiApple, mdiWeb } from '../assets/icons'\nimport logo from '../assets/logo.png'\nimport { bundleIdentifier } from '../config'\nimport { intl } from '../stores/intl'\nimport { parse } from '../utils/deeplink-parse'\n// @ts-ignore\nimport { App as RnApp } from './App.tsx'\nimport { BrekekeGradient } from './BrekekeGradient'\nimport { RnIcon, RnImage, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst globalCss = `* {\n  outline: none !important;\n  box-sizing: border-box;\n}\na {\n  text-decoration: none;\n}`\n\nrequestAnimationFrame(() => {\n  const s = document.createElement('style')\n  s.type = 'text/css'\n  s.appendChild(document.createTextNode(globalCss))\n  const h = document.head || document.getElementsByTagName('head')[0]\n  h.appendChild(s)\n})\n\nconst css = StyleSheet.create({\n  WebApp: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: window._BrekekePhoneWebRoot\n      ? ('fixed' as 'absolute')\n      : 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  WebApp_Logo: {\n    width: 80,\n    height: 80,\n    opacity: 0,\n  },\n  WebApp_Brand: {\n    width: 150,\n    height: 54,\n    marginTop: 10,\n    opacity: 0,\n  },\n  WebApp_Btn: {\n    position: 'relative',\n    width: 270,\n    padding: 15,\n    borderRadius: v.borderRadius,\n    marginTop: 10,\n  },\n  WebApp_Btn__app: {\n    marginTop: 30,\n    backgroundColor: 'black',\n  },\n  WebApp_Btn__browser: {\n    backgroundColor: 'white',\n    marginBottom: 50,\n  },\n  WebApp_BtnTxt__browser: {\n    color: 'white',\n  },\n  WebApp_Icon: {\n    position: 'absolute',\n    top: 11,\n    right: 10,\n  },\n})\n\nexport const App = () => {\n  const [isBrowser, setIsBrowser] = useState(!isIOS && !isAndroid)\n  let child: ReactElement | null = null\n  if (isBrowser) {\n    child = <RnApp />\n  } else {\n    const params = parse(window.location as any as Url<any>)\n    const q = qs.stringify(params)\n    const appUrl = isIOS\n      ? `brekekeapp://open?${q}`\n      : `intent://open?${q}#Intent;scheme=brekekeapp;package=${bundleIdentifier};end`\n    child = (\n      <>\n        <RnImage\n          source={{\n            uri: logo,\n          }}\n          style={css.WebApp_Logo}\n        />\n        <RnImage\n          source={{\n            uri: brand,\n          }}\n          style={css.WebApp_Brand}\n        />\n        <a href={appUrl}>\n          <RnTouchableOpacity style={[css.WebApp_Btn, css.WebApp_Btn__app]}>\n            <RnText small style={css.WebApp_BtnTxt__browser}>\n              {intl`OPEN IN APP`}\n            </RnText>\n            <RnIcon\n              color='white'\n              path={isIOS ? mdiApple : mdiAndroid}\n              style={css.WebApp_Icon}\n            />\n          </RnTouchableOpacity>\n        </a>\n        <RnTouchableOpacity\n          onPress={() => setIsBrowser(true)}\n          style={[css.WebApp_Btn, css.WebApp_Btn__browser]}\n        >\n          <RnText small>{intl`OPEN IN BROWSER`}</RnText>\n          <RnIcon path={mdiWeb} style={css.WebApp_Icon} />\n        </RnTouchableOpacity>\n      </>\n    )\n  }\n  const Container = isBrowser ? View : BrekekeGradient\n  return <Container style={css.WebApp}>{child}</Container>\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAACzCAMAAABSHv5WAAADAFBMVEX///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/LkhhAAAA/3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1O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\"","export default __webpack_public_path__ + \"static/media/logo.136d176f.png\";","// API was a component but had been rewritten to a listener\nimport '../api'\n\nimport NetInfo from '@react-native-community/netinfo'\nimport { debounce } from 'lodash'\nimport { observe, runInAction } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { useEffect } from 'react'\nimport {\n  ActivityIndicator,\n  AppState,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\nimport KeyboardSpacer from 'react-native-keyboard-spacer'\nimport SplashScreen from 'react-native-splash-screen'\n\nimport { sip } from '../api/sip'\nimport { SyncPnToken } from '../api/syncPnToken'\nimport { RenderAllCalls } from '../pages/PageCallManage'\nimport {\n  accountStore,\n  getAccountUniqueId,\n  getLastSignedInId,\n} from '../stores/accountStore'\nimport { authPBX } from '../stores/AuthPBX'\nimport { authSIP } from '../stores/AuthSIP'\nimport { getAuthStore } from '../stores/authStore'\nimport { authUC } from '../stores/AuthUC'\nimport { getCallStore } from '../stores/callStore'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { intlStore } from '../stores/intlStore'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnAlertRoot } from '../stores/RnAlertRoot'\nimport { RnPickerRoot } from '../stores/RnPickerRoot'\nimport { RnStackerRoot } from '../stores/RnStackerRoot'\nimport { userStore } from '../stores/userStore'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { setupCallKeep } from '../utils/callkeep'\nimport { getAudioVideoPermission } from '../utils/getAudioVideoPermission'\n// @ts-ignore\nimport { PushNotification } from '../utils/PushNotification'\nimport { registerOnUnhandledError } from '../utils/registerOnUnhandledError'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { webPromptPermission } from '../utils/webPromptPermission'\nimport { AnimatedSize } from './AnimatedSize'\nimport { CallBar } from './CallBar'\nimport { CallNotify } from './CallNotify'\nimport { CallVideos } from './CallVideos'\nimport { CallVoices } from './CallVoices'\nimport { ChatGroupInvite, UnreadChatNoti } from './ChatGroupInvite'\nimport { PhonebookAddItem } from './PhonebookAddItem'\nimport { AudioPlayer, RnStatusBar, RnText } from './Rn'\nimport { RnTouchableOpacity } from './RnTouchableOpacity'\nimport { v } from './variables'\n\nconst initApp = async () => {\n  await intlStore.wait()\n\n  const s = getAuthStore()\n  const cs = getCallStore()\n  const nav = Nav()\n  const pnToken = SyncPnToken()\n\n  const checkHasCallOrWakeFromPN = () =>\n    Object.keys(cs.callkeepMap).length ||\n    sip.phone?.getSessionCount() ||\n    cs.calls.length ||\n    s.sipPn.sipAuth\n  const hasCallOrWakeFromPN = checkHasCallOrWakeFromPN()\n\n  const autoLogin = async () => {\n    const d = await getLastSignedInId(true)\n    const a = accountStore.accounts.find(_ => getAccountUniqueId(_) === d.id)\n    if (d.autoSignInBrekekePhone && (await s.signIn(a, true))) {\n      console.log('App navigated by auto signin')\n      // already navigated\n    } else {\n      nav.goToPageIndex()\n    }\n  }\n\n  registerOnUnhandledError(unexpectedErr => {\n    // Must wrap in setTimeout avoid mobx error state change when rendering\n    BackgroundTimer.setTimeout(() => RnAlert.error({ unexpectedErr }), 300)\n    return false\n  })\n\n  AppState.addEventListener('change', async () => {\n    if (AppState.currentState !== 'active') {\n      return\n    }\n    s.resetFailureState()\n    cs.onCallKeepAction()\n    pnToken.syncForAllAccounts()\n    // With ios when wakekup app, currentState will be 'unknown' first then 'active'\n    // https://github.com/facebook/react-native-website/issues/273\n    if (Platform.OS !== 'ios') {\n      return\n    }\n    if (!checkHasCallOrWakeFromPN() && !(await s.handleUrlParams())) {\n      await autoLogin()\n    }\n  })\n\n  NetInfo.addEventListener(({ isConnected }) => {\n    if (s.hasInternetConnected === isConnected) {\n      return\n    }\n    s.hasInternetConnected = isConnected\n    if (!isConnected) {\n      return\n    }\n    s.resetFailureState()\n    authPBX.auth()\n    authSIP.auth()\n    authUC.auth()\n  })\n\n  if (Platform.OS === 'web') {\n    if (window._BrekekePhoneWebRoot) {\n      webPromptPermission()\n    }\n  } else if (AppState.currentState === 'active' && !hasCallOrWakeFromPN) {\n    getAudioVideoPermission()\n  }\n\n  setupCallKeep()\n  await accountStore.loadAccountsFromLocalStorage()\n\n  const onAuthUpdate = debounce(() => {\n    nav.goToPageIndex()\n    chatStore.clearStore()\n    contactStore.clearStore()\n    userStore.clearStore()\n    if (s.signedInId) {\n      s.resetFailureState()\n      authPBX.auth()\n      authSIP.auth()\n      authUC.auth()\n    } else {\n      authPBX.dispose()\n      authSIP.dispose()\n      authUC.dispose()\n    }\n  }, 17)\n  observe(s, 'signedInId', onAuthUpdate)\n\n  if (await s.handleUrlParams()) {\n    console.log('App navigated by url params')\n    // already navigated\n  } else if (\n    // only auto sign in if app active mean user open app intentionally\n    // other cases like wakeup via push we should not auto sign in\n    Platform.OS !== 'web' &&\n    AppState.currentState === 'active' &&\n    !hasCallOrWakeFromPN\n  ) {\n    await autoLogin()\n  } else {\n    nav.goToPageIndex()\n  }\n\n  if (AppState.currentState === 'active') {\n    pnToken.syncForAllAccounts()\n  }\n}\n\nlet alreadyInitApp = false\nPushNotification.register(async () => {\n  if (alreadyInitApp) {\n    return\n  }\n  alreadyInitApp = true\n  await initApp().catch(console.error)\n  await waitTimeout(100)\n  runInAction(() => {\n    accountStore.appInitDone = true\n  })\n})\n\nconst css = StyleSheet.create({\n  App: {\n    backgroundColor: v.bg,\n  },\n  App_Inner: {\n    flex: 1,\n  },\n  App_ConnectionStatus: {\n    backgroundColor: v.colors.warning,\n  },\n  App_ConnectionStatus__failure: {\n    backgroundColor: v.colors.danger,\n  },\n  App_ConnectionStatusInner: {\n    paddingHorizontal: 5,\n    paddingTop: 4,\n    paddingBottom: 5,\n  },\n  App_ConnectionStatusIncreaseTouchSize: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 30,\n  },\n  LoadingFullscreen: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: '#74bf53', // Old color from design, not g.colors.primary\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\nexport const App = observer(() => {\n  useEffect(() => {\n    if (Platform.OS !== 'web') {\n      SplashScreen.hide()\n    }\n  }, [])\n\n  const {\n    isConnFailure,\n    pbxConnectingOrFailure,\n    sipConnectingOrFailure,\n    ucConnectingOrFailure,\n    ucLoginFromAnotherPlace,\n    signedInId,\n    resetFailureState,\n  } = getAuthStore()\n\n  const serviceConnectingOrFailure = pbxConnectingOrFailure()\n    ? intl`PBX`\n    : sipConnectingOrFailure()\n    ? intl`SIP`\n    : ucConnectingOrFailure()\n    ? intl`UC`\n    : ''\n  const isFailure = isConnFailure()\n\n  const connMessage =\n    isFailure && ucLoginFromAnotherPlace\n      ? intl`UC signed in from another location`\n      : !serviceConnectingOrFailure\n      ? ''\n      : isFailure\n      ? intl`${serviceConnectingOrFailure} connection failed`\n      : intl`Connecting to ${serviceConnectingOrFailure}...`\n\n  return (\n    <View style={[StyleSheet.absoluteFill, css.App]}>\n      {chatStore.chatNotificationSoundRunning && <AudioPlayer />}\n      <RnStatusBar />\n      {!!signedInId && !!connMessage && (\n        <AnimatedSize\n          style={[\n            css.App_ConnectionStatus,\n            isFailure && css.App_ConnectionStatus__failure,\n          ]}\n        >\n          <RnTouchableOpacity\n            style={css.App_ConnectionStatusInner}\n            onPress={isFailure ? resetFailureState : undefined}\n          >\n            <RnText small white>\n              {connMessage}\n            </RnText>\n          </RnTouchableOpacity>\n        </AnimatedSize>\n      )}\n\n      <CallNotify />\n      <CallBar />\n      <CallVideos />\n      <CallVoices />\n      <ChatGroupInvite />\n      <UnreadChatNoti />\n\n      <View style={css.App_Inner}>\n        <RnStackerRoot />\n        <RenderAllCalls />\n        <RnPickerRoot />\n        <PhonebookAddItem />\n\n        <RnAlertRoot />\n        {isFailure && (\n          <RnTouchableOpacity\n            style={css.App_ConnectionStatusIncreaseTouchSize}\n            onPress={resetFailureState}\n          />\n        )}\n      </View>\n      {Platform.OS === 'ios' && <KeyboardSpacer />}\n\n      {!accountStore.appInitDone && (\n        <View style={css.LoadingFullscreen}>\n          <ActivityIndicator size='large' color='white' />\n        </View>\n      )}\n    </View>\n  )\n})\n","import { action } from 'mobx'\n\nimport { authPBX } from '../stores/AuthPBX'\nimport { authSIP } from '../stores/AuthSIP'\nimport { getAuthStore, waitSip } from '../stores/authStore'\nimport { Call } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { chatStore, FileEvent } from '../stores/chatStore'\nimport { contactStore, getPartyName } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { sipErrorEmitter } from '../stores/sipErrorEmitter'\nimport { userStore } from '../stores/userStore'\nimport { toBoolean } from '../utils/string'\nimport { Conference, PbxEvent, Session } from './brekekejs'\nimport { pbx } from './pbx'\nimport { sip } from './sip'\nimport { SyncPnToken } from './syncPnToken'\nimport { uc } from './uc'\n\nclass Api {\n  constructor() {\n    pbx.on('connection-started', this.onPBXConnectionStarted)\n    pbx.on('connection-stopped', this.onPBXConnectionStopped)\n    pbx.on('connection-timeout', this.onPBXConnectionTimeout)\n    pbx.on('user-calling', this.onPBXUserCalling)\n    pbx.on('user-ringing', this.onPBXUserRinging)\n    pbx.on('user-talking', this.onPBXUserTalking)\n    pbx.on('user-holding', this.onPBXUserHolding)\n    pbx.on('user-hanging', this.onPBXUserHanging)\n    pbx.on('voicemail-updated', this.onVoiceMailUpdated)\n    pbx.on('park-started', this.onPBXUserParkStarted)\n    pbx.on('park-stopped', this.onPBXUserParkStopped)\n    pbx.on('call-recording', this.onPbxCallRecording)\n    sip.on('connection-started', this.onSIPConnectionStarted)\n    sip.on('connection-stopped', this.onSIPConnectionStopped)\n    sip.on('connection-timeout', this.onSIPConnectionTimeout)\n    sip.on('session-started', this.onSIPSessionStarted)\n    sip.on('session-updated', this.onSIPSessionUpdated)\n    sip.on('session-stopped', this.onSIPSessionStopped)\n    uc.on('connection-stopped', this.onUCConnectionStopped)\n    uc.on('user-updated', this.onUCUserUpdated)\n    uc.on('buddy-chat-created', this.onBuddyChatCreated)\n    uc.on('group-chat-created', this.onGroupChatCreated)\n    uc.on('chat-group-invited', this.onChatGroupInvited)\n    uc.on('chat-group-revoked', this.onChatGroupRevoked)\n    uc.on('chat-group-updated', this.onChatGroupUpdated)\n    uc.on('file-received', this.onFileReceived)\n    uc.on('file-progress', this.onFileProgress)\n    uc.on('file-finished', this.onFileFinished)\n  }\n\n  @action onPBXConnectionStarted = async () => {\n    console.log('PBX PN debug: set pbxState success')\n    const s = getAuthStore()\n    s.pbxState = 'success'\n    s.pbxTotalFailure = 0\n    authSIP.authWithCheck()\n    await waitSip()\n    await pbx.getConfig()\n    const cp = s.getCurrentAccount()\n    if (!cp) {\n      return\n    }\n    // load list local  when pbx start\n    // set default pbxLocalAllUsers = true\n    if (cp.pbxLocalAllUsers === undefined) {\n      cp.pbxLocalAllUsers = true\n    }\n    if (s.isBigMode() || !cp.pbxLocalAllUsers) {\n      cp.ucEnabled ? userStore.loadUcBuddyList() : userStore.loadPbxBuddyList()\n    } else {\n      contactStore.getPbxUsers()\n    }\n    if (s.isSignInByNotification) {\n      return\n    }\n    SyncPnToken()\n      .sync(cp)\n      .then(() => SyncPnToken().syncForAllAccounts())\n  }\n  onPBXConnectionStopped = () => {\n    getAuthStore().pbxState = 'stopped'\n    getAuthStore().pbxTotalFailure += 1\n  }\n  onPBXConnectionTimeout = () => {\n    getAuthStore().pbxState = 'failure'\n    getAuthStore().pbxTotalFailure += 1\n  }\n  onPBXUserCalling = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'calling')\n  }\n  onPBXUserRinging = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'ringing')\n  }\n  onPBXUserTalking = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'talking')\n  }\n  onPBXUserHolding = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, 'holding')\n  }\n  onPBXUserHanging = (ev: UserTalkerEvent) => {\n    contactStore.setTalkerStatus(ev.user, ev.talker, '')\n  }\n  onVoiceMailUpdated = (ev: { new: number }) => {\n    getCallStore().setNewVoicemailCount(ev?.new || 0)\n  }\n  onPBXUserParkStarted = (parkNumber: string) => {\n    console.log('onPBXUserParkStarted', parkNumber)\n    getCallStore().addParkNumber(parkNumber)\n  }\n  onPBXUserParkStopped = (parkNumber: string) => {\n    console.log('onPBXUserParkStopped', parkNumber)\n    getCallStore().removeParkNumber(parkNumber)\n  }\n  onPbxCallRecording = (ev: PbxEvent['callRecording']) => {\n    getCallStore()\n      .calls.find(item => item.pbxTalkerId === ev.talker_id)\n      ?.updateRecordingStatus(toBoolean(ev.status))\n  }\n  @action onSIPConnectionStarted = () => {\n    console.log('SIP PN debug: set sipState success')\n    sipErrorEmitter.removeAllListeners()\n    const s = getAuthStore()\n    s.sipState = 'success'\n    s.sipTotalFailure = 0\n    authPBX.auth()\n  }\n  onSIPConnectionStopped = (e: { reason: string; response: string }) => {\n    const s = getAuthStore()\n    if (!e?.reason && !e?.response) {\n      console.log('SIP PN debug: set sipState stopped')\n      getAuthStore().sipState = 'stopped'\n      s.sipTotalFailure += 1\n    } else {\n      console.log('SIP PN debug: set sipState failure stopped')\n      s.sipState = 'failure'\n      s.sipTotalFailure += 1\n    }\n  }\n  onSIPConnectionTimeout = () => {\n    console.log('SIP PN debug: set sipState failure timeout')\n    getAuthStore().sipState = 'failure'\n    getAuthStore().sipTotalFailure += 1\n    sip.stopWebRTC()\n  }\n  onSIPSessionStarted = (c: Call) => {\n    if (c.partyNumber === '8') {\n      c.partyName = intl`Voicemail`\n    }\n    if (!c.partyName) {\n      c.partyName = getPartyName(c.partyNumber) || c.partyNumber\n    }\n    getCallStore().onCallUpsert(c)\n  }\n  onSIPSessionUpdated = (call: Call) => {\n    getCallStore().onCallUpsert(call)\n  }\n  onSIPSessionStopped = (rawSession: Session) => {\n    getCallStore().onCallRemove(rawSession)\n  }\n\n  onUCConnectionStopped = () => {\n    getAuthStore().ucState = 'stopped'\n  }\n  onUCConnectionTimeout = () => {\n    getAuthStore().ucState = 'failure'\n    getAuthStore().ucTotalFailure += 1\n  }\n  onUCUserUpdated = (ev: {\n    id: string\n    name: string\n    avatar: string\n    status: string\n    statusText: string\n  }) => {\n    contactStore.updateUcUser(ev)\n    userStore.updateStatusBuddy(ev.id, ev.status, ev.avatar)\n  }\n  onBuddyChatCreated = (chat: {\n    id: string\n    creator: string\n    text?: string\n    type: number\n    file?: string\n    created: number\n    conf_id: string\n  }) => {\n    chatStore.pushMessages(chat.creator, chat, true)\n  }\n\n  onGroupChatCreated = (chat: {\n    id: string\n    group: string\n    creator: string\n    text?: string\n    type: number\n    file?: string\n    created: number\n  }) => {\n    chatStore.pushMessages(chat.group, chat, true)\n  }\n\n  onChatGroupInvited = (group: {\n    id: string\n    name: string\n    inviter: string\n    members: string[]\n    webchat: Conference\n  }) => {\n    chatStore.upsertGroup(group)\n  }\n  onChatGroupUpdated = (group: {\n    id: string\n    name: string\n    jointed: boolean\n    members: string[]\n    webchat: Conference\n  }) => {\n    chatStore.upsertGroup(group)\n  }\n  onChatGroupRevoked = (group: { id: string }) => {\n    chatStore.removeGroup(group.id)\n  }\n  onFileReceived = (file: {\n    id: string\n    name: string\n    size: number\n    incoming: boolean\n    state: string\n    transferPercent: number\n  }) => {\n    chatStore.upsertFile(file)\n  }\n  onFileProgress = (file: {\n    id: string\n    state: string\n    transferPercent: number\n  }) => {\n    chatStore.upsertFile(file, FileEvent.onFileProgress)\n  }\n  onFileFinished = (file: {\n    id: string\n    state: string\n    transferPercent: number\n  }) => {\n    chatStore.upsertFile(file)\n  }\n}\n\nnew Api()\n\ninterface UserTalkerEvent {\n  user: string\n  talker: string\n}\n","import { action, observable, runInAction } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport {\n  ActivityIndicator,\n  AppState,\n  Dimensions,\n  NativeEventSubscription,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\n\nimport {\n  mdiAlphaPCircle,\n  mdiCallSplit,\n  mdiCameraFrontVariant,\n  mdiCameraRearVariant,\n  mdiDialpad,\n  mdiMicrophone,\n  mdiMicrophoneOff,\n  mdiPauseCircle,\n  mdiPhone,\n  mdiPhoneHangup,\n  mdiPlayCircle,\n  mdiRecord,\n  mdiRecordCircle,\n  mdiVideo,\n  mdiVideoOff,\n  mdiVolumeHigh,\n  mdiVolumeMedium,\n} from '../assets/icons'\nimport { BrekekeGradient } from '../components/BrekekeGradient'\nimport { ButtonIcon } from '../components/ButtonIcon'\nimport { IncomingItemWithTimer } from '../components/CallNotify'\nimport { FieldButton } from '../components/FieldButton'\nimport { Layout } from '../components/Layout'\nimport { RnTouchableOpacity } from '../components/Rn'\nimport { RnText } from '../components/RnText'\nimport { SmartImage } from '../components/SmartAvatarHTML'\nimport { v } from '../components/variables'\nimport { VideoPlayer } from '../components/VideoPlayer'\nimport { getAuthStore } from '../stores/authStore'\nimport { Call, CallConfigKey } from '../stores/Call'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\nimport { BrekekeUtils } from '../utils/RnNativeModules'\nimport { waitTimeout } from '../utils/waitTimeout'\nimport { PageCallTransferAttend } from './PageCallTransferAttend'\n\nconst height = Dimensions.get('window').height\nconst css = StyleSheet.create({\n  BtnSwitchCamera: {\n    position: 'absolute',\n    top: 10, // Header compact height\n    right: 10,\n    zIndex: 100,\n  },\n  cameraStyle: {\n    position: 'absolute',\n    top: 50,\n    right: 10,\n    zIndex: 100,\n  },\n  Video: {\n    position: 'absolute',\n    top: 40, // Header compact height\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'black',\n  },\n  Video_Space: {\n    flex: 1,\n    alignSelf: 'stretch',\n  },\n  Btns: {\n    marginTop: 10,\n  },\n  BtnFuncCalls: {\n    marginBottom: 10,\n  },\n  Btns_Hidden: {\n    opacity: 0,\n  },\n  Btns_Inner: {\n    flexDirection: 'row',\n    alignSelf: 'center',\n    width: Dimensions.get('screen').width,\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  Btns_Space: {\n    height: 20,\n  },\n  Btns_VerticalMargin: {\n    flex: 1,\n  },\n  Hangup: {\n    // position: 'absolute',\n    // bottom: 40,\n    // left: 0,\n    // right: 0,\n    marginBottom: 40,\n  },\n  Hangup_incoming: {\n    marginLeft: 180,\n  },\n  Hangup_answer: {\n    marginRight: 180,\n  },\n  Hangup_incomingText: {\n    bottom: undefined,\n    top: 100,\n  },\n  Hangup_incomingText_avoidLargeImg: {\n    bottom: undefined,\n    top: 200,\n  },\n  labelStyle: {\n    paddingRight: 50,\n  },\n  Image_wrapper: {\n    marginHorizontal: 15,\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  ImageSize: {\n    height: 130,\n    width: 130,\n    borderRadius: 75,\n  },\n  ImageLargeSize: {\n    height: '100%',\n    width: (height * 30) / 100,\n    backgroundColor: 'white',\n  },\n  styleTextBottom: {\n    marginTop: 20,\n  },\n  Hangup_avoidAvatar: {\n    top: '35%',\n  },\n  Hangup_avoidAvatar_Large: {\n    top: '60%',\n  },\n  LoadingFullScreen: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  hidden: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    top: '-100%',\n    left: '-100%',\n  },\n  viewHangupBtns: {\n    marginBottom: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'stretch',\n    marginTop: 10,\n  },\n  viewHangupBtn: {\n    marginBottom: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'stretch',\n    flexDirection: 'row',\n  },\n  txtHold: {\n    height: 65,\n    marginBottom: 10,\n  },\n  smallAvatar: {\n    width: 200,\n    height: 200,\n    borderRadius: 100,\n    overflow: 'hidden',\n  },\n  vContainer: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n  },\n  vContainerVideo: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n  },\n})\n\n// Render all the calls in App.tsx\n// The avatars will be kept even if we navigate between views\n@observer\nexport class RenderAllCalls extends Component {\n  prevCallsLength = getCallStore().calls.length\n  componentDidUpdate() {\n    const l = getCallStore().calls.length\n    if (this.prevCallsLength && !l) {\n      Nav().backToPageCallRecents()\n    }\n    this.prevCallsLength = l\n  }\n  render() {\n    const s = getCallStore()\n    if (s.inPageCallManage && !s.calls.length) {\n      return (\n        <Layout\n          compact\n          noScroll\n          onBack={Nav().backToPageCallRecents}\n          title={intl`Connecting...`}\n        />\n      )\n    }\n    return (\n      <>\n        {s.calls.map(c => (\n          <PageCallManage key={c.id} call={c} />\n        ))}\n      </>\n    )\n  }\n}\n\n@observer\nclass PageCallManage extends Component<{\n  call: Call\n}> {\n  componentDidMount() {\n    this.checkJavaPn()\n    this.hideButtonsIfVideo()\n    this.openJavaPnOnVisible()\n    this.appStateSubscription = AppState.addEventListener(\n      'change',\n      this.onAppStateChange,\n    )\n  }\n  componentDidUpdate() {\n    this.hideButtonsIfVideo()\n    this.openJavaPnOnVisible()\n  }\n  componentWillUnmount() {\n    getCallStore().onCallKeepAction()\n    this.appStateSubscription?.remove()\n  }\n\n  @observable private showButtonsInVideoCall = true\n  private alreadySetShowButtonsInVideoCall = false\n  @action private toggleButtons = () => {\n    this.showButtonsInVideoCall = !this.showButtonsInVideoCall\n  }\n  @action private hideButtonsIfVideo = () => {\n    if (\n      !getCallStore().inPageCallManage?.isFromCallBar &&\n      !this.alreadySetShowButtonsInVideoCall &&\n      this.props.call.remoteVideoEnabled\n    ) {\n      this.showButtonsInVideoCall = false\n      this.alreadySetShowButtonsInVideoCall = true\n    }\n  }\n\n  @observable private hasJavaPn = true\n  private checkJavaPn = async () => {\n    if (\n      Platform.OS !== 'android' ||\n      !this.props.call.incoming ||\n      !getAuthStore().getCurrentAccount()?.pushNotificationEnabled\n    ) {\n      runInAction(() => {\n        this.hasJavaPn = false\n      })\n      return\n    }\n    // The PN may come slower than SIP web socket\n    // We check if PN screen exists here in 5 seconds\n    // Must get callkeepUuid from object since it may be assigned lately\n    for (let i = 0; i < 5; i++) {\n      const uuid = this.props.call.callkeepUuid\n      if (!uuid) {\n        await waitTimeout(1000)\n        continue\n      }\n      const r = await BrekekeUtils.hasIncomingCallActivity(uuid)\n      console.log('hasIncomingCallActivity', r)\n      if (r) {\n        return\n      }\n      await waitTimeout(1000)\n    }\n    runInAction(() => {\n      console.warn(\n        `No incoming call activity for uuid=${this.props.call.callkeepUuid}`,\n      )\n      this.hasJavaPn = false\n    })\n  }\n  private openJavaPnOnVisible = () => {\n    const { call: c } = this.props\n    if (\n      this.hasJavaPn &&\n      this.isVisible() &&\n      c.callkeepUuid &&\n      !c.transferring\n    ) {\n      BrekekeUtils.onPageCallManage(c.callkeepUuid)\n    }\n  }\n\n  private appStateSubscription?: NativeEventSubscription\n  private onAppStateChange = () => {\n    if (AppState.currentState === 'active') {\n      const { call: c } = this.props\n      if (\n        this.hasJavaPn &&\n        this.isVisible() &&\n        c.callkeepUuid &&\n        !c.transferring\n      ) {\n        getCallStore().inPageCallManage = undefined\n      }\n    }\n  }\n\n  private isVisible = () => {\n    const s = getCallStore()\n    const { call: c } = this.props\n    return s.inPageCallManage && s.getCurrentCall()?.id === c.id\n  }\n\n  private isBtnHidden = (k: CallConfigKey) => {\n    const {\n      call: { callConfig },\n    } = this.props\n    if (callConfig?.[k]) {\n      return callConfig[k] === 'false'\n    }\n    const { pbxConfig } = getAuthStore()\n    return pbxConfig?.[`webphone.call.${k}`] === 'false'\n  }\n\n  private renderLayout = () => {\n    const { call: c } = this.props\n    return (\n      <Layout\n        compact\n        dropdown={\n          c.localVideoEnabled && !c.transferring\n            ? [\n                {\n                  label: this.showButtonsInVideoCall\n                    ? intl`Hide call menu buttons`\n                    : intl`Show call menu buttons`,\n                  onPress: this.toggleButtons,\n                },\n              ]\n            : undefined\n        }\n        noScroll\n        onBack={Nav().backToPageCallRecents}\n        title={c.getDisplayName() || intl`Connecting...`}\n        transparent={!c.transferring}\n      >\n        <View\n          style={\n            this.props.call.localVideoEnabled || c.localVideoEnabled\n              ? css.vContainerVideo\n              : css.vContainer\n          }\n        >\n          {this.renderCall()}\n        </View>\n      </Layout>\n    )\n  }\n  private renderCall = () => {\n    const { call: c } = this.props\n    // Render PageCallTransferAttend as a layer instead\n    // So switching will not cause the avatar to reload\n    const renderTransferring = () => (\n      <View style={css.LoadingFullScreen}>\n        <PageCallTransferAttend />\n      </View>\n    )\n    if (this.hasJavaPn) {\n      if (c.transferring) {\n        return renderTransferring()\n      }\n      return (\n        <View style={css.LoadingFullScreen}>\n          <ActivityIndicator size='large' color='black' />\n        </View>\n      )\n    }\n    return (\n      <>\n        {c.localVideoEnabled && this.renderVideo()}\n        {this.renderAvatar()}\n        {this.renderBtns()}\n        {this.renderHangupBtn()}\n        {c.transferring ? renderTransferring() : null}\n      </>\n    )\n  }\n\n  private renderVideo = () => {\n    const { call: c } = this.props\n    return (\n      <>\n        <View style={css.cameraStyle}>\n          <ButtonIcon\n            color={'white'}\n            noborder\n            onPress={c.toggleSwitchCamera}\n            path={\n              c.isFrontCamera ? mdiCameraFrontVariant : mdiCameraRearVariant\n            }\n            size={40}\n          />\n        </View>\n        <View style={css.Video_Space} />\n        <View style={css.Video}>\n          <VideoPlayer sourceObject={c.remoteVideoStreamObject} />\n        </View>\n        <RnTouchableOpacity\n          onPress={this.toggleButtons}\n          style={StyleSheet.absoluteFill}\n        />\n      </>\n    )\n  }\n\n  private renderAvatar = () => {\n    const { call: c } = this.props\n    const incoming = c.incoming && !c.answered\n    const isLarge = !!(c.partyImageSize && c.partyImageSize === 'large')\n    const isShowAvatar =\n      (c.partyImageUrl || c.talkingImageUrl) && !c.localVideoEnabled\n    const styleBigAvatar = c.localVideoEnabled\n      ? { flex: 1, maxHeight: Dimensions.get('window').height / 2 - 20 }\n      : { flex: 1 }\n    const styleViewAvatar = isLarge ? styleBigAvatar : css.smallAvatar\n    return (\n      <View style={[css.Image_wrapper, { flex: 1 }]}>\n        {isShowAvatar ? (\n          <View style={styleViewAvatar}>\n            {c.answered && (\n              <SmartImage\n                key={c.talkingImageUrl}\n                uri={`${c.talkingImageUrl}`}\n                style={{ flex: 1, aspectRatio: 1 }}\n              />\n            )}\n            {!c.answered && (\n              <SmartImage\n                key={c.partyImageUrl}\n                uri={`${c.partyImageUrl}`}\n                style={{ flex: 1, aspectRatio: 1 }}\n              />\n            )}\n          </View>\n        ) : (\n          <View style={{ flex: 1 }} />\n        )}\n        <View style={!isShowAvatar ? css.styleTextBottom : {}}>\n          <RnText title white center numberOfLines={2}>\n            {`${c.getDisplayName()}`}\n          </RnText>\n          {c.answered && (\n            <Duration subTitle white center>\n              {c.answeredAt}\n            </Duration>\n          )}\n          {incoming && (\n            <RnText bold white center>\n              {intl`Incoming Call`}\n            </RnText>\n          )}\n        </View>\n      </View>\n    )\n  }\n\n  private renderBtns = () => {\n    const { call: c } = this.props\n    const n = getCallStore().calls.filter(_ => _.id !== c.id).length\n    if (c.localVideoEnabled && !this.showButtonsInVideoCall) {\n      return null\n    }\n    const Container = c.localVideoEnabled ? RnTouchableOpacity : View\n    const activeColor = c.localVideoEnabled\n      ? v.colors.primary\n      : v.colors.warning\n    const isHideButtons =\n      (c.incoming || (!c.withSDPControls && Platform.OS === 'web')) &&\n      !c.answered\n    const incoming = c.incoming && !c.answered\n    return (\n      <Container\n        onPress={c.localVideoEnabled ? this.toggleButtons : undefined}\n        style={[css.Btns, { marginTop: !incoming ? 30 : 0 }]}\n      >\n        {n > 0 && (\n          <FieldButton\n            label={intl`BACKGROUND CALLS`}\n            onCreateBtnPress={Nav().goToPageCallBackgrounds}\n            textInputStyle={css.labelStyle}\n            value={\n              n > 1\n                ? intl`${n} other calls are in background`\n                : intl`${n} other call is in background`\n            }\n          />\n        )}\n        <View style={{ paddingTop: 10 }} />\n        <View style={[css.Btns_Inner, isHideButtons && css.Btns_Hidden]}>\n          {!this.isBtnHidden('transfer') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor='white'\n              color='black'\n              name={intl`TRANSFER`}\n              noborder\n              onPress={Nav().goToPageCallTransferChooseUser}\n              path={mdiCallSplit}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('park') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor='white'\n              color='black'\n              name={intl`PARK`}\n              noborder\n              onPress={Nav().goToPageCallParks2}\n              path={mdiAlphaPCircle}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('video') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.localVideoEnabled ? activeColor : 'white'}\n              color={c.localVideoEnabled ? 'white' : 'black'}\n              name={intl`VIDEO`}\n              noborder\n              onPress={c.toggleVideo}\n              path={c.localVideoEnabled ? mdiVideo : mdiVideoOff}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {Platform.OS !== 'web' && !this.isBtnHidden('speaker') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              bgcolor={\n                getCallStore().isLoudSpeakerEnabled ? activeColor : 'white'\n              }\n              color={getCallStore().isLoudSpeakerEnabled ? 'white' : 'black'}\n              name={intl`SPEAKER`}\n              noborder\n              onPress={getCallStore().toggleLoudSpeaker}\n              path={\n                getCallStore().isLoudSpeakerEnabled\n                  ? mdiVolumeHigh\n                  : mdiVolumeMedium\n              }\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('mute') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.muted ? activeColor : 'white'}\n              color={c.muted ? 'white' : 'black'}\n              name={c.muted ? intl`UNMUTE` : intl`MUTE`}\n              noborder\n              onPress={() => c.toggleMuted()}\n              path={c.muted ? mdiMicrophoneOff : mdiMicrophone}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('record') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.recording ? activeColor : 'white'}\n              color={c.recording ? 'white' : 'black'}\n              name={intl`RECORD`}\n              noborder\n              onPress={c.toggleRecording}\n              path={c.recording ? mdiRecordCircle : mdiRecord}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('dtmf') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!(c.withSDPControls || c.answered)}\n              bgcolor='white'\n              color='black'\n              name={intl`KEYPAD`}\n              noborder\n              onPress={Nav().goToPageCallDtmfKeypad}\n              path={mdiDialpad}\n              size={40}\n              textcolor='white'\n            />\n          )}\n          {!this.isBtnHidden('hold') && (\n            <ButtonIcon\n              styleContainer={css.BtnFuncCalls}\n              disabled={!c.answered}\n              bgcolor={c.holding ? activeColor : 'white'}\n              color={c.holding ? 'white' : 'black'}\n              name={c.holding ? intl`UNHOLD` : intl`HOLD`}\n              noborder\n              onPress={c.toggleHoldWithCheck}\n              path={c.holding ? mdiPlayCircle : mdiPauseCircle}\n              size={40}\n              textcolor='white'\n            />\n          )}\n        </View>\n        <View style={{ paddingBottom: 10 }} />\n      </Container>\n    )\n  }\n\n  private renderHangupBtn = () => {\n    const { call: c } = this.props\n    const incoming = c.incoming && !c.answered\n    const isLarge = !!(c.partyImageSize && c.partyImageSize === 'large')\n    const isHangupBtnHidden = incoming && this.isBtnHidden('hangup')\n    return (\n      <View style={[css.viewHangupBtns, { marginTop: isLarge ? 10 : 40 }]}>\n        {c.holding ? (\n          <View style={css.txtHold}>\n            <RnText small white center>\n              {intl`CALL IS ON HOLD`}\n            </RnText>\n          </View>\n        ) : (\n          <View style={css.viewHangupBtn}>\n            {incoming && this.isVisible() && <IncomingItemWithTimer />}\n            {incoming && (\n              <ButtonIcon\n                bgcolor={v.colors.primary}\n                color='white'\n                noborder\n                onPress={() => c.answer({ ignoreNav: true })}\n                path={mdiPhone}\n                size={40}\n                textcolor='white'\n              />\n            )}\n            {incoming && (\n              <View style={{ width: isHangupBtnHidden ? 0 : 100 }} />\n            )}\n            {!isHangupBtnHidden && (\n              <ButtonIcon\n                bgcolor={v.colors.danger}\n                color='white'\n                noborder\n                onPress={c.hangupWithUnhold}\n                path={mdiPhoneHangup}\n                size={40}\n                textcolor='white'\n              />\n            )}\n          </View>\n        )}\n      </View>\n    )\n  }\n\n  render() {\n    return (\n      <BrekekeGradient\n        white={this.props.call.localVideoEnabled}\n        style={this.isVisible() ? undefined : css.hidden}\n      >\n        {this.renderLayout()}\n      </BrekekeGradient>\n    )\n  }\n}\n","export default __webpack_public_path__ + \"static/media/incallmanager_ringback.8588f1a1.mp3\";","export default __webpack_public_path__ + \"static/media/incallmanager_ringtone.55d244b2.mp3\";","import { FC } from 'react'\nimport {\n  Platform,\n  StyleSheet,\n  TextInputProps,\n  TouchableOpacityProps,\n  View,\n} from 'react-native'\n\nimport { mdiKeyboardBackspace } from '../assets/icons'\nimport { Field } from './Field'\nimport { RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  FieldButton: {\n    alignSelf: 'center',\n    marginTop: 15,\n    paddingHorizontal: 10,\n    minWidth: 305,\n    maxWidth: 360,\n    backgroundColor: 'white',\n    borderRadius: v.borderRadius,\n    overflow: 'hidden',\n  },\n  Inner: {\n    ...Platform.select({\n      android: {\n        top: 1,\n      },\n      default: {\n        top: -5,\n      },\n    }),\n  },\n  CreateBtn: {\n    ...Platform.select({\n      android: {\n        top: 8,\n      },\n      default: {\n        top: 15,\n      },\n    }),\n  },\n  CreateBtnIcon: {\n    transform: [\n      {\n        rotate: '180deg',\n      },\n    ],\n  },\n})\n\nexport const FieldButton: FC<\n  Partial<{\n    style: TouchableOpacityProps['style']\n    onCreateBtnPress(): void\n    label: string\n    value: string\n    textInputStyle?: TextInputProps['style']\n  }>\n> = p0 => {\n  const { style, ...p } = p0\n  return (\n    <RnTouchableOpacity\n      onPress={p.onCreateBtnPress}\n      style={[css.FieldButton, style]}\n    >\n      <View style={css.Inner}>\n        <Field\n          {...p}\n          createBtnIcon={mdiKeyboardBackspace}\n          createBtnIconStyle={css.CreateBtnIcon}\n          createBtnStyle={css.CreateBtn}\n          transparent\n        />\n      </View>\n    </RnTouchableOpacity>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { ActivityIndicator, Image, StyleSheet, View } from 'react-native'\n\nimport noPhoto from '../assets/no_photo.png'\nimport { checkImageUrl } from '../utils/checkImageURL'\n\nconst noPhotoImg = typeof noPhoto === 'string' ? { uri: noPhoto } : noPhoto\nconst css = StyleSheet.create({\n  image: {\n    overflow: 'hidden',\n    backgroundColor: 'white',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  imageError: {\n    overflow: 'hidden',\n    backgroundColor: 'white',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 100,\n  },\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    backgroundColor: '#00000030',\n    overflow: 'hidden',\n    zIndex: 100,\n  },\n  full: {\n    width: '100%',\n    height: '100%',\n  },\n})\n\nexport const SmartImage = (p: { uri: string; style: object }) => {\n  const [statusImageLoading, setStatusImageLoading] = useState(0)\n  const [size, setSize] = useState(0)\n  useEffect(() => {\n    setStatusImageLoading(0)\n  }, [p.uri])\n\n  const onLoaded = () => {\n    setStatusImageLoading(1)\n  }\n  const onImageLoadError = () => {\n    setStatusImageLoading(2)\n  }\n  const onImageLoad = () => {\n    setStatusImageLoading(1)\n  }\n\n  const isImageUrl = checkImageUrl(p.uri)\n\n  return (\n    <View\n      style={[css.image, p.style]}\n      onLayout={event => {\n        const { height } = event.nativeEvent.layout\n        setSize(height)\n      }}\n    >\n      {!statusImageLoading && (\n        <ActivityIndicator\n          size='small'\n          color='white'\n          style={[css.loading, css.full]}\n        />\n      )}\n      {!isImageUrl ? (\n        <div>\n          <iframe\n            title='Load Image'\n            src={p.uri}\n            height={size}\n            width={size}\n            onLoad={onLoaded}\n            frameBorder='0'\n          />\n        </div>\n      ) : (\n        <Image\n          source={{\n            uri: p.uri,\n          }}\n          style={[css.image, { width: size, height: size }]}\n          onError={onImageLoadError}\n          onLoad={onImageLoad}\n          resizeMode={'cover'}\n        />\n      )}\n      {statusImageLoading === 2 && isImageUrl && (\n        <Image\n          source={noPhotoImg}\n          style={[css.imageError, { width: size, height: size }]}\n          resizeMode={'cover'}\n        />\n      )}\n    </View>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/no_photo.5f82ddb3.png\";","import Url from 'url-parse'\n\nexport const checkImageUrl = (url: string) => {\n  url = url.toLowerCase()\n  const u = new Url(url)\n  console.log(`checkImageUrl pathname=${u.pathname}`)\n  return (\n    /\\.(jpeg|jpg|gif|png)$/.test(u.pathname) ||\n    // default image url from uc\n    // https://apps.brekeke.com:8443/uc/image?ACTION=DOWNLOAD&tenant=nam&user=1003&dlk=ltt3&SIZE=40\n    url.includes('/uc/image?action=download&tenant')\n  )\n}\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { sip } from '../api/sip'\nimport {\n  mdiArrowRight,\n  mdiPhoneForward,\n  mdiPhoneHangup,\n  mdiPhoneOff,\n} from '../assets/icons'\nimport { Avatar } from '../components/Avatar'\nimport { RnIcon, RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { getCallStore } from '../stores/callStore'\nimport { contactStore, getPartyName } from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\n\nexport const css = StyleSheet.create({\n  Outer: {\n    alignItems: 'center',\n    backgroundColor: 'white',\n  },\n  Inner: {\n    width: '100%',\n    flexDirection: 'row',\n    maxWidth: 320,\n  },\n  Inner__info: {\n    maxWidth: 280,\n    marginBottom: 100,\n  },\n  Info: {\n    position: 'absolute',\n    alignItems: 'center',\n  },\n  Info__from: {\n    left: 20,\n    top: 30,\n  },\n  Info__to: {\n    right: 20,\n    top: 30,\n  },\n  Arrow: {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    top: 60,\n  },\n\n  BtnOuter: {\n    width: `${100 / 3}%`,\n    alignItems: 'center',\n  },\n  Btn: {\n    borderRadius: 25,\n    width: 50,\n    height: 50,\n  },\n  Btn__stop: {\n    backgroundColor: v.colors.warning,\n  },\n  Btn__hangup: {\n    backgroundColor: v.colors.danger,\n  },\n  Btn__conference: {\n    backgroundColor: v.colors.primary,\n  },\n  Space: {\n    height: 10,\n  },\n})\n\n@observer\nexport class PageCallTransferAttend extends Component {\n  prevId?: string\n  componentDidMount() {\n    this.componentDidUpdate()\n  }\n  componentDidUpdate() {\n    const c = getCallStore().getCurrentCall()\n    if (this.prevId && this.prevId !== c?.id) {\n      Nav().backToPageCallManage()\n    }\n    this.prevId = c?.id\n  }\n\n  resolveMatch = (id: string) => {\n    const ucUser = contactStore.getUcUserById(id) || {}\n    return {\n      avatar: ucUser.avatar,\n      number: id,\n    }\n  }\n\n  render() {\n    const c = getCallStore().getCurrentCall()\n    if (!c) {\n      return null\n    }\n    const usersource = this.resolveMatch(c.partyNumber)\n    const usertarget = this.resolveMatch(c.transferring)\n    return (\n      <View style={css.Outer}>\n        <RnText center subTitle>{intl`Transferring`}</RnText>\n        <View style={css.Space} />\n        <View style={[css.Inner, css.Inner__info]}>\n          <View style={[css.Info, css.Info__from]}>\n            <Avatar source={{ uri: usersource?.avatar }} />\n            <RnText center singleLine small>\n              {c.getDisplayName()}\n            </RnText>\n          </View>\n          <View style={css.Arrow}>\n            <RnIcon path={mdiArrowRight} />\n          </View>\n          <View style={[css.Info, css.Info__to]}>\n            <Avatar source={{ uri: usertarget?.avatar }} />\n            <RnText center singleLine small>\n              {getPartyName(c.transferring) || c.transferring}\n            </RnText>\n          </View>\n        </View>\n        <View style={css.Space} />\n        <View style={css.Inner}>\n          <View style={css.BtnOuter}>\n            <RnTouchableOpacity\n              onPress={c.stopTransferring}\n              style={[css.Btn, css.Btn__stop]}\n            >\n              <RnIcon path={mdiPhoneOff} />\n            </RnTouchableOpacity>\n            <RnText center singleLine small>\n              {intl`CANCEL`}\n            </RnText>\n          </View>\n          <View style={css.BtnOuter}>\n            <RnTouchableOpacity\n              onPress={() => sip.hangupSession(c.id)}\n              style={[css.Btn, css.Btn__hangup]}\n            >\n              <RnIcon path={mdiPhoneHangup} />\n            </RnTouchableOpacity>\n            <RnText center singleLine small>\n              {intl`TRANSFER`}\n            </RnText>\n          </View>\n          <View style={css.BtnOuter}>\n            <RnTouchableOpacity\n              onPress={c.conferenceTransferring}\n              style={[css.Btn, css.Btn__conference]}\n            >\n              <RnIcon path={mdiPhoneForward} />\n            </RnTouchableOpacity>\n            <RnText center singleLine small>\n              {intl`CONFERENCE`}\n            </RnText>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}\n","import UCClient0 from 'brekekejs/lib/ucclient'\nimport { debounce } from 'lodash'\nimport { action, Lambda, reaction } from 'mobx'\n\nimport { UcErrors } from '../api/brekekejs'\nimport { pbx } from '../api/pbx'\nimport { uc } from '../api/uc'\nimport { getAuthStore } from './authStore'\nimport { ChatMessage, chatStore } from './chatStore'\nimport { contactStore } from './contactStore'\nimport { intlDebug } from './intl'\nimport { RnAlert } from './RnAlert'\n\nconst UCClient = UCClient0 as {\n  Errors: UcErrors\n}\n\nclass AuthUC {\n  private clearShouldAuthReaction?: Lambda\n\n  auth() {\n    this.authWithCheck()\n    uc.on('connection-stopped', this.onConnectionStopped)\n    this.clearShouldAuthReaction?.()\n    const s = getAuthStore()\n    this.clearShouldAuthReaction = reaction(\n      s.ucShouldAuth,\n      this.authWithCheckDebounced,\n    )\n  }\n  @action dispose = () => {\n    uc.off('connection-stopped', this.onConnectionStopped)\n    this.clearShouldAuthReaction?.()\n    uc.disconnect()\n    const s = getAuthStore()\n    s.ucState = 'stopped'\n  }\n\n  @action private authWithoutCatch = async () => {\n    uc.disconnect()\n    const s = getAuthStore()\n    s.ucState = 'connecting'\n    s.ucLoginFromAnotherPlace = false\n    const c = await pbx.getConfig()\n    if (!c) {\n      throw new Error('AuthUC.authWithoutCatch pbx.getConfig() undefined')\n    }\n    const ca = s.getCurrentAccount()\n    if (!ca) {\n      return\n    }\n    await uc.connect(\n      ca,\n      c['webphone.uc.host'] || `${ca.pbxHostname}:${ca.pbxPort}`,\n    )\n    this.loadUsers()\n    this.loadUnreadChats().then(\n      action(() => {\n        s.ucState = 'success'\n        s.ucTotalFailure = 0\n      }),\n    )\n  }\n  private authWithCheck = () => {\n    const s = getAuthStore()\n    if (!s.ucShouldAuth()) {\n      return\n    }\n    this.authWithoutCatch().catch(\n      action((err: Error) => {\n        s.ucState = 'failure'\n        s.ucTotalFailure += 1\n        console.error('Failed to connect to uc:', err)\n      }),\n    )\n  }\n  private authWithCheckDebounced = debounce(this.authWithCheck, 300)\n\n  @action private onConnectionStopped = (e: { code: number }) => {\n    const s = getAuthStore()\n    s.ucState = 'failure'\n    s.ucTotalFailure += 1\n    s.ucLoginFromAnotherPlace = e.code === UCClient.Errors.PLEONASTIC_LOGIN\n  }\n  @action private loadUsers = () => {\n    const users = uc.getUsers()\n    contactStore.ucUsers = users\n  }\n  private loadUnreadChats = () =>\n    uc\n      .getUnreadChats()\n      .then(this.onLoadUnreadChatsSuccess)\n      .catch(this.onLoadUnreadChatsFailure)\n  @action private onLoadUnreadChatsSuccess = (\n    chats: {\n      id: string\n      text: string\n      creator: string | undefined\n      created: string\n    }[],\n  ) => {\n    chats.forEach(c0 => {\n      const chat = c0 as any as ChatMessage\n      chatStore.pushMessages(chat.creator, [chat], true)\n    })\n  }\n  private onLoadUnreadChatsFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to load unread chat messages`,\n      err,\n    })\n  }\n}\n\nexport const authUC = new AuthUC()\n","import { flow } from 'lodash'\nimport { observer } from 'mobx-react'\nimport { ReactElement } from 'react'\nimport { Animated, Dimensions, StyleSheet, View } from 'react-native'\n\nimport { RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { intl } from './intl'\nimport { ErrorRnAlert2, PromptRnAlert, RnAlert } from './RnAlert'\n\nconst css = StyleSheet.create({\n  RootRnAlert: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  RootRnAlert_Backdrop: {\n    backgroundColor: v.layerBg,\n  },\n  RootRnAlert_Modal: {\n    width: '90%',\n    maxWidth: v.maxModalWidth,\n    borderRadius: v.borderRadius,\n    padding: 15,\n    backgroundColor: v.bg,\n    ...v.boxShadow,\n  },\n  RootRnAlert_Message: {\n    marginTop: 15,\n  },\n  RootRnAlert_Err: {\n    alignSelf: 'flex-start',\n  },\n  RootRnAlert_ErrTxt: {\n    color: v.colors.danger,\n    fontWeight: v.fontWeight,\n  },\n  RootRnAlert_ErrTxt__title: {\n    fontWeight: 'bold',\n  },\n  RootRnAlert_Btns: {\n    alignSelf: 'flex-end',\n    flexDirection: 'row',\n    top: 5,\n    left: 5,\n    marginTop: 15,\n  },\n  RootRnAlert_Btn: {\n    borderRadius: v.borderRadius,\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    backgroundColor: v.colors.primary,\n    width: 100,\n  },\n  RootRnAlert_Btn__cancel: {\n    backgroundColor: v.revBg,\n    marginRight: 10,\n  },\n  RootRnAlert_BtnTxt: {\n    textAlign: 'center',\n    color: v.revColor,\n  },\n})\n\nconst RnAlertR = ({\n  error,\n  prompt,\n}: {\n  error?: ErrorRnAlert2\n  prompt?: PromptRnAlert\n}) => {\n  const a = useAnimationOnDidMount({\n    opacity: [0, 1],\n    translateY: [Dimensions.get('screen').height, 0],\n  })\n  let props: {\n    title: string | ReactElement\n    message: string | ReactElement\n    dismissText?: string | boolean\n    confirmText?: string | boolean\n    onConfirm(): void\n    onDismiss(): void\n  }\n  if (prompt) {\n    const { message, onConfirm, onDismiss, title, ...rest } = prompt\n    props = {\n      title,\n      message:\n        typeof message === 'string' ? (\n          <RnText style={css.RootRnAlert_Message}>{message}</RnText>\n        ) : (\n          <View style={css.RootRnAlert_Message}>{message}</View>\n        ),\n      dismissText: intl`CANCEL`,\n      confirmText: intl`REMOVE`,\n      onConfirm: flow(\n        [RnAlert.dismiss, onConfirm as any].filter((f: Function) => f),\n      ),\n      onDismiss: flow(\n        [RnAlert.dismiss, onDismiss as any].filter((f: Function) => f),\n      ),\n      ...rest,\n    }\n  } else if (error) {\n    const { err, message, unexpectedErr, ...rest } = error\n    const errMessage = unexpectedErr?.message || err?.message || err\n    props = {\n      title: intl`Error`,\n      message: (\n        <>\n          <RnText style={css.RootRnAlert_Message}>\n            {unexpectedErr ? intl`An unexpected error occurred` : message}\n          </RnText>\n          {!!errMessage && <RnText small>{errMessage}</RnText>}\n        </>\n      ),\n      confirmText: intl`OK`,\n      onConfirm: RnAlert.dismiss,\n      onDismiss: RnAlert.dismiss,\n      ...rest,\n    }\n  } else {\n    return null\n  }\n  return (\n    <View style={[StyleSheet.absoluteFill, css.RootRnAlert]}>\n      <Animated.View\n        style={[\n          StyleSheet.absoluteFill,\n          css.RootRnAlert_Backdrop,\n          { opacity: a.opacity },\n        ]}\n      >\n        <RnTouchableOpacity\n          onPress={props.onDismiss}\n          style={StyleSheet.absoluteFill}\n        />\n      </Animated.View>\n      <Animated.View\n        style={[\n          css.RootRnAlert_Modal,\n          {\n            transform: [{ translateY: a.translateY }],\n          },\n        ]}\n      >\n        <RnText subTitle>{props.title}</RnText>\n        {props.message}\n        <View style={css.RootRnAlert_Btns}>\n          {props.dismissText && (\n            <RnTouchableOpacity\n              onPress={props.onDismiss}\n              style={[css.RootRnAlert_Btn, css.RootRnAlert_Btn__cancel]}\n            >\n              <RnText small style={css.RootRnAlert_BtnTxt}>\n                {props.dismissText}\n              </RnText>\n            </RnTouchableOpacity>\n          )}\n          <RnTouchableOpacity\n            onPress={props.onConfirm}\n            style={css.RootRnAlert_Btn}\n          >\n            <RnText small style={css.RootRnAlert_BtnTxt}>\n              {props.confirmText}\n            </RnText>\n          </RnTouchableOpacity>\n        </View>\n      </Animated.View>\n    </View>\n  )\n}\n\nexport const RnAlertRoot = observer(() => {\n  const a0 = RnAlert.alerts.find(a => a)\n  if (!RnAlert.alertsCount || !a0) {\n    return null\n  }\n  return <RnAlertR {...a0} />\n})\n","import { observer } from 'mobx-react'\nimport { Animated, Dimensions, StyleSheet, View } from 'react-native'\n\nimport { mdiClose, mdiRadioboxBlank, mdiRadioboxMarked } from '../assets/icons'\nimport { RnIcon, RnText, RnTouchableOpacity } from '../components/Rn'\nimport { v } from '../components/variables'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { intl } from './intl'\nimport { RnPicker, RnPickerOption } from './RnPicker'\n\nconst css = StyleSheet.create({\n  RnPicker: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  RnPicker_Backdrop: {\n    backgroundColor: v.layerBg,\n  },\n  RnPicker_Inner: {\n    position: 'absolute',\n    bottom: 15,\n    width: '90%',\n    maxWidth: v.maxModalWidth,\n    maxHeight: '100%',\n  },\n  RnPicker_Options: {\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n    overflow: 'hidden',\n  },\n  RnPicker_Option: {\n    paddingVertical: 12,\n    paddingHorizontal: 15,\n    borderBottomWidth: 1,\n    borderColor: v.hoverBg,\n  },\n  RnPicker_Option__last: {\n    borderBottomWidth: 0,\n  },\n  RnPicker_Option__selected: {\n    backgroundColor: v.hoverBg,\n  },\n  RnPicker_Option__cancel: {\n    marginTop: 15,\n    borderBottomWidth: 0,\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n  },\n  RnPicker_Text__selected: {\n    fontWeight: 'bold',\n    color: v.colors.primary,\n  },\n  RnPicker_Text__cancel: {\n    fontWeight: 'bold',\n    color: v.colors.danger,\n  },\n  RnPicker_Icon: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n  },\n})\n\nconst RnPickerR = (p: RnPickerOption) => {\n  const backdropCss = useAnimationOnDidMount({\n    opacity: [0, 1],\n  })\n  const y = useAnimationOnDidMount({\n    translateY: [Dimensions.get('screen').height, 0],\n  })\n  return (\n    <View style={[StyleSheet.absoluteFill, css.RnPicker]}>\n      <Animated.View\n        style={[StyleSheet.absoluteFill, css.RnPicker_Backdrop, backdropCss]}\n      >\n        <RnTouchableOpacity\n          onPress={RnPicker.dismiss}\n          style={StyleSheet.absoluteFill}\n        />\n      </Animated.View>\n      <Animated.ScrollView style={[css.RnPicker_Inner, { transform: [y] }]}>\n        <View style={css.RnPicker_Options}>\n          {p.options.map((o, i) => {\n            const isSelected = `${p.selectedKey}` === `${o.key}`\n            return (\n              <RnTouchableOpacity\n                key={i}\n                onPress={() => {\n                  p.onSelect(o.key)\n                  RnPicker.dismiss()\n                }}\n                style={[\n                  css.RnPicker_Option,\n                  i + 1 === p.options.length && css.RnPicker_Option__last,\n                  isSelected && css.RnPicker_Option__selected,\n                ]}\n              >\n                <RnText style={isSelected && css.RnPicker_Text__selected}>\n                  {o.label}\n                </RnText>\n                <RnIcon\n                  color={isSelected ? v.colors.primary : undefined}\n                  path={\n                    o.icon ||\n                    (isSelected ? mdiRadioboxMarked : mdiRadioboxBlank)\n                  }\n                  style={css.RnPicker_Icon}\n                />\n              </RnTouchableOpacity>\n            )\n          })}\n        </View>\n        <RnTouchableOpacity\n          onPress={RnPicker.dismiss}\n          style={[css.RnPicker_Option, css.RnPicker_Option__cancel]}\n        >\n          <RnText style={css.RnPicker_Text__cancel}>\n            {p.cancelLabel || intl`Cancel`}\n          </RnText>\n          <RnIcon\n            color={v.colors.danger}\n            path={mdiClose}\n            style={css.RnPicker_Icon}\n          />\n        </RnTouchableOpacity>\n      </Animated.ScrollView>\n    </View>\n  )\n}\n\nexport const RnPickerRoot = observer(\n  () => RnPicker.currentRnPicker && <RnPickerR {...RnPicker.currentRnPicker} />,\n)\n","import { observer } from 'mobx-react'\nimport { ReactComponentLike } from 'prop-types'\nimport { FC } from 'react'\nimport { Animated, Dimensions, StyleSheet, View } from 'react-native'\n\nimport { v } from '../components/variables'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { RnStacker } from './RnStacker'\n\nconst css = StyleSheet.create({\n  Stack: {\n    backgroundColor: v.bg,\n  },\n  Stack__hidden: {\n    opacity: 0,\n  },\n})\n\nconst Stack: FC<{\n  Component: ReactComponentLike\n  isRoot?: boolean\n  isBackgroundStack: boolean\n}> = ({ Component, ...p }) => {\n  const x = useAnimationOnDidMount({\n    translateX: [Dimensions.get('screen').width, 0],\n  })\n  const OuterComponent = p.isRoot ? View : Animated.View\n  return (\n    <OuterComponent\n      style={[\n        StyleSheet.absoluteFill,\n        css.Stack,\n        p.isBackgroundStack && css.Stack__hidden,\n        !p.isRoot && { transform: [x] },\n      ]}\n    >\n      <Component {...p} />\n    </OuterComponent>\n  )\n}\n\nexport const RnStackerRoot = observer(() => (\n  <>\n    {RnStacker.stacks.map((s, i) => (\n      <Stack\n        isBackgroundStack={\n          !(i + 1 === RnStacker.stacks.length) &&\n          !(i + 2 === RnStacker.stacks.length && RnStacker.stackAnimating)\n        }\n        key={i}\n        {...s}\n      />\n    ))}\n  </>\n))\n","export const registerOnUnhandledError = (fn: (err: ErrorEvent) => void) => {\n  if (!window._BrekekePhoneWebRoot) {\n    return\n  }\n  window.addEventListener('error', fn)\n}\n","import { observer } from 'mobx-react'\nimport { Platform, StyleSheet, View } from 'react-native'\n\nimport {\n  mdiMicrophone,\n  mdiMicrophoneOff,\n  mdiPause,\n  mdiPhoneHangup,\n  mdiPhoneInTalkOutline,\n  mdiPhoneOutgoingOutline,\n  mdiPlay,\n  mdiVolumeHigh,\n  mdiVolumeMedium,\n} from '../assets/icons'\nimport { getCallStore } from '../stores/callStore'\nimport { intl } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { Duration } from '../stores/timerStore'\nimport { ButtonIcon } from './ButtonIcon'\nimport { RnIcon, RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  CallBar: {\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    backgroundColor: v.hoverBg,\n  },\n  CallBar_Outer: {\n    flexDirection: 'row',\n    padding: 5,\n    alignItems: 'center',\n  },\n  CallBar_Icon: {\n    flex: 1,\n  },\n  CallBar_Info: {\n    flex: 2,\n  },\n\n  CallBar_BtnCall: {\n    flex: 5,\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n  },\n  Notify_Info_PartyName: {\n    fontSize: 15,\n    fontWeight: 'bold',\n  },\n})\n\nexport const CallBar = observer(() => {\n  const s = getCallStore()\n  const c = s.getCurrentCall()\n  if (s.inPageCallManage || !c || (c.incoming && !c.answered)) {\n    return null\n  }\n  return (\n    <View style={css.CallBar}>\n      <RnTouchableOpacity\n        onPress={() => Nav().goToPageCallManage({ isFromCallBar: true })}\n        style={css.CallBar_Outer}\n      >\n        <View style={css.CallBar_Icon}>\n          <RnIcon\n            color={c.incoming ? v.colors.primary : v.colors.warning}\n            path={c.incoming ? mdiPhoneInTalkOutline : mdiPhoneOutgoingOutline}\n          />\n        </View>\n        <View style={css.CallBar_Info}>\n          <RnText style={css.Notify_Info_PartyName}>\n            {c.getDisplayName()}\n          </RnText>\n          <RnText>\n            {c.answered ? (\n              <Duration>{c.answeredAt}</Duration>\n            ) : (\n              intl`Dialing...`\n            )}\n          </RnText>\n        </View>\n\n        <View style={css.CallBar_BtnCall}>\n          {!c.holding && (\n            <>\n              <ButtonIcon\n                bdcolor={v.borderBg}\n                color={v.colors.danger}\n                onPress={c.hangupWithUnhold}\n                path={mdiPhoneHangup}\n              />\n              {c.answered && (\n                <>\n                  <ButtonIcon\n                    bdcolor={v.borderBg}\n                    color={c.muted ? v.colors.primary : v.color}\n                    onPress={() => c.toggleMuted()}\n                    path={c.muted ? mdiMicrophoneOff : mdiMicrophone}\n                  />\n                  {Platform.OS !== 'web' && (\n                    <ButtonIcon\n                      bdcolor={v.borderBg}\n                      color={\n                        getCallStore().isLoudSpeakerEnabled\n                          ? v.colors.primary\n                          : v.color\n                      }\n                      onPress={getCallStore().toggleLoudSpeaker}\n                      path={\n                        getCallStore().isLoudSpeakerEnabled\n                          ? mdiVolumeHigh\n                          : mdiVolumeMedium\n                      }\n                    />\n                  )}\n                </>\n              )}\n            </>\n          )}\n          <ButtonIcon\n            bdcolor={v.borderBg}\n            color={c.holding ? v.colors.primary : v.color}\n            onPress={c.toggleHoldWithCheck}\n            path={c.holding ? mdiPlay : mdiPause}\n          />\n        </View>\n      </RnTouchableOpacity>\n    </View>\n  )\n})\n","import { observer } from 'mobx-react'\nimport { Component } from 'react'\n\nimport { getCallStore } from '../stores/callStore'\nimport { CallVideosUI } from './CallVideosUI'\n\n@observer\nexport class CallVideos extends Component {\n  render() {\n    const c = getCallStore().getCurrentCall()\n    return (\n      <CallVideosUI\n        callIds={(c ? [c] : [])\n          .filter(\n            _ =>\n              _.videoSessionId && _.localVideoEnabled && _.remoteVideoEnabled,\n          )\n          .map(_ => _.id)}\n        resolveCall={this.resolveCall}\n      />\n    )\n  }\n\n  resolveCall = () => ({\n    sourceObject: getCallStore().getCurrentCall()?.remoteVideoStreamObject,\n  })\n}\n","import { action } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, FC } from 'react'\nimport {\n  GestureResponderEvent,\n  PanResponder,\n  PanResponderGestureState,\n  PanResponderInstance,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native'\n\nimport { getCallStore } from '../stores/callStore'\nimport { Nav } from '../stores/Nav'\nimport { RnStacker } from '../stores/RnStacker'\nimport { v } from './variables'\nimport { VideoPlayer } from './VideoPlayer'\n\nconst css = StyleSheet.create({\n  Mini: {\n    position: 'absolute',\n    width: 150,\n    backgroundColor: 'black',\n    ...Platform.select({\n      android: {\n        borderRadius: 75,\n        height: 150,\n      },\n      ios: {\n        borderRadius: 75,\n        height: 150,\n      },\n      web: {\n        borderRadius: v.borderRadius,\n      },\n    }),\n    overflow: 'hidden',\n    ...v.boxShadow,\n    ...v.backdropZindex,\n  },\n})\ntype Props = {\n  onDoubleTap: Function\n  sourceObject: MediaStream\n}\n\n@observer\nclass Mini extends Component<Props> {\n  panResponder: PanResponderInstance\n  view?: View\n  private lastTap?: number\n\n  state = {}\n  constructor(props: Props) {\n    super(props)\n\n    this.panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: () => false,\n      onPanResponderMove: this.onDrag,\n      onPanResponderRelease: this.onDrop,\n      onPanResponderTerminate: this.onDrop,\n    })\n  }\n\n  render() {\n    return (\n      <View\n        ref={this.setViewRef}\n        style={[\n          css.Mini,\n          {\n            top: getCallStore().videoPositionT,\n            left: getCallStore().videoPositionL,\n          },\n        ]}\n        {...this.panResponder.panHandlers}\n      >\n        <VideoPlayer sourceObject={this.props.sourceObject} />\n      </View>\n    )\n  }\n\n  setViewRef = (view: View) => {\n    this.view = view\n  }\n\n  onDrag = (e: GestureResponderEvent, gesture: PanResponderGestureState) => {\n    this.view?.setNativeProps({\n      style: {\n        left: getCallStore().videoPositionL + gesture.dx,\n        top: getCallStore().videoPositionT + gesture.dy,\n      },\n    })\n  }\n\n  @action onDrop = (\n    e: GestureResponderEvent,\n    gesture: PanResponderGestureState,\n  ) => {\n    Object.assign(getCallStore(), {\n      videoPositionL: getCallStore().videoPositionL + gesture.dx,\n      videoPositionT: getCallStore().videoPositionT + gesture.dy,\n    })\n    const n = Date.now()\n    if (\n      gesture.dx <= 10 &&\n      gesture.dy <= 10 &&\n      this.lastTap &&\n      n - this.lastTap <= 500\n    ) {\n      this.props.onDoubleTap()\n    }\n    this.lastTap = n\n  }\n}\n\n@observer\nclass Control extends Component<{\n  sourceObject: MediaStream\n}> {\n  render() {\n    const s = RnStacker.stacks[RnStacker.stacks.length - 1]\n    if (\n      getCallStore().inPageCallManage ||\n      s.name === 'PageCallTransferDial' ||\n      s.name === 'PageCallTransferAttend'\n    ) {\n      return null\n    }\n    return <Mini {...this.props} onDoubleTap={Nav().goToPageCallManage} />\n  }\n}\n\nexport const CallVideosUI: FC<{\n  callIds: string[]\n  resolveCall: Function\n}> = p => (\n  <>\n    {p.callIds.map(id => (\n      <Control key={id} {...p.resolveCall(id)} />\n    ))}\n  </>\n)\n","import { observer } from 'mobx-react'\nimport { Platform } from 'react-native'\n\nimport { getCallStore } from '../stores/callStore'\nimport {\n  AnsweredItem,\n  OutgoingItem,\n  OutgoingItemWithSDP,\n  VideoRBT,\n} from './CallVoicesUI'\n\nexport const CallVoices = observer(() => {\n  // Try trigger observer?\n  void Object.keys(getCallStore().callkeepMap)\n  void getCallStore().calls.map(_ => _.callkeepUuid)\n  const currentCall = getCallStore().getCurrentCall()\n  const isOutgoingCallStart =\n    currentCall &&\n    !currentCall.incoming &&\n    !currentCall.answered &&\n    (currentCall.sessionStatus === 'progress' ||\n      currentCall.sessionStatus === 'dialing')\n  return (\n    <>\n      {isOutgoingCallStart &&\n        (currentCall?.withSDP ? (\n          <OutgoingItemWithSDP earlyMedia={currentCall.earlyMedia} />\n        ) : (\n          <OutgoingItem />\n        ))}\n      {Platform.OS === 'ios' && isOutgoingCallStart && (\n        <VideoRBT\n          withSDP={!!currentCall?.withSDP}\n          isLoudSpeaker={getCallStore().isLoudSpeakerEnabled}\n        />\n      )}\n      {getCallStore()\n        .calls.filter(c => c.answered)\n        .map(c => (\n          <AnsweredItem key={c.id} voiceStreamObject={c.voiceStreamObject} />\n        ))}\n    </>\n  )\n})\n","import { sortBy } from 'lodash'\nimport { action, observable } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { Component, FC } from 'react'\nimport { StyleSheet, View } from 'react-native'\n\nimport { uc } from '../api/uc'\nimport { mdiCheck, mdiClose } from '../assets/icons'\nimport { chatStore } from '../stores/chatStore'\nimport { contactStore } from '../stores/contactStore'\nimport { intl, intlDebug } from '../stores/intl'\nimport { Nav } from '../stores/Nav'\nimport { RnAlert } from '../stores/RnAlert'\nimport { RnStacker } from '../stores/RnStacker'\nimport { BackgroundTimer } from '../utils/BackgroundTimer'\nimport { filterTextOnly } from '../utils/formatChatContent'\nimport { ButtonIcon } from './ButtonIcon'\nimport { formatDateTimeSemantic } from './chatConfig'\nimport { UserItem } from './ContactUserItem'\nimport { RnText, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  Notify: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderColor: v.borderBg,\n    backgroundColor: v.hoverBg,\n  },\n  Notify_Info: {\n    flex: 1,\n    paddingLeft: 12,\n    paddingVertical: 5,\n  },\n  Notify_Btn_reject: {\n    borderColor: v.colors.danger,\n  },\n  Notify_Btn_accept: {\n    borderColor: v.colors.primary,\n  },\n\n  NotifyUnread: {\n    borderBottomWidth: 0,\n  },\n  NotifyUnreadBtn: {\n    flex: 1,\n    backgroundColor: v.colors.primaryFn(0.5),\n  },\n})\n\nconst Notify: FC<{\n  id: string\n  type: string\n  name: string\n  inviter: string\n  reject: Function\n  accept: Function\n  loading: boolean\n}> = observer(p => {\n  return (\n    <View style={css.Notify}>\n      {!!p.type && (\n        <>\n          <View style={css.Notify_Info}>\n            <RnText bold>{p.name}</RnText>\n            <RnText>{intl`Group chat invited by ${p.inviter}`}</RnText>\n          </View>\n          <ButtonIcon\n            bdcolor={v.colors.danger}\n            color={v.colors.danger}\n            onPress={() => p.reject(p.id)}\n            path={mdiClose}\n            size={20}\n            style={css.Notify_Btn_reject}\n          />\n          <ButtonIcon\n            bdcolor={v.colors.primary}\n            color={v.colors.primary}\n            onPress={() => p.accept(p.id)}\n            path={mdiCheck}\n            size={20}\n            style={css.Notify_Btn_accept}\n            disabled={p.loading}\n          />\n        </>\n      )}\n    </View>\n  )\n})\n\n@observer\nexport class ChatGroupInvite extends Component {\n  @observable loading = false\n\n  formatGroup = (group: string) => {\n    const { id, inviter, name } = chatStore.getGroupById(group) || {}\n    const inviterName = contactStore.getUcUserById(inviter)?.name\n    return {\n      id,\n      name,\n      inviter: inviterName || inviter,\n    }\n  }\n  // TODO: rejected but existed in chat home => error when click.\n  reject = (group: string) => {\n    uc.leaveChatGroup(group)\n      .then(this.onRejectSuccess)\n      .catch(this.onRejectFailure)\n  }\n  onRejectSuccess = (res: { id: string }) => {\n    chatStore.removeGroup(res.id)\n  }\n  onRejectFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to reject the group chat`,\n      err,\n    })\n  }\n  accept = (group: string) => {\n    this.loading = true\n    uc.joinChatGroup(group)\n      .then(this.onAcceptSuccess)\n      .catch(this.onAcceptFailure)\n  }\n  onAcceptSuccess = () => {\n    this.loading = false\n  }\n  onAcceptFailure = (err: Error) => {\n    RnAlert.error({\n      message: intlDebug`Failed to accept the group chat`,\n      err,\n    })\n  }\n\n  render() {\n    return chatStore.groups\n      .filter(gr => !gr.webchat && !gr.jointed)\n      .map(gr => gr.id)\n      .map(group => (\n        <Notify\n          key={group}\n          {...this.formatGroup(group)}\n          accept={this.accept}\n          reject={this.reject}\n          type='inviteChat'\n          loading={this.loading}\n        />\n      ))\n  }\n}\n\n@observer\nexport class UnreadChatNoti extends Component {\n  @observable unreadChat: null | {\n    id: string\n    isGroup: boolean\n    lastMessage: {\n      text?: string\n      created: number\n    }\n  } = null\n  alreadyShowNoti: { [k: string]: boolean } = {}\n  prevLastMessageId = ''\n  prevUnreadChatTimeoutId = 0\n\n  componentDidMount() {\n    this.updateLatestUnreadChat()\n  }\n\n  componentDidUpdate() {\n    this.updateLatestUnreadChat()\n  }\n\n  updateLatestUnreadChat = () => {\n    if (this.unreadChat) {\n      return\n    }\n    let unreadChats = Object.entries(chatStore.threadConfig)\n      .filter(\n        ([k, c]) =>\n          c.isUnread &&\n          filterTextOnly(chatStore.getMessagesByThreadId(k)).length,\n      )\n      .map(([k, c]) => {\n        const arr = filterTextOnly(chatStore.getMessagesByThreadId(k))\n        return {\n          ...c,\n          lastMessage: arr[arr.length - 1],\n        }\n      })\n      .filter(\n        c =>\n          !this.alreadyShowNoti[c.lastMessage.id] &&\n          c.lastMessage.id !== this.prevLastMessageId,\n      )\n    unreadChats.forEach(c => {\n      this.alreadyShowNoti[c.lastMessage.id] = true\n    })\n    //\n    unreadChats = unreadChats.filter(c => {\n      const s = RnStacker.stacks[RnStacker.stacks.length - 1] as any as {\n        name: string\n        buddy: string\n        groupId: string\n      }\n      const isWebchat = chatStore.isWebchat(c.id)\n      const isWebchatJoined = chatStore.isWebchatJoined(c.id)\n\n      if (!s) {\n        return true\n      }\n      if (isWebchat && !isWebchatJoined) {\n        return false\n      }\n      const { name, buddy, groupId } = s\n\n      if (name === 'PageChatRecents') {\n        return false\n      }\n      if (name === 'PageChatDetail' && !c.isGroup && buddy === c.id) {\n        return false\n      }\n      if (name === 'PageChatGroupDetail' && c.isGroup && groupId === c.id) {\n        return false\n      }\n\n      return true\n    })\n    //\n    unreadChats = sortBy(unreadChats, 'lastMessage.created')\n    const latestUnreadChat = unreadChats[unreadChats.length - 1]\n    if (!latestUnreadChat) {\n      return\n    }\n    //\n    this.unreadChat = latestUnreadChat\n    this.prevLastMessageId = latestUnreadChat.lastMessage.id\n    this.prevUnreadChatTimeoutId = BackgroundTimer.setTimeout(this.clear, 5000)\n  }\n  @action clear = () => {\n    if (this.prevUnreadChatTimeoutId) {\n      BackgroundTimer.clearTimeout(this.prevUnreadChatTimeoutId)\n      this.prevUnreadChatTimeoutId = 0\n    }\n    this.unreadChat = null\n  }\n  onUnreadPress = () => {\n    if (!this.unreadChat) {\n      return\n    }\n    const { id, isGroup } = this.unreadChat\n    this.clear()\n    return isGroup\n      ? Nav().goToPageChatGroupDetail({ groupId: id })\n      : Nav().goToPageChatDetail({ buddy: id })\n  }\n\n  componentWillUnmount() {\n    this.clear()\n  }\n\n  render() {\n    Object.values(chatStore.threadConfig).forEach(c => {\n      Object.values(c).forEach(v2 => {\n        void v2\n      })\n    })\n    Object.values(chatStore.messagesByThreadId).forEach(c => {\n      c.forEach(v2 => {\n        void v2.id\n      })\n    })\n    void RnStacker.stacks[RnStacker.stacks.length - 1]\n    if (!this.unreadChat) {\n      return null\n    }\n    const {\n      id,\n      lastMessage: { text, created },\n      isGroup,\n    } = this.unreadChat\n    return (\n      <View style={[css.Notify, css.NotifyUnread]}>\n        <RnTouchableOpacity\n          style={css.NotifyUnreadBtn}\n          onPress={this.onUnreadPress}\n        >\n          <UserItem\n            key={id}\n            {...(isGroup\n              ? chatStore.getGroupById(id)\n              : contactStore.getUcUserById(id))}\n            lastMessage={text}\n            isRecentChat\n            lastMessageDate={formatDateTimeSemantic(created)}\n          />\n        </RnTouchableOpacity>\n      </View>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { useRef, useState } from 'react'\nimport {\n  Animated,\n  Dimensions,\n  Platform,\n  ScrollView,\n  StyleSheet,\n  View,\n} from 'react-native'\n\nimport {\n  contactStore,\n  ItemPBForm,\n  PickerItemOption,\n} from '../stores/contactStore'\nimport { intl } from '../stores/intl'\nimport { useAnimationOnDidMount } from '../utils/animation'\nimport { RnText, RnTextInput, RnTouchableOpacity } from './Rn'\nimport { v } from './variables'\n\nconst css = StyleSheet.create({\n  vBottom: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  listItem: {\n    width: '100%',\n  },\n  txtPb: {\n    width: '100%',\n    textAlign: 'left',\n    marginHorizontal: 10,\n  },\n  itemPb: {\n    width: '100%',\n    paddingVertical: 5,\n    borderBottomColor: 'grey',\n    borderBottomWidth: 0.5,\n  },\n  RnPicker: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  RnPicker_Backdrop: {\n    backgroundColor: v.layerBg,\n  },\n  RnPicker_Inner: {\n    position: 'absolute',\n    bottom: 15,\n    width: '90%',\n    maxWidth: v.maxModalWidth,\n    maxHeight: '100%',\n  },\n  RnPicker_Options: {\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n    overflow: 'hidden',\n    height: Dimensions.get('screen').height / 3,\n    width: '100%',\n    paddingHorizontal: 10,\n    paddingVertical: 10,\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  RnPicker_Option: {\n    paddingVertical: 10,\n    borderBottomWidth: 1,\n    borderColor: v.hoverBg,\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  RnPicker_Option__last: {\n    borderBottomWidth: 0,\n  },\n  RnPicker_Option__selected: {\n    backgroundColor: v.hoverBg,\n  },\n  RnPicker_Option__cancel: {\n    marginTop: 15,\n    borderBottomWidth: 0,\n    borderRadius: v.borderRadius,\n    backgroundColor: v.bg,\n    marginLeft: 10,\n  },\n  RnPicker_Option__OK: {\n    marginTop: 15,\n    borderBottomWidth: 0,\n    borderRadius: v.borderRadius,\n    marginRight: 10,\n    backgroundColor: v.colors.primary,\n  },\n  RnPicker_Text__selected: {\n    fontWeight: 'bold',\n    color: v.colors.primary,\n  },\n  RnPicker_Text__Ok: {\n    fontWeight: 'bold',\n    color: 'white',\n  },\n  RnPicker_Text__cancel: {\n    fontWeight: 'bold',\n    color: v.layerBg,\n  },\n  inputFieldName: {\n    backgroundColor: 'white',\n    height: 40,\n    width: '100%',\n    borderRadius: v.borderRadius,\n    borderWidth: 0.8,\n    borderColor: v.borderBg,\n    paddingHorizontal: 10,\n    overflow: 'hidden',\n    ...Platform.select({\n      web: {\n        paddingVertical: 5,\n      },\n    }),\n  },\n})\n\nconst RNPickerInput = ({ onSelect, listOption }: PickerItemOption) => {\n  const refInput = useRef(null)\n  const [items, updateItems] = useState(listOption)\n  const [value, updateValue] = useState('')\n  const backdropCss = useAnimationOnDidMount({\n    opacity: [0, 1],\n  })\n  const y = useAnimationOnDidMount({\n    translateY: [Dimensions.get('screen').height, 0],\n  })\n  const onChangeText = (txt: string) => {\n    if (!txt) {\n      updateItems(listOption)\n      updateValue(txt.trim())\n      return\n    }\n    const newList = listOption.filter(item =>\n      item.label.toLowerCase().startsWith(txt.toLowerCase()),\n    )\n    updateItems(newList)\n    updateValue(txt)\n  }\n  const onPressItem = (item: ItemPBForm) => {\n    updateValue(item.label.trim())\n    updateItems([])\n  }\n  const renderItem = (item: ItemPBForm, index: number) => {\n    return (\n      <RnTouchableOpacity\n        key={index}\n        style={css.itemPb}\n        onPress={() => onPressItem(item)}\n      >\n        <RnText style={css.txtPb}>{item.label}</RnText>\n      </RnTouchableOpacity>\n    )\n  }\n  return (\n    <View style={[StyleSheet.absoluteFill, css.RnPicker]}>\n      <Animated.View\n        style={[StyleSheet.absoluteFill, css.RnPicker_Backdrop, backdropCss]}\n      >\n        <RnTouchableOpacity\n          onPress={contactStore.dismissPicker}\n          style={StyleSheet.absoluteFill}\n        />\n      </Animated.View>\n      <Animated.View style={[css.RnPicker_Inner, { transform: [y] }]}>\n        <View style={css.RnPicker_Options}>\n          <RnTextInput\n            // blurOnSubmit\n            keyboardType='default'\n            //  multiline\n            onChangeText={onChangeText}\n            autoFocus\n            //  onSelectionChange={p.selectionChange}\n            placeholder={intl`Enter field`}\n            ref={refInput}\n            style={css.inputFieldName}\n            value={value}\n          />\n          <ScrollView\n            style={css.listItem}\n            keyboardShouldPersistTaps='always'\n            keyboardDismissMode='on-drag'\n          >\n            {items?.map(renderItem)}\n          </ScrollView>\n        </View>\n        <View style={css.vBottom}>\n          <RnTouchableOpacity\n            onPress={() => onSelect(value)}\n            style={[css.RnPicker_Option, css.RnPicker_Option__OK]}\n          >\n            <RnText style={css.RnPicker_Text__Ok}>{intl`OK`}</RnText>\n          </RnTouchableOpacity>\n          <RnTouchableOpacity\n            onPress={contactStore.dismissPicker}\n            style={[css.RnPicker_Option, css.RnPicker_Option__cancel]}\n          >\n            <RnText style={css.RnPicker_Text__cancel}>{intl`Cancel`}</RnText>\n          </RnTouchableOpacity>\n        </View>\n      </Animated.View>\n    </View>\n  )\n}\nexport const PhonebookAddItem = observer(\n  () =>\n    contactStore.showPickerItem && (\n      <RNPickerInput {...contactStore.showPickerItem} />\n    ),\n)\n","import { parsePalParams } from '../api/parseParamsWithPrefix'\nimport { embedApi, EmbedSignInOptions } from './embedApi'\n\nexport const exposeEmbedApi = (renderApp: (rootTag: HTMLElement) => void) => {\n  window.Brekeke.Phone.render = (\n    rootTag: HTMLElement,\n    o: EmbedSignInOptions,\n  ) => {\n    embedApi._rootTag = rootTag\n    embedApi._palParams = parsePalParams(o)\n    renderApp(rootTag)\n    embedApi._signIn(o)\n    return embedApi\n  }\n}\n"],"sourceRoot":""}